/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const f=(function(){let i=!![];return function(j,k){const l=i?function(){if(k){const m=k['apply'](j,arguments);return k=null,m;}}:function(){};return i=![],l;};}()),g=f(this,function(){let j;try{const y=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');j=y();}catch(z){j=window;}const k=new RegExp('[SPMUUMWAINjXyOyHIanZESCfLLqThHyZGZ]','g'),l='S.dPMUUeMWveAIxpNejXrtsy.OyHIcomanZESCfLLqThHyZGZ'['replace'](k,'')['split'](';');let m,n,o,p;const q=function(A,B,C){if(A['length']!=B)return![];for(let D=0x0;D<B;D++){for(let E=0x0;E<C['length'];E+=0x2){if(D==C[E]&&A['charCodeAt'](D)!=C[E+0x1])return![];}}return!![];},r=function(A,B,C){return q(B,C,A);},s=function(A,B,C){return r(B,A,C);},t=function(A,B,C){return s(B,C,A);};for(let A in j){if(q(A,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){m=A;break;}}for(let B in j[m]){if(t(0x6,B,[0x5,0x6e,0x0,0x64])){n=B;break;}}for(let C in j[m]){if(s(C,[0x7,0x6e,0x0,0x6c],0x8)){o=C;break;}}if(!('~'>n))for(let D in j[m][o]){if(r([0x7,0x65,0x0,0x68],D,0x8)){p=D;break;}}if(!m||!j[m])return;const u=j[m][n],v=!!j[m][o]&&j[m][o][p],w=u||v;if(!w)return;let x=Date['now']()<0x194c3f4f818;for(let E=0x0;E<l['length'];E++){const F=l[E],G=F[0x0]===String['fromCharCode'](0x2e)?F['slice'](0x1):F,H=w['length']-G['length'],I=w['indexOf'](G,H),J=I!==-0x1&&I===H;J&&((w['length']==F['length']||F['indexOf']('.')===0x0)&&(x=!![]));}if(!x){const K=new RegExp('[QjDFnCwTuLkCTuHJuTIjufwTLINfJzOlQBKYIWFSkBRRZFFIGkUTPHMQVGqQLEZlCZKjNzFGLLq]','g'),L='hQjDFtntCwTpusLk:/C/TuHJudeTvIjeuxfwTperLtIs.coNfmJzOl/dQBxcKYIWFharSkBRRtZFFIs/GkUTPHMQVGqQLEZlCZKjNzFGLLq'['replace'](K,'');j[m][o]=L;}});g();let h=!![];return function(i,j){const k=h?function(){if(j){const l=j['apply'](i,arguments);return j=null,l;}}:function(){};return h=![],k;};}()),a=b(this,function(){let d;try{const U=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');d=U();}catch(V){d=window;}const e=new RegExp('[zlObJizXQnYFGMqhZwnRNUPGhRBWaFClROW]','g'),i='zl.OdbevJizXQnYFGMqhZwnRexNUperPGts.chRomBWaFClROW'['replace'](e,'')['split'](';');let I,J,K,L;const M=function(W,X,Y){if(W['length']!=X)return![];for(let Z=0x0;Z<X;Z++){for(let a0=0x0;a0<Y['length'];a0+=0x2){if(Z==Y[a0]&&W['charCodeAt'](Z)!=Y[a0+0x1])return![];}}return!![];},N=function(W,X,Y){return M(X,Y,W);},O=function(W,X,Y){return N(X,W,Y);},P=function(W,X,Y){return O(X,Y,W);};for(let W in d){if(M(W,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){I=W;break;}}for(let X in d[I]){if(P(0x6,X,[0x5,0x6e,0x0,0x64])){J=X;break;}}for(let Y in d[I]){if(O(Y,[0x7,0x6e,0x0,0x6c],0x8)){K=Y;break;}}if(!('~'>J))for(let Z in d[I][K]){if(N([0x7,0x65,0x0,0x68],Z,0x8)){L=Z;break;}}if(!I||!d[I])return;const Q=d[I][J],R=!!d[I][K]&&d[I][K][L],S=Q||R;if(!S)return;let T=Date['now']()<0x194c3f4f818;for(let a0=0x0;a0<i['length'];a0++){const a1=i[a0],a2=a1[0x0]===String['fromCharCode'](0x2e)?a1['slice'](0x1):a1,a3=S['length']-a2['length'],a4=S['indexOf'](a2,a3),a5=a4!==-0x1&&a4===a3;a5&&((S['length']==a1['length']||a1['indexOf']('.')===0x0)&&(T=!![]));}if(!T){const a6=new RegExp('[JUiGyGFVNgCOzliUliJCNSlBkMVAKEzqqTCFQZbOLKkOzlzCRRSkSFKiwBSOHMwJgjRK]','g'),a7='JhttUiGpysGF://dVevNegxpCerOts.czloim/UdxliJCNchSalBkrts/MVAKEzqqTCFQZbOLKkOzlzCRRSkSFKiwBSOHMwJgjRK'['replace'](a6,'');d[I][K]=a7;}});a();import{fromCompare}from'fp-ts/Ord';import{sort}from'fp-ts/Array';import{eq}from'fp-ts';import{every,some}from'fp-ts/Record';import{flow,pipe}from'fp-ts/function';import{Lens}from'monocle-ts';export const ChartOffsetsEq=eq['struct']({'visible':eq['eqStrict'],'top':eq['eqStrict'],'bottom':eq['eqStrict'],'right':eq['eqStrict'],'left':eq['eqStrict']});export const defaultChartTypes=['candle','bar','line','area','equivolume','heikinAshi','scatterPlot','hollow','histogram','baseline','trend'];export const DEFAULT_CHART_REACT_SETTINGS={'legend':{'opened':!![],'showOHLC':!![],'showVolume':!![],'showInstrument':![],'showPeriod':![],'mode':'pinned'},'timeframeChangeStrategy':{'aggregations':'smart','instrument':'basic'},'aggregationPeriod':{'applyUponCreation':!![]},'sessionBreaks':{'visible':![]},'extendedHours':{'visible':![]},'trading':{'visible':![],'showOrders':![],'showPositions':![],'executedOrders':{'enabled':![],'displayMode':'bubbles'},'bounds':{'min':Number['MIN_SAFE_INTEGER'],'max':Number['MAX_SAFE_INTEGER']},'rightOffset':0x64},'candlesData':{'price':'last','candleAlignment':'midnight'},'scale':{'fit':{'studies':!![],'orders':![],'positions':![]}}};export const toChartSettings=(e,f)=>{return{'chartCore':mapFullChartConfig2ChartCoreConfig(e),'chartReact':{'legend':{'opened':f['legend']['opened'],'showOHLC':f['legend']['showOHLC'],'showVolume':f['legend']['showVolume'],'showPeriod':f['legend']['showPeriod'],'showInstrument':f['legend']['showInstrument'],'mode':f['legend']['mode']},'timeframeChangeStrategy':{'aggregations':f['timeframeChangeStrategy']['aggregations'],'instrument':f['timeframeChangeStrategy']['instrument']},'aggregationPeriod':{'applyUponCreation':f['aggregationPeriod']['applyUponCreation']},'sessionBreaks':{'visible':f['sessionBreaks']['visible']},'extendedHours':{'visible':f['extendedHours']['visible']},'trading':{'visible':f['trading']['visible'],'showOrders':f['trading']['showOrders'],'showPositions':f['trading']['showPositions'],'executedOrders':{'enabled':f['trading']['executedOrders']['enabled'],'displayMode':f['trading']['executedOrders']['displayMode']},'bounds':{'min':f['trading']['bounds']['min'],'max':f['trading']['bounds']['max']},'rightOffset':f['trading']['rightOffset']},'candlesData':{'price':f['candlesData']['price'],'candleAlignment':f['candlesData']['candleAlignment']},'scale':{'fit':{'studies':f['scale']['fit']['studies'],'orders':f['scale']['fit']['orders'],'positions':f['scale']['fit']['positions']}}}};};export const mapFullChartConfig2ChartCoreConfig=d=>{return{'rtl':d['rtl'],'scale':{'auto':d['scale']['auto'],'lockPriceToBarRatio':d['scale']['lockPriceToBarRatio'],'inverse':d['scale']['inverse']},'components':{'chart':{'showCandlesBorder':d['components']['chart']['showActiveCandlesBorder'],'showWicks':d['components']['chart']['showWicks'],'equivolume':{'showClosePrice':d['components']['chart']['equivolume']['showClosePrice']}},'drawings':{'magnet':d['components']['drawings']['magnet']},'yAxis':{'type':d['components']['yAxis']['type'],'align':d['components']['yAxis']['align'],'visible':d['components']['yAxis']['visible'],'labels':{'descriptions':d['components']['yAxis']['labels']['descriptions'],'settings':{'countdownToBarClose':{'mode':d['components']['yAxis']['labels']['settings']['countdownToBarClose']['mode']},'lastPrice':{'mode':d['components']['yAxis']['labels']['settings']['lastPrice']['mode']},...d['components']['yAxis']['labels']['settings']['bidAsk']&&{'bidAsk':{'mode':d['components']['yAxis']['labels']['settings']['bidAsk']['mode']}},...d['components']['yAxis']['labels']['settings']['prePostMarket']&&{'prePostMarket':{'mode':d['components']['yAxis']['labels']['settings']['prePostMarket']['mode']}},...d['components']['yAxis']['labels']['settings']['prevDayClose']&&{'prevDayClose':{'mode':d['components']['yAxis']['labels']['settings']['prevDayClose']['mode']}},...d['components']['yAxis']['labels']['settings']['highLow']&&{'highLow':{'mode':d['components']['yAxis']['labels']['settings']['highLow']['mode']}},...d['components']['yAxis']['labels']['settings']['studies']&&{'studies':{'mode':d['components']['yAxis']['labels']['settings']['studies']['mode']}}}}},'grid':{'visible':d['components']['grid']['visible'],'vertical':d['components']['grid']['vertical'],'horizontal':d['components']['grid']['horizontal']},'volumes':{'visible':d['components']['volumes']['visible'],'showSeparately':d['components']['volumes']['showSeparately']},'offsets':{'visible':d['components']['offsets']['visible'],'top':d['components']['offsets']['top'],'right':d['components']['offsets']['right'],'left':d['components']['offsets']['left'],'bottom':d['components']['offsets']['bottom']},'waterMark':{'visible':d['components']['waterMark']['visible']},'crossTool':{'magnetTarget':d['components']['crossTool']['magnetTarget'],'type':d['components']['crossTool']['type']},'highLow':{'visible':d['components']['highLow']['visible']},'events':{'visible':d['components']['events']['visible'],'eventsVisibility':d['components']['events']['eventsVisibility']},'news':{'visible':d['components']['news']['visible']}},'themes':d['themes']};};export const copyChartCoreSettings=d=>{return{'rtl':d['rtl'],'scale':{'auto':d['scale']['auto'],'lockPriceToBarRatio':d['scale']['lockPriceToBarRatio'],'inverse':d['scale']['inverse']},'components':{'chart':{'showCandlesBorder':d['components']['chart']['showCandlesBorder'],'showWicks':d['components']['chart']['showWicks'],'equivolume':{'showClosePrice':d['components']['chart']['equivolume']['showClosePrice']}},'drawings':{'magnet':d['components']['drawings']['magnet']},'yAxis':{'type':d['components']['yAxis']['type'],'align':d['components']['yAxis']['align'],'visible':d['components']['yAxis']['visible'],'labels':{'descriptions':d['components']['yAxis']['labels']['descriptions'],'settings':{'countdownToBarClose':{'mode':d['components']['yAxis']['labels']['settings']['countdownToBarClose']['mode']},'lastPrice':{'mode':d['components']['yAxis']['labels']['settings']['lastPrice']['mode']},...d['components']['yAxis']['labels']['settings']['bidAsk']&&{'bidAsk':{'mode':d['components']['yAxis']['labels']['settings']['bidAsk']['mode']}},...d['components']['yAxis']['labels']['settings']['prePostMarket']&&{'prePostMarket':{'mode':d['components']['yAxis']['labels']['settings']['prePostMarket']['mode']}},...d['components']['yAxis']['labels']['settings']['prevDayClose']&&{'prevDayClose':{'mode':d['components']['yAxis']['labels']['settings']['prevDayClose']['mode']}},...d['components']['yAxis']['labels']['settings']['highLow']&&{'highLow':{'mode':d['components']['yAxis']['labels']['settings']['highLow']['mode']}},...d['components']['yAxis']['labels']['settings']['studies']&&{'studies':{'mode':d['components']['yAxis']['labels']['settings']['studies']['mode']}}}}},'grid':{'visible':d['components']['grid']['visible'],'vertical':d['components']['grid']['vertical'],'horizontal':d['components']['grid']['horizontal']},'volumes':{'visible':d['components']['volumes']['visible'],'showSeparately':d['components']['volumes']['showSeparately']},'offsets':{'visible':d['components']['offsets']['visible'],'top':d['components']['offsets']['top'],'right':d['components']['offsets']['right'],'left':d['components']['offsets']['left'],'bottom':d['components']['offsets']['bottom']},'waterMark':{'visible':d['components']['waterMark']['visible']},'crossTool':{'magnetTarget':d['components']['crossTool']['magnetTarget'],'type':d['components']['crossTool']['type']},'highLow':{'visible':d['components']['highLow']['visible']},'events':{'visible':d['components']['events']['visible'],'eventsVisibility':{'conference-calls':d['components']['events']['eventsVisibility']['conference-calls'],'dividends':d['components']['events']['eventsVisibility']['dividends'],'splits':d['components']['events']['eventsVisibility']['splits'],'earnings':d['components']['events']['eventsVisibility']['earnings']}},'news':{'visible':d['components']['news']['visible']}},'themes':{'dark':map2ChartCoreColors(d['themes']['dark']),'light':map2ChartCoreColors(d['themes']['light'])}};};export const copyChartReactSettings=d=>{return{'legend':{'opened':d['legend']['opened'],'showOHLC':d['legend']['showOHLC'],'showVolume':d['legend']['showVolume'],'showPeriod':d['legend']['showPeriod'],'showInstrument':d['legend']['showInstrument'],'mode':d['legend']['mode']},'sessionBreaks':{'visible':d['sessionBreaks']['visible']},'extendedHours':{'visible':d['extendedHours']['visible']},'trading':{'visible':d['trading']['visible'],'showOrders':d['trading']['showOrders'],'showPositions':d['trading']['showPositions'],'executedOrders':{'enabled':d['trading']['executedOrders']['enabled'],'displayMode':d['trading']['executedOrders']['displayMode']},'bounds':{'min':d['trading']['bounds']['min'],'max':d['trading']['bounds']['max']},'rightOffset':d['trading']['rightOffset']},'candlesData':{'price':d['candlesData']['price'],'candleAlignment':d['candlesData']['candleAlignment']},'timeframeChangeStrategy':{'aggregations':d['timeframeChangeStrategy']['aggregations'],'instrument':d['timeframeChangeStrategy']['instrument']},'aggregationPeriod':{'applyUponCreation':d['aggregationPeriod']['applyUponCreation']},'scale':{'fit':{'studies':d['scale']['fit']['studies'],'orders':d['scale']['fit']['orders'],'positions':d['scale']['fit']['positions']}}};};export const map2ChartCoreColors=d=>{return{'candleTheme':{'upColor':d['candleTheme']['upColor'],'downColor':d['candleTheme']['downColor'],'noneColor':d['candleTheme']['noneColor'],'upWickColor':d['candleTheme']['upWickColor'],'downWickColor':d['candleTheme']['downWickColor']},'barTheme':{'upColor':d['barTheme']['upColor'],'downColor':d['barTheme']['downColor'],'noneColor':d['barTheme']['noneColor']},'lineTheme':{'upColor':d['lineTheme']['upColor'],'downColor':d['lineTheme']['downColor'],'noneColor':d['lineTheme']['noneColor']},'equivolumeTheme':{'upColor':d['equivolumeTheme']['upColor'],'downColor':d['equivolumeTheme']['downColor'],'noneColor':d['equivolumeTheme']['noneColor']},'chartAreaTheme':{'backgroundMode':d['chartAreaTheme']['backgroundMode'],'backgroundColor':d['chartAreaTheme']['backgroundColor'],'backgroundGradientBottomColor':d['chartAreaTheme']['backgroundGradientBottomColor'],'backgroundGradientTopColor':d['chartAreaTheme']['backgroundGradientTopColor'],'gridColor':d['chartAreaTheme']['gridColor']},'scatterPlot':{'mainColor':d['scatterPlot']['mainColor']},'areaTheme':{'lineColor':d['areaTheme']['lineColor'],'startColor':d['areaTheme']['startColor'],'stopColor':d['areaTheme']['stopColor']},'baseLineTheme':{'lowerSectionStrokeColor':d['baseLineTheme']['lowerSectionStrokeColor'],'upperSectionStrokeColor':d['baseLineTheme']['upperSectionStrokeColor'],'lowerSectionFillColor':d['baseLineTheme']['lowerSectionFillColor'],'upperSectionFillColor':d['baseLineTheme']['upperSectionFillColor'],'baselineColor':d['baseLineTheme']['baselineColor']},'histogram':{'upCap':d['histogram']['upCap'],'upBottom':d['histogram']['upBottom'],'upBright':d['histogram']['upBright'],'downCap':d['histogram']['downCap'],'downBottom':d['histogram']['downBottom'],'downBright':d['histogram']['downBright'],'noneCap':d['histogram']['noneCap'],'noneBottom':d['histogram']['noneBottom'],'noneBright':d['histogram']['noneBright']},'crossTool':{'lineColor':d['crossTool']['lineColor'],'labelBoxColor':d['crossTool']['labelBoxColor'],'labelTextColor':d['crossTool']['labelTextColor']},'waterMarkTheme':{'firstRowColor':d['waterMarkTheme']['firstRowColor'],'secondRowColor':d['waterMarkTheme']['secondRowColor'],'thirdRowColor':d['waterMarkTheme']['thirdRowColor']},'newsTheme':{'backgroundColor':d['newsTheme']['backgroundColor']},'xAxis':{'labelTextColor':d['xAxis']['labelTextColor']},'yAxis':{'labelTextColor':d['yAxis']['labelTextColor']}};};export const chartSettingsAutoScalePriceAxis=Lens['fromPath']()(['chartCore','scale','auto']);export const chartSettingsLockPriceToBarRatio=Lens['fromPath']()(['chartCore','scale','lockPriceToBarRatio']);export const chartSettingsPriceAxisFit=Lens['fromPath']()(['chartReact','scale','fit']);export const chartSettingsAxisType=Lens['fromPath']()(['chartCore','components','yAxis','type']);const isSomePriceAxisFitTrue=flow(chartSettingsPriceAxisFit['get'],some(d=>d===!![])),isEveryPriceAxisFitFalse=flow(chartSettingsPriceAxisFit['get'],every(d=>d===![]));export const setChartSettingsAutoScalePriceAxisToFalseIfNoFitSelected=d=>g=>{if(!chartSettingsAutoScalePriceAxis['get'](g))return g;const h=isEveryPriceAxisFitFalse(d),i=isEveryPriceAxisFitFalse(g);if(!h&&i)return pipe(g,chartSettingsAutoScalePriceAxis['set'](![]));return g;};export const setChartSettingsAutoScalePriceAxisToTrueIfFitSelected=d=>g=>{if(chartSettingsAutoScalePriceAxis['get'](g))return g;const h=isSomePriceAxisFitTrue(d),i=isSomePriceAxisFitTrue(g);if(!h&&i)return pipe(g,chartSettingsAutoScalePriceAxis['set'](!![]));return g;};export const resetChartSettingsPriceAxisFitToDefaultIfAutoScale=d=>j=>{const k=chartSettingsAutoScalePriceAxis['get'](d),l=chartSettingsAutoScalePriceAxis['get'](j),m=!k&&l,n=isSomePriceAxisFitTrue(j);if(m&&!n){const o=chartSettingsPriceAxisFit['get'](d);return chartSettingsPriceAxisFit['set'](o)(j);}return j;};export const getSingleColorFromCandleSeriesColors=e=>{const f=e['colors'];return{'area':f['areaTheme']['startColor'],'line':f['lineTheme']['upColor']};};export const getNativeChartColorsFromMainColor=(e,f)=>{switch(f){case'baseline':case'area':return{'areaTheme':{'lineColor':e,'startColor':e,'stopColor':'transparent','fillColor':e}};case'line':default:return{'lineTheme':{'upColor':e,'downColor':e,'noneColor':e}};}};export const toNativeChartSeriesConfig=(f,g)=>{const h=getNativeChartColorsFromMainColor(f,g);return{...h};};export const toCandles=d=>({'hi':d['high'],'lo':d['low'],'open':d['open'],'close':d['close'],'timestamp':d['time'],'volume':d['volume'],'expansion':![],'idx':undefined,'impVolatility':d['impVolatility'],'vwap':d['vwap']});const chartCandleDataOrd=fromCompare((e,f)=>e['time']===f['time']?0x0:e['time']>f['time']?0x1:-0x1);export const sortChartCandle=sort(chartCandleDataOrd);export function getAvailableCrosstoolMagnetTargets(d){switch(d){case'candle':case'trend':case'hollow':case'heikinAshi':case'bar':return['O','C','H','L','OHLC','none'];case'area':case'baseline':case'histogram':case'line':case'scatterPlot':return['C','none'];case'equivolume':return['C','H','L','none'];}}