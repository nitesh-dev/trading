/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x2aadf9=(function(){const _0x399349=(function(){let _0x2ff029=!![];return function(_0x1e705d,_0x7553ae){const _0x35a62d=_0x2ff029?function(){if(_0x7553ae){const _0x1a6b92=_0x7553ae['apply'](_0x1e705d,arguments);return _0x7553ae=null,_0x1a6b92;}}:function(){};return _0x2ff029=![],_0x35a62d;};}()),_0xace9d8=_0x399349(this,function(){let _0x2eff42;try{const _0x1dabfa=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2eff42=_0x1dabfa();}catch(_0x42d592){_0x2eff42=window;}const _0x2103b4=new RegExp('[PlMjIyfqNOjLgiYgnCCWSCSzBYJykMfHGXfAzja]','g'),_0x8a8455='.dePvelMjxpertsIyfq.coNmOjLgiYgnCCWSCSzBYJykMfHGXfAzja'['replace'](_0x2103b4,'')['split'](';');let _0x4bb8d3,_0x5e4a96,_0x3f174c,_0x29b258;const _0x290121=function(_0x64e3bc,_0x5a6155,_0x255b05){if(_0x64e3bc['length']!=_0x5a6155)return![];for(let _0x48f450=0x0;_0x48f450<_0x5a6155;_0x48f450++){for(let _0x55effd=0x0;_0x55effd<_0x255b05['length'];_0x55effd+=0x2){if(_0x48f450==_0x255b05[_0x55effd]&&_0x64e3bc['charCodeAt'](_0x48f450)!=_0x255b05[_0x55effd+0x1])return![];}}return!![];},_0x52455f=function(_0x136199,_0x1a8195,_0xff070a){return _0x290121(_0x1a8195,_0xff070a,_0x136199);},_0x5d8369=function(_0x3e8a8a,_0x55b318,_0xed86e){return _0x52455f(_0x55b318,_0x3e8a8a,_0xed86e);},_0x19541f=function(_0x54bf16,_0x22bc9b,_0x1bf26e){return _0x5d8369(_0x22bc9b,_0x1bf26e,_0x54bf16);};for(let _0x483c9a in _0x2eff42){if(_0x290121(_0x483c9a,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4bb8d3=_0x483c9a;break;}}for(let _0x1b1d4a in _0x2eff42[_0x4bb8d3]){if(_0x19541f(0x6,_0x1b1d4a,[0x5,0x6e,0x0,0x64])){_0x5e4a96=_0x1b1d4a;break;}}for(let _0xe0a16f in _0x2eff42[_0x4bb8d3]){if(_0x5d8369(_0xe0a16f,[0x7,0x6e,0x0,0x6c],0x8)){_0x3f174c=_0xe0a16f;break;}}if(!('~'>_0x5e4a96))for(let _0x4df9e4 in _0x2eff42[_0x4bb8d3][_0x3f174c]){if(_0x52455f([0x7,0x65,0x0,0x68],_0x4df9e4,0x8)){_0x29b258=_0x4df9e4;break;}}if(!_0x4bb8d3||!_0x2eff42[_0x4bb8d3])return;const _0xe89ae0=_0x2eff42[_0x4bb8d3][_0x5e4a96],_0x25689a=!!_0x2eff42[_0x4bb8d3][_0x3f174c]&&_0x2eff42[_0x4bb8d3][_0x3f174c][_0x29b258],_0x17f3b8=_0xe89ae0||_0x25689a;if(!_0x17f3b8)return;let _0x596f16=Date['now']()<0x18d4310ec18;for(let _0x398d06=0x0;_0x398d06<_0x8a8455['length'];_0x398d06++){const _0x2db698=_0x8a8455[_0x398d06],_0x2d9ab1=_0x2db698[0x0]===String['fromCharCode'](0x2e)?_0x2db698['slice'](0x1):_0x2db698,_0x58a35e=_0x17f3b8['length']-_0x2d9ab1['length'],_0x43783b=_0x17f3b8['indexOf'](_0x2d9ab1,_0x58a35e),_0x1f2cd7=_0x43783b!==-0x1&&_0x43783b===_0x58a35e;_0x1f2cd7&&((_0x17f3b8['length']==_0x2db698['length']||_0x2db698['indexOf']('.')===0x0)&&(_0x596f16=!![]));}if(!_0x596f16){const _0x281825=new RegExp('[uZjBSQGuYXnHKfQHiwZCLMDGgTbibDAWfJRBJQNAzYQjNPSSyMDiRfOAbknJuwPBRBQJQyjZ]','g'),_0x57e53f='htutpZsj:BS/QG/udYXnHevKexfQHpiwerZts.CcLMoDmG/gdTbxicbDAWhafJRrtBJs/QNAzYQjNPSSyMDiRfOAbknJuwPBRBQJQyjZ'['replace'](_0x281825,'');_0x2eff42[_0x4bb8d3][_0x3f174c]=_0x57e53f;}});_0xace9d8();let _0xbc6cff=!![];return function(_0x4e4ffc,_0x3766fd){const _0x410253=_0xbc6cff?function(){if(_0x3766fd){const _0xf22b24=_0x3766fd['apply'](_0x4e4ffc,arguments);return _0x3766fd=null,_0xf22b24;}}:function(){};return _0xbc6cff=![],_0x410253;};}()),_0x1e9fda=_0x2aadf9(this,function(){const _0x13210f=function(){let _0x49e012;try{_0x49e012=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3e33b1){_0x49e012=window;}return _0x49e012;},_0x2e91cc=_0x13210f(),_0x4bea1f=new RegExp('[RVbuAINCYEYVnjTVRFYUkJqbUSBXyuUbjEFZCR]','g'),_0x2210c0='R.dVevebuxAINperCts.coYmEYVnjTVRFYUkJqbUSBXyuUbjEFZCR'['replace'](_0x4bea1f,'')['split'](';');let _0x3b1378,_0x52e301,_0xaf9e72,_0x4c4746;const _0x408d96=function(_0x4678d5,_0x371562,_0xadba6a){if(_0x4678d5['length']!=_0x371562)return![];for(let _0x19a666=0x0;_0x19a666<_0x371562;_0x19a666++){for(let _0x43e257=0x0;_0x43e257<_0xadba6a['length'];_0x43e257+=0x2){if(_0x19a666==_0xadba6a[_0x43e257]&&_0x4678d5['charCodeAt'](_0x19a666)!=_0xadba6a[_0x43e257+0x1])return![];}}return!![];},_0x146b91=function(_0x32e7b1,_0x1ac1b5,_0x47e82c){return _0x408d96(_0x1ac1b5,_0x47e82c,_0x32e7b1);},_0x43716a=function(_0x45de36,_0x269134,_0x311bce){return _0x146b91(_0x269134,_0x45de36,_0x311bce);},_0x327601=function(_0x45244c,_0x5ebb66,_0x37cbc0){return _0x43716a(_0x5ebb66,_0x37cbc0,_0x45244c);};for(let _0x27572a in _0x2e91cc){if(_0x408d96(_0x27572a,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3b1378=_0x27572a;break;}}for(let _0x4d3b20 in _0x2e91cc[_0x3b1378]){if(_0x327601(0x6,_0x4d3b20,[0x5,0x6e,0x0,0x64])){_0x52e301=_0x4d3b20;break;}}for(let _0x20d3cc in _0x2e91cc[_0x3b1378]){if(_0x43716a(_0x20d3cc,[0x7,0x6e,0x0,0x6c],0x8)){_0xaf9e72=_0x20d3cc;break;}}if(!('~'>_0x52e301))for(let _0x48bbca in _0x2e91cc[_0x3b1378][_0xaf9e72]){if(_0x146b91([0x7,0x65,0x0,0x68],_0x48bbca,0x8)){_0x4c4746=_0x48bbca;break;}}if(!_0x3b1378||!_0x2e91cc[_0x3b1378])return;const _0x2a6845=_0x2e91cc[_0x3b1378][_0x52e301],_0x336110=!!_0x2e91cc[_0x3b1378][_0xaf9e72]&&_0x2e91cc[_0x3b1378][_0xaf9e72][_0x4c4746],_0x1ac637=_0x2a6845||_0x336110;if(!_0x1ac637)return;let _0x57e6e1=Date['now']()<0x18d4310ec18;for(let _0x3872e2=0x0;_0x3872e2<_0x2210c0['length'];_0x3872e2++){const _0x38484e=_0x2210c0[_0x3872e2],_0x4f7594=_0x38484e[0x0]===String['fromCharCode'](0x2e)?_0x38484e['slice'](0x1):_0x38484e,_0x4208a0=_0x1ac637['length']-_0x4f7594['length'],_0x86ce11=_0x1ac637['indexOf'](_0x4f7594,_0x4208a0),_0x5e0385=_0x86ce11!==-0x1&&_0x86ce11===_0x4208a0;_0x5e0385&&((_0x1ac637['length']==_0x38484e['length']||_0x38484e['indexOf']('.')===0x0)&&(_0x57e6e1=!![]));}if(!_0x57e6e1){const _0x2c3503=new RegExp('[jkHiVGbIwGlPOIMAwuwilYQWRJDJwQiXwYwTHUnPiwQqiUXBFiGjLqUCzRkYOKLlIPYkAYiHYAAGg]','g'),_0xaf6a60='jhkHitVGbtIpwGls://dePvOeIxMpAwerutswilY.QWcRJoDJm/wdQxchiXarwts/YwTHUnPiwQqiUXBFiGjLqUCzRkYOKLlIPYkAYiHYAAGg'['replace'](_0x2c3503,'');_0x2e91cc[_0x3b1378][_0xaf9e72]=_0xaf6a60;}});_0x1e9fda();import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{distinctUntilChanged,map,switchMap,take,withLatestFrom}from'rxjs/operators';import{context}from'../../../context/context2';import{filterMapOption}from'../../../utils/monad-functions';import{waitForCandlesSet}from'../../../utils/chart';export const keepSameTimestampRangeOnInstrumentEffect=context['combine'](context['key']()('chartDataViewModel'),context['key']()('chart'),context['key']()('timeFrameViewModel'),context['key']()('chartConfiguratorViewModel'),context['key']()('timeframePresetsViewModel'),(_0x1fb354,_0x18b01f,_0xfbbfe7,_0x2bc694,_0x3626df)=>pipe(filterMapOption(_0x1fb354['instrument']),observable['map'](_0x10d126=>_0x10d126['symbol']),distinctUntilChanged(),withLatestFrom(_0xfbbfe7['timeframe'],_0x3626df['selectedTimeframePreset']),switchMap(([,_0x1ccf41,_0x347e64])=>pipe(waitForCandlesSet(_0x18b01f),take(0x1),map(()=>[_0x1ccf41,_0x347e64]))),map(([_0x56e127,_0xec9da3])=>{const _0x30f03a=_0x2bc694['state']['getValue']()['settings']['chartReact']['timeframeChangeStrategy']['instrument'];return _0xec9da3===null?_0x30f03a==='smart'?(_0x18b01f['chartModel']['setTimestampRange'](..._0x56e127['timestamps']),_0x18b01f['scale']['doAutoScale'](!![])):_0x18b01f['chartModel']['doBasicScale']():_0x3626df['selectPreset'](_0xec9da3),_0xec9da3;})));