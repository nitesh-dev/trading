/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4321ea=(function(){const _0xb90f0a=(function(){let _0x3eb0c4=!![];return function(_0x5b360a,_0x19176a){const _0x263c3a=_0x3eb0c4?function(){if(_0x19176a){const _0x17a45a=_0x19176a['apply'](_0x5b360a,arguments);return _0x19176a=null,_0x17a45a;}}:function(){};return _0x3eb0c4=![],_0x263c3a;};}()),_0x2d8582=_0xb90f0a(this,function(){const _0x577153=function(){let _0x34ffd7;try{_0x34ffd7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x36e703){_0x34ffd7=window;}return _0x34ffd7;},_0x3d2c41=_0x577153(),_0x460ccc=new RegExp('[nCGjybfgMGguwCUqNuiDyIgyyUYIWfIRNiAww]','g'),_0x535fa5='n.CdevGexperjts.comybfgMGguwCUqNuiDyIgyyUYIWfIRNiAww'['replace'](_0x460ccc,'')['split'](';');let _0x5ac128,_0x53befa,_0x32c0f0,_0x520570;const _0x4c572a=function(_0x494c7c,_0x5676d2,_0x4925e0){if(_0x494c7c['length']!=_0x5676d2)return![];for(let _0x4fb8cf=0x0;_0x4fb8cf<_0x5676d2;_0x4fb8cf++){for(let _0x20a944=0x0;_0x20a944<_0x4925e0['length'];_0x20a944+=0x2){if(_0x4fb8cf==_0x4925e0[_0x20a944]&&_0x494c7c['charCodeAt'](_0x4fb8cf)!=_0x4925e0[_0x20a944+0x1])return![];}}return!![];},_0x3e63c0=function(_0x265fe3,_0x502a40,_0x15e599){return _0x4c572a(_0x502a40,_0x15e599,_0x265fe3);},_0x4b3f26=function(_0xb0b4af,_0x13400a,_0x5179bb){return _0x3e63c0(_0x13400a,_0xb0b4af,_0x5179bb);},_0x186931=function(_0x140ef0,_0x151f28,_0x561d1b){return _0x4b3f26(_0x151f28,_0x561d1b,_0x140ef0);};for(let _0x410729 in _0x3d2c41){if(_0x4c572a(_0x410729,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5ac128=_0x410729;break;}}for(let _0x50daac in _0x3d2c41[_0x5ac128]){if(_0x186931(0x6,_0x50daac,[0x5,0x6e,0x0,0x64])){_0x53befa=_0x50daac;break;}}for(let _0x21f761 in _0x3d2c41[_0x5ac128]){if(_0x4b3f26(_0x21f761,[0x7,0x6e,0x0,0x6c],0x8)){_0x32c0f0=_0x21f761;break;}}if(!('~'>_0x53befa))for(let _0x5d275b in _0x3d2c41[_0x5ac128][_0x32c0f0]){if(_0x3e63c0([0x7,0x65,0x0,0x68],_0x5d275b,0x8)){_0x520570=_0x5d275b;break;}}if(!_0x5ac128||!_0x3d2c41[_0x5ac128])return;const _0x2ca96b=_0x3d2c41[_0x5ac128][_0x53befa],_0x5481c1=!!_0x3d2c41[_0x5ac128][_0x32c0f0]&&_0x3d2c41[_0x5ac128][_0x32c0f0][_0x520570],_0x1de4c3=_0x2ca96b||_0x5481c1;if(!_0x1de4c3)return;let _0x15ce04=Date['now']()<0x18cfaf7e418;for(let _0x24756b=0x0;_0x24756b<_0x535fa5['length'];_0x24756b++){const _0x279a75=_0x535fa5[_0x24756b],_0x507d89=_0x279a75[0x0]===String['fromCharCode'](0x2e)?_0x279a75['slice'](0x1):_0x279a75,_0x4578b4=_0x1de4c3['length']-_0x507d89['length'],_0x596b28=_0x1de4c3['indexOf'](_0x507d89,_0x4578b4),_0x1c5ee7=_0x596b28!==-0x1&&_0x596b28===_0x4578b4;_0x1c5ee7&&((_0x1de4c3['length']==_0x279a75['length']||_0x279a75['indexOf']('.')===0x0)&&(_0x15ce04=!![]));}if(!_0x15ce04){const _0x1acf4d=new RegExp('[kFUFluuZQBByCRqQbZuKHQfWPHFRXWgZViNTnBlXSgMFnMGiMDHNlSqEkGwDgOjNYL]','g'),_0x5ddd55='kFhUFttps://devexpeluurtZs.Qcom/BdByCxchaRrts/qQbZuKHQfWPHFRXWgZViNTnBlXSgMFnMGiMDHNlSqEkGwDgOjNYL'['replace'](_0x1acf4d,'');_0x3d2c41[_0x5ac128][_0x32c0f0]=_0x5ddd55;}});_0x2d8582();let _0x58e810=!![];return function(_0x4b2a43,_0x352e29){const _0x4e2cb1=_0x58e810?function(){if(_0x352e29){const _0x5bef3c=_0x352e29['apply'](_0x4b2a43,arguments);return _0x352e29=null,_0x5bef3c;}}:function(){};return _0x58e810=![],_0x4e2cb1;};}()),_0x362801=_0x4321ea(this,function(){const _0x2daeac=function(){let _0x32f2f2;try{_0x32f2f2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x53bbb5){_0x32f2f2=window;}return _0x32f2f2;},_0x405bd5=_0x2daeac(),_0x5bbe27=new RegExp('[RzhGbEHGALRbEbOClPSAQYNlZGVNkTzFCai]','g'),_0x8e75fa='.dRzehGvebExHGApertLs.coRmbEbOClPSAQYNlZGVNkTzFCai'['replace'](_0x5bbe27,'')['split'](';');let _0x91b4fe,_0x17fb5f,_0xb33d5a,_0x3cabdc;const _0x20f711=function(_0x4e0a38,_0x3db3ee,_0x4ae4dc){if(_0x4e0a38['length']!=_0x3db3ee)return![];for(let _0x4f3b8e=0x0;_0x4f3b8e<_0x3db3ee;_0x4f3b8e++){for(let _0x1d94ef=0x0;_0x1d94ef<_0x4ae4dc['length'];_0x1d94ef+=0x2){if(_0x4f3b8e==_0x4ae4dc[_0x1d94ef]&&_0x4e0a38['charCodeAt'](_0x4f3b8e)!=_0x4ae4dc[_0x1d94ef+0x1])return![];}}return!![];},_0x1bed86=function(_0x1b67d2,_0x54d116,_0x2381f8){return _0x20f711(_0x54d116,_0x2381f8,_0x1b67d2);},_0x1c3cb5=function(_0xc2e6fc,_0xfac9d4,_0x46be8a){return _0x1bed86(_0xfac9d4,_0xc2e6fc,_0x46be8a);},_0x515d58=function(_0x5396e0,_0x12902a,_0x1e5b94){return _0x1c3cb5(_0x12902a,_0x1e5b94,_0x5396e0);};for(let _0x68c562 in _0x405bd5){if(_0x20f711(_0x68c562,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x91b4fe=_0x68c562;break;}}for(let _0x4fcd15 in _0x405bd5[_0x91b4fe]){if(_0x515d58(0x6,_0x4fcd15,[0x5,0x6e,0x0,0x64])){_0x17fb5f=_0x4fcd15;break;}}for(let _0x55f625 in _0x405bd5[_0x91b4fe]){if(_0x1c3cb5(_0x55f625,[0x7,0x6e,0x0,0x6c],0x8)){_0xb33d5a=_0x55f625;break;}}if(!('~'>_0x17fb5f))for(let _0x24f87a in _0x405bd5[_0x91b4fe][_0xb33d5a]){if(_0x1bed86([0x7,0x65,0x0,0x68],_0x24f87a,0x8)){_0x3cabdc=_0x24f87a;break;}}if(!_0x91b4fe||!_0x405bd5[_0x91b4fe])return;const _0x4e6a75=_0x405bd5[_0x91b4fe][_0x17fb5f],_0xbebdde=!!_0x405bd5[_0x91b4fe][_0xb33d5a]&&_0x405bd5[_0x91b4fe][_0xb33d5a][_0x3cabdc],_0x45f36c=_0x4e6a75||_0xbebdde;if(!_0x45f36c)return;let _0x3ab220=Date['now']()<0x18cfaf7e418;for(let _0x13ec10=0x0;_0x13ec10<_0x8e75fa['length'];_0x13ec10++){const _0x21291f=_0x8e75fa[_0x13ec10],_0x35604b=_0x21291f[0x0]===String['fromCharCode'](0x2e)?_0x21291f['slice'](0x1):_0x21291f,_0x1c84fe=_0x45f36c['length']-_0x35604b['length'],_0x5e5a47=_0x45f36c['indexOf'](_0x35604b,_0x1c84fe),_0x1e8c7c=_0x5e5a47!==-0x1&&_0x5e5a47===_0x1c84fe;_0x1e8c7c&&((_0x45f36c['length']==_0x21291f['length']||_0x21291f['indexOf']('.')===0x0)&&(_0x3ab220=!![]));}if(!_0x3ab220){const _0x6c0c62=new RegExp('[WMWVyAbiuVSiRVZgDgqHFjIXQSfAllEBfQCbOyOAXKBWEDGUSlXCMJLHUgliTIYKjPRnQiuLJVWZF]','g'),_0x3fdec3='httWMpsWVyA:biu/V/dSeiRVZgvDgeqHFjxIpertXQSfs.cAlom/ldEBxfcQhaCbOyrtOAsXKBW/EDGUSlXCMJLHUgliTIYKjPRnQiuLJVWZF'['replace'](_0x6c0c62,'');_0x405bd5[_0x91b4fe][_0xb33d5a]=_0x3fdec3;}});_0x362801();import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{distinctUntilChanged,map,switchMap,take,withLatestFrom}from'rxjs/operators';import{context}from'../../../context/context2';import{filterMapOption}from'../../../utils/monad-functions';export const keepSameTimestampRangeOnInstrumentEffect=context['combine'](context['key']()('chartDataViewModel'),context['key']()('chart'),context['key']()('timeFrameViewModel'),context['key']()('chartConfiguratorViewModel'),context['key']()('timeframePresetsViewModel'),(_0x4fa994,_0x4e05f9,_0x52b54a,_0x18a271,_0x12d69b)=>pipe(filterMapOption(_0x4fa994['instrument']),observable['map'](_0x1a87cb=>_0x1a87cb['symbol']),distinctUntilChanged(),withLatestFrom(_0x52b54a['timestampRange'],_0x12d69b['selectedTimeframePreset']),switchMap(([,_0xb6235d,_0x170897])=>pipe(_0x4fa994['historicalCandlesUpdated'],take(0x1),map(()=>[_0xb6235d,_0x170897]))),map(([_0x54f24b,_0x236ac0])=>{const _0x444bbc=_0x18a271['state']['getValue']()['settings']['chartReact']['timeframeChangeStrategy']['instrument'];return _0x236ac0===null?_0x444bbc==='smart'?(_0x4e05f9['chartModel']['setTimestampRange'](..._0x54f24b),_0x4e05f9['scale']['doAutoScale'](!![])):_0x4e05f9['chartModel']['doBasicScale']():_0x12d69b['selectPreset'](_0x236ac0),_0x236ac0;})));