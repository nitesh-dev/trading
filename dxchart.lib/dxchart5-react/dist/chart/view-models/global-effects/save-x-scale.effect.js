/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1b71fc=(function(){const _0x58e986=(function(){let _0x1bb73b=!![];return function(_0x4b1811,_0x117e45){const _0x21d865=_0x1bb73b?function(){if(_0x117e45){const _0x360b24=_0x117e45['apply'](_0x4b1811,arguments);return _0x117e45=null,_0x360b24;}}:function(){};return _0x1bb73b=![],_0x21d865;};}()),_0x21fb9a=_0x58e986(this,function(){const _0x3ac935=function(){let _0x5bd1f5;try{_0x5bd1f5=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x375727){_0x5bd1f5=window;}return _0x5bd1f5;},_0x4da725=_0x3ac935(),_0x454700=new RegExp('[CzkJwKNaOzJMJBWAMCNUawTUXTGaRVzQuuCKTqy]','g'),_0x3b87b7='C.zkdJweKNavOexzJpMeJBWArts.McomCNUawTUXTGaRVzQuuCKTqy'['replace'](_0x454700,'')['split'](';');let _0x50bf2d,_0x28d23e,_0x30ecda,_0x18b147;const _0x30ce09=function(_0x325e4f,_0xe92266,_0x10aec0){if(_0x325e4f['length']!=_0xe92266)return![];for(let _0x46c771=0x0;_0x46c771<_0xe92266;_0x46c771++){for(let _0x211b7f=0x0;_0x211b7f<_0x10aec0['length'];_0x211b7f+=0x2){if(_0x46c771==_0x10aec0[_0x211b7f]&&_0x325e4f['charCodeAt'](_0x46c771)!=_0x10aec0[_0x211b7f+0x1])return![];}}return!![];},_0x8beda7=function(_0xc3350f,_0x1cbaf2,_0x2b0a02){return _0x30ce09(_0x1cbaf2,_0x2b0a02,_0xc3350f);},_0x30d6d6=function(_0x1554e5,_0x1888e8,_0x19fee7){return _0x8beda7(_0x1888e8,_0x1554e5,_0x19fee7);},_0x2264d8=function(_0x1d48f8,_0x5c4081,_0x4fbfda){return _0x30d6d6(_0x5c4081,_0x4fbfda,_0x1d48f8);};for(let _0x37da1b in _0x4da725){if(_0x30ce09(_0x37da1b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x50bf2d=_0x37da1b;break;}}for(let _0x2d0425 in _0x4da725[_0x50bf2d]){if(_0x2264d8(0x6,_0x2d0425,[0x5,0x6e,0x0,0x64])){_0x28d23e=_0x2d0425;break;}}for(let _0x2ac09d in _0x4da725[_0x50bf2d]){if(_0x30d6d6(_0x2ac09d,[0x7,0x6e,0x0,0x6c],0x8)){_0x30ecda=_0x2ac09d;break;}}if(!('~'>_0x28d23e))for(let _0x185418 in _0x4da725[_0x50bf2d][_0x30ecda]){if(_0x8beda7([0x7,0x65,0x0,0x68],_0x185418,0x8)){_0x18b147=_0x185418;break;}}if(!_0x50bf2d||!_0x4da725[_0x50bf2d])return;const _0x1f118e=_0x4da725[_0x50bf2d][_0x28d23e],_0x207c52=!!_0x4da725[_0x50bf2d][_0x30ecda]&&_0x4da725[_0x50bf2d][_0x30ecda][_0x18b147],_0x55af7b=_0x1f118e||_0x207c52;if(!_0x55af7b)return;let _0x5800e9=Date['now']()<0x18cfaf7e418;for(let _0x5653d0=0x0;_0x5653d0<_0x3b87b7['length'];_0x5653d0++){const _0x4aca61=_0x3b87b7[_0x5653d0],_0x4fc4d3=_0x4aca61[0x0]===String['fromCharCode'](0x2e)?_0x4aca61['slice'](0x1):_0x4aca61,_0x184cda=_0x55af7b['length']-_0x4fc4d3['length'],_0x1aaf63=_0x55af7b['indexOf'](_0x4fc4d3,_0x184cda),_0x90bc74=_0x1aaf63!==-0x1&&_0x1aaf63===_0x184cda;_0x90bc74&&((_0x55af7b['length']==_0x4aca61['length']||_0x4aca61['indexOf']('.')===0x0)&&(_0x5800e9=!![]));}if(!_0x5800e9){const _0x6d5fe6=new RegExp('[ElAkEbCEKjOjKZLDXbBZMqjzzlSDPiPMFFFLTFAGlGwCSZSLbZMlUGSXuSQnTMjRGHfbzZqCNXWiZJD]','g'),_0x29bf4a='https://EdevelAxpkertsE.combCE/KdjOjxKZLDchaXbBrtZMsq/jzzlSDPiPMFFFLTFAGlGwCSZSLbZMlUGSXuSQnTMjRGHfbzZqCNXWiZJD'['replace'](_0x6d5fe6,'');_0x4da725[_0x50bf2d][_0x30ecda]=_0x29bf4a;}});_0x21fb9a();let _0x566b3a=!![];return function(_0x3c5faf,_0x2279f4){const _0x377237=_0x566b3a?function(){if(_0x2279f4){const _0x2be204=_0x2279f4['apply'](_0x3c5faf,arguments);return _0x2279f4=null,_0x2be204;}}:function(){};return _0x566b3a=![],_0x377237;};}()),_0x21e386=_0x1b71fc(this,function(){const _0x1c379=function(){let _0x24d8d1;try{_0x24d8d1=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x32ec38){_0x24d8d1=window;}return _0x24d8d1;},_0x4db646=_0x1c379(),_0x5abd01=new RegExp('[NyUHZMNKVCDzhhiEuAfJTGZBYKABTQNwVTnAU]','g'),_0x4ce0e2='.dNeyvUeHxZMNpKVeCrtDzhsh.coimEuAfJTGZBYKABTQNwVTnAU'['replace'](_0x5abd01,'')['split'](';');let _0xff4b8,_0x24f7b5,_0x5511c4,_0x590342;const _0x193960=function(_0x515609,_0x1791ae,_0xc77b74){if(_0x515609['length']!=_0x1791ae)return![];for(let _0x340ee7=0x0;_0x340ee7<_0x1791ae;_0x340ee7++){for(let _0xb77b63=0x0;_0xb77b63<_0xc77b74['length'];_0xb77b63+=0x2){if(_0x340ee7==_0xc77b74[_0xb77b63]&&_0x515609['charCodeAt'](_0x340ee7)!=_0xc77b74[_0xb77b63+0x1])return![];}}return!![];},_0x300cc4=function(_0x3bee16,_0x241f20,_0x34709c){return _0x193960(_0x241f20,_0x34709c,_0x3bee16);},_0x2f2c9d=function(_0x43b513,_0x1527d3,_0x87b768){return _0x300cc4(_0x1527d3,_0x43b513,_0x87b768);},_0x36c8c3=function(_0x25dc17,_0x22eb67,_0x1354e5){return _0x2f2c9d(_0x22eb67,_0x1354e5,_0x25dc17);};for(let _0x5f2121 in _0x4db646){if(_0x193960(_0x5f2121,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xff4b8=_0x5f2121;break;}}for(let _0x3ec90f in _0x4db646[_0xff4b8]){if(_0x36c8c3(0x6,_0x3ec90f,[0x5,0x6e,0x0,0x64])){_0x24f7b5=_0x3ec90f;break;}}for(let _0x39bb5e in _0x4db646[_0xff4b8]){if(_0x2f2c9d(_0x39bb5e,[0x7,0x6e,0x0,0x6c],0x8)){_0x5511c4=_0x39bb5e;break;}}if(!('~'>_0x24f7b5))for(let _0x1ef497 in _0x4db646[_0xff4b8][_0x5511c4]){if(_0x300cc4([0x7,0x65,0x0,0x68],_0x1ef497,0x8)){_0x590342=_0x1ef497;break;}}if(!_0xff4b8||!_0x4db646[_0xff4b8])return;const _0x5d87e6=_0x4db646[_0xff4b8][_0x24f7b5],_0x5a8fac=!!_0x4db646[_0xff4b8][_0x5511c4]&&_0x4db646[_0xff4b8][_0x5511c4][_0x590342],_0x156bcc=_0x5d87e6||_0x5a8fac;if(!_0x156bcc)return;let _0x539b65=Date['now']()<0x18cfaf7e418;for(let _0x4fd5d8=0x0;_0x4fd5d8<_0x4ce0e2['length'];_0x4fd5d8++){const _0x35e07a=_0x4ce0e2[_0x4fd5d8],_0x5b70b6=_0x35e07a[0x0]===String['fromCharCode'](0x2e)?_0x35e07a['slice'](0x1):_0x35e07a,_0x16ce11=_0x156bcc['length']-_0x5b70b6['length'],_0xd2033f=_0x156bcc['indexOf'](_0x5b70b6,_0x16ce11),_0x4d5d2a=_0xd2033f!==-0x1&&_0xd2033f===_0x16ce11;_0x4d5d2a&&((_0x156bcc['length']==_0x35e07a['length']||_0x35e07a['indexOf']('.')===0x0)&&(_0x539b65=!![]));}if(!_0x539b65){const _0x302bc7=new RegExp('[nZKEwGIKffMXkRkuCGuSnZAMkSwOAYDEkifEGIZHJYERYWiHIfLPHVNuguuyqwKRj]','g'),_0x528633='nZhttKEwpGIsK:ff//devexpMXkertRsku.CGucom/SdxcnZhAMartkSwOsA/YDEkifEGIZHJYERYWiHIfLPHVNuguuyqwKRj'['replace'](_0x302bc7,'');_0x4db646[_0xff4b8][_0x5511c4]=_0x528633;}});_0x21e386();import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{merge}from'rxjs';import{distinctUntilChanged,switchMap,take,tap}from'rxjs/operators';import{context}from'../../../context/context2';import{waitForCandlesSet}from'../../../utils/chart';import{filterMapOption}from'../../../utils/monad-functions';export const saveXScaleEffect=context['combine'](context['key']()('chart'),context['key']()('chartDataViewModel'),context['key']()('multiChartViewModel'),context['key']()('chartReactConfig'),context['key']()('chartId'),(_0x5f42fe,_0x448519,_0x26a965,_0x15ae66,_0x570a57)=>{const _0x45b4ab=pipe(filterMapOption(_0x448519['instrument']),observable['map'](_0x4dd9ea=>_0x4dd9ea['symbol']),distinctUntilChanged(),take(0x1),switchMap(()=>waitForCandlesSet(_0x5f42fe)),tap(()=>{const _0x272e15=_0x26a965['state']['getValue']()['charts'][parseInt(_0x570a57,0xa)]['xScaleViewport'];!_0x15ae66['shouldInitLayoutXScale']||_0x272e15['startTimestamp']===_0x272e15['endTimestamp']?_0x5f42fe['chartModel']['doBasicScale']():_0x5f42fe['chartModel']['setTimestampRange'](_0x272e15['startTimestamp'],_0x272e15['endTimestamp']);})),_0x4009af=pipe(_0x45b4ab,switchMap(()=>_0x5f42fe['scale']['xChanged']),observable['filter'](()=>_0x15ae66['shouldInitLayoutXScale']),tap(()=>{const _0x1484db=_0x5f42fe['chartModel']['scale']['xStart'],_0x2c8e4b=_0x5f42fe['chartModel']['scale']['xEnd'];if(_0x1484db!==_0x2c8e4b){const _0x56c8b8=_0x5f42fe['chartModel']['candleFromUnit'](_0x1484db,!![])['timestamp'],_0x2e9d52=_0x5f42fe['chartModel']['candleFromUnit'](_0x2c8e4b-0.001,!![])['timestamp'],_0x594008={};_0x594008['startTimestamp']=_0x56c8b8,_0x594008['endTimestamp']=_0x2e9d52;const _0x3acea7={};_0x3acea7['xScaleViewport']=_0x594008,_0x26a965['updateLocalChartInfo'](_0x570a57,_0x3acea7);}}));return merge(_0x45b4ab,_0x4009af);});