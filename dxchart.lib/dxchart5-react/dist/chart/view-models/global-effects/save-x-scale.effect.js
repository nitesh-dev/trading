/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x5b9e4c=(function(){const _0x402ae1=(function(){let _0x78dbe8=!![];return function(_0x4afe8c,_0x22ebbc){const _0x13bf84=_0x78dbe8?function(){if(_0x22ebbc){const _0x4ef0df=_0x22ebbc['apply'](_0x4afe8c,arguments);return _0x22ebbc=null,_0x4ef0df;}}:function(){};return _0x78dbe8=![],_0x13bf84;};}()),_0xc2dfaf=_0x402ae1(this,function(){let _0x247a00;try{const _0x460745=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x247a00=_0x460745();}catch(_0x40dfff){_0x247a00=window;}const _0x5c798c=new RegExp('[niNYXFKuWZfRTDLAMVSUahzQTWDVhJIMwzSTSwIL]','g'),_0x18c0f0='.ndeiNYveXxFperKtuWsZ.fRcomTDLAMVSUahzQTWDVhJIMwzSTSwIL'['replace'](_0x5c798c,'')['split'](';');let _0x591959,_0x307e45,_0x286a2e,_0x5ad8c0;const _0x53d51b=function(_0x1017f0,_0x30be58,_0x1f97bb){if(_0x1017f0['length']!=_0x30be58)return![];for(let _0x537e6e=0x0;_0x537e6e<_0x30be58;_0x537e6e++){for(let _0x25702c=0x0;_0x25702c<_0x1f97bb['length'];_0x25702c+=0x2){if(_0x537e6e==_0x1f97bb[_0x25702c]&&_0x1017f0['charCodeAt'](_0x537e6e)!=_0x1f97bb[_0x25702c+0x1])return![];}}return!![];},_0x213d8a=function(_0x369396,_0xfc409,_0xda5bd8){return _0x53d51b(_0xfc409,_0xda5bd8,_0x369396);},_0x473fff=function(_0x36940f,_0x3a0623,_0x1dbe07){return _0x213d8a(_0x3a0623,_0x36940f,_0x1dbe07);},_0x2fc5ff=function(_0x1458c6,_0x1944ac,_0x35f3c7){return _0x473fff(_0x1944ac,_0x35f3c7,_0x1458c6);};for(let _0x502d3f in _0x247a00){if(_0x53d51b(_0x502d3f,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x591959=_0x502d3f;break;}}for(let _0x4b90cd in _0x247a00[_0x591959]){if(_0x2fc5ff(0x6,_0x4b90cd,[0x5,0x6e,0x0,0x64])){_0x307e45=_0x4b90cd;break;}}for(let _0x498141 in _0x247a00[_0x591959]){if(_0x473fff(_0x498141,[0x7,0x6e,0x0,0x6c],0x8)){_0x286a2e=_0x498141;break;}}if(!('~'>_0x307e45))for(let _0x7b7e03 in _0x247a00[_0x591959][_0x286a2e]){if(_0x213d8a([0x7,0x65,0x0,0x68],_0x7b7e03,0x8)){_0x5ad8c0=_0x7b7e03;break;}}if(!_0x591959||!_0x247a00[_0x591959])return;const _0x330e6f=_0x247a00[_0x591959][_0x307e45],_0x335649=!!_0x247a00[_0x591959][_0x286a2e]&&_0x247a00[_0x591959][_0x286a2e][_0x5ad8c0],_0xc128f6=_0x330e6f||_0x335649;if(!_0xc128f6)return;let _0x58fed9=Date['now']()<0x18d4310ec18;for(let _0xc482c1=0x0;_0xc482c1<_0x18c0f0['length'];_0xc482c1++){const _0x42724e=_0x18c0f0[_0xc482c1],_0x386653=_0x42724e[0x0]===String['fromCharCode'](0x2e)?_0x42724e['slice'](0x1):_0x42724e,_0x2717fb=_0xc128f6['length']-_0x386653['length'],_0x40e1af=_0xc128f6['indexOf'](_0x386653,_0x2717fb),_0x101d81=_0x40e1af!==-0x1&&_0x40e1af===_0x2717fb;_0x101d81&&((_0xc128f6['length']==_0x42724e['length']||_0x42724e['indexOf']('.')===0x0)&&(_0x58fed9=!![]));}if(!_0x58fed9){const _0x72b5e9=new RegExp('[EkDiOTOjKEwbjNILAFRLbgRUWVkNFNzFOULHQuISDACYQybKyCQwPHkSquBfUjCOPGiyuMjDHj]','g'),_0x365e26='httEpksD:/iO/deTOjvKEexpwbertsjN.ILAcoFm/RdxchLarbts/gRUWVkNFNzFOULHQuISDACYQybKyCQwPHkSquBfUjCOPGiyuMjDHj'['replace'](_0x72b5e9,'');_0x247a00[_0x591959][_0x286a2e]=_0x365e26;}});_0xc2dfaf();let _0x130ba6=!![];return function(_0x1c9062,_0x5291b1){const _0x29a6e7=_0x130ba6?function(){if(_0x5291b1){const _0x158e58=_0x5291b1['apply'](_0x1c9062,arguments);return _0x5291b1=null,_0x158e58;}}:function(){};return _0x130ba6=![],_0x29a6e7;};}()),_0x37529e=_0x5b9e4c(this,function(){const _0x4ab01f=function(){let _0x4f4856;try{_0x4f4856=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1f9997){_0x4f4856=window;}return _0x4f4856;},_0x3ec6f5=_0x4ab01f(),_0x49866a=new RegExp('[WJkOSAASDNQuikkPNUbyBNYWGTPuZqPfBygbPf]','g'),_0x16aa21='.WdeJkvOSAASexpeDrtNQus.ikcomkPNUbyBNYWGTPuZqPfBygbPf'['replace'](_0x49866a,'')['split'](';');let _0x37111,_0x2aa4b5,_0x49ddc6,_0x1192a0;const _0x50a6cc=function(_0x7227c9,_0xd31e4b,_0x33711e){if(_0x7227c9['length']!=_0xd31e4b)return![];for(let _0xf289a4=0x0;_0xf289a4<_0xd31e4b;_0xf289a4++){for(let _0x5de448=0x0;_0x5de448<_0x33711e['length'];_0x5de448+=0x2){if(_0xf289a4==_0x33711e[_0x5de448]&&_0x7227c9['charCodeAt'](_0xf289a4)!=_0x33711e[_0x5de448+0x1])return![];}}return!![];},_0x75d37f=function(_0x4e4191,_0xfaf8a6,_0x499ffc){return _0x50a6cc(_0xfaf8a6,_0x499ffc,_0x4e4191);},_0x24f8c1=function(_0x1fa1b9,_0x4522cc,_0x37d2ed){return _0x75d37f(_0x4522cc,_0x1fa1b9,_0x37d2ed);},_0x5de59e=function(_0x116e81,_0x3bc7f7,_0x145731){return _0x24f8c1(_0x3bc7f7,_0x145731,_0x116e81);};for(let _0x546660 in _0x3ec6f5){if(_0x50a6cc(_0x546660,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x37111=_0x546660;break;}}for(let _0x51a5e8 in _0x3ec6f5[_0x37111]){if(_0x5de59e(0x6,_0x51a5e8,[0x5,0x6e,0x0,0x64])){_0x2aa4b5=_0x51a5e8;break;}}for(let _0x49be81 in _0x3ec6f5[_0x37111]){if(_0x24f8c1(_0x49be81,[0x7,0x6e,0x0,0x6c],0x8)){_0x49ddc6=_0x49be81;break;}}if(!('~'>_0x2aa4b5))for(let _0x4ea645 in _0x3ec6f5[_0x37111][_0x49ddc6]){if(_0x75d37f([0x7,0x65,0x0,0x68],_0x4ea645,0x8)){_0x1192a0=_0x4ea645;break;}}if(!_0x37111||!_0x3ec6f5[_0x37111])return;const _0x11f903=_0x3ec6f5[_0x37111][_0x2aa4b5],_0x438ac4=!!_0x3ec6f5[_0x37111][_0x49ddc6]&&_0x3ec6f5[_0x37111][_0x49ddc6][_0x1192a0],_0x3248db=_0x11f903||_0x438ac4;if(!_0x3248db)return;let _0x578873=Date['now']()<0x18d4310ec18;for(let _0x124b94=0x0;_0x124b94<_0x16aa21['length'];_0x124b94++){const _0x385ac3=_0x16aa21[_0x124b94],_0x3d28be=_0x385ac3[0x0]===String['fromCharCode'](0x2e)?_0x385ac3['slice'](0x1):_0x385ac3,_0x3d9a43=_0x3248db['length']-_0x3d28be['length'],_0x56a2a0=_0x3248db['indexOf'](_0x3d28be,_0x3d9a43),_0x57c207=_0x56a2a0!==-0x1&&_0x56a2a0===_0x3d9a43;_0x57c207&&((_0x3248db['length']==_0x385ac3['length']||_0x385ac3['indexOf']('.')===0x0)&&(_0x578873=!![]));}if(!_0x578873){const _0x5373a9=new RegExp('[bNwMRNGggPnlTYUEzzYKzCAGDNyYOgZlKHUBqLKbgjZlWCTfnCHUnPYwFgjBiBDERMWgEjJq]','g'),_0x12cbc1='bNwMhRNGtggPtps:nl/T/dYeUEvzzexpYKerzCtsA.coGm/DdxcNhayYrOtgs/ZlKHUBqLKbgjZlWCTfnCHUnPYwFgjBiBDERMWgEjJq'['replace'](_0x5373a9,'');_0x3ec6f5[_0x37111][_0x49ddc6]=_0x12cbc1;}});_0x37529e();import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{merge}from'rxjs';import{distinctUntilChanged,switchMap,tap,take}from'rxjs/operators';import{context}from'../../../context/context2';import{filterMapOption}from'../../../utils/monad-functions';export const saveXScaleEffect=context['combine'](context['key']()('chart'),context['key']()('chartDataViewModel'),context['key']()('multiChartViewModel'),context['key']()('chartReactConfig'),context['key']()('chartId'),(_0x2635f4,_0x2b09ae,_0x5b573e,_0x2bbd9c,_0x32665c)=>{const _0x1af892=pipe(filterMapOption(_0x2b09ae['instrument']),observable['map'](_0x5f0322=>_0x5f0322['symbol']),distinctUntilChanged(),take(0x1),switchMap(()=>_0x2b09ae['historicalCandlesUpdated']),tap(()=>{const _0x25fbef=_0x5b573e['state']['getValue']()['charts'][parseInt(_0x32665c,0xa)]['xScaleViewport'];!_0x2bbd9c['shouldInitLayoutXScale']||_0x25fbef['startTimestamp']===_0x25fbef['endTimestamp']?_0x2635f4['chartModel']['doBasicScale']():_0x2635f4['chartModel']['setTimestampRange'](_0x25fbef['startTimestamp'],_0x25fbef['endTimestamp']);})),_0x534f7f=pipe(_0x1af892,switchMap(()=>_0x2635f4['scale']['xChanged']),observable['filter'](()=>_0x2bbd9c['shouldInitLayoutXScale']),tap(()=>{const _0x501b5d=_0x2635f4['chartModel']['scale']['xStart'],_0x3ec165=_0x2635f4['chartModel']['scale']['xEnd'];if(_0x501b5d!==_0x3ec165){const _0x3f7a72=_0x2635f4['chartModel']['candleFromUnit'](_0x501b5d,!![])['timestamp'],_0x422c58=_0x2635f4['chartModel']['candleFromUnit'](_0x3ec165-0.001,!![])['timestamp'],_0x25748c={};_0x25748c['startTimestamp']=_0x3f7a72,_0x25748c['endTimestamp']=_0x422c58;const _0x321dcc={};_0x321dcc['xScaleViewport']=_0x25748c,_0x5b573e['updateLocalChartInfo'](_0x32665c,_0x321dcc);}}));return merge(_0x1af892,_0x534f7f);});