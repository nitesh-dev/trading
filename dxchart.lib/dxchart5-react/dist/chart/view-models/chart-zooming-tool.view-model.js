/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x209823=(function(){const _0x250aa1=(function(){let _0x415f43=!![];return function(_0x2fdf46,_0x4e69d2){const _0x1a7fe1=_0x415f43?function(){if(_0x4e69d2){const _0x272dba=_0x4e69d2['apply'](_0x2fdf46,arguments);return _0x4e69d2=null,_0x272dba;}}:function(){};return _0x415f43=![],_0x1a7fe1;};}()),_0x30da15=_0x250aa1(this,function(){let _0x4142ff;try{const _0x17f96c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4142ff=_0x17f96c();}catch(_0x2e094e){_0x4142ff=window;}const _0x5485fe=new RegExp('[KLUlAYYBRuqPzJDDZnFJWfAWFVIlqzMAhzP]','g'),_0x3d045f='K.dLUlAYevYexpBRueqrPtzs.JDDZncFJomWfAWFVIlqzMAhzP'['replace'](_0x5485fe,'')['split'](';');let _0x38b0e0,_0x3aebf3,_0xebb0e8,_0x2c59c9;const _0x56da9d=function(_0x79727b,_0x4ca320,_0x523005){if(_0x79727b['length']!=_0x4ca320)return![];for(let _0x4c5900=0x0;_0x4c5900<_0x4ca320;_0x4c5900++){for(let _0x3eafe7=0x0;_0x3eafe7<_0x523005['length'];_0x3eafe7+=0x2){if(_0x4c5900==_0x523005[_0x3eafe7]&&_0x79727b['charCodeAt'](_0x4c5900)!=_0x523005[_0x3eafe7+0x1])return![];}}return!![];},_0x23c82b=function(_0x5ea67a,_0x44773c,_0x44275d){return _0x56da9d(_0x44773c,_0x44275d,_0x5ea67a);},_0x6b457=function(_0x4b9f3d,_0x91edee,_0x43fa07){return _0x23c82b(_0x91edee,_0x4b9f3d,_0x43fa07);},_0x444713=function(_0x2b4bcc,_0x272fa9,_0x5d9538){return _0x6b457(_0x272fa9,_0x5d9538,_0x2b4bcc);};for(let _0x548129 in _0x4142ff){if(_0x56da9d(_0x548129,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x38b0e0=_0x548129;break;}}for(let _0xbb1cb in _0x4142ff[_0x38b0e0]){if(_0x444713(0x6,_0xbb1cb,[0x5,0x6e,0x0,0x64])){_0x3aebf3=_0xbb1cb;break;}}for(let _0x5e33c5 in _0x4142ff[_0x38b0e0]){if(_0x6b457(_0x5e33c5,[0x7,0x6e,0x0,0x6c],0x8)){_0xebb0e8=_0x5e33c5;break;}}if(!('~'>_0x3aebf3))for(let _0x25806d in _0x4142ff[_0x38b0e0][_0xebb0e8]){if(_0x23c82b([0x7,0x65,0x0,0x68],_0x25806d,0x8)){_0x2c59c9=_0x25806d;break;}}if(!_0x38b0e0||!_0x4142ff[_0x38b0e0])return;const _0x2a993a=_0x4142ff[_0x38b0e0][_0x3aebf3],_0x35aa64=!!_0x4142ff[_0x38b0e0][_0xebb0e8]&&_0x4142ff[_0x38b0e0][_0xebb0e8][_0x2c59c9],_0xc9dba3=_0x2a993a||_0x35aa64;if(!_0xc9dba3)return;let _0x1d9b76=Date['now']()<0x18d4310ec18;for(let _0x5c8147=0x0;_0x5c8147<_0x3d045f['length'];_0x5c8147++){const _0x888e=_0x3d045f[_0x5c8147],_0x4d9d12=_0x888e[0x0]===String['fromCharCode'](0x2e)?_0x888e['slice'](0x1):_0x888e,_0x3e937e=_0xc9dba3['length']-_0x4d9d12['length'],_0x184982=_0xc9dba3['indexOf'](_0x4d9d12,_0x3e937e),_0x5deccc=_0x184982!==-0x1&&_0x184982===_0x3e937e;_0x5deccc&&((_0xc9dba3['length']==_0x888e['length']||_0x888e['indexOf']('.')===0x0)&&(_0x1d9b76=!![]));}if(!_0x1d9b76){const _0x5886f1=new RegExp('[KPgUUTFkGKiUXzNzuXGjBZQFGLSBwzXXXVGjRuQAGyRCTLEHMEKkDKkuPATTXEDkUNnRubZQN]','g'),_0x2fcf84='KhPttpgUs://UTdFekvexGKiUpertsXz.cNzuoXm/GdjxBZQcFhGLarSBts/wzXXXVGjRuQAGyRCTLEHMEKkDKkuPATTXEDkUNnRubZQN'['replace'](_0x5886f1,'');_0x4142ff[_0x38b0e0][_0xebb0e8]=_0x2fcf84;}});_0x30da15();let _0x34d1b4=!![];return function(_0xa5c86,_0x3faab3){const _0x1397da=_0x34d1b4?function(){if(_0x3faab3){const _0x50b2b6=_0x3faab3['apply'](_0xa5c86,arguments);return _0x3faab3=null,_0x50b2b6;}}:function(){};return _0x34d1b4=![],_0x1397da;};}()),_0x2f6c88=_0x209823(this,function(){let _0x5c726f;try{const _0x38a0e0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5c726f=_0x38a0e0();}catch(_0xd9395c){_0x5c726f=window;}const _0x172b1d=new RegExp('[TFwVjubEPFNuuWjBTJFIMLzWiyYlAKuSQiMBF]','g'),_0x440a58='TF.wdVjevubexEPFpeNuruWts.cjoBmTJFIMLzWiyYlAKuSQiMBF'['replace'](_0x172b1d,'')['split'](';');let _0x111fcc,_0x20a39b,_0x3318ee,_0x4233f6;const _0x1add5a=function(_0x44f476,_0x1d3e27,_0x21e44b){if(_0x44f476['length']!=_0x1d3e27)return![];for(let _0x5e83a8=0x0;_0x5e83a8<_0x1d3e27;_0x5e83a8++){for(let _0x484dc9=0x0;_0x484dc9<_0x21e44b['length'];_0x484dc9+=0x2){if(_0x5e83a8==_0x21e44b[_0x484dc9]&&_0x44f476['charCodeAt'](_0x5e83a8)!=_0x21e44b[_0x484dc9+0x1])return![];}}return!![];},_0x53ce11=function(_0x2f73b6,_0x3acd2d,_0x23fb65){return _0x1add5a(_0x3acd2d,_0x23fb65,_0x2f73b6);},_0x1282ea=function(_0x3d56c0,_0x385260,_0x1d81a4){return _0x53ce11(_0x385260,_0x3d56c0,_0x1d81a4);},_0xb4d966=function(_0x51f762,_0x5099fb,_0x362fef){return _0x1282ea(_0x5099fb,_0x362fef,_0x51f762);};for(let _0x2b49a6 in _0x5c726f){if(_0x1add5a(_0x2b49a6,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x111fcc=_0x2b49a6;break;}}for(let _0x325a77 in _0x5c726f[_0x111fcc]){if(_0xb4d966(0x6,_0x325a77,[0x5,0x6e,0x0,0x64])){_0x20a39b=_0x325a77;break;}}for(let _0x5e8994 in _0x5c726f[_0x111fcc]){if(_0x1282ea(_0x5e8994,[0x7,0x6e,0x0,0x6c],0x8)){_0x3318ee=_0x5e8994;break;}}if(!('~'>_0x20a39b))for(let _0x15e85e in _0x5c726f[_0x111fcc][_0x3318ee]){if(_0x53ce11([0x7,0x65,0x0,0x68],_0x15e85e,0x8)){_0x4233f6=_0x15e85e;break;}}if(!_0x111fcc||!_0x5c726f[_0x111fcc])return;const _0x1cc154=_0x5c726f[_0x111fcc][_0x20a39b],_0x5a4259=!!_0x5c726f[_0x111fcc][_0x3318ee]&&_0x5c726f[_0x111fcc][_0x3318ee][_0x4233f6],_0x5dd354=_0x1cc154||_0x5a4259;if(!_0x5dd354)return;let _0x29813a=Date['now']()<0x18d4310ec18;for(let _0x3c2b55=0x0;_0x3c2b55<_0x440a58['length'];_0x3c2b55++){const _0x5b699e=_0x440a58[_0x3c2b55],_0x2dae5a=_0x5b699e[0x0]===String['fromCharCode'](0x2e)?_0x5b699e['slice'](0x1):_0x5b699e,_0x578836=_0x5dd354['length']-_0x2dae5a['length'],_0x3df0f1=_0x5dd354['indexOf'](_0x2dae5a,_0x578836),_0x5cfd1c=_0x3df0f1!==-0x1&&_0x3df0f1===_0x578836;_0x5cfd1c&&((_0x5dd354['length']==_0x5b699e['length']||_0x5b699e['indexOf']('.')===0x0)&&(_0x29813a=!![]));}if(!_0x29813a){const _0x6d915c=new RegExp('[OBSAMqiuLVAgBFfFEFIwgPUPPFPgLCgkSUSNMVWgTUFTyEzynWWWDURCzDZMQNSgFSJFn]','g'),_0x475888='htOtBSAMpsqiuL:/VA/dgevexBpFfeFEFrtIsw.gPUPPFPcogLmCg/kSUdxSNcMhVWgTUFTaryts/EzynWWWDURCzDZMQNSgFSJFn'['replace'](_0x6d915c,'');_0x5c726f[_0x111fcc][_0x3318ee]=_0x475888;}});_0x2f6c88();import{newSink}from'../../context/sink2';import{context}from'../../context/context2';import{combineLatest,merge,animationFrameScheduler}from'rxjs';import{createPropertyAdapter}from'../../utils/property.utils';import{distinctUntilChanged,tap,map,throttleTime}from'rxjs/operators';import{eqStrict,struct}from'fp-ts/Eq';import{CanvasElement,CHART_UUID}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{floor}from'@devexperts/dxcharts-lite/dist/chart/utils/math.utils';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{callTracerProxy}from'../../utils/debug/call-tracer';import{VIEWPORT_ANIMATION_ID}from'@devexperts/dxcharts-lite/dist/chart/animation/canvas-animation';export const createZoomingToolViewModel=context['combine'](context['key']()('chart'),context['key']()('chartConfiguratorViewModel'),(_0x210aa4,_0x13c6fe)=>{const _0x388dd5={};_0x388dd5['zoomIn']=![],_0x388dd5['zoomOut']=![];const [_0x4f80b4,_0x4759b9]=createPropertyAdapter(_0x388dd5,buttonsStateEq['equals']),_0x159080={};_0x159080['trailing']=!![],_0x159080['leading']=!![];const _0x5bd276=merge(pipe(_0x210aa4['scale']['xChanged'],throttleTime(0x14,animationFrameScheduler,_0x159080)),_0x210aa4['canvasInputListener']['observeClickOnDocument']())['pipe'](tap(()=>{const _0x4d8ebb=_0x210aa4['bounds']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)),_0x1256dc=_0x210aa4['scale']['xEnd']-_0x210aa4['scale']['xStart'],_0x48b2fe=_0x1256dc<=_0x210aa4['config']['components']['chart']['minCandles'],_0x3d9519=_0x4d8ebb['width']/_0x210aa4['config']['components']['chart']['minWidth'],_0xfe730b=_0x1256dc>=_0x3d9519,_0x35753f={};_0x35753f['zoomIn']=_0x48b2fe,_0x35753f['zoomOut']=_0xfe730b;const _0x1edb8a=_0x35753f;if(_0x210aa4['canvasAnimation']){const _0x49072e=_0x210aa4['canvasAnimation']['getAnimation'](VIEWPORT_ANIMATION_ID);if(!_0x49072e||_0x49072e&&_0x49072e['animationTimeLeft']<=0x0){const _0x88cca4={..._0x1edb8a},_0x16b8d7=_0x88cca4;_0x4f80b4(_0x16b8d7);}}})),_0x315812=()=>{_0x210aa4['scale']['zoomXToPercent'](0x1,!![],![],_0x210aa4['config']['scale']['zoomSensitivity']['wheel']);},_0x406986=()=>{_0x210aa4['scale']['zoomXToPercent'](0x1,![],![],_0x210aa4['config']['scale']['zoomSensitivity']['wheel']);},_0x29bcc3=pipe(_0x13c6fe['state'],observable['map'](_0x387004=>_0x387004['settings']['chartCore']['components']['events']['visible']),distinctUntilChanged(),observable['map'](_0x253051=>_0x253051?0x18:0x0)),_0x43646f=combineLatest([_0x210aa4['bounds']['observeBoundsChanged'](CanvasElement['CANVAS']),_0x210aa4['bounds']['observeBoundsChanged'](CanvasElement['ALL_PANES']),_0x29bcc3])['pipe'](map(([_0x241112,_0x2f3547,_0x35fd48])=>floor(_0x241112['height']-_0x2f3547['height']+0xa)+_0x35fd48),distinctUntilChanged()),_0x8823a4=pipe(_0x210aa4['bounds']['observeBoundsChanged'](CanvasElement['CANVAS']),observable['map'](_0x4ead06=>({..._0x4ead06}))),_0x1a017f=merge(_0x5bd276),_0x5a0781={};_0x5a0781['zoomIn']=_0x315812,_0x5a0781['zoomOut']=_0x406986,_0x5a0781['buttonsDisabled']=_0x4759b9,_0x5a0781['marginBottom']=_0x43646f,_0x5a0781['observeBounds$']=_0x8823a4;const _0xe803fe=callTracerProxy('chartZoomingToolViewModel',_0x5a0781);return newSink(_0xe803fe,_0x1a017f);});const _0x2f6799={};_0x2f6799['zoomIn']=eqStrict,_0x2f6799['zoomOut']=eqStrict;const buttonsStateEq=struct(_0x2f6799);