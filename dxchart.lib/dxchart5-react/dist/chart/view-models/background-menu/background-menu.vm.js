/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x40d814=(function(){const _0x4eb9e9=(function(){let _0x314c6d=!![];return function(_0x20e236,_0x5c10c9){const _0x242b39=_0x314c6d?function(){if(_0x5c10c9){const _0x228034=_0x5c10c9['apply'](_0x20e236,arguments);return _0x5c10c9=null,_0x228034;}}:function(){};return _0x314c6d=![],_0x242b39;};}()),_0x12587a=_0x4eb9e9(this,function(){const _0x5df0a4=function(){let _0x13bb3f;try{_0x13bb3f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2c6dca){_0x13bb3f=window;}return _0x13bb3f;},_0x3349e0=_0x5df0a4(),_0x5dbc94=new RegExp('[lUlXCBIuFwuqUUEhWHYRFhjiLBaTfTKH]','g'),_0x4bd4ab='.devlUelXCBxpIeuFwurqtUsUE.cohmWHYRFhjiLBaTfTKH'['replace'](_0x5dbc94,'')['split'](';');let _0x4a0f43,_0x43611a,_0x376aa5,_0xc6d465;const _0x1cbbd9=function(_0x21225b,_0x256501,_0x4132b4){if(_0x21225b['length']!=_0x256501)return![];for(let _0x17c165=0x0;_0x17c165<_0x256501;_0x17c165++){for(let _0x2be77f=0x0;_0x2be77f<_0x4132b4['length'];_0x2be77f+=0x2){if(_0x17c165==_0x4132b4[_0x2be77f]&&_0x21225b['charCodeAt'](_0x17c165)!=_0x4132b4[_0x2be77f+0x1])return![];}}return!![];},_0x5e2570=function(_0xa3c2d,_0x8643c,_0x4738df){return _0x1cbbd9(_0x8643c,_0x4738df,_0xa3c2d);},_0xa1593d=function(_0x6c1770,_0x45a5a5,_0xa0dfca){return _0x5e2570(_0x45a5a5,_0x6c1770,_0xa0dfca);},_0x4e2734=function(_0x340c86,_0x56d1df,_0x176dc9){return _0xa1593d(_0x56d1df,_0x176dc9,_0x340c86);};for(let _0x2ac300 in _0x3349e0){if(_0x1cbbd9(_0x2ac300,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4a0f43=_0x2ac300;break;}}for(let _0x32505b in _0x3349e0[_0x4a0f43]){if(_0x4e2734(0x6,_0x32505b,[0x5,0x6e,0x0,0x64])){_0x43611a=_0x32505b;break;}}for(let _0x2559f3 in _0x3349e0[_0x4a0f43]){if(_0xa1593d(_0x2559f3,[0x7,0x6e,0x0,0x6c],0x8)){_0x376aa5=_0x2559f3;break;}}if(!('~'>_0x43611a))for(let _0x1a5d92 in _0x3349e0[_0x4a0f43][_0x376aa5]){if(_0x5e2570([0x7,0x65,0x0,0x68],_0x1a5d92,0x8)){_0xc6d465=_0x1a5d92;break;}}if(!_0x4a0f43||!_0x3349e0[_0x4a0f43])return;const _0x838e2a=_0x3349e0[_0x4a0f43][_0x43611a],_0x5edea5=!!_0x3349e0[_0x4a0f43][_0x376aa5]&&_0x3349e0[_0x4a0f43][_0x376aa5][_0xc6d465],_0x55110e=_0x838e2a||_0x5edea5;if(!_0x55110e)return;let _0x52823b=Date['now']()<0x18cfaf7e418;for(let _0x4a24c9=0x0;_0x4a24c9<_0x4bd4ab['length'];_0x4a24c9++){const _0x5d55d3=_0x4bd4ab[_0x4a24c9],_0x55cc84=_0x5d55d3[0x0]===String['fromCharCode'](0x2e)?_0x5d55d3['slice'](0x1):_0x5d55d3,_0x2546ea=_0x55110e['length']-_0x55cc84['length'],_0x2faf21=_0x55110e['indexOf'](_0x55cc84,_0x2546ea),_0x5c4939=_0x2faf21!==-0x1&&_0x2faf21===_0x2546ea;_0x5c4939&&((_0x55110e['length']==_0x5d55d3['length']||_0x5d55d3['indexOf']('.')===0x0)&&(_0x52823b=!![]));}if(!_0x52823b){const _0x4d6773=new RegExp('[JQqRHAOQOYRXRXynAKVDIUzFuHZjgLPWKGAMPjMNifOjOKLWOTOIJuCuCqCgwCIEbXVkXPDQbYDwy]','g'),_0x308270='hJttpQs:q/R/HAOQOYRXRdevXeyxnpAKeVDIUzrFtusHZjg.LcPWom/dxcKhGAaMPrjMNtis/fOjOKLWOTOIJuCuCqCgwCIEbXVkXPDQbYDwy'['replace'](_0x4d6773,'');_0x3349e0[_0x4a0f43][_0x376aa5]=_0x308270;}});_0x12587a();let _0x5037a4=!![];return function(_0x4dedeb,_0x392feb){const _0x37a840=_0x5037a4?function(){if(_0x392feb){const _0x2c070a=_0x392feb['apply'](_0x4dedeb,arguments);return _0x392feb=null,_0x2c070a;}}:function(){};return _0x5037a4=![],_0x37a840;};}()),_0xca19f0=_0x40d814(this,function(){let _0xa3f9f9;try{const _0xc8f68e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xa3f9f9=_0xc8f68e();}catch(_0x13959f){_0xa3f9f9=window;}const _0x101ac2=new RegExp('[QPXPQDnFZZXyBOJVCUZPzgAALYHgKjShyPBXi]','g'),_0x188188='Q.PdeXPQvDexnpeFZZrtXys.BOcJVoCmUZPzgAALYHgKjShyPBXi'['replace'](_0x101ac2,'')['split'](';');let _0x3b0d12,_0x2aa41a,_0x37df1a,_0x5ccf2e;const _0x1f1b61=function(_0x24e82f,_0x3e7141,_0x2d2dc2){if(_0x24e82f['length']!=_0x3e7141)return![];for(let _0x37b140=0x0;_0x37b140<_0x3e7141;_0x37b140++){for(let _0x42f7c2=0x0;_0x42f7c2<_0x2d2dc2['length'];_0x42f7c2+=0x2){if(_0x37b140==_0x2d2dc2[_0x42f7c2]&&_0x24e82f['charCodeAt'](_0x37b140)!=_0x2d2dc2[_0x42f7c2+0x1])return![];}}return!![];},_0x95761b=function(_0x33d31e,_0x5cd7be,_0xfdefb5){return _0x1f1b61(_0x5cd7be,_0xfdefb5,_0x33d31e);},_0x13ea92=function(_0x37455d,_0x50c47f,_0x45bb64){return _0x95761b(_0x50c47f,_0x37455d,_0x45bb64);},_0x503c82=function(_0xc8c592,_0x4bff16,_0x327c27){return _0x13ea92(_0x4bff16,_0x327c27,_0xc8c592);};for(let _0x3cded8 in _0xa3f9f9){if(_0x1f1b61(_0x3cded8,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3b0d12=_0x3cded8;break;}}for(let _0x34ba30 in _0xa3f9f9[_0x3b0d12]){if(_0x503c82(0x6,_0x34ba30,[0x5,0x6e,0x0,0x64])){_0x2aa41a=_0x34ba30;break;}}for(let _0x5679f0 in _0xa3f9f9[_0x3b0d12]){if(_0x13ea92(_0x5679f0,[0x7,0x6e,0x0,0x6c],0x8)){_0x37df1a=_0x5679f0;break;}}if(!('~'>_0x2aa41a))for(let _0x5e5607 in _0xa3f9f9[_0x3b0d12][_0x37df1a]){if(_0x95761b([0x7,0x65,0x0,0x68],_0x5e5607,0x8)){_0x5ccf2e=_0x5e5607;break;}}if(!_0x3b0d12||!_0xa3f9f9[_0x3b0d12])return;const _0x58218d=_0xa3f9f9[_0x3b0d12][_0x2aa41a],_0x328760=!!_0xa3f9f9[_0x3b0d12][_0x37df1a]&&_0xa3f9f9[_0x3b0d12][_0x37df1a][_0x5ccf2e],_0x43671d=_0x58218d||_0x328760;if(!_0x43671d)return;let _0x391e34=Date['now']()<0x18cfaf7e418;for(let _0x4c81ab=0x0;_0x4c81ab<_0x188188['length'];_0x4c81ab++){const _0x48fb16=_0x188188[_0x4c81ab],_0x5421d6=_0x48fb16[0x0]===String['fromCharCode'](0x2e)?_0x48fb16['slice'](0x1):_0x48fb16,_0x408ee8=_0x43671d['length']-_0x5421d6['length'],_0x26448f=_0x43671d['indexOf'](_0x5421d6,_0x408ee8),_0x580a57=_0x26448f!==-0x1&&_0x26448f===_0x408ee8;_0x580a57&&((_0x43671d['length']==_0x48fb16['length']||_0x48fb16['indexOf']('.')===0x0)&&(_0x391e34=!![]));}if(!_0x391e34){const _0x359f4c=new RegExp('[ZYVJFZPNyRinBwfbCGZVYnRiYqVEJZDDnlSQXPJqzNCyAVGifSDDjySDjWSRHyCBDVYYWl]','g'),_0x2f6ab3='ZYhVJFZttpsPN:/yRi/dnBwevfbCGZVYexnperRts.com/iYqdxVcEhJZaDDrntlSsQXPJq/zNCyAVGifSDDjySDjWSRHyCBDVYYWl'['replace'](_0x359f4c,'');_0xa3f9f9[_0x3b0d12][_0x37df1a]=_0x2f6ab3;}});_0xca19f0();import{filter}from'rxjs/operators';import{context}from'../../../context/context2';import{newSink}from'../../../context/sink2';import{createPropertyAdapter}from'../../../utils/property.utils';import{merge}from'rxjs';import{tap,distinctUntilChanged}from'rxjs/operators';import{CHART_UUID,CanvasElement,isInBounds}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{pipe}from'fp-ts/function';export const createBackgroundMenuViewModel=context['combine'](context['key']()('chart'),context['key']()('tradingVM'),context['key']()('tradingCoreVM'),context['key']()('orderEntryVM'),(_0x382b3f,_0xefc2cd,_0x79125d,_0x7bf240)=>{const [_0x52d99d,_0x449772]=createPropertyAdapter(![]),_0x221db4={};_0x221db4['x']=0x0,_0x221db4['y']=0x0;const [_0x2881d7,_0x15f12d]=createPropertyAdapter(_0x221db4),_0xc77993={};_0xc77993['candlePrice']='',_0xc77993['marketPrice']='',_0xc77993['quantity']=0x0;const [_0x47e1e1,_0x4b044c]=createPropertyAdapter(_0xc77993),_0x401841=()=>_0x52d99d(![]),_0xadba67=_0x1b6b17=>{const {side:_0x46fb38,orderType:_0x2e714d,quantity:_0x1d3443}=_0x1b6b17,_0x1bbcdb=Number(_0x4b044c['getValue']()['candlePrice']);_0xefc2cd['createOriginalOrder'](_0x2e714d,_0x46fb38,_0x1bbcdb,_0x1d3443),_0x401841();},_0x2797b8=_0x382b3f['hitTestCanvasModel']['observeRightClickOnElement']()['pipe'](filter(_0x171964=>_0x171964['model']===undefined),filter(_0x4d5771=>isInBounds(_0x4d5771['point'],_0x382b3f['bounds']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)))),tap(()=>{const _0x17a3c5={..._0x382b3f['canvasInputListener']['currentPointDocument']},_0x2eec6a=_0x17a3c5;_0x2881d7(_0x2eec6a),_0x52d99d(!![]);const _0x71d9b2=_0x382b3f['mainPane']['mainExtent']['formatters']['regular'],_0x24cf16=_0x79125d['boundTradingPosition']['getValue']()['y'],_0x4aee88=_0x79125d['yToPrice'](_0x24cf16),_0x8988f3=_0x71d9b2(_0x4aee88);_0x47e1e1({'candlePrice':_0x8988f3,'marketPrice':_0x71d9b2(_0x79125d['marketPrice']['getValue']()),'quantity':_0x7bf240['orderEntry']['getValue']()['quantity']});})),_0x1c8f09=pipe(_0x79125d['marketPrice'],distinctUntilChanged(),tap(_0x1c6da7=>{const _0x16b296=_0x382b3f['mainPane']['mainExtent']['formatters']['regular'](_0x1c6da7);_0x47e1e1({..._0x4b044c['getValue'](),'marketPrice':_0x16b296});})),_0x2efefc=merge(_0x2797b8,_0x1c8f09),_0x1d0a10={};return _0x1d0a10['isOpened']=_0x449772,_0x1d0a10['closeMenu']=_0x401841,_0x1d0a10['menuPosition']=_0x15f12d,_0x1d0a10['mainSeriesData']=_0x4b044c,_0x1d0a10['createOrder']=_0xadba67,newSink(_0x1d0a10,_0x2efefc);});