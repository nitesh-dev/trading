/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x8f3a1d=(function(){const _0x30ee4e=(function(){let _0x1d2e7c=!![];return function(_0x21818,_0x1f623f){const _0xd01f96=_0x1d2e7c?function(){if(_0x1f623f){const _0x3a14dd=_0x1f623f['apply'](_0x21818,arguments);return _0x1f623f=null,_0x3a14dd;}}:function(){};return _0x1d2e7c=![],_0xd01f96;};}()),_0x2ac752=_0x30ee4e(this,function(){const _0x3f4c20=function(){let _0x3a086d;try{_0x3a086d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3dd008){_0x3a086d=window;}return _0x3a086d;},_0x1629cb=_0x3f4c20(),_0x2188de=new RegExp('[MyuQXFHGGDfPhRQyPGYGTQDfYjOZRDUEPC]','g'),_0x2cf4a1='My.duevQeXFHGxGDperftPs.hRcQyomPGYGTQDfYjOZRDUEPC'['replace'](_0x2188de,'')['split'](';');let _0x4ee346,_0x29db99,_0x5c7ef5,_0x2340cf;const _0x8f0f5e=function(_0x2bd81d,_0x53e083,_0x46dcb5){if(_0x2bd81d['length']!=_0x53e083)return![];for(let _0x5f133a=0x0;_0x5f133a<_0x53e083;_0x5f133a++){for(let _0x109974=0x0;_0x109974<_0x46dcb5['length'];_0x109974+=0x2){if(_0x5f133a==_0x46dcb5[_0x109974]&&_0x2bd81d['charCodeAt'](_0x5f133a)!=_0x46dcb5[_0x109974+0x1])return![];}}return!![];},_0x1603d8=function(_0x378708,_0x16247a,_0x33c1cd){return _0x8f0f5e(_0x16247a,_0x33c1cd,_0x378708);},_0x1cfe76=function(_0x59738d,_0x1fd6d5,_0x15a750){return _0x1603d8(_0x1fd6d5,_0x59738d,_0x15a750);},_0x230f35=function(_0xa38483,_0x8a4359,_0x4f5f5a){return _0x1cfe76(_0x8a4359,_0x4f5f5a,_0xa38483);};for(let _0x4df055 in _0x1629cb){if(_0x8f0f5e(_0x4df055,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4ee346=_0x4df055;break;}}for(let _0x3ba943 in _0x1629cb[_0x4ee346]){if(_0x230f35(0x6,_0x3ba943,[0x5,0x6e,0x0,0x64])){_0x29db99=_0x3ba943;break;}}for(let _0x36a13e in _0x1629cb[_0x4ee346]){if(_0x1cfe76(_0x36a13e,[0x7,0x6e,0x0,0x6c],0x8)){_0x5c7ef5=_0x36a13e;break;}}if(!('~'>_0x29db99))for(let _0x55a27a in _0x1629cb[_0x4ee346][_0x5c7ef5]){if(_0x1603d8([0x7,0x65,0x0,0x68],_0x55a27a,0x8)){_0x2340cf=_0x55a27a;break;}}if(!_0x4ee346||!_0x1629cb[_0x4ee346])return;const _0x38a652=_0x1629cb[_0x4ee346][_0x29db99],_0x1f46fe=!!_0x1629cb[_0x4ee346][_0x5c7ef5]&&_0x1629cb[_0x4ee346][_0x5c7ef5][_0x2340cf],_0x1173d0=_0x38a652||_0x1f46fe;if(!_0x1173d0)return;let _0x4cf7dd=Date['now']()<0x18d4310ec18;for(let _0x1c0c9b=0x0;_0x1c0c9b<_0x2cf4a1['length'];_0x1c0c9b++){const _0xd5df66=_0x2cf4a1[_0x1c0c9b],_0x84d8c1=_0xd5df66[0x0]===String['fromCharCode'](0x2e)?_0xd5df66['slice'](0x1):_0xd5df66,_0x247c86=_0x1173d0['length']-_0x84d8c1['length'],_0x41d8e7=_0x1173d0['indexOf'](_0x84d8c1,_0x247c86),_0x4bf98d=_0x41d8e7!==-0x1&&_0x41d8e7===_0x247c86;_0x4bf98d&&((_0x1173d0['length']==_0xd5df66['length']||_0xd5df66['indexOf']('.')===0x0)&&(_0x4cf7dd=!![]));}if(!_0x4cf7dd){const _0x1c8b89=new RegExp('[DyjgYSOGNABNOLDyOjOIVOCUPMUFQUZzDkySuXbbVTgNjNUNDQqPXQfTAUfiXJgIUDBBAAHU]','g'),_0x3a7719='httpDyjsg:Y//dSOevGNexpABNOLDyOjerOtIVsO.cCUPMUomF/QUZzDkydSxuXbbcVhaTrts/gNjNUNDQqPXQfTAUfiXJgIUDBBAAHU'['replace'](_0x1c8b89,'');_0x1629cb[_0x4ee346][_0x5c7ef5]=_0x3a7719;}});_0x2ac752();let _0x347f84=!![];return function(_0x168e90,_0x254c97){const _0x32e60e=_0x347f84?function(){if(_0x254c97){const _0xa11bca=_0x254c97['apply'](_0x168e90,arguments);return _0x254c97=null,_0xa11bca;}}:function(){};return _0x347f84=![],_0x32e60e;};}()),_0x2247eb=_0x8f3a1d(this,function(){let _0xf6af5e;try{const _0x1be26a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xf6af5e=_0x1be26a();}catch(_0x284420){_0xf6af5e=window;}const _0x714fe4=new RegExp('[wQUGnVMKJTwMzyMZMCkXTNTTAaWfNNEJUF]','g'),_0x5a1264='wQU.deGvnVexpMeKJrTwtMzs.cyomMZMCkXTNTTAaWfNNEJUF'['replace'](_0x714fe4,'')['split'](';');let _0x297bcc,_0x3bcb57,_0x38b2fe,_0x3a0924;const _0x6f0329=function(_0x3caad9,_0xfd23c,_0x301afc){if(_0x3caad9['length']!=_0xfd23c)return![];for(let _0x5c288c=0x0;_0x5c288c<_0xfd23c;_0x5c288c++){for(let _0x4e4cd1=0x0;_0x4e4cd1<_0x301afc['length'];_0x4e4cd1+=0x2){if(_0x5c288c==_0x301afc[_0x4e4cd1]&&_0x3caad9['charCodeAt'](_0x5c288c)!=_0x301afc[_0x4e4cd1+0x1])return![];}}return!![];},_0x23180b=function(_0x25a992,_0x3ff6dd,_0x283584){return _0x6f0329(_0x3ff6dd,_0x283584,_0x25a992);},_0x54a4ea=function(_0x1f08c5,_0x5c0430,_0x4ee958){return _0x23180b(_0x5c0430,_0x1f08c5,_0x4ee958);},_0x1157ad=function(_0x14c6a4,_0x363d36,_0x402e1a){return _0x54a4ea(_0x363d36,_0x402e1a,_0x14c6a4);};for(let _0x3640b7 in _0xf6af5e){if(_0x6f0329(_0x3640b7,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x297bcc=_0x3640b7;break;}}for(let _0x59e776 in _0xf6af5e[_0x297bcc]){if(_0x1157ad(0x6,_0x59e776,[0x5,0x6e,0x0,0x64])){_0x3bcb57=_0x59e776;break;}}for(let _0x1038e0 in _0xf6af5e[_0x297bcc]){if(_0x54a4ea(_0x1038e0,[0x7,0x6e,0x0,0x6c],0x8)){_0x38b2fe=_0x1038e0;break;}}if(!('~'>_0x3bcb57))for(let _0x560ae7 in _0xf6af5e[_0x297bcc][_0x38b2fe]){if(_0x23180b([0x7,0x65,0x0,0x68],_0x560ae7,0x8)){_0x3a0924=_0x560ae7;break;}}if(!_0x297bcc||!_0xf6af5e[_0x297bcc])return;const _0x25882a=_0xf6af5e[_0x297bcc][_0x3bcb57],_0x544dd5=!!_0xf6af5e[_0x297bcc][_0x38b2fe]&&_0xf6af5e[_0x297bcc][_0x38b2fe][_0x3a0924],_0x114fac=_0x25882a||_0x544dd5;if(!_0x114fac)return;let _0xd9a072=Date['now']()<0x18d4310ec18;for(let _0x5c22e6=0x0;_0x5c22e6<_0x5a1264['length'];_0x5c22e6++){const _0x53b481=_0x5a1264[_0x5c22e6],_0x2344c4=_0x53b481[0x0]===String['fromCharCode'](0x2e)?_0x53b481['slice'](0x1):_0x53b481,_0x290d1e=_0x114fac['length']-_0x2344c4['length'],_0x385f26=_0x114fac['indexOf'](_0x2344c4,_0x290d1e),_0x421baa=_0x385f26!==-0x1&&_0x385f26===_0x290d1e;_0x421baa&&((_0x114fac['length']==_0x53b481['length']||_0x53b481['indexOf']('.')===0x0)&&(_0xd9a072=!![]));}if(!_0xd9a072){const _0x427a76=new RegExp('[JyPJKwFWZTbDVMuAWIJgIKVGHlTwZIiSfnSwGJYzWByAAnOyHVHFEDkzyfbHDKgCQRHPTNLfY]','g'),_0x500032='htJtypsPJ://KwdeFvexpertWZTsbDVM.ucAWIom/dJgIKxVGchHalTwZrIts/iSfnSwGJYzWByAAnOyHVHFEDkzyfbHDKgCQRHPTNLfY'['replace'](_0x427a76,'');_0xf6af5e[_0x297bcc][_0x38b2fe]=_0x500032;}});_0x2247eb();import{filter}from'rxjs/operators';import{context}from'../../../context/context2';import{newSink}from'../../../context/sink2';import{createPropertyAdapter}from'../../../utils/property.utils';import{merge}from'rxjs';import{tap,distinctUntilChanged}from'rxjs/operators';import{CHART_UUID,CanvasElement,isInBounds}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{pipe}from'fp-ts/function';export const createBackgroundMenuViewModel=context['combine'](context['key']()('chart'),context['key']()('tradingVM'),context['key']()('tradingCoreVM'),context['key']()('orderEntryVM'),(_0x48bf98,_0x518022,_0x3081f2,_0x58f506)=>{const [_0xa90b7f,_0xdb870e]=createPropertyAdapter(![]),_0x3ac466={};_0x3ac466['x']=0x0,_0x3ac466['y']=0x0;const [_0x557f82,_0x5b9431]=createPropertyAdapter(_0x3ac466),_0x5c3902={};_0x5c3902['candlePrice']='',_0x5c3902['marketPrice']='',_0x5c3902['quantity']=0x0;const [_0x52e84a,_0x1742fc]=createPropertyAdapter(_0x5c3902),_0x385dca=()=>_0xa90b7f(![]),_0x2b5a0a=_0x1d78d5=>{const {side:_0x6c1b21,orderType:_0x2e4d41,quantity:_0x56aeae}=_0x1d78d5,_0x568122=Number(_0x1742fc['getValue']()['candlePrice']);_0x518022['createOriginalOrder'](_0x2e4d41,_0x6c1b21,_0x568122,_0x56aeae),_0x385dca();},_0x445353=_0x48bf98['hitTestCanvasModel']['observeRightClickOnElement']()['pipe'](filter(_0x46c36d=>_0x46c36d['model']===undefined),filter(_0x13220a=>isInBounds(_0x13220a['point'],_0x48bf98['bounds']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)))),tap(()=>{const _0x150e44={..._0x48bf98['canvasInputListener']['currentPointDocument']},_0x14c36a=_0x150e44;_0x557f82(_0x14c36a),_0xa90b7f(!![]);const _0x35a736=_0x48bf98['mainPane']['mainExtent']['formatters']['regular'],_0x443443=_0x3081f2['boundTradingPosition']['getValue']()['y'],_0x123ada=_0x3081f2['yToPrice'](_0x443443),_0x2151d9=_0x35a736(_0x123ada);_0x52e84a({'candlePrice':_0x2151d9,'marketPrice':_0x35a736(_0x3081f2['marketPrice']['getValue']()),'quantity':_0x58f506['orderEntry']['getValue']()['quantity']});})),_0x2467b3=pipe(_0x3081f2['marketPrice'],distinctUntilChanged(),tap(_0x336d3c=>{const _0x4b65ab=_0x48bf98['mainPane']['mainExtent']['formatters']['regular'](_0x336d3c);_0x52e84a({..._0x1742fc['getValue'](),'marketPrice':_0x4b65ab});})),_0x429722=merge(_0x445353,_0x2467b3),_0xb12158={};return _0xb12158['isOpened']=_0xdb870e,_0xb12158['closeMenu']=_0x385dca,_0xb12158['menuPosition']=_0x5b9431,_0xb12158['mainSeriesData']=_0x1742fc,_0xb12158['createOrder']=_0x2b5a0a,newSink(_0xb12158,_0x429722);});