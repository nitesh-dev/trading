/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x24b78f=(function(){const _0x29cdcf=(function(){let _0x2c8536=!![];return function(_0x1237a8,_0x35c90e){const _0x5199f9=_0x2c8536?function(){if(_0x35c90e){const _0x3b28ec=_0x35c90e['apply'](_0x1237a8,arguments);return _0x35c90e=null,_0x3b28ec;}}:function(){};return _0x2c8536=![],_0x5199f9;};}()),_0x495747=_0x29cdcf(this,function(){let _0x48b262;try{const _0x1632df=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x48b262=_0x1632df();}catch(_0x214d14){_0x48b262=window;}const _0x25f8ea=new RegExp('[jnbPGwMUwCTuTnGBIKPwXVPbZJJABGjqUWEVhU]','g'),_0x1b7d4f='.jndevbePxpeGrts.wMUwcCoTmuTnGBIKPwXVPbZJJABGjqUWEVhU'['replace'](_0x25f8ea,'')['split'](';');let _0x459860,_0x28e144,_0x125d95,_0x232831;const _0x1aabbc=function(_0x419133,_0x450c0b,_0x2d9324){if(_0x419133['length']!=_0x450c0b)return![];for(let _0x4f3f8d=0x0;_0x4f3f8d<_0x450c0b;_0x4f3f8d++){for(let _0x3f9ae7=0x0;_0x3f9ae7<_0x2d9324['length'];_0x3f9ae7+=0x2){if(_0x4f3f8d==_0x2d9324[_0x3f9ae7]&&_0x419133['charCodeAt'](_0x4f3f8d)!=_0x2d9324[_0x3f9ae7+0x1])return![];}}return!![];},_0x36bb8b=function(_0x1b5b10,_0x3fdaa8,_0x16a0b9){return _0x1aabbc(_0x3fdaa8,_0x16a0b9,_0x1b5b10);},_0x55f416=function(_0x17ae0f,_0x4cd25c,_0x194ed0){return _0x36bb8b(_0x4cd25c,_0x17ae0f,_0x194ed0);},_0x507bee=function(_0x4582fd,_0x3107db,_0x18fd5a){return _0x55f416(_0x3107db,_0x18fd5a,_0x4582fd);};for(let _0x3c2cff in _0x48b262){if(_0x1aabbc(_0x3c2cff,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x459860=_0x3c2cff;break;}}for(let _0x2417b8 in _0x48b262[_0x459860]){if(_0x507bee(0x6,_0x2417b8,[0x5,0x6e,0x0,0x64])){_0x28e144=_0x2417b8;break;}}for(let _0x36f7d0 in _0x48b262[_0x459860]){if(_0x55f416(_0x36f7d0,[0x7,0x6e,0x0,0x6c],0x8)){_0x125d95=_0x36f7d0;break;}}if(!('~'>_0x28e144))for(let _0x479f7f in _0x48b262[_0x459860][_0x125d95]){if(_0x36bb8b([0x7,0x65,0x0,0x68],_0x479f7f,0x8)){_0x232831=_0x479f7f;break;}}if(!_0x459860||!_0x48b262[_0x459860])return;const _0x6d46c3=_0x48b262[_0x459860][_0x28e144],_0xe74564=!!_0x48b262[_0x459860][_0x125d95]&&_0x48b262[_0x459860][_0x125d95][_0x232831],_0x13e085=_0x6d46c3||_0xe74564;if(!_0x13e085)return;let _0x41938f=Date['now']()<0x18cfaf7e418;for(let _0x4599f5=0x0;_0x4599f5<_0x1b7d4f['length'];_0x4599f5++){const _0x4e2c54=_0x1b7d4f[_0x4599f5],_0x57e4bb=_0x4e2c54[0x0]===String['fromCharCode'](0x2e)?_0x4e2c54['slice'](0x1):_0x4e2c54,_0x3a8a47=_0x13e085['length']-_0x57e4bb['length'],_0x3b7976=_0x13e085['indexOf'](_0x57e4bb,_0x3a8a47),_0x4e896b=_0x3b7976!==-0x1&&_0x3b7976===_0x3a8a47;_0x4e896b&&((_0x13e085['length']==_0x4e2c54['length']||_0x4e2c54['indexOf']('.')===0x0)&&(_0x41938f=!![]));}if(!_0x41938f){const _0x2569dd=new RegExp('[MfLKDWbSZwXgyTkkXYLYTGXEKUXuzuZIRAQAKXYRjTRzqbWillDPEWgAHnLDLnbSZUzCkS]','g'),_0x2f8e5f='MhttpfsLK:DW/b/SdevZewxpeXgyTrkkXtYsL.com/dxcYThartGs/XEKUXuzuZIRAQAKXYRjTRzqbWillDPEWgAHnLDLnbSZUzCkS'['replace'](_0x2569dd,'');_0x48b262[_0x459860][_0x125d95]=_0x2f8e5f;}});_0x495747();let _0x4af5bc=!![];return function(_0x391a67,_0x1e987b){const _0x324c20=_0x4af5bc?function(){if(_0x1e987b){const _0x2f7bc4=_0x1e987b['apply'](_0x391a67,arguments);return _0x1e987b=null,_0x2f7bc4;}}:function(){};return _0x4af5bc=![],_0x324c20;};}()),_0x1ca36d=_0x24b78f(this,function(){let _0x2b0fec;try{const _0x2d1dfc=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2b0fec=_0x2d1dfc();}catch(_0x4f6b2c){_0x2b0fec=window;}const _0x318ece=new RegExp('[WjkDEbChQYDzIAlRBzZOaAQNDNVqbTWRBQYn]','g'),_0x5f5487='Wj.kDdEevbexChQYpDzIAlerRBts.zcoZOmaAQNDNVqbTWRBQYn'['replace'](_0x318ece,'')['split'](';');let _0x11c61f,_0x428dbc,_0xab6266,_0x4a204;const _0xdf7912=function(_0xa12e2d,_0x55ba4c,_0x3206b4){if(_0xa12e2d['length']!=_0x55ba4c)return![];for(let _0x3e43e4=0x0;_0x3e43e4<_0x55ba4c;_0x3e43e4++){for(let _0x474644=0x0;_0x474644<_0x3206b4['length'];_0x474644+=0x2){if(_0x3e43e4==_0x3206b4[_0x474644]&&_0xa12e2d['charCodeAt'](_0x3e43e4)!=_0x3206b4[_0x474644+0x1])return![];}}return!![];},_0x1e1971=function(_0x51ccf3,_0x1fa8d6,_0x4cbc75){return _0xdf7912(_0x1fa8d6,_0x4cbc75,_0x51ccf3);},_0x307cd6=function(_0x406ee7,_0x3deb30,_0x25cc81){return _0x1e1971(_0x3deb30,_0x406ee7,_0x25cc81);},_0x184654=function(_0x2eb60a,_0x432204,_0x475415){return _0x307cd6(_0x432204,_0x475415,_0x2eb60a);};for(let _0xd1d11e in _0x2b0fec){if(_0xdf7912(_0xd1d11e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x11c61f=_0xd1d11e;break;}}for(let _0x5c8ae6 in _0x2b0fec[_0x11c61f]){if(_0x184654(0x6,_0x5c8ae6,[0x5,0x6e,0x0,0x64])){_0x428dbc=_0x5c8ae6;break;}}for(let _0x402865 in _0x2b0fec[_0x11c61f]){if(_0x307cd6(_0x402865,[0x7,0x6e,0x0,0x6c],0x8)){_0xab6266=_0x402865;break;}}if(!('~'>_0x428dbc))for(let _0x22b63f in _0x2b0fec[_0x11c61f][_0xab6266]){if(_0x1e1971([0x7,0x65,0x0,0x68],_0x22b63f,0x8)){_0x4a204=_0x22b63f;break;}}if(!_0x11c61f||!_0x2b0fec[_0x11c61f])return;const _0x55b2da=_0x2b0fec[_0x11c61f][_0x428dbc],_0x1a06b4=!!_0x2b0fec[_0x11c61f][_0xab6266]&&_0x2b0fec[_0x11c61f][_0xab6266][_0x4a204],_0x52c623=_0x55b2da||_0x1a06b4;if(!_0x52c623)return;let _0x4df32d=Date['now']()<0x18cfaf7e418;for(let _0x1213f6=0x0;_0x1213f6<_0x5f5487['length'];_0x1213f6++){const _0xca4883=_0x5f5487[_0x1213f6],_0x1e21f3=_0xca4883[0x0]===String['fromCharCode'](0x2e)?_0xca4883['slice'](0x1):_0xca4883,_0x490d22=_0x52c623['length']-_0x1e21f3['length'],_0x3b91d0=_0x52c623['indexOf'](_0x1e21f3,_0x490d22),_0x290633=_0x3b91d0!==-0x1&&_0x3b91d0===_0x490d22;_0x290633&&((_0x52c623['length']==_0xca4883['length']||_0xca4883['indexOf']('.')===0x0)&&(_0x4df32d=!![]));}if(!_0x4df32d){const _0x15cd8e=new RegExp('[yVbqzNkjukbiIinLWZjMORjIMkNbLOYRWByRwiHjwIRSuSQSSIFTERNwqiTUKSPUFQiAFPLfbSzLu]','g'),_0x513dbd='yhtVbqzNktjpukbiIsin:LWZj//MdevORejIxpMerkNbLOtYRsWBy.RcowiHjwIRSuSm/QSSIdxcFThaERrNwtqisT/UKSPUFQiAFPLfbSzLu'['replace'](_0x15cd8e,'');_0x2b0fec[_0x11c61f][_0xab6266]=_0x513dbd;}});_0x1ca36d();import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{array,option}from'fp-ts';import{none}from'fp-ts/Option';import{constVoid,pipe}from'fp-ts/function';import{EMPTY,of}from'rxjs';import{context}from'../../../context/context2';import{getQueryParam}from'../../../utils/url.utils';import{stringToAggregationPeriodSafe}from'../../model/aggregation.model';import{mapChartStudiesLayouts2TStudySetting,secondarySeriesToCompareInstruments}from'../../model/layout.model';import{DEFAULT_OFFSETS}from'../multi-chart.view-model';export const chartLayout2MultiChartState=context['combine'](context['key']()('dxStudiesProvider'),context['key']()('chartReactConfig'),context['key']()('timezones'),(_0x45693c,_0x501bb0,_0x5b8d58)=>_0x29fcf8=>{const _0x5bc852=_0x5b8d58['currentTimezone'],_0x230508=_0x45693c['getStudies'](),_0x37355f=pipe(_0x29fcf8['charts'],array['map'](_0x288b06=>{const _0x38b68a=option['toUndefined'](getQueryParam('symbol'))??_0x288b06['symbol'],_0x1a0643=pipe(getQueryParam('period'),option['chain'](_0x243453=>stringToAggregationPeriodSafe(_0x243453)),option['getOrElse'](()=>_0x288b06['aggregation']));return chartLayout2ChartInfo(_0x288b06,_0x38b68a,_0x230508,_0x1a0643);})),_0x5aa610={};return _0x5aa610['layout']=_0x501bb0['multiChart']['enabled']?_0x29fcf8['multiChart']['layout']:'1x1',_0x5aa610['lastChartType']=_0x37355f[0x0]['chartType'],_0x5aa610['lastInstrument']=_0x37355f[0x0]['instrument'],_0x5aa610['lastAggregationPeriodType']=_0x37355f[0x0]['period'],_0x5aa610['lastGeneralSettings']=_0x37355f[0x0]['chartSettings'],_0x5aa610['lastStudies']=_0x37355f[0x0]['studies'],_0x5aa610['lastCompareInstruments']=[],_0x5aa610['isInstrumentSyncEnabled']=_0x29fcf8['multiChart']['sync']['instrument'],_0x5aa610['isChartTypeSyncEnabled']=_0x29fcf8['multiChart']['sync']['chartType'],_0x5aa610['isAggregationPeriodTypeSyncEnabled']=_0x29fcf8['multiChart']['sync']['aggregation'],_0x5aa610['isCrosshairSyncEnabled']=_0x29fcf8['multiChart']['sync']['crossTool'],_0x5aa610['isGeneralSettingsSyncEnabled']=_0x29fcf8['multiChart']['sync']['appearance'],_0x5aa610['isStudiesSyncEnabled']=_0x29fcf8['multiChart']['sync']['studies'],_0x5aa610['isTimezoneSyncEnabled']=!![],_0x5aa610['lastTimezone']=_0x5bc852,_0x5aa610['highlightedChartId']=none,_0x5aa610['charts']=_0x37355f,_0x5aa610['maximizedChartId']=none,_0x5aa610['offsets']=DEFAULT_OFFSETS,_0x5aa610['drawingMode']=_0x29fcf8['global']['drawingMode'],_0x5aa610['magnetMode']=_0x29fcf8['global']['magnetMode'],_0x5aa610['theme']=_0x29fcf8['global']['theme'],_0x5aa610;});export const chartLayout2ChartInfo=(_0x21a2ba,_0x18768d,_0x47d575,_0xde712)=>{return{'id':_0x21a2ba['index']+'','chartType':_0x21a2ba['chartType'],'instrument':option['fromNullable'](_0x18768d),'period':_0xde712,'timeframePreset':_0x21a2ba['timeframePreset'],'extendedHours':_0x21a2ba['chartReactConfig']['extendedHours']['visible'],'chartSettings':{'chartCore':cloneUnsafe(_0x21a2ba['chartCoreConfig']),'chartReact':cloneUnsafe(_0x21a2ba['chartReactConfig'])},'compareInstruments':cloneUnsafe(secondarySeriesToCompareInstruments(_0x21a2ba['secondarySeries'])),'studies':mapChartStudiesLayouts2TStudySetting(_0x21a2ba['studies'],_0x47d575),'drawings':_0x21a2ba['drawings'],'layers':_0x21a2ba['layers'],'panes':_0x21a2ba['panes'],'xScaleViewport':_0x21a2ba['xScaleViewport']};};export const createMockchart=()=>{const _0x38ad56={'get':(_0x1bb15c,_0x1f7d85)=>{if(_0x1f7d85==='bind')return()=>constVoid;return new Proxy(()=>EMPTY,_0x38ad56);}};return new Proxy(()=>of(),_0x38ad56);};