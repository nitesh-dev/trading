/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xa98da9=(function(){const _0x435917=(function(){let _0x461404=!![];return function(_0xd33453,_0x4e6d34){const _0x1501ed=_0x461404?function(){if(_0x4e6d34){const _0x4226b0=_0x4e6d34['apply'](_0xd33453,arguments);return _0x4e6d34=null,_0x4226b0;}}:function(){};return _0x461404=![],_0x1501ed;};}()),_0x59329a=_0x435917(this,function(){let _0x385f1e;try{const _0xd1c57a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x385f1e=_0xd1c57a();}catch(_0x328fdf){_0x385f1e=window;}const _0x152a7d=new RegExp('[BqaXMZnDXiJfDENwqgCyMECylZklMLJMJj]','g'),_0x3e1418='Bq.daXMZevenxpertDsX.iJfDcoENmwqgCyMECylZklMLJMJj'['replace'](_0x152a7d,'')['split'](';');let _0x1321a2,_0x2e9903,_0x1dcc94,_0x2b83a5;const _0x1938cf=function(_0x109a5f,_0xd2ffc,_0x5c4ddb){if(_0x109a5f['length']!=_0xd2ffc)return![];for(let _0x1c1bd6=0x0;_0x1c1bd6<_0xd2ffc;_0x1c1bd6++){for(let _0x293ec4=0x0;_0x293ec4<_0x5c4ddb['length'];_0x293ec4+=0x2){if(_0x1c1bd6==_0x5c4ddb[_0x293ec4]&&_0x109a5f['charCodeAt'](_0x1c1bd6)!=_0x5c4ddb[_0x293ec4+0x1])return![];}}return!![];},_0x12ddbf=function(_0x47a0a7,_0x55b90b,_0x5a1a86){return _0x1938cf(_0x55b90b,_0x5a1a86,_0x47a0a7);},_0x1bd629=function(_0x2e76b7,_0x2194b4,_0x25d097){return _0x12ddbf(_0x2194b4,_0x2e76b7,_0x25d097);},_0x539d3b=function(_0x26a045,_0x1791fc,_0x3e11db){return _0x1bd629(_0x1791fc,_0x3e11db,_0x26a045);};for(let _0x211739 in _0x385f1e){if(_0x1938cf(_0x211739,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1321a2=_0x211739;break;}}for(let _0x278805 in _0x385f1e[_0x1321a2]){if(_0x539d3b(0x6,_0x278805,[0x5,0x6e,0x0,0x64])){_0x2e9903=_0x278805;break;}}for(let _0x22b1fb in _0x385f1e[_0x1321a2]){if(_0x1bd629(_0x22b1fb,[0x7,0x6e,0x0,0x6c],0x8)){_0x1dcc94=_0x22b1fb;break;}}if(!('~'>_0x2e9903))for(let _0x128cbc in _0x385f1e[_0x1321a2][_0x1dcc94]){if(_0x12ddbf([0x7,0x65,0x0,0x68],_0x128cbc,0x8)){_0x2b83a5=_0x128cbc;break;}}if(!_0x1321a2||!_0x385f1e[_0x1321a2])return;const _0x4e52bf=_0x385f1e[_0x1321a2][_0x2e9903],_0x1098fe=!!_0x385f1e[_0x1321a2][_0x1dcc94]&&_0x385f1e[_0x1321a2][_0x1dcc94][_0x2b83a5],_0x5462d6=_0x4e52bf||_0x1098fe;if(!_0x5462d6)return;let _0x5e5a77=Date['now']()<0x18d4310ec18;for(let _0x4de262=0x0;_0x4de262<_0x3e1418['length'];_0x4de262++){const _0x3421a7=_0x3e1418[_0x4de262],_0x48f767=_0x3421a7[0x0]===String['fromCharCode'](0x2e)?_0x3421a7['slice'](0x1):_0x3421a7,_0x4befde=_0x5462d6['length']-_0x48f767['length'],_0x1cbeff=_0x5462d6['indexOf'](_0x48f767,_0x4befde),_0x3ab672=_0x1cbeff!==-0x1&&_0x1cbeff===_0x4befde;_0x3ab672&&((_0x5462d6['length']==_0x3421a7['length']||_0x3421a7['indexOf']('.')===0x0)&&(_0x5e5a77=!![]));}if(!_0x5e5a77){const _0x43e7ab=new RegExp('[RbzVZzHVSWjXAIORfIlVLAQYjFKANLEKDFBnEIbEfnXlzXKlENMTnzRLVilnAzNCFYGYbWNTID]','g'),_0x43af45='RbzhttVps:Zz/HV/dSWejXAIORvexpfIlVLAQeYjrFtKAsNL.cEKDFBomn/dEIbxchEfnaXrtlzs/XKlENMTnzRLVilnAzNCFYGYbWNTID'['replace'](_0x43e7ab,'');_0x385f1e[_0x1321a2][_0x1dcc94]=_0x43af45;}});_0x59329a();let _0x23918f=!![];return function(_0x48ff99,_0x44130e){const _0x18fd21=_0x23918f?function(){if(_0x44130e){const _0x5b03ec=_0x44130e['apply'](_0x48ff99,arguments);return _0x44130e=null,_0x5b03ec;}}:function(){};return _0x23918f=![],_0x18fd21;};}()),_0x115586=_0xa98da9(this,function(){let _0x3f9737;try{const _0x11841b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3f9737=_0x11841b();}catch(_0x173d87){_0x3f9737=window;}const _0x324126=new RegExp('[hCFGABnguDRaOQgIDPCyWTZQWLVFgkJELI]','g'),_0x7cc6b9='.hdCeFveGABxpertnsg.comuDRaOQgIDPCyWTZQWLVFgkJELI'['replace'](_0x324126,'')['split'](';');let _0x13a209,_0x238cff,_0x14a174,_0x16105b;const _0xf4bd12=function(_0x33e3d7,_0x480865,_0x12ff7d){if(_0x33e3d7['length']!=_0x480865)return![];for(let _0x11b0bc=0x0;_0x11b0bc<_0x480865;_0x11b0bc++){for(let _0xeaacb8=0x0;_0xeaacb8<_0x12ff7d['length'];_0xeaacb8+=0x2){if(_0x11b0bc==_0x12ff7d[_0xeaacb8]&&_0x33e3d7['charCodeAt'](_0x11b0bc)!=_0x12ff7d[_0xeaacb8+0x1])return![];}}return!![];},_0x505401=function(_0x437a4b,_0x441dec,_0x4127a9){return _0xf4bd12(_0x441dec,_0x4127a9,_0x437a4b);},_0x400b52=function(_0x141a3c,_0x3ddf1f,_0x15f9b5){return _0x505401(_0x3ddf1f,_0x141a3c,_0x15f9b5);},_0x2a83d8=function(_0x5e5a88,_0x4c39f1,_0x2d3323){return _0x400b52(_0x4c39f1,_0x2d3323,_0x5e5a88);};for(let _0x2d5c62 in _0x3f9737){if(_0xf4bd12(_0x2d5c62,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x13a209=_0x2d5c62;break;}}for(let _0x31d70a in _0x3f9737[_0x13a209]){if(_0x2a83d8(0x6,_0x31d70a,[0x5,0x6e,0x0,0x64])){_0x238cff=_0x31d70a;break;}}for(let _0x315183 in _0x3f9737[_0x13a209]){if(_0x400b52(_0x315183,[0x7,0x6e,0x0,0x6c],0x8)){_0x14a174=_0x315183;break;}}if(!('~'>_0x238cff))for(let _0x3719c8 in _0x3f9737[_0x13a209][_0x14a174]){if(_0x505401([0x7,0x65,0x0,0x68],_0x3719c8,0x8)){_0x16105b=_0x3719c8;break;}}if(!_0x13a209||!_0x3f9737[_0x13a209])return;const _0x2a70df=_0x3f9737[_0x13a209][_0x238cff],_0x3ee681=!!_0x3f9737[_0x13a209][_0x14a174]&&_0x3f9737[_0x13a209][_0x14a174][_0x16105b],_0x5f4305=_0x2a70df||_0x3ee681;if(!_0x5f4305)return;let _0x6e6860=Date['now']()<0x18d4310ec18;for(let _0x336165=0x0;_0x336165<_0x7cc6b9['length'];_0x336165++){const _0x3f9eae=_0x7cc6b9[_0x336165],_0x5ed879=_0x3f9eae[0x0]===String['fromCharCode'](0x2e)?_0x3f9eae['slice'](0x1):_0x3f9eae,_0x3778e2=_0x5f4305['length']-_0x5ed879['length'],_0x2fc3a5=_0x5f4305['indexOf'](_0x5ed879,_0x3778e2),_0xb1e6ff=_0x2fc3a5!==-0x1&&_0x2fc3a5===_0x3778e2;_0xb1e6ff&&((_0x5f4305['length']==_0x3f9eae['length']||_0x3f9eae['indexOf']('.')===0x0)&&(_0x6e6860=!![]));}if(!_0x6e6860){const _0x3a3c6c=new RegExp('[GIOVNJAinDnQUULzZgVACTPCTZVSTXnyLVDbHkUPRnuXCgEWDLXOzwIKwwGLynYLZWXSGBM]','g'),_0xcb7b54='GIhOttps:VNJA//idneveDxpnerQtsU.comULz/dZxgVchaArCTPCTZts/VSTXnyLVDbHkUPRnuXCgEWDLXOzwIKwwGLynYLZWXSGBM'['replace'](_0x3a3c6c,'');_0x3f9737[_0x13a209][_0x14a174]=_0xcb7b54;}});_0x115586();import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{array,option}from'fp-ts';import{none}from'fp-ts/Option';import{constVoid,pipe}from'fp-ts/function';import{EMPTY,of}from'rxjs';import{context}from'../../../context/context2';import{getQueryParam}from'../../../utils/url.utils';import{stringToAggregationPeriodSafe}from'../../model/aggregation.model';import{mapChartStudiesLayouts2TStudySetting,secondarySeriesToCompareInstruments}from'../../model/layout.model';import{DEFAULT_OFFSETS}from'../multi-chart.view-model';export const chartLayout2MultiChartState=context['combine'](context['key']()('dxStudiesProvider'),context['key']()('chartReactConfig'),context['key']()('timezones'),(_0x13adeb,_0x39536d,_0x2394cb)=>_0x20400f=>{const _0x58abbc=_0x2394cb['currentTimezone'],_0x5b0503=_0x13adeb['getStudies'](),_0x23af7b=pipe(_0x20400f['charts'],array['map'](_0x3f63c3=>{const _0x5eca56=option['toUndefined'](getQueryParam('symbol'))??_0x3f63c3['symbol'],_0x5ae1c1=pipe(getQueryParam('period'),option['chain'](_0x366d5f=>stringToAggregationPeriodSafe(_0x366d5f)),option['getOrElse'](()=>_0x3f63c3['aggregation']));return chartLayout2ChartInfo(_0x3f63c3,_0x5eca56,_0x5b0503,_0x5ae1c1);})),_0x333803={};return _0x333803['layout']=_0x39536d['multiChart']['enabled']?_0x20400f['multiChart']['layout']:'1x1',_0x333803['lastChartType']=_0x23af7b[0x0]['chartType'],_0x333803['lastInstrument']=_0x23af7b[0x0]['instrument'],_0x333803['lastAggregationPeriodType']=_0x23af7b[0x0]['period'],_0x333803['lastGeneralSettings']=_0x23af7b[0x0]['chartSettings'],_0x333803['lastStudies']=_0x23af7b[0x0]['studies'],_0x333803['lastCompareInstruments']=[],_0x333803['isInstrumentSyncEnabled']=_0x20400f['multiChart']['sync']['instrument'],_0x333803['isChartTypeSyncEnabled']=_0x20400f['multiChart']['sync']['chartType'],_0x333803['isAggregationPeriodTypeSyncEnabled']=_0x20400f['multiChart']['sync']['aggregation'],_0x333803['isCrosshairSyncEnabled']=_0x20400f['multiChart']['sync']['crossTool'],_0x333803['isGeneralSettingsSyncEnabled']=_0x20400f['multiChart']['sync']['appearance'],_0x333803['isStudiesSyncEnabled']=_0x20400f['multiChart']['sync']['studies'],_0x333803['isTimezoneSyncEnabled']=!![],_0x333803['lastTimezone']=_0x58abbc,_0x333803['highlightedChartId']=none,_0x333803['charts']=_0x23af7b,_0x333803['maximizedChartId']=none,_0x333803['offsets']=DEFAULT_OFFSETS,_0x333803['drawingMode']=_0x20400f['global']['drawingMode'],_0x333803['magnetMode']=_0x20400f['global']['magnetMode'],_0x333803['theme']=_0x20400f['global']['theme'],_0x333803;});export const chartLayout2ChartInfo=(_0x38063b,_0x4eb842,_0x2f56e2,_0x1a07ce)=>{return{'id':_0x38063b['index']+'','chartType':_0x38063b['chartType'],'instrument':option['fromNullable'](_0x4eb842),'period':_0x1a07ce,'timeframePreset':_0x38063b['timeframePreset'],'extendedHours':_0x38063b['chartReactConfig']['extendedHours']['visible'],'chartSettings':{'chartCore':cloneUnsafe(_0x38063b['chartCoreConfig']),'chartReact':cloneUnsafe(_0x38063b['chartReactConfig'])},'compareInstruments':cloneUnsafe(secondarySeriesToCompareInstruments(_0x38063b['secondarySeries'])),'studies':mapChartStudiesLayouts2TStudySetting(_0x38063b['studies'],_0x2f56e2),'drawings':_0x38063b['drawings'],'layers':_0x38063b['layers'],'panes':_0x38063b['panes'],'xScaleViewport':_0x38063b['xScaleViewport']};};export const createMockchart=()=>{const _0x2090a3={'get':(_0x26195c,_0x3bbb49)=>{if(_0x3bbb49==='bind')return()=>constVoid;return new Proxy(()=>EMPTY,_0x2090a3);}};return new Proxy(()=>of(),_0x2090a3);};