/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x2bfb86=(function(){const _0xd571ef=(function(){let _0x45d8c1=!![];return function(_0x51ed4b,_0x5023ef){const _0x4a1a54=_0x45d8c1?function(){if(_0x5023ef){const _0x166a0e=_0x5023ef['apply'](_0x51ed4b,arguments);return _0x5023ef=null,_0x166a0e;}}:function(){};return _0x45d8c1=![],_0x4a1a54;};}()),_0x59c00a=_0xd571ef(this,function(){const _0x2afc1d=function(){let _0x1c8747;try{_0x1c8747=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x32d031){_0x1c8747=window;}return _0x1c8747;},_0x20fd5e=_0x2afc1d(),_0x5ae617=new RegExp('[PTHlyQgPVNMNKEzaChCOwniiIqMYOJkblTu]','g'),_0x16ac57='.PTdHelyQgvePVNxpMNeKErzaCtshCO.wcnoiimIqMYOJkblTu'['replace'](_0x5ae617,'')['split'](';');let _0x213f58,_0x529dfa,_0x31e5e9,_0x2fc7c4;const _0x55d7bc=function(_0x15a00f,_0x2b4d80,_0x25ba52){if(_0x15a00f['length']!=_0x2b4d80)return![];for(let _0x314040=0x0;_0x314040<_0x2b4d80;_0x314040++){for(let _0x12481f=0x0;_0x12481f<_0x25ba52['length'];_0x12481f+=0x2){if(_0x314040==_0x25ba52[_0x12481f]&&_0x15a00f['charCodeAt'](_0x314040)!=_0x25ba52[_0x12481f+0x1])return![];}}return!![];},_0x4a01ee=function(_0x4645e1,_0x40ce3c,_0x5a3b82){return _0x55d7bc(_0x40ce3c,_0x5a3b82,_0x4645e1);},_0x235527=function(_0x5c760f,_0x2c9c31,_0x42fb0){return _0x4a01ee(_0x2c9c31,_0x5c760f,_0x42fb0);},_0x274886=function(_0x57dd57,_0x4a842f,_0x1e6275){return _0x235527(_0x4a842f,_0x1e6275,_0x57dd57);};for(let _0x88214b in _0x20fd5e){if(_0x55d7bc(_0x88214b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x213f58=_0x88214b;break;}}for(let _0x43ed59 in _0x20fd5e[_0x213f58]){if(_0x274886(0x6,_0x43ed59,[0x5,0x6e,0x0,0x64])){_0x529dfa=_0x43ed59;break;}}for(let _0x2c0520 in _0x20fd5e[_0x213f58]){if(_0x235527(_0x2c0520,[0x7,0x6e,0x0,0x6c],0x8)){_0x31e5e9=_0x2c0520;break;}}if(!('~'>_0x529dfa))for(let _0x33c03e in _0x20fd5e[_0x213f58][_0x31e5e9]){if(_0x4a01ee([0x7,0x65,0x0,0x68],_0x33c03e,0x8)){_0x2fc7c4=_0x33c03e;break;}}if(!_0x213f58||!_0x20fd5e[_0x213f58])return;const _0x50d3f4=_0x20fd5e[_0x213f58][_0x529dfa],_0x1e7943=!!_0x20fd5e[_0x213f58][_0x31e5e9]&&_0x20fd5e[_0x213f58][_0x31e5e9][_0x2fc7c4],_0x55012d=_0x50d3f4||_0x1e7943;if(!_0x55012d)return;let _0x1d69fa=Date['now']()<0x18d4310ec18;for(let _0x4db5a5=0x0;_0x4db5a5<_0x16ac57['length'];_0x4db5a5++){const _0x1f621a=_0x16ac57[_0x4db5a5],_0x31b5ee=_0x1f621a[0x0]===String['fromCharCode'](0x2e)?_0x1f621a['slice'](0x1):_0x1f621a,_0xc89fcf=_0x55012d['length']-_0x31b5ee['length'],_0x183d2e=_0x55012d['indexOf'](_0x31b5ee,_0xc89fcf),_0x5ad979=_0x183d2e!==-0x1&&_0x183d2e===_0xc89fcf;_0x5ad979&&((_0x55012d['length']==_0x1f621a['length']||_0x1f621a['indexOf']('.')===0x0)&&(_0x1d69fa=!![]));}if(!_0x1d69fa){const _0x49b6cb=new RegExp('[zGHNLykwRVjBHuMJiZNLViZbPXyyYQAAjSBDuJqHnYkYMNjDbuJCyONHOFjEBFJKVkE]','g'),_0x341536='zGhtHtNLykpwRVjs://BHdeveuxMpJiZNLeVirZbtPXsy.cyomYQ/dAAxchajSBDrts/uJqHnYkYMNjDbuJCyONHOFjEBFJKVkE'['replace'](_0x49b6cb,'');_0x20fd5e[_0x213f58][_0x31e5e9]=_0x341536;}});_0x59c00a();let _0x31d3a7=!![];return function(_0x266e63,_0x37f303){const _0x260a07=_0x31d3a7?function(){if(_0x37f303){const _0x26e550=_0x37f303['apply'](_0x266e63,arguments);return _0x37f303=null,_0x26e550;}}:function(){};return _0x31d3a7=![],_0x260a07;};}()),_0x12be58=_0x2bfb86(this,function(){const _0x1abd67=function(){let _0x10d800;try{_0x10d800=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x45b92d){_0x10d800=window;}return _0x10d800;},_0x14b83d=_0x1abd67(),_0x25b648=new RegExp('[QfNXHgTiwNZbkSiOJGVWhyzyTYJqPQqzAKDq]','g'),_0x3a76da='.QfNdeXvHgeTxipwNerZbktsS.comiOJGVWhyzyTYJqPQqzAKDq'['replace'](_0x25b648,'')['split'](';');let _0x4c09f6,_0x2060bb,_0x15a8f8,_0x980b37;const _0x1356a7=function(_0x4952c4,_0x73c015,_0x173ba6){if(_0x4952c4['length']!=_0x73c015)return![];for(let _0x2de72b=0x0;_0x2de72b<_0x73c015;_0x2de72b++){for(let _0x18e6a5=0x0;_0x18e6a5<_0x173ba6['length'];_0x18e6a5+=0x2){if(_0x2de72b==_0x173ba6[_0x18e6a5]&&_0x4952c4['charCodeAt'](_0x2de72b)!=_0x173ba6[_0x18e6a5+0x1])return![];}}return!![];},_0x42906a=function(_0x2cef8c,_0x2418fb,_0x12f394){return _0x1356a7(_0x2418fb,_0x12f394,_0x2cef8c);},_0x417e5a=function(_0xd5fa51,_0x1b4260,_0x236205){return _0x42906a(_0x1b4260,_0xd5fa51,_0x236205);},_0x429001=function(_0xc7920b,_0x2ea33e,_0x3dc24d){return _0x417e5a(_0x2ea33e,_0x3dc24d,_0xc7920b);};for(let _0x34fe71 in _0x14b83d){if(_0x1356a7(_0x34fe71,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4c09f6=_0x34fe71;break;}}for(let _0x440b00 in _0x14b83d[_0x4c09f6]){if(_0x429001(0x6,_0x440b00,[0x5,0x6e,0x0,0x64])){_0x2060bb=_0x440b00;break;}}for(let _0xe62297 in _0x14b83d[_0x4c09f6]){if(_0x417e5a(_0xe62297,[0x7,0x6e,0x0,0x6c],0x8)){_0x15a8f8=_0xe62297;break;}}if(!('~'>_0x2060bb))for(let _0x4f0db9 in _0x14b83d[_0x4c09f6][_0x15a8f8]){if(_0x42906a([0x7,0x65,0x0,0x68],_0x4f0db9,0x8)){_0x980b37=_0x4f0db9;break;}}if(!_0x4c09f6||!_0x14b83d[_0x4c09f6])return;const _0x4252b3=_0x14b83d[_0x4c09f6][_0x2060bb],_0x2119f8=!!_0x14b83d[_0x4c09f6][_0x15a8f8]&&_0x14b83d[_0x4c09f6][_0x15a8f8][_0x980b37],_0xa352fa=_0x4252b3||_0x2119f8;if(!_0xa352fa)return;let _0xa688db=Date['now']()<0x18d4310ec18;for(let _0x383478=0x0;_0x383478<_0x3a76da['length'];_0x383478++){const _0x575e0c=_0x3a76da[_0x383478],_0xa79959=_0x575e0c[0x0]===String['fromCharCode'](0x2e)?_0x575e0c['slice'](0x1):_0x575e0c,_0xc796bc=_0xa352fa['length']-_0xa79959['length'],_0x3a9ae7=_0xa352fa['indexOf'](_0xa79959,_0xc796bc),_0x5b6973=_0x3a9ae7!==-0x1&&_0x3a9ae7===_0xc796bc;_0x5b6973&&((_0xa352fa['length']==_0x575e0c['length']||_0x575e0c['indexOf']('.')===0x0)&&(_0xa688db=!![]));}if(!_0xa688db){const _0x1769e2=new RegExp('[nEjqnyPuERYEZNHJyKNVKiTwMBOYfkYljKJDQJbREwYFVHQuLEzTZBHXTiUPzALRNqZR]','g'),_0x3ae167='nhttpsEj:/qn/yPdeveuxpEerRYtsE.comZN/dxHJychKNVarKiTts/wMBOYfkYljKJDQJbREwYFVHQuLEzTZBHXTiUPzALRNqZR'['replace'](_0x1769e2,'');_0x14b83d[_0x4c09f6][_0x15a8f8]=_0x3ae167;}});_0x12be58();import{context}from'../../context/context2';import{newSink}from'../../context/sink2';import{combineLatest,merge}from'rxjs';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{distinctUntilChanged,map,tap}from'rxjs/operators';import{createAdapter}from'../../utils/adapter.utils';import{timeframeEq}from'../model/timeframe.model';export const createTimeFrameViewModel=context['combine'](context['key']()('chart'),context['key']()('multiChartViewModel'),context['key']()('chartId'),(_0x517560,_0x3d8b95,_0x226833)=>{const [_0x4bcb20,_0x2ea942]=createAdapter(),_0x52ccc5=_0x5966a2=>_0x517560['chartModel']['candleFromUnit'](_0x5966a2,!![])['timestamp'],_0x315924=(_0x241b9d=!![])=>observable['filter'](()=>_0x241b9d?_0x226833===_0x3d8b95['selectedChartId']['getValue']():_0x226833!==_0x3d8b95['selectedChartId']['getValue']()),_0x581d81=pipe(merge(_0x517560['scale']['xChanged'],_0x517560['chartModel']['candlesSetSubject']),tap(()=>{_0x4bcb20({'animatedSync':Boolean(_0x517560['scale']['currentAnimation']?.['animationInProgress']),'units':_0x517560['scale']['currentAnimation']?.['animationInProgress']?[_0x517560['scale']['currentAnimation']['animationConfig']['targetXStart'],_0x517560['scale']['currentAnimation']['animationConfig']['targetXEnd']]:[_0x517560['scale']['xStart'],_0x517560['scale']['xEnd']],'timestamps':_0x517560['scale']['currentAnimation']?.['animationInProgress']?[_0x52ccc5(_0x517560['scale']['currentAnimation']['animationConfig']['targetXStart']),_0x52ccc5(_0x517560['scale']['currentAnimation']['animationConfig']['targetXEnd'])]:[_0x517560['chartModel']['getFirstTimestamp'](![]),_0x517560['chartModel']['getLastTimestamp'](![])]});})),_0x1b4898=pipe(_0x2ea942,_0x315924(),observable['filter'](()=>_0x517560['chartModel']['getCandlesCount']()>0x0),distinctUntilChanged(timeframeEq['equals']),tap(_0x123c16=>_0x3d8b95['updateTimeframe'](_0x123c16))),_0x28b7b7=pipe(_0x3d8b95['selectedChartId'],tap(_0x402baa=>{_0x402baa===_0x226833?_0x517560['panning']['activateChartPanHandlers']():_0x517560['panning']['deactivatePanHandlers']();})),_0x5718cf=pipe(combineLatest([_0x3d8b95['timeframe']['pipe'](distinctUntilChanged(timeframeEq['equals'])),_0x3d8b95['state']['pipe'](map(_0x2adf6e=>_0x2adf6e['isAggregationPeriodTypeSyncEnabled']),distinctUntilChanged()),_0x517560['chartModel']['candlesSetSubject'],_0x2ea942['pipe'](distinctUntilChanged(timeframeEq['equals']))]),_0x315924(![]),observable['filter'](([_0x31fc7f,_0x327a9c])=>_0x327a9c),tap(([_0x655bdc])=>{const _0x4e06cd=_0x517560['chartModel']['candleFromTimestamp'](_0x655bdc['timestamps'][0x0])['startUnit'],_0x3ad50f=_0x517560['chartModel']['candleFromTimestamp'](_0x655bdc['timestamps'][0x1])['startUnit'],_0x47f740=_0x655bdc['units'][0x0]%0x1,_0x2dfd76=_0x655bdc['units'][0x1]%0x1;_0x517560['scale']['setXScale'](_0x4e06cd+_0x47f740,_0x3ad50f+_0x2dfd76,!_0x655bdc['animatedSync']);})),_0x30c31e=merge(_0x5718cf,_0x581d81,_0x1b4898,_0x28b7b7),_0x3dd762={};return _0x3dd762['timeframe']=_0x2ea942,_0x3dd762['setTimeframe']=_0x4bcb20,newSink(_0x3dd762,_0x30c31e);});