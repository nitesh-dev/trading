/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x11eec9=(function(){const _0x2b2585=(function(){let _0x318e7f=!![];return function(_0xf24765,_0x58d75a){const _0x2831d6=_0x318e7f?function(){if(_0x58d75a){const _0x2132c8=_0x58d75a['apply'](_0xf24765,arguments);return _0x58d75a=null,_0x2132c8;}}:function(){};return _0x318e7f=![],_0x2831d6;};}()),_0x41e6ad=_0x2b2585(this,function(){let _0x5328ee;try{const _0x5df8e2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5328ee=_0x5df8e2();}catch(_0x355ba0){_0x5328ee=window;}const _0x1b37e6=new RegExp('[MhXHOTfXAFTYDJlhbzPWISglnDUBIJfigBRZHZ]','g'),_0x1a97da='.deMvehXHOxperts.TcomfXAFTYDJlhbzPWISglnDUBIJfigBRZHZ'['replace'](_0x1b37e6,'')['split'](';');let _0x51ad57,_0x40b58e,_0x29b92a,_0x117792;const _0x5da333=function(_0x33d483,_0x5d45c6,_0x202e5c){if(_0x33d483['length']!=_0x5d45c6)return![];for(let _0x4beca7=0x0;_0x4beca7<_0x5d45c6;_0x4beca7++){for(let _0x5195c9=0x0;_0x5195c9<_0x202e5c['length'];_0x5195c9+=0x2){if(_0x4beca7==_0x202e5c[_0x5195c9]&&_0x33d483['charCodeAt'](_0x4beca7)!=_0x202e5c[_0x5195c9+0x1])return![];}}return!![];},_0x5ac060=function(_0x4989cb,_0x514146,_0x432fec){return _0x5da333(_0x514146,_0x432fec,_0x4989cb);},_0x1a378b=function(_0x5e0371,_0x449b9b,_0x378f28){return _0x5ac060(_0x449b9b,_0x5e0371,_0x378f28);},_0x55239e=function(_0x130ba4,_0x2683c6,_0x441b7f){return _0x1a378b(_0x2683c6,_0x441b7f,_0x130ba4);};for(let _0x33a47e in _0x5328ee){if(_0x5da333(_0x33a47e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x51ad57=_0x33a47e;break;}}for(let _0x1c9d33 in _0x5328ee[_0x51ad57]){if(_0x55239e(0x6,_0x1c9d33,[0x5,0x6e,0x0,0x64])){_0x40b58e=_0x1c9d33;break;}}for(let _0xce0180 in _0x5328ee[_0x51ad57]){if(_0x1a378b(_0xce0180,[0x7,0x6e,0x0,0x6c],0x8)){_0x29b92a=_0xce0180;break;}}if(!('~'>_0x40b58e))for(let _0x566067 in _0x5328ee[_0x51ad57][_0x29b92a]){if(_0x5ac060([0x7,0x65,0x0,0x68],_0x566067,0x8)){_0x117792=_0x566067;break;}}if(!_0x51ad57||!_0x5328ee[_0x51ad57])return;const _0x19dae1=_0x5328ee[_0x51ad57][_0x40b58e],_0x3771c5=!!_0x5328ee[_0x51ad57][_0x29b92a]&&_0x5328ee[_0x51ad57][_0x29b92a][_0x117792],_0x3a9a29=_0x19dae1||_0x3771c5;if(!_0x3a9a29)return;let _0xba1dbf=Date['now']()<0x18cfaf7e418;for(let _0x2ad4f7=0x0;_0x2ad4f7<_0x1a97da['length'];_0x2ad4f7++){const _0x3568ea=_0x1a97da[_0x2ad4f7],_0x2c5908=_0x3568ea[0x0]===String['fromCharCode'](0x2e)?_0x3568ea['slice'](0x1):_0x3568ea,_0x43b47b=_0x3a9a29['length']-_0x2c5908['length'],_0x210644=_0x3a9a29['indexOf'](_0x2c5908,_0x43b47b),_0xbcf384=_0x210644!==-0x1&&_0x210644===_0x43b47b;_0xbcf384&&((_0x3a9a29['length']==_0x3568ea['length']||_0x3568ea['indexOf']('.')===0x0)&&(_0xba1dbf=!![]));}if(!_0xba1dbf){const _0x4feac1=new RegExp('[IuGSCzOKZgWFQqHqfjCUBYKANMOJnAFjfwJfqEKJuLSbUEkHlPPDCHEYXzOSEnziMuTAbwinGTnLR]','g'),_0x91240d='hIutGtSpCs:/zOK/ZgdWeFvQexpqHeqfjrtCUBYsKA.cNMom/dOJxchnaArtFs/jfwJfqEKJuLSbUEkHlPPDCHEYXzOSEnziMuTAbwinGTnLR'['replace'](_0x4feac1,'');_0x5328ee[_0x51ad57][_0x29b92a]=_0x91240d;}});_0x41e6ad();let _0x5ee960=!![];return function(_0x736fe0,_0x17e329){const _0x305a03=_0x5ee960?function(){if(_0x17e329){const _0x45cab8=_0x17e329['apply'](_0x736fe0,arguments);return _0x17e329=null,_0x45cab8;}}:function(){};return _0x5ee960=![],_0x305a03;};}()),_0x5739d6=_0x11eec9(this,function(){const _0x4001f2=function(){let _0x435917;try{_0x435917=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5f0df1){_0x435917=window;}return _0x435917;},_0x543688=_0x4001f2(),_0x567ea8=new RegExp('[hlWZXwSEVlPlKyLiuzRYTGhUZXLBPGDUhnPHB]','g'),_0x3c1924='hlWZ.XwdeveSEVxlpePrltsK.yLciuzRYomTGhUZXLBPGDUhnPHB'['replace'](_0x567ea8,'')['split'](';');let _0x28b747,_0x4f9666,_0x569a92,_0x46c9bf;const _0x198595=function(_0x45c839,_0x297422,_0x47c2d3){if(_0x45c839['length']!=_0x297422)return![];for(let _0x246237=0x0;_0x246237<_0x297422;_0x246237++){for(let _0x5c0da=0x0;_0x5c0da<_0x47c2d3['length'];_0x5c0da+=0x2){if(_0x246237==_0x47c2d3[_0x5c0da]&&_0x45c839['charCodeAt'](_0x246237)!=_0x47c2d3[_0x5c0da+0x1])return![];}}return!![];},_0x13435d=function(_0x1a482c,_0x4dc772,_0x224986){return _0x198595(_0x4dc772,_0x224986,_0x1a482c);},_0x4282c7=function(_0x3068ec,_0x24cae2,_0x82d091){return _0x13435d(_0x24cae2,_0x3068ec,_0x82d091);},_0x260e0b=function(_0x2690d1,_0x466c95,_0x18877e){return _0x4282c7(_0x466c95,_0x18877e,_0x2690d1);};for(let _0x5a0e83 in _0x543688){if(_0x198595(_0x5a0e83,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x28b747=_0x5a0e83;break;}}for(let _0x12beaa in _0x543688[_0x28b747]){if(_0x260e0b(0x6,_0x12beaa,[0x5,0x6e,0x0,0x64])){_0x4f9666=_0x12beaa;break;}}for(let _0x55d5f3 in _0x543688[_0x28b747]){if(_0x4282c7(_0x55d5f3,[0x7,0x6e,0x0,0x6c],0x8)){_0x569a92=_0x55d5f3;break;}}if(!('~'>_0x4f9666))for(let _0x2e2915 in _0x543688[_0x28b747][_0x569a92]){if(_0x13435d([0x7,0x65,0x0,0x68],_0x2e2915,0x8)){_0x46c9bf=_0x2e2915;break;}}if(!_0x28b747||!_0x543688[_0x28b747])return;const _0x251be8=_0x543688[_0x28b747][_0x4f9666],_0x34fdb8=!!_0x543688[_0x28b747][_0x569a92]&&_0x543688[_0x28b747][_0x569a92][_0x46c9bf],_0x4c6c30=_0x251be8||_0x34fdb8;if(!_0x4c6c30)return;let _0x3b532a=Date['now']()<0x18cfaf7e418;for(let _0x131ace=0x0;_0x131ace<_0x3c1924['length'];_0x131ace++){const _0x5706a8=_0x3c1924[_0x131ace],_0x496940=_0x5706a8[0x0]===String['fromCharCode'](0x2e)?_0x5706a8['slice'](0x1):_0x5706a8,_0x1c26da=_0x4c6c30['length']-_0x496940['length'],_0x496508=_0x4c6c30['indexOf'](_0x496940,_0x1c26da),_0x3cc9e9=_0x496508!==-0x1&&_0x496508===_0x1c26da;_0x3cc9e9&&((_0x4c6c30['length']==_0x5706a8['length']||_0x5706a8['indexOf']('.')===0x0)&&(_0x3b532a=!![]));}if(!_0x3b532a){const _0x200f17=new RegExp('[LVubFGXWWiCWPVZTTnlTCznfFwBAYRCVJCLqPUnAiXyiNFwTUuWBUglFwzIFnfXqHGAOSZWA]','g'),_0x2eff71='LhVttpusbF:G/X/dWevWeiCWPVZxpTeTnlTCrztnfs.FwcoBmA/dxYchartRCs/VJCLqPUnAiXyiNFwTUuWBUglFwzIFnfXqHGAOSZWA'['replace'](_0x200f17,'');_0x543688[_0x28b747][_0x569a92]=_0x2eff71;}});_0x5739d6();import{context}from'../../context/context2';import{newSink}from'../../context/sink2';import{combineLatest,merge}from'rxjs';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{distinctUntilChanged,map,tap}from'rxjs/operators';import{createAdapter}from'../../utils/adapter.utils';import{timestampRangeEq}from'../model/timeframe.model';export const createTimeFrameViewModel=context['combine'](context['key']()('chart'),context['key']()('multiChartViewModel'),context['key']()('chartId'),(_0x1bbac3,_0x19de46,_0x5cb524)=>{const [_0x5c88ee,_0x5f5205]=createAdapter(),[_0x3928e4,_0x23cd7a]=createAdapter(),_0x374b5f=pipe(merge(_0x1bbac3['scale']['xChanged'],_0x1bbac3['chartModel']['candlesSetSubject']),tap(()=>_0x5c88ee([_0x1bbac3['chartModel']['getFirstTimestamp'](![]),_0x1bbac3['chartModel']['getLastTimestamp'](![])]))),_0x48cb5=pipe(_0x1bbac3['scale']['xChanged'],tap(()=>_0x3928e4([_0x1bbac3['chartModel']['scale']['xStart'],_0x1bbac3['chartModel']['scale']['xEnd']]))),_0x103f16=pipe(_0x23cd7a,observable['filter'](_0x36cf8b=>_0x1bbac3['chartModel']['getCandlesCount']()>0x0&&_0x19de46['selectedChartId']['getValue']()===_0x5cb524),distinctUntilChanged(timestampRangeEq['equals']),tap(_0x563a78=>_0x19de46['updateTimeUnits']([..._0x563a78]))),_0x269a01=pipe(combineLatest([_0x19de46['timeUnits'],_0x19de46['state']['pipe'](map(_0x4bb513=>_0x4bb513['isAggregationPeriodTypeSyncEnabled']),distinctUntilChanged()),_0x23cd7a,_0x1bbac3['chartModel']['candlesSetSubject']]),observable['filter'](([_0x490244,_0x525be7])=>_0x525be7&&_0x19de46['selectedChartId']['getValue']()!==_0x5cb524),tap(([_0x1534d2])=>{const _0x32c4ee=_0x19de46['timestampRange']['getValue'](),_0x28f9c1=_0x1bbac3['chartModel']['candleFromTimestamp'](_0x32c4ee[0x0])['startUnit'],_0x989795=_0x1bbac3['chartModel']['candleFromTimestamp'](_0x32c4ee[0x1])['startUnit'],_0x5e9d45=_0x1534d2[0x0]%0x1,_0x48adbb=_0x1534d2[0x1]%0x1;_0x1bbac3['scale']['setXScale'](_0x28f9c1+_0x5e9d45,_0x989795+_0x48adbb);})),_0xca1bd=pipe(_0x5f5205,observable['filter'](_0x29f24e=>_0x1bbac3['chartModel']['getCandlesCount']()>0x0&&_0x19de46['selectedChartId']['getValue']()===_0x5cb524),distinctUntilChanged(timestampRangeEq['equals']),tap(_0x260cd0=>_0x19de46['updateTimestampRange']([..._0x260cd0]))),_0x2a0f15=merge(_0xca1bd,_0x269a01,_0x103f16,_0x374b5f,_0x48cb5),_0x13d2f2={};return _0x13d2f2['timestampRange']=_0x5f5205,_0x13d2f2['setTimestampRange']=_0x5c88ee,_0x13d2f2['setTimeUnits']=_0x3928e4,newSink(_0x13d2f2,_0x2a0f15);});