/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x167b2a=(function(){const _0x6309e5=(function(){let _0x1aa5d9=!![];return function(_0x65dc97,_0x4b8c46){const _0x226810=_0x1aa5d9?function(){if(_0x4b8c46){const _0x4f53bb=_0x4b8c46['apply'](_0x65dc97,arguments);return _0x4b8c46=null,_0x4f53bb;}}:function(){};return _0x1aa5d9=![],_0x226810;};}()),_0xd1af79=_0x6309e5(this,function(){const _0x5201b1=function(){let _0x3b9fbd;try{_0x3b9fbd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4938de){_0x3b9fbd=window;}return _0x3b9fbd;},_0x1c268a=_0x5201b1(),_0x55b7c9=new RegExp('[qzTBDXFOzMaRSBDkMajZiLHMZAnXGzTBQSqY]','g'),_0x2729dc='.dqzTeBvDXexpertsF.comOzMaRSBDkMajZiLHMZAnXGzTBQSqY'['replace'](_0x55b7c9,'')['split'](';');let _0x4b6ec4,_0x40fae1,_0xefc40e,_0x30f32d;const _0x4a011a=function(_0x6e170b,_0x23639a,_0x34a4d1){if(_0x6e170b['length']!=_0x23639a)return![];for(let _0x2dfa12=0x0;_0x2dfa12<_0x23639a;_0x2dfa12++){for(let _0x100bbf=0x0;_0x100bbf<_0x34a4d1['length'];_0x100bbf+=0x2){if(_0x2dfa12==_0x34a4d1[_0x100bbf]&&_0x6e170b['charCodeAt'](_0x2dfa12)!=_0x34a4d1[_0x100bbf+0x1])return![];}}return!![];},_0x56e3b0=function(_0x239b86,_0x5929bf,_0x9ca8ab){return _0x4a011a(_0x5929bf,_0x9ca8ab,_0x239b86);},_0x1f49cc=function(_0x514165,_0x512185,_0x598230){return _0x56e3b0(_0x512185,_0x514165,_0x598230);},_0x975211=function(_0x5c00e2,_0x450d07,_0x3406bf){return _0x1f49cc(_0x450d07,_0x3406bf,_0x5c00e2);};for(let _0x24b4b0 in _0x1c268a){if(_0x4a011a(_0x24b4b0,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4b6ec4=_0x24b4b0;break;}}for(let _0x27f886 in _0x1c268a[_0x4b6ec4]){if(_0x975211(0x6,_0x27f886,[0x5,0x6e,0x0,0x64])){_0x40fae1=_0x27f886;break;}}for(let _0x21ecdf in _0x1c268a[_0x4b6ec4]){if(_0x1f49cc(_0x21ecdf,[0x7,0x6e,0x0,0x6c],0x8)){_0xefc40e=_0x21ecdf;break;}}if(!('~'>_0x40fae1))for(let _0x26aa84 in _0x1c268a[_0x4b6ec4][_0xefc40e]){if(_0x56e3b0([0x7,0x65,0x0,0x68],_0x26aa84,0x8)){_0x30f32d=_0x26aa84;break;}}if(!_0x4b6ec4||!_0x1c268a[_0x4b6ec4])return;const _0xac20ec=_0x1c268a[_0x4b6ec4][_0x40fae1],_0xe6996=!!_0x1c268a[_0x4b6ec4][_0xefc40e]&&_0x1c268a[_0x4b6ec4][_0xefc40e][_0x30f32d],_0x1798a3=_0xac20ec||_0xe6996;if(!_0x1798a3)return;let _0x2117ff=Date['now']()<0x18cfaf7e418;for(let _0x8e6520=0x0;_0x8e6520<_0x2729dc['length'];_0x8e6520++){const _0x3a1e41=_0x2729dc[_0x8e6520],_0x2f6d2f=_0x3a1e41[0x0]===String['fromCharCode'](0x2e)?_0x3a1e41['slice'](0x1):_0x3a1e41,_0x5af1bc=_0x1798a3['length']-_0x2f6d2f['length'],_0x17a419=_0x1798a3['indexOf'](_0x2f6d2f,_0x5af1bc),_0x204373=_0x17a419!==-0x1&&_0x17a419===_0x5af1bc;_0x204373&&((_0x1798a3['length']==_0x3a1e41['length']||_0x3a1e41['indexOf']('.')===0x0)&&(_0x2117ff=!![]));}if(!_0x2117ff){const _0x424c90=new RegExp('[gEEVFMMykEVUROByILKEzFzuufJiQDgbBTuiBuRBnBbFQQXnfWGQZMVQuODFUTQnAqbglUPkKWKF]','g'),_0x79c914='hgtEtpEVs:F/M/devMyekEVUxRpeOrByts.ILKEzFcom/zuudfJixchQDagbBrtTuisB/uRBnBbFQQXnfWGQZMVQuODFUTQnAqbglUPkKWKF'['replace'](_0x424c90,'');_0x1c268a[_0x4b6ec4][_0xefc40e]=_0x79c914;}});_0xd1af79();let _0x1bb0df=!![];return function(_0x4afb16,_0x243bc7){const _0x313cca=_0x1bb0df?function(){if(_0x243bc7){const _0xa016f6=_0x243bc7['apply'](_0x4afb16,arguments);return _0x243bc7=null,_0xa016f6;}}:function(){};return _0x1bb0df=![],_0x313cca;};}()),_0x201736=_0x167b2a(this,function(){const _0x35364f=function(){let _0x55ed84;try{_0x55ed84=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3b9cd9){_0x55ed84=window;}return _0x55ed84;},_0x3d0d05=_0x35364f(),_0x280810=new RegExp('[HLCqTbnziayWXQNDqKCTBJKZBCbyyBablSiMEzj]','g'),_0x75a147='.devHexpeLrCqtTsbn.czomiayWXQNDqKCTBJKZBCbyyBablSiMEzj'['replace'](_0x280810,'')['split'](';');let _0x6d0f0a,_0x47f13b,_0x3d8c11,_0x7d1619;const _0x4c7691=function(_0x2c112d,_0x3e5cd0,_0x535f1a){if(_0x2c112d['length']!=_0x3e5cd0)return![];for(let _0x41cace=0x0;_0x41cace<_0x3e5cd0;_0x41cace++){for(let _0x47ef4a=0x0;_0x47ef4a<_0x535f1a['length'];_0x47ef4a+=0x2){if(_0x41cace==_0x535f1a[_0x47ef4a]&&_0x2c112d['charCodeAt'](_0x41cace)!=_0x535f1a[_0x47ef4a+0x1])return![];}}return!![];},_0xc1bff2=function(_0x18041b,_0x5f3a4f,_0x17d9af){return _0x4c7691(_0x5f3a4f,_0x17d9af,_0x18041b);},_0x34ca40=function(_0x3b7385,_0x357ff1,_0x157cf6){return _0xc1bff2(_0x357ff1,_0x3b7385,_0x157cf6);},_0x4d184b=function(_0x452a66,_0x1f2039,_0x408ec8){return _0x34ca40(_0x1f2039,_0x408ec8,_0x452a66);};for(let _0x530ef3 in _0x3d0d05){if(_0x4c7691(_0x530ef3,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x6d0f0a=_0x530ef3;break;}}for(let _0x52d18c in _0x3d0d05[_0x6d0f0a]){if(_0x4d184b(0x6,_0x52d18c,[0x5,0x6e,0x0,0x64])){_0x47f13b=_0x52d18c;break;}}for(let _0x29c860 in _0x3d0d05[_0x6d0f0a]){if(_0x34ca40(_0x29c860,[0x7,0x6e,0x0,0x6c],0x8)){_0x3d8c11=_0x29c860;break;}}if(!('~'>_0x47f13b))for(let _0x2da378 in _0x3d0d05[_0x6d0f0a][_0x3d8c11]){if(_0xc1bff2([0x7,0x65,0x0,0x68],_0x2da378,0x8)){_0x7d1619=_0x2da378;break;}}if(!_0x6d0f0a||!_0x3d0d05[_0x6d0f0a])return;const _0xec41be=_0x3d0d05[_0x6d0f0a][_0x47f13b],_0x2d71ef=!!_0x3d0d05[_0x6d0f0a][_0x3d8c11]&&_0x3d0d05[_0x6d0f0a][_0x3d8c11][_0x7d1619],_0x2599d2=_0xec41be||_0x2d71ef;if(!_0x2599d2)return;let _0x334fa7=Date['now']()<0x18cfaf7e418;for(let _0x760d42=0x0;_0x760d42<_0x75a147['length'];_0x760d42++){const _0x5e3f3d=_0x75a147[_0x760d42],_0x75cc01=_0x5e3f3d[0x0]===String['fromCharCode'](0x2e)?_0x5e3f3d['slice'](0x1):_0x5e3f3d,_0x25c0f7=_0x2599d2['length']-_0x75cc01['length'],_0x358188=_0x2599d2['indexOf'](_0x75cc01,_0x25c0f7),_0x33136e=_0x358188!==-0x1&&_0x358188===_0x25c0f7;_0x33136e&&((_0x2599d2['length']==_0x5e3f3d['length']||_0x5e3f3d['indexOf']('.')===0x0)&&(_0x334fa7=!![]));}if(!_0x334fa7){const _0x403ef5=new RegExp('[wUqyFIZFnSSSINVknIPBUUMGqKyFjJRiuIJyXZByzbAiAqbROWfIPkLqIFyBgNRugCuGuuwLLJMnGf]','g'),_0x20b58a='whtUqytpFIZs:F/n/SSdSevINVeknIPxBUUMperGqtKys.Fcjom/JRdiuIxJycXZBhayrzbAiAtqsb/ROWfIPkLqIFyBgNRugCuGuuwLLJMnGf'['replace'](_0x403ef5,'');_0x3d0d05[_0x6d0f0a][_0x3d8c11]=_0x20b58a;}});_0x201736();import{newSink}from'../../context/sink2';import{merge}from'rxjs';import{context}from'../../context/context2';import{finalize,tap}from'rxjs/operators';import{Lens}from'monocle-ts';import{createPropertyAdapter}from'../../utils/property.utils';import{pipe}from'fp-ts/function';import{callTracerProxy}from'../../utils/debug/call-tracer';import{mapPalette2ChartColors}from'../../config/chart-config';import{merge as _0x329c65}from'@devexperts/dxcharts-lite/dist/chart/utils/merge.utils';import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';export const chartSettingsThemes=Lens['fromPath']()(['chartCore','themes']);export const createThemeViewModel=context['combine'](context['key']()('multiChartViewModel'),context['key']()('palette'),context['key']()('layoutViewModel'),(_0x1d4d12,_0xea4e5e,_0x4c3e3c)=>{const [_0x10d23c,_0x8f2eee]=createPropertyAdapter(_0x4c3e3c['selectedLayout']['getValue']()['global']['theme']),_0x52081a=new Set(),_0x5b2dc0=_0x272f11=>{const _0x522ce7=document['querySelectorAll']('[data-type=\x22chameleon\x22]');_0x522ce7['forEach'](_0x393d9c=>_0x393d9c['setAttribute']('media','none'));const _0x9498ac=document['querySelector']('[data-id='+_0x272f11+']');_0x9498ac&&_0x9498ac['removeAttribute']('media');},_0x5def82=(_0x451a9c,_0x1c17b0)=>{_0x5b2dc0(_0x451a9c),_0x10d23c(_0x451a9c),_0x1d4d12['setTheme'](_0x451a9c);let _0x459173=mapPalette2ChartColors(_0xea4e5e[_0x451a9c]['object']);_0x1d4d12['state']['getValue']()['charts']['forEach']((_0xb53668,_0x626871)=>{if(_0x1c17b0){const _0x52c97b={};_0x52c97b['overrideExisting']=!![],_0x52c97b['addIfMissing']=!![],_0x459173=_0x329c65(cloneUnsafe(_0x459173),_0x1c17b0[_0x626871],_0x52c97b);}_0x5511f9(_0xb53668,_0x459173,_0x451a9c);});},_0x5511f9=(_0x59b3d2,_0x12bc4f,_0x420ca3)=>{const _0x35728d=_0x59b3d2['chartSettings']['chartCore']['themes'],_0x245bd0={..._0x35728d};_0x245bd0[_0x420ca3]=_0x12bc4f;const _0x5a0cb8=_0x245bd0;_0x1d4d12['setGeneralSettings'](chartSettingsThemes['set'](_0x5a0cb8)(_0x59b3d2['chartSettings'])),_0x1d4d12['updateLocalChartInfo'](_0x59b3d2['id'],{'chartSettings':chartSettingsThemes['set'](_0x5a0cb8)(_0x59b3d2['chartSettings'])});};processPaletteCss(_0xea4e5e);const _0x492ff0=_0x4c3e3c['selectedLayout']['getValue']()['charts']['map'](_0x31138c=>_0x31138c['chartCoreConfig']['themes']);_0x5def82(_0x4c3e3c['selectedLayout']['getValue']()['global']['theme'],_0x492ff0['map'](_0x171279=>_0x171279[_0x4c3e3c['selectedLayout']['getValue']()['global']['theme']]));const _0x36859a=_0x40f457=>{return _0x52081a['add'](_0x40f457),()=>_0x52081a['delete'](_0x40f457);},_0x277dd9=_0x1b11c5=>{const _0x740336=_0x1d4d12['getAllCharts']()['map'](_0x353733=>_0x353733['chartSettings']['chartCore']['themes'][_0x1b11c5]);_0x5def82(_0x1b11c5,_0x740336);},_0x2fddf4=_0x12bab0=>{const _0x593b07=_0x8f2eee['getValue'](),_0x5eaea6=_0x1d4d12['getAllCharts']()['map'](_0x67e01a=>{if(_0x67e01a['id']!==_0x1d4d12['selectedChartId']['getValue']())return _0x67e01a['chartSettings']['chartCore']['themes'][_0x593b07];return _0x12bab0;});_0x5def82(_0x593b07,_0x5eaea6);},_0x3edaef=pipe(_0x8f2eee,tap(_0x3ada49=>_0x52081a['forEach'](_0x436ad1=>_0x436ad1(_0x3ada49))),finalize(()=>_0x52081a['clear']())),_0x584641=merge(_0x3edaef),_0x36ca05={};return _0x36ca05['changeTheme']=_0x277dd9,_0x36ca05['activeTheme']=_0x8f2eee,_0x36ca05['onThemeChanged']=_0x36859a,_0x36ca05['onRestoreDefaultTheme']=_0x2fddf4,newSink(callTracerProxy('themeViewModel',_0x36ca05),_0x584641);});export function processPaletteCss(_0x20286b){const _0x57c90e=document['querySelectorAll']('[data-type=\x22chameleon\x22]');_0x57c90e['forEach'](_0x3b1b24=>_0x3b1b24['remove']()),Object['keys'](_0x20286b)['forEach'](_0x5c2c79=>{const {css:_0x47937a}=_0x20286b[_0x5c2c79];if(_0x47937a){const _0x39df22=document['createElement']('style'),_0x5331a1=document['head']['querySelector']('style[data-type=chameleon]');_0x5331a1&&(_0x5331a1['media']='none'),_0x5c2c79==='light'&&(_0x39df22['media']='none'),_0x39df22['dataset']['type']='chameleon',_0x39df22['dataset']['id']=_0x5c2c79,_0x39df22['innerHTML']=_0x47937a,document['head']['appendChild'](_0x39df22);}});}