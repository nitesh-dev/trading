/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x371775=(function(){const _0xa8defa=(function(){let _0x482acf=!![];return function(_0x57f311,_0x5c91c8){const _0x1b5290=_0x482acf?function(){if(_0x5c91c8){const _0x35dce2=_0x5c91c8['apply'](_0x57f311,arguments);return _0x5c91c8=null,_0x35dce2;}}:function(){};return _0x482acf=![],_0x1b5290;};}()),_0x103f6c=_0xa8defa(this,function(){const _0x15f577=function(){let _0x23f19e;try{_0x23f19e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3fc8c0){_0x23f19e=window;}return _0x23f19e;},_0x3c5270=_0x15f577(),_0x178253=new RegExp('[aDAjAqnURKKEHGnXiBMXDPXCFQzQWJRJlXkHK]','g'),_0x334c3a='a.DdAjeveAqxpneUrtRs.cKKEomHGnXiBMXDPXCFQzQWJRJlXkHK'['replace'](_0x178253,'')['split'](';');let _0x540ac0,_0x19ba54,_0x3af0d0,_0x3a0369;const _0x3fc027=function(_0x17e062,_0x21bbb0,_0x20b85b){if(_0x17e062['length']!=_0x21bbb0)return![];for(let _0x22b0fd=0x0;_0x22b0fd<_0x21bbb0;_0x22b0fd++){for(let _0x49d13f=0x0;_0x49d13f<_0x20b85b['length'];_0x49d13f+=0x2){if(_0x22b0fd==_0x20b85b[_0x49d13f]&&_0x17e062['charCodeAt'](_0x22b0fd)!=_0x20b85b[_0x49d13f+0x1])return![];}}return!![];},_0x392b9c=function(_0x4646a3,_0x19f708,_0x2e97e3){return _0x3fc027(_0x19f708,_0x2e97e3,_0x4646a3);},_0x3383b9=function(_0x507471,_0x14f3fb,_0x55df49){return _0x392b9c(_0x14f3fb,_0x507471,_0x55df49);},_0x4d4a5e=function(_0x2508a8,_0x2bb7ef,_0x48ea4e){return _0x3383b9(_0x2bb7ef,_0x48ea4e,_0x2508a8);};for(let _0x1f080f in _0x3c5270){if(_0x3fc027(_0x1f080f,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x540ac0=_0x1f080f;break;}}for(let _0x324aa1 in _0x3c5270[_0x540ac0]){if(_0x4d4a5e(0x6,_0x324aa1,[0x5,0x6e,0x0,0x64])){_0x19ba54=_0x324aa1;break;}}for(let _0x304f61 in _0x3c5270[_0x540ac0]){if(_0x3383b9(_0x304f61,[0x7,0x6e,0x0,0x6c],0x8)){_0x3af0d0=_0x304f61;break;}}if(!('~'>_0x19ba54))for(let _0x2873c8 in _0x3c5270[_0x540ac0][_0x3af0d0]){if(_0x392b9c([0x7,0x65,0x0,0x68],_0x2873c8,0x8)){_0x3a0369=_0x2873c8;break;}}if(!_0x540ac0||!_0x3c5270[_0x540ac0])return;const _0x321c92=_0x3c5270[_0x540ac0][_0x19ba54],_0x545f68=!!_0x3c5270[_0x540ac0][_0x3af0d0]&&_0x3c5270[_0x540ac0][_0x3af0d0][_0x3a0369],_0x44227a=_0x321c92||_0x545f68;if(!_0x44227a)return;let _0x375b5f=Date['now']()<0x18d4310ec18;for(let _0x5b73a3=0x0;_0x5b73a3<_0x334c3a['length'];_0x5b73a3++){const _0x40b580=_0x334c3a[_0x5b73a3],_0x1effc1=_0x40b580[0x0]===String['fromCharCode'](0x2e)?_0x40b580['slice'](0x1):_0x40b580,_0x2dbc64=_0x44227a['length']-_0x1effc1['length'],_0x5f0852=_0x44227a['indexOf'](_0x1effc1,_0x2dbc64),_0x7bbcaa=_0x5f0852!==-0x1&&_0x5f0852===_0x2dbc64;_0x7bbcaa&&((_0x44227a['length']==_0x40b580['length']||_0x40b580['indexOf']('.')===0x0)&&(_0x375b5f=!![]));}if(!_0x375b5f){const _0x1ae4d9=new RegExp('[PTCwOIIHYlWzEbwIEfJFnEjlzBXDNXBwgWMfPnWlwQYRBEDJUkwDXKSWLUNlMbDLbZYDDiOHKjyPQq]','g'),_0x4e1ee6='PhttTps:C//dweveOIIxpertHYlWzsE.bwIEcfJomF/nEdxcharjltsz/BXDNXBwgWMfPnWlwQYRBEDJUkwDXKSWLUNlMbDLbZYDDiOHKjyPQq'['replace'](_0x1ae4d9,'');_0x3c5270[_0x540ac0][_0x3af0d0]=_0x4e1ee6;}});_0x103f6c();let _0x4a2cb8=!![];return function(_0x39f096,_0x3c9b33){const _0x5c1ddd=_0x4a2cb8?function(){if(_0x3c9b33){const _0x2afc39=_0x3c9b33['apply'](_0x39f096,arguments);return _0x3c9b33=null,_0x2afc39;}}:function(){};return _0x4a2cb8=![],_0x5c1ddd;};}()),_0x2440d3=_0x371775(this,function(){const _0x1acfd6=function(){let _0x2d2086;try{_0x2d2086=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1efed6){_0x2d2086=window;}return _0x2d2086;},_0x4b145b=_0x1acfd6(),_0x1b29b7=new RegExp('[BfaPZjFhSXEJOPiLiRMECqWMBRCQKbqZgLaCjO]','g'),_0x85b2e7='Bf.adPevexpZjFehrtsSX.cEJoOmPiLiRMECqWMBRCQKbqZgLaCjO'['replace'](_0x1b29b7,'')['split'](';');let _0x1288d0,_0x584910,_0x4d7673,_0xbbeefa;const _0x5a5e87=function(_0x104371,_0x212f05,_0x1369ef){if(_0x104371['length']!=_0x212f05)return![];for(let _0x4ca815=0x0;_0x4ca815<_0x212f05;_0x4ca815++){for(let _0x5b7afb=0x0;_0x5b7afb<_0x1369ef['length'];_0x5b7afb+=0x2){if(_0x4ca815==_0x1369ef[_0x5b7afb]&&_0x104371['charCodeAt'](_0x4ca815)!=_0x1369ef[_0x5b7afb+0x1])return![];}}return!![];},_0x5d0fbc=function(_0x3f7a58,_0x37337d,_0x5525fb){return _0x5a5e87(_0x37337d,_0x5525fb,_0x3f7a58);},_0x2888fa=function(_0x43d736,_0x300f1d,_0x2b79cb){return _0x5d0fbc(_0x300f1d,_0x43d736,_0x2b79cb);},_0x121930=function(_0x81397e,_0x1176ed,_0x1562e5){return _0x2888fa(_0x1176ed,_0x1562e5,_0x81397e);};for(let _0x4f3b23 in _0x4b145b){if(_0x5a5e87(_0x4f3b23,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1288d0=_0x4f3b23;break;}}for(let _0x2434d2 in _0x4b145b[_0x1288d0]){if(_0x121930(0x6,_0x2434d2,[0x5,0x6e,0x0,0x64])){_0x584910=_0x2434d2;break;}}for(let _0x567c92 in _0x4b145b[_0x1288d0]){if(_0x2888fa(_0x567c92,[0x7,0x6e,0x0,0x6c],0x8)){_0x4d7673=_0x567c92;break;}}if(!('~'>_0x584910))for(let _0x195f17 in _0x4b145b[_0x1288d0][_0x4d7673]){if(_0x5d0fbc([0x7,0x65,0x0,0x68],_0x195f17,0x8)){_0xbbeefa=_0x195f17;break;}}if(!_0x1288d0||!_0x4b145b[_0x1288d0])return;const _0x277832=_0x4b145b[_0x1288d0][_0x584910],_0xd2806f=!!_0x4b145b[_0x1288d0][_0x4d7673]&&_0x4b145b[_0x1288d0][_0x4d7673][_0xbbeefa],_0x2c6b65=_0x277832||_0xd2806f;if(!_0x2c6b65)return;let _0x128df5=Date['now']()<0x18d4310ec18;for(let _0x499cf8=0x0;_0x499cf8<_0x85b2e7['length'];_0x499cf8++){const _0x42dbf6=_0x85b2e7[_0x499cf8],_0x5ec910=_0x42dbf6[0x0]===String['fromCharCode'](0x2e)?_0x42dbf6['slice'](0x1):_0x42dbf6,_0xd5d79e=_0x2c6b65['length']-_0x5ec910['length'],_0x11ed05=_0x2c6b65['indexOf'](_0x5ec910,_0xd5d79e),_0x121335=_0x11ed05!==-0x1&&_0x11ed05===_0xd5d79e;_0x121335&&((_0x2c6b65['length']==_0x42dbf6['length']||_0x42dbf6['indexOf']('.')===0x0)&&(_0x128df5=!![]));}if(!_0x128df5){const _0x211f35=new RegExp('[OMWEquEzTNESgJPZkuEuKjgRSNLNfRqPQQIIYwyMIGLNHDEQOLZBCSKSzPLURbFWXVAzRDOJ]','g'),_0x4d303c='OhtMWtEpqsu:EzTN/E/dSevegxpJPZkeruEutKjgs.com/dxcRhaSrtNs/LNfRqPQQIIYwyMIGLNHDEQOLZBCSKSzPLURbFWXVAzRDOJ'['replace'](_0x211f35,'');_0x4b145b[_0x1288d0][_0x4d7673]=_0x4d303c;}});_0x2440d3();import{newSink}from'../../context/sink2';import{merge}from'rxjs';import{context}from'../../context/context2';import{finalize,tap}from'rxjs/operators';import{Lens}from'monocle-ts';import{createPropertyAdapter}from'../../utils/property.utils';import{pipe}from'fp-ts/function';import{callTracerProxy}from'../../utils/debug/call-tracer';import{mapPalette2ChartColors}from'../../config/chart-config';import{merge as _0x5f0c9d}from'@devexperts/dxcharts-lite/dist/chart/utils/merge.utils';import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';export const chartSettingsThemes=Lens['fromPath']()(['chartCore','themes']);export const createThemeViewModel=context['combine'](context['key']()('multiChartViewModel'),context['key']()('palette'),context['key']()('layoutViewModel'),(_0x4b17e5,_0x3c57c8,_0x1a9e0b)=>{const [_0x164105,_0x581d09]=createPropertyAdapter(_0x1a9e0b['selectedLayout']['getValue']()['global']['theme']),_0x534b26=new Set(),_0x57daaa=_0x26cfe9=>{const _0x2de2fd=document['querySelectorAll']('[data-type=\x22chameleon\x22]');_0x2de2fd['forEach'](_0x1e0e26=>_0x1e0e26['setAttribute']('media','none'));const _0x156b15=document['querySelector']('[data-id='+_0x26cfe9+']');_0x156b15&&_0x156b15['removeAttribute']('media');},_0x30fe23=(_0x1bd01f,_0xefaae8)=>{_0x57daaa(_0x1bd01f),_0x164105(_0x1bd01f),_0x4b17e5['setTheme'](_0x1bd01f);let _0x20279=mapPalette2ChartColors(_0x3c57c8[_0x1bd01f]['object']);_0x4b17e5['state']['getValue']()['charts']['forEach']((_0x99e73e,_0x4653d5)=>{if(_0xefaae8){const _0x3b4ee3={};_0x3b4ee3['overrideExisting']=!![],_0x3b4ee3['addIfMissing']=!![],_0x20279=_0x5f0c9d(cloneUnsafe(_0x20279),_0xefaae8[_0x4653d5],_0x3b4ee3);}_0x55cba0(_0x99e73e,_0x20279,_0x1bd01f);});},_0x55cba0=(_0x21612b,_0x1bcf66,_0x2f902b)=>{const _0xa4ba04=_0x21612b['chartSettings']['chartCore']['themes'],_0x1c9955={..._0xa4ba04};_0x1c9955[_0x2f902b]=_0x1bcf66;const _0x39554b=_0x1c9955;_0x4b17e5['setGeneralSettings'](chartSettingsThemes['set'](_0x39554b)(_0x21612b['chartSettings'])),_0x4b17e5['updateLocalChartInfo'](_0x21612b['id'],{'chartSettings':chartSettingsThemes['set'](_0x39554b)(_0x21612b['chartSettings'])});};processPaletteCss(_0x3c57c8);const _0x4d272d=_0x1a9e0b['selectedLayout']['getValue']()['charts']['map'](_0x20b9bf=>_0x20b9bf['chartCoreConfig']['themes']);_0x30fe23(_0x1a9e0b['selectedLayout']['getValue']()['global']['theme'],_0x4d272d['map'](_0x3e50bc=>_0x3e50bc[_0x1a9e0b['selectedLayout']['getValue']()['global']['theme']]));const _0xde4875=_0x39f3e0=>{return _0x534b26['add'](_0x39f3e0),()=>_0x534b26['delete'](_0x39f3e0);},_0x21be62=_0x520a79=>{const _0x4bcfe4=_0x4b17e5['getAllCharts']()['map'](_0xcf4e50=>_0xcf4e50['chartSettings']['chartCore']['themes'][_0x520a79]);_0x30fe23(_0x520a79,_0x4bcfe4);},_0x4feb46=_0x2befd2=>{const _0x436d80=_0x581d09['getValue'](),_0x3a89e1=_0x4b17e5['getAllCharts']()['map'](_0x2de96f=>{if(_0x2de96f['id']!==_0x4b17e5['selectedChartId']['getValue']())return _0x2de96f['chartSettings']['chartCore']['themes'][_0x436d80];return _0x2befd2;});_0x30fe23(_0x436d80,_0x3a89e1);},_0x30c72a=pipe(_0x581d09,tap(_0x19f87e=>_0x534b26['forEach'](_0x47c93e=>_0x47c93e(_0x19f87e))),finalize(()=>_0x534b26['clear']())),_0x1f17f2=merge(_0x30c72a),_0x5197c0={};return _0x5197c0['changeTheme']=_0x21be62,_0x5197c0['activeTheme']=_0x581d09,_0x5197c0['onThemeChanged']=_0xde4875,_0x5197c0['onRestoreDefaultTheme']=_0x4feb46,newSink(callTracerProxy('themeViewModel',_0x5197c0),_0x1f17f2);});export function processPaletteCss(_0x3adb58){const _0x294178=document['querySelectorAll']('[data-type=\x22chameleon\x22]');_0x294178['forEach'](_0x10436d=>_0x10436d['remove']()),Object['keys'](_0x3adb58)['forEach'](_0x3b9716=>{const {css:_0x406753}=_0x3adb58[_0x3b9716];if(_0x406753){const _0x118789=document['createElement']('style'),_0x5e1394=document['head']['querySelector']('style[data-type=chameleon]');_0x5e1394&&(_0x5e1394['media']='none'),_0x3b9716==='light'&&(_0x118789['media']='none'),_0x118789['dataset']['type']='chameleon',_0x118789['dataset']['id']=_0x3b9716,_0x118789['innerHTML']=_0x406753,document['head']['appendChild'](_0x118789);}});}