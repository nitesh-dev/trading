/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x322512=(function(){const _0x12a95a=(function(){let _0x40b957=!![];return function(_0x8a4d79,_0x2ad906){const _0x97287c=_0x40b957?function(){if(_0x2ad906){const _0x2a6046=_0x2ad906['apply'](_0x8a4d79,arguments);return _0x2ad906=null,_0x2a6046;}}:function(){};return _0x40b957=![],_0x97287c;};}()),_0x20f465=_0x12a95a(this,function(){let _0x55090c;try{const _0x2ac63d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x55090c=_0x2ac63d();}catch(_0x4ca99c){_0x55090c=window;}const _0x2c8551=new RegExp('[AVYuANRGFEkqZPZyQfUMuuPuuTMARHnS]','g'),_0x2445f5='.devAeVxpYueArNtsRGF.cEomkqZPZyQfUMuuPuuTMARHnS'['replace'](_0x2c8551,'')['split'](';');let _0x377cdf,_0x55dca8,_0x655578,_0x3619fa;const _0x4b0bda=function(_0x3f1ef7,_0x2fcf68,_0x1dda59){if(_0x3f1ef7['length']!=_0x2fcf68)return![];for(let _0x41d2cd=0x0;_0x41d2cd<_0x2fcf68;_0x41d2cd++){for(let _0x4984f7=0x0;_0x4984f7<_0x1dda59['length'];_0x4984f7+=0x2){if(_0x41d2cd==_0x1dda59[_0x4984f7]&&_0x3f1ef7['charCodeAt'](_0x41d2cd)!=_0x1dda59[_0x4984f7+0x1])return![];}}return!![];},_0xb8b3ea=function(_0x15e766,_0x37129d,_0x83fe56){return _0x4b0bda(_0x37129d,_0x83fe56,_0x15e766);},_0x408b22=function(_0x46defd,_0x5be620,_0x359bd1){return _0xb8b3ea(_0x5be620,_0x46defd,_0x359bd1);},_0x582b60=function(_0x17f319,_0x5b94d1,_0x2c328a){return _0x408b22(_0x5b94d1,_0x2c328a,_0x17f319);};for(let _0x3dfd4e in _0x55090c){if(_0x4b0bda(_0x3dfd4e,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x377cdf=_0x3dfd4e;break;}}for(let _0x4bbc5a in _0x55090c[_0x377cdf]){if(_0x582b60(0x6,_0x4bbc5a,[0x5,0x6e,0x0,0x64])){_0x55dca8=_0x4bbc5a;break;}}for(let _0x5bbebb in _0x55090c[_0x377cdf]){if(_0x408b22(_0x5bbebb,[0x7,0x6e,0x0,0x6c],0x8)){_0x655578=_0x5bbebb;break;}}if(!('~'>_0x55dca8))for(let _0x13d546 in _0x55090c[_0x377cdf][_0x655578]){if(_0xb8b3ea([0x7,0x65,0x0,0x68],_0x13d546,0x8)){_0x3619fa=_0x13d546;break;}}if(!_0x377cdf||!_0x55090c[_0x377cdf])return;const _0xfac055=_0x55090c[_0x377cdf][_0x55dca8],_0x547f72=!!_0x55090c[_0x377cdf][_0x655578]&&_0x55090c[_0x377cdf][_0x655578][_0x3619fa],_0x8c0f04=_0xfac055||_0x547f72;if(!_0x8c0f04)return;let _0xc47ead=Date['now']()<0x18cfaf7e418;for(let _0x371946=0x0;_0x371946<_0x2445f5['length'];_0x371946++){const _0x10973b=_0x2445f5[_0x371946],_0x10d554=_0x10973b[0x0]===String['fromCharCode'](0x2e)?_0x10973b['slice'](0x1):_0x10973b,_0x3cac8e=_0x8c0f04['length']-_0x10d554['length'],_0x52d7f7=_0x8c0f04['indexOf'](_0x10d554,_0x3cac8e),_0x559a10=_0x52d7f7!==-0x1&&_0x52d7f7===_0x3cac8e;_0x559a10&&((_0x8c0f04['length']==_0x10973b['length']||_0x10973b['indexOf']('.')===0x0)&&(_0xc47ead=!![]));}if(!_0xc47ead){const _0x8bbf95=new RegExp('[LyNMbDTZYKHlGNkACJXHFDjSVFZyXKjXXbnqEACzWIWRngHqXJQiXziJJOYgWzOZJFzyAFfEgP]','g'),_0x231d70='hLtytNMpbsDT:Z/YKH/lGdeNkAveCJXHFxDperjtSVFs.comZyXKj/XdxcXbnqhartEACzsWIW/RngHqXJQiXziJJOYgWzOZJFzyAFfEgP'['replace'](_0x8bbf95,'');_0x55090c[_0x377cdf][_0x655578]=_0x231d70;}});_0x20f465();let _0x1269e8=!![];return function(_0x1db39b,_0x4ce0bb){const _0x564453=_0x1269e8?function(){if(_0x4ce0bb){const _0x244220=_0x4ce0bb['apply'](_0x1db39b,arguments);return _0x4ce0bb=null,_0x244220;}}:function(){};return _0x1269e8=![],_0x564453;};}()),_0x62bc81=_0x322512(this,function(){let _0x5f29cd;try{const _0x340c81=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5f29cd=_0x340c81();}catch(_0x54b731){_0x5f29cd=window;}const _0x4db3b9=new RegExp('[hQKEqahjGAEPwVKwVPDPTTzYZnwJZLKgGPZM]','g'),_0x12e8de='.hdeQveKxEqpeahrtjGAs.EcPwVKomwVPDPTTzYZnwJZLKgGPZM'['replace'](_0x4db3b9,'')['split'](';');let _0x17e0ab,_0x43d01b,_0x22395d,_0x90611;const _0x2be698=function(_0x5c9c06,_0x10bd08,_0x3a72ac){if(_0x5c9c06['length']!=_0x10bd08)return![];for(let _0xa91824=0x0;_0xa91824<_0x10bd08;_0xa91824++){for(let _0x83474d=0x0;_0x83474d<_0x3a72ac['length'];_0x83474d+=0x2){if(_0xa91824==_0x3a72ac[_0x83474d]&&_0x5c9c06['charCodeAt'](_0xa91824)!=_0x3a72ac[_0x83474d+0x1])return![];}}return!![];},_0x451930=function(_0x374a45,_0x502a32,_0x5dc0d4){return _0x2be698(_0x502a32,_0x5dc0d4,_0x374a45);},_0x57604d=function(_0x4b0a32,_0x313ef4,_0xf698db){return _0x451930(_0x313ef4,_0x4b0a32,_0xf698db);},_0x34aa72=function(_0x4f9c40,_0x48f9c9,_0x2b937e){return _0x57604d(_0x48f9c9,_0x2b937e,_0x4f9c40);};for(let _0x53b344 in _0x5f29cd){if(_0x2be698(_0x53b344,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x17e0ab=_0x53b344;break;}}for(let _0x4ee750 in _0x5f29cd[_0x17e0ab]){if(_0x34aa72(0x6,_0x4ee750,[0x5,0x6e,0x0,0x64])){_0x43d01b=_0x4ee750;break;}}for(let _0x34d412 in _0x5f29cd[_0x17e0ab]){if(_0x57604d(_0x34d412,[0x7,0x6e,0x0,0x6c],0x8)){_0x22395d=_0x34d412;break;}}if(!('~'>_0x43d01b))for(let _0x14cfe3 in _0x5f29cd[_0x17e0ab][_0x22395d]){if(_0x451930([0x7,0x65,0x0,0x68],_0x14cfe3,0x8)){_0x90611=_0x14cfe3;break;}}if(!_0x17e0ab||!_0x5f29cd[_0x17e0ab])return;const _0x33f6eb=_0x5f29cd[_0x17e0ab][_0x43d01b],_0x68b747=!!_0x5f29cd[_0x17e0ab][_0x22395d]&&_0x5f29cd[_0x17e0ab][_0x22395d][_0x90611],_0x4feca0=_0x33f6eb||_0x68b747;if(!_0x4feca0)return;let _0x1cbefd=Date['now']()<0x18cfaf7e418;for(let _0x4647c5=0x0;_0x4647c5<_0x12e8de['length'];_0x4647c5++){const _0x2fdadf=_0x12e8de[_0x4647c5],_0xc3f64d=_0x2fdadf[0x0]===String['fromCharCode'](0x2e)?_0x2fdadf['slice'](0x1):_0x2fdadf,_0x8105c0=_0x4feca0['length']-_0xc3f64d['length'],_0x3c61b1=_0x4feca0['indexOf'](_0xc3f64d,_0x8105c0),_0x3adb2b=_0x3c61b1!==-0x1&&_0x3c61b1===_0x8105c0;_0x3adb2b&&((_0x4feca0['length']==_0x2fdadf['length']||_0x2fdadf['indexOf']('.')===0x0)&&(_0x1cbefd=!![]));}if(!_0x1cbefd){const _0x3b3283=new RegExp('[XRJSLEFBOfEJEnSEijUqizXUCPYBjXGZuVEUPCNGJlTQnjzyTLfZkCCfRYliEXyYMCkyyuE]','g'),_0x1aaa11='httXRpsJ:/SL/devEFBOefxpEeJEnrtSsEi.jcUoqm/dizXxUCPYcBjXGhZuVaEUrPtCsN/GJlTQnjzyTLfZkCCfRYliEXyYMCkyyuE'['replace'](_0x3b3283,'');_0x5f29cd[_0x17e0ab][_0x22395d]=_0x1aaa11;}});_0x62bc81();import{context}from'../../../context/context2';import{newSink}from'../../../context/sink2';import{combineLatest,merge,of,zip}from'rxjs';import{catchError,distinctUntilChanged,filter,shareReplay,switchMap,tap}from'rxjs/operators';import{createPropertyAdapter}from'../../../utils/property.utils';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{filterOption}from'../../../utils/monad-functions';export const createNewsViewModel=context['combine'](context['key']()('newsDataProvider'),context['key']()('chart'),context['key']()('chartConfiguratorViewModel'),context['key']()('chartDataViewModel'),(_0x57a040,_0x3e14b5,_0x567504,_0x38f9bb)=>{const _0x14dde2={};_0x14dde2['news']=[];const [_0xb55909,_0x384dc5]=createPropertyAdapter(_0x14dde2),_0x3eed1c=pipe(_0x567504['state'],observable['map'](_0x59acd5=>_0x59acd5['settings']['chartCore']['components']['news']['visible']),distinctUntilChanged(),tap(_0x18196d=>_0x18196d)),_0x1f7b51={};_0x1f7b51['news']=[];const _0xb86209={};_0xb86209['bufferSize']=0x1,_0xb86209['refCount']=!![];const _0x3e349b=combineLatest([_0x38f9bb['instrument']['pipe'](filterOption()),_0x3eed1c,_0x3e14b5['chartModel']['candlesSetSubject']])['pipe'](filter(([_0x3873a0,_0x4220ee])=>_0x4220ee),switchMap(([_0x2624d4])=>{return _0x57a040['requestNews'](_0x2624d4['symbol']);}),catchError(()=>of(_0x1f7b51)),shareReplay(_0xb86209)),_0x1f10f7=_0x3e14b5['newsComponent']['newsHoveredSubject']['pipe'](observable['map'](_0xf21d9=>_0xf21d9===null?null:{..._0xf21d9,'news':_0x384dc5['getValue']()['news']['filter'](_0x568985=>_0xf21d9['news']['find'](_0x31126f=>_0x31126f['id']===_0x568985['title']))})),_0x56748a=pipe(_0x567504['state'],observable['map'](_0x26c286=>_0x26c286['settings']['chartCore']['components']['news']),distinctUntilChanged(),tap(_0x3a286b=>{_0x3e14b5['newsComponent']['setVisible'](_0x3a286b['visible']);})),_0x5c4257=pipe(zip(_0x3e14b5['chartModel']['candlesSetSubject'],_0x3e349b),observable['map'](([,_0x56fd4e])=>_0x56fd4e),tap(_0x512358=>{_0xb55909(_0x512358);const _0x45d528=mapNewsToChartCore(_0x512358['news']);_0x3e14b5['newsComponent']['setNews'](_0x45d528);})),_0x29a653=merge(_0x5c4257,_0x56748a),_0x33e248={};return _0x33e248['news']=_0x384dc5,_0x33e248['hoveredNews']=_0x1f10f7,newSink(_0x33e248,_0x29a653);});const mapNewsToChartCore=_0x3c89d9=>_0x3c89d9['map'](_0x1a06d0=>({'timestamp':_0x1a06d0['timestamp'],'id':_0x1a06d0['title']}));