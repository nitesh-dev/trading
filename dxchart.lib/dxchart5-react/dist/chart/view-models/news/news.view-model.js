/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3f99dc=(function(){const _0x2107a5=(function(){let _0x36043d=!![];return function(_0x1128d2,_0x35f74f){const _0x5bd0e5=_0x36043d?function(){if(_0x35f74f){const _0x425088=_0x35f74f['apply'](_0x1128d2,arguments);return _0x35f74f=null,_0x425088;}}:function(){};return _0x36043d=![],_0x5bd0e5;};}()),_0x20c2ca=_0x2107a5(this,function(){let _0x2d4d0e;try{const _0x2ae298=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2d4d0e=_0x2ae298();}catch(_0xc86b84){_0x2d4d0e=window;}const _0xad0965=new RegExp('[PkIIZkPQZYDaLflMFgCNulghHCOZUHjCqiVlq]','g'),_0x2ca39f='P.dekIvIexZpkPeQrtsZ.coYmDaLflMFgCNulghHCOZUHjCqiVlq'['replace'](_0xad0965,'')['split'](';');let _0x5c16f5,_0x49fddb,_0x5f1444,_0x9f9718;const _0x4f975d=function(_0x46b89a,_0x10669d,_0x3d50f7){if(_0x46b89a['length']!=_0x10669d)return![];for(let _0x37ad7e=0x0;_0x37ad7e<_0x10669d;_0x37ad7e++){for(let _0x534611=0x0;_0x534611<_0x3d50f7['length'];_0x534611+=0x2){if(_0x37ad7e==_0x3d50f7[_0x534611]&&_0x46b89a['charCodeAt'](_0x37ad7e)!=_0x3d50f7[_0x534611+0x1])return![];}}return!![];},_0x598c9d=function(_0xf43087,_0x44cfd2,_0x3db0a3){return _0x4f975d(_0x44cfd2,_0x3db0a3,_0xf43087);},_0x39ad93=function(_0x2e066e,_0xfa38aa,_0x2d60c4){return _0x598c9d(_0xfa38aa,_0x2e066e,_0x2d60c4);},_0x20422d=function(_0x4b6f1c,_0x13f182,_0x454f68){return _0x39ad93(_0x13f182,_0x454f68,_0x4b6f1c);};for(let _0x2580f8 in _0x2d4d0e){if(_0x4f975d(_0x2580f8,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5c16f5=_0x2580f8;break;}}for(let _0x23f2e1 in _0x2d4d0e[_0x5c16f5]){if(_0x20422d(0x6,_0x23f2e1,[0x5,0x6e,0x0,0x64])){_0x49fddb=_0x23f2e1;break;}}for(let _0x56a455 in _0x2d4d0e[_0x5c16f5]){if(_0x39ad93(_0x56a455,[0x7,0x6e,0x0,0x6c],0x8)){_0x5f1444=_0x56a455;break;}}if(!('~'>_0x49fddb))for(let _0x4f8ac1 in _0x2d4d0e[_0x5c16f5][_0x5f1444]){if(_0x598c9d([0x7,0x65,0x0,0x68],_0x4f8ac1,0x8)){_0x9f9718=_0x4f8ac1;break;}}if(!_0x5c16f5||!_0x2d4d0e[_0x5c16f5])return;const _0x1bab70=_0x2d4d0e[_0x5c16f5][_0x49fddb],_0x3eafe0=!!_0x2d4d0e[_0x5c16f5][_0x5f1444]&&_0x2d4d0e[_0x5c16f5][_0x5f1444][_0x9f9718],_0x72dfcf=_0x1bab70||_0x3eafe0;if(!_0x72dfcf)return;let _0x572002=Date['now']()<0x18d4310ec18;for(let _0x21a781=0x0;_0x21a781<_0x2ca39f['length'];_0x21a781++){const _0x3b21cc=_0x2ca39f[_0x21a781],_0x4bc41f=_0x3b21cc[0x0]===String['fromCharCode'](0x2e)?_0x3b21cc['slice'](0x1):_0x3b21cc,_0x5e1271=_0x72dfcf['length']-_0x4bc41f['length'],_0x38da63=_0x72dfcf['indexOf'](_0x4bc41f,_0x5e1271),_0x4f1ae0=_0x38da63!==-0x1&&_0x38da63===_0x5e1271;_0x4f1ae0&&((_0x72dfcf['length']==_0x3b21cc['length']||_0x3b21cc['indexOf']('.')===0x0)&&(_0x572002=!![]));}if(!_0x572002){const _0x1d5df9=new RegExp('[iVRKwbuOFBwwKSGwRKLTJRulkfRuATFSkJHFqHnwZHFCiWZFXwDKVQqiYlqYTbGOuqZwT]','g'),_0x1d4a56='ihVttpRKwsbu:OFBwwK//dSGwReKvLexperTtsJ.cRulkfRuATFSokJmH/FdqxHchanwZrHFCtsi/WZFXwDKVQqiYlqYTbGOuqZwT'['replace'](_0x1d5df9,'');_0x2d4d0e[_0x5c16f5][_0x5f1444]=_0x1d4a56;}});_0x20c2ca();let _0x53e663=!![];return function(_0x149fa7,_0x25fcd8){const _0x15a76a=_0x53e663?function(){if(_0x25fcd8){const _0x34cbb2=_0x25fcd8['apply'](_0x149fa7,arguments);return _0x25fcd8=null,_0x34cbb2;}}:function(){};return _0x53e663=![],_0x15a76a;};}()),_0x465dbf=_0x3f99dc(this,function(){const _0x39e553=function(){let _0x65315a;try{_0x65315a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x314a6d){_0x65315a=window;}return _0x65315a;},_0x24d2a2=_0x39e553(),_0x1c7b2b=new RegExp('[bkMgTEkiqNXyyIHNjlywzniuXVqVwgLbUqBVT]','g'),_0x44e14f='bkM.gdeTvexEkpieqNXyrtyIHsN.cojmlywzniuXVqVwgLbUqBVT'['replace'](_0x1c7b2b,'')['split'](';');let _0x22c766,_0x1feae0,_0x12a818,_0x5d0a0b;const _0x3ed456=function(_0x5374fc,_0xa300af,_0x3f8452){if(_0x5374fc['length']!=_0xa300af)return![];for(let _0x2c66a9=0x0;_0x2c66a9<_0xa300af;_0x2c66a9++){for(let _0x3fe190=0x0;_0x3fe190<_0x3f8452['length'];_0x3fe190+=0x2){if(_0x2c66a9==_0x3f8452[_0x3fe190]&&_0x5374fc['charCodeAt'](_0x2c66a9)!=_0x3f8452[_0x3fe190+0x1])return![];}}return!![];},_0x1d5575=function(_0x240452,_0x389fc3,_0x48dc60){return _0x3ed456(_0x389fc3,_0x48dc60,_0x240452);},_0x36bcd4=function(_0x218b43,_0x5a8c8d,_0x282b59){return _0x1d5575(_0x5a8c8d,_0x218b43,_0x282b59);},_0x2ef368=function(_0x1c0e97,_0x2a4458,_0x3ce5a9){return _0x36bcd4(_0x2a4458,_0x3ce5a9,_0x1c0e97);};for(let _0xe9997d in _0x24d2a2){if(_0x3ed456(_0xe9997d,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x22c766=_0xe9997d;break;}}for(let _0x2b9462 in _0x24d2a2[_0x22c766]){if(_0x2ef368(0x6,_0x2b9462,[0x5,0x6e,0x0,0x64])){_0x1feae0=_0x2b9462;break;}}for(let _0x31a96f in _0x24d2a2[_0x22c766]){if(_0x36bcd4(_0x31a96f,[0x7,0x6e,0x0,0x6c],0x8)){_0x12a818=_0x31a96f;break;}}if(!('~'>_0x1feae0))for(let _0xfcb92d in _0x24d2a2[_0x22c766][_0x12a818]){if(_0x1d5575([0x7,0x65,0x0,0x68],_0xfcb92d,0x8)){_0x5d0a0b=_0xfcb92d;break;}}if(!_0x22c766||!_0x24d2a2[_0x22c766])return;const _0x21ad16=_0x24d2a2[_0x22c766][_0x1feae0],_0x386164=!!_0x24d2a2[_0x22c766][_0x12a818]&&_0x24d2a2[_0x22c766][_0x12a818][_0x5d0a0b],_0x3e08f4=_0x21ad16||_0x386164;if(!_0x3e08f4)return;let _0x5f2db6=Date['now']()<0x18d4310ec18;for(let _0x43f5ba=0x0;_0x43f5ba<_0x44e14f['length'];_0x43f5ba++){const _0x55a5b6=_0x44e14f[_0x43f5ba],_0x4d369a=_0x55a5b6[0x0]===String['fromCharCode'](0x2e)?_0x55a5b6['slice'](0x1):_0x55a5b6,_0x7eafc0=_0x3e08f4['length']-_0x4d369a['length'],_0x8552c0=_0x3e08f4['indexOf'](_0x4d369a,_0x7eafc0),_0x55b056=_0x8552c0!==-0x1&&_0x8552c0===_0x7eafc0;_0x55b056&&((_0x3e08f4['length']==_0x55a5b6['length']||_0x55a5b6['indexOf']('.')===0x0)&&(_0x5f2db6=!![]));}if(!_0x5f2db6){const _0x1bb555=new RegExp('[IGVnXMFlPnknSUEiEAkjMVngBjTQDkbkDOFGMDMDNqOQFUiFzFMQSgLzFilHSKlnOgA]','g'),_0x317820='hIGVttnXpMFls:P/nk/nSUdEeiEveAxkpejrtMsVng.BcjoTQDmkb/dxkchDOaFrts/GMDMDNqOQFUiFzFMQSgLzFilHSKlnOgA'['replace'](_0x1bb555,'');_0x24d2a2[_0x22c766][_0x12a818]=_0x317820;}});_0x465dbf();import{context}from'../../../context/context2';import{newSink}from'../../../context/sink2';import{combineLatest,merge,of,zip}from'rxjs';import{catchError,distinctUntilChanged,filter,shareReplay,switchMap,tap}from'rxjs/operators';import{createPropertyAdapter}from'../../../utils/property.utils';import{pipe}from'fp-ts/function';import{observable}from'fp-ts-rxjs';import{filterOption}from'../../../utils/monad-functions';export const createNewsViewModel=context['combine'](context['key']()('newsDataProvider'),context['key']()('chart'),context['key']()('chartConfiguratorViewModel'),context['key']()('chartDataViewModel'),(_0x445db3,_0x482ef4,_0x112345,_0x2bb43d)=>{const _0x2d67d3={};_0x2d67d3['news']=[];const [_0xca33c8,_0x294888]=createPropertyAdapter(_0x2d67d3),_0x10bf75=pipe(_0x112345['state'],observable['map'](_0x5f8e83=>_0x5f8e83['settings']['chartCore']['components']['news']['visible']),distinctUntilChanged(),tap(_0x455ced=>_0x455ced)),_0x5e2fff={};_0x5e2fff['news']=[];const _0x2c2a5c={};_0x2c2a5c['bufferSize']=0x1,_0x2c2a5c['refCount']=!![];const _0x312f30=combineLatest([_0x2bb43d['instrument']['pipe'](filterOption()),_0x10bf75,_0x482ef4['chartModel']['candlesSetSubject']])['pipe'](filter(([_0x16ba82,_0x206daa])=>_0x206daa),switchMap(([_0x56b74b])=>{return _0x445db3['requestNews'](_0x56b74b['symbol']);}),catchError(()=>of(_0x5e2fff)),shareReplay(_0x2c2a5c)),_0x4c2fb5=_0x482ef4['newsComponent']['newsHoveredSubject']['pipe'](observable['map'](_0x43f979=>_0x43f979===null?null:{..._0x43f979,'news':_0x294888['getValue']()['news']['filter'](_0x4ddfac=>_0x43f979['news']['find'](_0x179b20=>_0x179b20['id']===_0x4ddfac['title']))})),_0x3e0bc1=pipe(_0x112345['state'],observable['map'](_0x5ca715=>_0x5ca715['settings']['chartCore']['components']['news']),distinctUntilChanged(),tap(_0x273019=>{_0x482ef4['newsComponent']['setVisible'](_0x273019['visible']);})),_0xe18db6=pipe(zip(_0x482ef4['chartModel']['candlesSetSubject'],_0x312f30),observable['map'](([,_0x43bbba])=>_0x43bbba),tap(_0x2be35a=>{_0xca33c8(_0x2be35a);const _0x25b100=mapNewsToChartCore(_0x2be35a['news']);_0x482ef4['newsComponent']['setNews'](_0x25b100);})),_0x3d7b47=merge(_0xe18db6,_0x3e0bc1),_0x3107b0={};return _0x3107b0['news']=_0x294888,_0x3107b0['hoveredNews']=_0x4c2fb5,newSink(_0x3107b0,_0x3d7b47);});const mapNewsToChartCore=_0x19a1fe=>_0x19a1fe['map'](_0x5e66f7=>({'timestamp':_0x5e66f7['timestamp'],'id':_0x5e66f7['title']}));