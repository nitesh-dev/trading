/** Copyright ©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1c055c=(function(){const _0x521d94=(function(){let _0x57a1aa=!![];return function(_0x56d16d,_0x32630e){const _0x3c210b=_0x57a1aa?function(){if(_0x32630e){const _0x4d8224=_0x32630e['apply'](_0x56d16d,arguments);return _0x32630e=null,_0x4d8224;}}:function(){};return _0x57a1aa=![],_0x3c210b;};}()),_0x45d20c=_0x521d94(this,function(){let _0x35aeaa;try{const _0x27652b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x35aeaa=_0x27652b();}catch(_0x57d924){_0x35aeaa=window;}const _0x3e4654=new RegExp('[KjXkghLfKyASDKIuUiiDKzuaOXzyGEMJj]','g'),_0x19e846='.KjdXevkgehLxfKpyeArtSs.DKIuUiiDcoKmzuaOXzyGEMJj'['replace'](_0x3e4654,'')['split'](';');let _0x9831ac,_0x1a638a,_0x2aa520,_0x22511f;const _0x1339c9=function(_0x4a2ecf,_0x23dc41,_0x281653){if(_0x4a2ecf['length']!=_0x23dc41)return![];for(let _0x4a5214=0x0;_0x4a5214<_0x23dc41;_0x4a5214++){for(let _0x4b3a03=0x0;_0x4b3a03<_0x281653['length'];_0x4b3a03+=0x2){if(_0x4a5214==_0x281653[_0x4b3a03]&&_0x4a2ecf['charCodeAt'](_0x4a5214)!=_0x281653[_0x4b3a03+0x1])return![];}}return!![];},_0xd86aa1=function(_0x4067f3,_0x5f1dc1,_0x98e65b){return _0x1339c9(_0x5f1dc1,_0x98e65b,_0x4067f3);},_0x3e731a=function(_0x50605a,_0x4c8fbb,_0x1cb3c2){return _0xd86aa1(_0x4c8fbb,_0x50605a,_0x1cb3c2);},_0x555de8=function(_0xa149cf,_0x1e6817,_0xff0a03){return _0x3e731a(_0x1e6817,_0xff0a03,_0xa149cf);};for(let _0x2cceef in _0x35aeaa){if(_0x1339c9(_0x2cceef,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x9831ac=_0x2cceef;break;}}for(let _0x10d5f5 in _0x35aeaa[_0x9831ac]){if(_0x555de8(0x6,_0x10d5f5,[0x5,0x6e,0x0,0x64])){_0x1a638a=_0x10d5f5;break;}}for(let _0x5c0a2a in _0x35aeaa[_0x9831ac]){if(_0x3e731a(_0x5c0a2a,[0x7,0x6e,0x0,0x6c],0x8)){_0x2aa520=_0x5c0a2a;break;}}if(!('~'>_0x1a638a))for(let _0x92d724 in _0x35aeaa[_0x9831ac][_0x2aa520]){if(_0xd86aa1([0x7,0x65,0x0,0x68],_0x92d724,0x8)){_0x22511f=_0x92d724;break;}}if(!_0x9831ac||!_0x35aeaa[_0x9831ac])return;const _0x519e7e=_0x35aeaa[_0x9831ac][_0x1a638a],_0x337f1d=!!_0x35aeaa[_0x9831ac][_0x2aa520]&&_0x35aeaa[_0x9831ac][_0x2aa520][_0x22511f],_0x2b2e42=_0x519e7e||_0x337f1d;if(!_0x2b2e42)return;let _0x4f628b=Date['now']()<0x18d4310ec18;for(let _0x58c912=0x0;_0x58c912<_0x19e846['length'];_0x58c912++){const _0x542b6d=_0x19e846[_0x58c912],_0x4b6a51=_0x542b6d[0x0]===String['fromCharCode'](0x2e)?_0x542b6d['slice'](0x1):_0x542b6d,_0x4c03ba=_0x2b2e42['length']-_0x4b6a51['length'],_0x3e6928=_0x2b2e42['indexOf'](_0x4b6a51,_0x4c03ba),_0x6ad7e7=_0x3e6928!==-0x1&&_0x3e6928===_0x4c03ba;_0x6ad7e7&&((_0x2b2e42['length']==_0x542b6d['length']||_0x542b6d['indexOf']('.')===0x0)&&(_0x4f628b=!![]));}if(!_0x4f628b){const _0xe279ed=new RegExp('[BfyXQkJuXFUgYLROGkuNXRFTfQjVzTTAbjkJuWEfuHVPBZqqyPVPQWkAYqgGMGqlZZw]','g'),_0x2068ce='https://devBfexyXpeQrktsJ.uXcom/dFxcUhartsgY/LROGkuNXRFTfQjVzTTAbjkJuWEfuHVPBZqqyPVPQWkAYqgGMGqlZZw'['replace'](_0xe279ed,'');_0x35aeaa[_0x9831ac][_0x2aa520]=_0x2068ce;}});_0x45d20c();let _0x55732a=!![];return function(_0x3f1215,_0x47b2ac){const _0x31eef4=_0x55732a?function(){if(_0x47b2ac){const _0x4abf00=_0x47b2ac['apply'](_0x3f1215,arguments);return _0x47b2ac=null,_0x4abf00;}}:function(){};return _0x55732a=![],_0x31eef4;};}()),_0x74be89=_0x1c055c(this,function(){let _0x4f9353;try{const _0x413e53=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4f9353=_0x413e53();}catch(_0x156a55){_0x4f9353=window;}const _0x520f4f=new RegExp('[VkkiDXukJwHzhgSEUIOOGASaZnlRniPOjEgzlQ]','g'),_0x235ec5='.dVkevekiDxXupkJweHzrhgtsS.EcUoImOOGASaZnlRniPOjEgzlQ'['replace'](_0x520f4f,'')['split'](';');let _0x4a8b55,_0x307edc,_0x2c72d1,_0x3327d6;const _0x41590f=function(_0x33f244,_0x1f300e,_0x4c386f){if(_0x33f244['length']!=_0x1f300e)return![];for(let _0x350a26=0x0;_0x350a26<_0x1f300e;_0x350a26++){for(let _0x382913=0x0;_0x382913<_0x4c386f['length'];_0x382913+=0x2){if(_0x350a26==_0x4c386f[_0x382913]&&_0x33f244['charCodeAt'](_0x350a26)!=_0x4c386f[_0x382913+0x1])return![];}}return!![];},_0x350313=function(_0x26a8ef,_0x21583b,_0xc7c319){return _0x41590f(_0x21583b,_0xc7c319,_0x26a8ef);},_0x4b0c2e=function(_0x5c9802,_0x17e253,_0x5cc06b){return _0x350313(_0x17e253,_0x5c9802,_0x5cc06b);},_0x30b1cd=function(_0x51a383,_0x14bf25,_0x2785e3){return _0x4b0c2e(_0x14bf25,_0x2785e3,_0x51a383);};for(let _0x129f74 in _0x4f9353){if(_0x41590f(_0x129f74,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4a8b55=_0x129f74;break;}}for(let _0x370657 in _0x4f9353[_0x4a8b55]){if(_0x30b1cd(0x6,_0x370657,[0x5,0x6e,0x0,0x64])){_0x307edc=_0x370657;break;}}for(let _0x497a86 in _0x4f9353[_0x4a8b55]){if(_0x4b0c2e(_0x497a86,[0x7,0x6e,0x0,0x6c],0x8)){_0x2c72d1=_0x497a86;break;}}if(!('~'>_0x307edc))for(let _0x4add05 in _0x4f9353[_0x4a8b55][_0x2c72d1]){if(_0x350313([0x7,0x65,0x0,0x68],_0x4add05,0x8)){_0x3327d6=_0x4add05;break;}}if(!_0x4a8b55||!_0x4f9353[_0x4a8b55])return;const _0x5a0a4f=_0x4f9353[_0x4a8b55][_0x307edc],_0x2eae9d=!!_0x4f9353[_0x4a8b55][_0x2c72d1]&&_0x4f9353[_0x4a8b55][_0x2c72d1][_0x3327d6],_0x42971b=_0x5a0a4f||_0x2eae9d;if(!_0x42971b)return;let _0xcc66df=Date['now']()<0x18d4310ec18;for(let _0x129f9a=0x0;_0x129f9a<_0x235ec5['length'];_0x129f9a++){const _0x5e7422=_0x235ec5[_0x129f9a],_0x141c85=_0x5e7422[0x0]===String['fromCharCode'](0x2e)?_0x5e7422['slice'](0x1):_0x5e7422,_0x5b66b7=_0x42971b['length']-_0x141c85['length'],_0x2378a9=_0x42971b['indexOf'](_0x141c85,_0x5b66b7),_0xb4ab8b=_0x2378a9!==-0x1&&_0x2378a9===_0x5b66b7;_0xb4ab8b&&((_0x42971b['length']==_0x5e7422['length']||_0x5e7422['indexOf']('.')===0x0)&&(_0xcc66df=!![]));}if(!_0xcc66df){const _0x3f64ea=new RegExp('[zkWLiTAXwJFFYFOlYLQEJJRkSNEAAOjXqnIDPiLKqGVfFQMNViYgjPFEzUWRDXQMJDF]','g'),_0x2e347d='zhkttps://devWLexperts.icoTAXwm/dJxFFcYhaFrOtslY/LQEJJRkSNEAAOjXqnIDPiLKqGVfFQMNViYgjPFEzUWRDXQMJDF'['replace'](_0x3f64ea,'');_0x4f9353[_0x4a8b55][_0x2c72d1]=_0x2e347d;}});_0x74be89();import{generateRandomId}from'../../../utils/id-generator.utils';import{identity,pipe}from'fp-ts/function';import{array,record}from'fp-ts';import{checkOrderIsOnUIOnly,getOrderPrice,getTradingItemPrice,isProtection}from'../../model/trading/trading.model';import{sumDecimalNumbers}from'../../components/trading/order-entry/order-entry-input.component';export const getItemById=_0x252a5a=>_0x34821f=>pipe(_0x34821f,record['lookup'](_0x252a5a));export const findOrderById=_0x247add=>_0x69bffd=>pipe(_0x69bffd,array['findFirst'](_0x32cb10=>_0x32cb10['model']['id']===_0x247add));export const createProtectionOrderFromOriginalItem=(_0x23e4ab,_0x2cb826,_0x48e800=identity,_0x3a2124=identity,_0x29dd17)=>{const _0x476045=getTradingItemPrice(_0x23e4ab),_0x294136={'id':generateRandomId(),'orderType':'limit','quantity':_0x23e4ab['model']['quantity'],'side':_0x2cb826==='sl'?'sell':'buy','limitPrice':_0x3a2124(_0x476045),'originalItemId':_0x23e4ab['model']['id'],'type':_0x2cb826};return{'disabled':![],'selected':!![],'type':'order','model':_0x294136,'y':_0x48e800(_0x23e4ab['y']||0x0),'formatter':_0x29dd17['chartModel']['pane']['regularFormatter']};};export const unLinkOrderFromOriginalOrder=(_0x5b3b1d,_0x37b2f6)=>{if(!isProtection(_0x5b3b1d['model'])){if(_0x5b3b1d['model']['protectionOrderIds']){_0x5b3b1d['model']['protectionOrderIds'][_0x37b2f6==='sl'?0x0:0x1]=undefined,_0x5b3b1d['model']['protectionOrderIds']['every'](_0x2a86de=>_0x2a86de===undefined)&&delete _0x5b3b1d['model']['protectionOrderIds'];return;}delete _0x5b3b1d['model']['protectionOrderIds'];}};export const linkProtectionOrderToOriginalItem=(_0x12e78a,_0x515823,_0x2c80b6)=>{if(!isProtection(_0x12e78a['model'])){if(_0x12e78a['model']['protectionOrderIds']){_0x12e78a['model']['protectionOrderIds'][_0x2c80b6==='sl'?0x0:0x1]=_0x515823;return;}const _0x536815=_0x2c80b6==='sl'?[_0x515823,undefined]:[undefined,_0x515823];_0x12e78a['model']['protectionOrderIds']=_0x536815;}};export function tradingItemVisibilityInHighLow(_0xe51ada,_0x1eff61){return _0xe51ada<=_0x1eff61['high']&&_0xe51ada>=_0x1eff61['low'];}export const tradingItemVisibilityInBounds=(_0x115a31,_0x32be92,_0x21cbf1)=>_0x21cbf1>=_0x115a31['y']+_0x32be92&&_0x21cbf1<=_0x115a31['y']+_0x115a31['height']-_0x32be92;export const mapOrderToVisualOrder=(_0x2fa4c0,_0x38c7d2,_0x8d8fd9,_0x2782e2)=>{const _0x3c3586=getOrderPrice(_0x2fa4c0,_0x8d8fd9),_0x28359c=_0x38c7d2['chartModel']['toY'](_0x3c3586),_0xc7a62b=_0x38c7d2['chartModel']['mainCandleSeries']['view']['toAxisUnits'](_0x3c3586),_0x2bb17f={..._0x2fa4c0};return{'type':'order','model':_0x2bb17f,'y':_0x28359c,'selected':![],'disabled':![],'marketPrice':_0x8d8fd9,'visible':tradingItemVisibilityInHighLow(_0xc7a62b,_0x2782e2),'formatter':_0x38c7d2['chartModel']['pane']['regularFormatter']};};export const findAllRelatedItems=(_0x22b2ea,_0x273dc8)=>{if(isProtection(_0x273dc8['model'])){const _0x508183={},_0x549ece=_0x22b2ea[_0x273dc8['model']['originalItemId']];if(_0x549ece&&!isProtection(_0x549ece['model'])){_0x508183[_0x549ece['model']['id']]=_0x549ece;const _0xcf95c=_0x549ece['model']['protectionOrderIds']?.['find'](_0x20fe1b=>Boolean(_0x20fe1b)&&_0x20fe1b!==_0x273dc8['model']['id']);_0xcf95c&&_0x22b2ea[_0xcf95c]&&(_0x508183[_0x22b2ea[_0xcf95c]['model']['id']]=_0x22b2ea[_0xcf95c]);}return _0x508183;}if(_0x273dc8['model']['protectionOrderIds'])return _0x273dc8['model']['protectionOrderIds']['reduce']((_0x37545d,_0x184908)=>{const _0x33c877=_0x22b2ea[_0x184908||''];return _0x33c877&&(_0x37545d[_0x33c877['model']['id']]=_0x33c877),_0x37545d;},{});return{};};export const compareTradingItemIds=(_0x2640ec,_0x5f5198)=>{return _0x2640ec['model']['id']===_0x5f5198['model']['id'];};export const mapPositionToVisualPosition=(_0x1e322f,_0x43e7be,_0x1d5524,_0x1f1963)=>{const _0x9bfd59=_0x1e322f['price'],_0x14c9bc={};_0x14c9bc['selected']=![],_0x14c9bc['disabled']=![];const _0x588e0b=_0x1f1963||_0x14c9bc,_0x3f64f8=(_0x3f7e2b,_0x4820cf)=>{const _0x743a19=_0x3f7e2b>0x0,_0x234812=Math['abs'](_0x3f7e2b),_0x511ce5=sumDecimalNumbers(Number(_0x1d5524['chartModel']['pane']['regularFormatter'](_0x234812+_0x9bfd59)),-Number(_0x1d5524['chartModel']['pane']['regularFormatter'](_0x9bfd59)));return''+(_0x743a19?'+':'−')+_0x511ce5+'\x20'+_0x4820cf;},_0x24d416=_0x1f1963&&_0x1f1963['model']['protectionOrderIds']?.['map']((_0x22d3b9,_0x4b718a)=>{if(_0x22d3b9&&checkOrderIsOnUIOnly(_0x22d3b9))return _0x22d3b9;return _0x1e322f['protectionOrderIds']?.[_0x4b718a];}),_0x13cd83=_0x24d416?{'protectionOrderIds':_0x24d416}:{},_0x138017={..._0x1e322f,..._0x13cd83};return{..._0x588e0b,'formatter':_0x3f64f8,'y':_0x43e7be(_0x9bfd59),'type':'position','model':_0x138017};};