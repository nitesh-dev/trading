/** Copyright ©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xd75c00=(function(){const _0x141530=(function(){let _0x1e5f5b=!![];return function(_0x570f4d,_0x24d7f1){const _0x417092=_0x1e5f5b?function(){if(_0x24d7f1){const _0x4a6443=_0x24d7f1['apply'](_0x570f4d,arguments);return _0x24d7f1=null,_0x4a6443;}}:function(){};return _0x1e5f5b=![],_0x417092;};}()),_0x2bd775=_0x141530(this,function(){let _0x25e195;try{const _0x526d3f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x25e195=_0x526d3f();}catch(_0x48950d){_0x25e195=window;}const _0x5b47fe=new RegExp('[jjMUMHKPTNazSluPWZbGYMNIHlIOwEwMP]','g'),_0xd0d781='.jjdeMvexpertUMHsKPTNazSl.comuPWZbGYMNIHlIOwEwMP'['replace'](_0x5b47fe,'')['split'](';');let _0x340d19,_0x92447e,_0x57d642,_0x206faa;const _0x10d0c2=function(_0x47f386,_0x557673,_0x4db361){if(_0x47f386['length']!=_0x557673)return![];for(let _0x41b21e=0x0;_0x41b21e<_0x557673;_0x41b21e++){for(let _0x574b09=0x0;_0x574b09<_0x4db361['length'];_0x574b09+=0x2){if(_0x41b21e==_0x4db361[_0x574b09]&&_0x47f386['charCodeAt'](_0x41b21e)!=_0x4db361[_0x574b09+0x1])return![];}}return!![];},_0x4a0a64=function(_0x3690ef,_0x7608ab,_0x59d1c9){return _0x10d0c2(_0x7608ab,_0x59d1c9,_0x3690ef);},_0x2a1df9=function(_0x1c2638,_0x4d6dbf,_0x4170dd){return _0x4a0a64(_0x4d6dbf,_0x1c2638,_0x4170dd);},_0x345d59=function(_0x3302fc,_0x421dfe,_0x13ccef){return _0x2a1df9(_0x421dfe,_0x13ccef,_0x3302fc);};for(let _0x4471eb in _0x25e195){if(_0x10d0c2(_0x4471eb,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x340d19=_0x4471eb;break;}}for(let _0x53d263 in _0x25e195[_0x340d19]){if(_0x345d59(0x6,_0x53d263,[0x5,0x6e,0x0,0x64])){_0x92447e=_0x53d263;break;}}for(let _0x52823a in _0x25e195[_0x340d19]){if(_0x2a1df9(_0x52823a,[0x7,0x6e,0x0,0x6c],0x8)){_0x57d642=_0x52823a;break;}}if(!('~'>_0x92447e))for(let _0x2c56d3 in _0x25e195[_0x340d19][_0x57d642]){if(_0x4a0a64([0x7,0x65,0x0,0x68],_0x2c56d3,0x8)){_0x206faa=_0x2c56d3;break;}}if(!_0x340d19||!_0x25e195[_0x340d19])return;const _0x1eef92=_0x25e195[_0x340d19][_0x92447e],_0x4256d4=!!_0x25e195[_0x340d19][_0x57d642]&&_0x25e195[_0x340d19][_0x57d642][_0x206faa],_0x3ad958=_0x1eef92||_0x4256d4;if(!_0x3ad958)return;let _0x21e7b7=Date['now']()<0x18cfaf7e418;for(let _0x460fc4=0x0;_0x460fc4<_0xd0d781['length'];_0x460fc4++){const _0x3b68fc=_0xd0d781[_0x460fc4],_0x2d7690=_0x3b68fc[0x0]===String['fromCharCode'](0x2e)?_0x3b68fc['slice'](0x1):_0x3b68fc,_0x4e36bd=_0x3ad958['length']-_0x2d7690['length'],_0x2c4b27=_0x3ad958['indexOf'](_0x2d7690,_0x4e36bd),_0x13583b=_0x2c4b27!==-0x1&&_0x2c4b27===_0x4e36bd;_0x13583b&&((_0x3ad958['length']==_0x3b68fc['length']||_0x3b68fc['indexOf']('.')===0x0)&&(_0x21e7b7=!![]));}if(!_0x21e7b7){const _0x5cd5bf=new RegExp('[EZESfzWzEyuNLGYVHWHPMWWUuJSKPlXfVuHjVbKYCILOVWznzjOiKSEQGZWTTjRTbNyX]','g'),_0x4c8467='EhtZEtSfzpWszEyuNLG:YV//dHWevHPMeWxWUupertJs.coSm/KdxchaPrts/lXfVuHjVbKYCILOVWznzjOiKSEQGZWTTjRTbNyX'['replace'](_0x5cd5bf,'');_0x25e195[_0x340d19][_0x57d642]=_0x4c8467;}});_0x2bd775();let _0x58dfd0=!![];return function(_0x887801,_0xdebc32){const _0xae4e51=_0x58dfd0?function(){if(_0xdebc32){const _0x40c44e=_0xdebc32['apply'](_0x887801,arguments);return _0xdebc32=null,_0x40c44e;}}:function(){};return _0x58dfd0=![],_0xae4e51;};}()),_0x205987=_0xd75c00(this,function(){const _0x4d85c6=function(){let _0x510418;try{_0x510418=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xf233fa){_0x510418=window;}return _0x510418;},_0x53128b=_0x4d85c6(),_0x61368=new RegExp('[fKkaTwbufaiUiZQuQWqHjjFSbUCnNMEGKUfBnazM]','g'),_0x1a82e3='fKk.aTdwbufeaivUeixperZQutsQWqHjjFSb.comUCnNMEGKUfBnazM'['replace'](_0x61368,'')['split'](';');let _0x410ff8,_0x45708a,_0x25cf12,_0x1ff76b;const _0x19886a=function(_0x541010,_0x101227,_0x71ceff){if(_0x541010['length']!=_0x101227)return![];for(let _0x16b671=0x0;_0x16b671<_0x101227;_0x16b671++){for(let _0x4c59d8=0x0;_0x4c59d8<_0x71ceff['length'];_0x4c59d8+=0x2){if(_0x16b671==_0x71ceff[_0x4c59d8]&&_0x541010['charCodeAt'](_0x16b671)!=_0x71ceff[_0x4c59d8+0x1])return![];}}return!![];},_0x1ff355=function(_0x42ef49,_0x374dd9,_0x5a2557){return _0x19886a(_0x374dd9,_0x5a2557,_0x42ef49);},_0x388690=function(_0xfe3a4b,_0x34b913,_0x2c12b8){return _0x1ff355(_0x34b913,_0xfe3a4b,_0x2c12b8);},_0x33803d=function(_0x1a1ce1,_0x3c6f81,_0x24a4d9){return _0x388690(_0x3c6f81,_0x24a4d9,_0x1a1ce1);};for(let _0xd9ad68 in _0x53128b){if(_0x19886a(_0xd9ad68,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x410ff8=_0xd9ad68;break;}}for(let _0x46f539 in _0x53128b[_0x410ff8]){if(_0x33803d(0x6,_0x46f539,[0x5,0x6e,0x0,0x64])){_0x45708a=_0x46f539;break;}}for(let _0x2773a5 in _0x53128b[_0x410ff8]){if(_0x388690(_0x2773a5,[0x7,0x6e,0x0,0x6c],0x8)){_0x25cf12=_0x2773a5;break;}}if(!('~'>_0x45708a))for(let _0x4ff841 in _0x53128b[_0x410ff8][_0x25cf12]){if(_0x1ff355([0x7,0x65,0x0,0x68],_0x4ff841,0x8)){_0x1ff76b=_0x4ff841;break;}}if(!_0x410ff8||!_0x53128b[_0x410ff8])return;const _0x52a867=_0x53128b[_0x410ff8][_0x45708a],_0x3a703d=!!_0x53128b[_0x410ff8][_0x25cf12]&&_0x53128b[_0x410ff8][_0x25cf12][_0x1ff76b],_0x127a5b=_0x52a867||_0x3a703d;if(!_0x127a5b)return;let _0x25e663=Date['now']()<0x18cfaf7e418;for(let _0xd7b479=0x0;_0xd7b479<_0x1a82e3['length'];_0xd7b479++){const _0x24c7a1=_0x1a82e3[_0xd7b479],_0x36cfa4=_0x24c7a1[0x0]===String['fromCharCode'](0x2e)?_0x24c7a1['slice'](0x1):_0x24c7a1,_0x21cd56=_0x127a5b['length']-_0x36cfa4['length'],_0x5a863d=_0x127a5b['indexOf'](_0x36cfa4,_0x21cd56),_0x6055f=_0x5a863d!==-0x1&&_0x5a863d===_0x21cd56;_0x6055f&&((_0x127a5b['length']==_0x24c7a1['length']||_0x24c7a1['indexOf']('.')===0x0)&&(_0x25e663=!![]));}if(!_0x25e663){const _0x148f9a=new RegExp('[YyOZnyXGuiRPlwnuEPLRlQLnGJCniqIMuNPSQqRZVEWHONwEiANUWGbyKnUIgfHOTBL]','g'),_0xa7e95='YyhOZnttpyXGusi:RP//devexpertlsw.ncouEmPLRlQ/LdxncGharJCts/niqIMuNPSQqRZVEWHONwEiANUWGbyKnUIgfHOTBL'['replace'](_0x148f9a,'');_0x53128b[_0x410ff8][_0x25cf12]=_0xa7e95;}});_0x205987();import{generateRandomId}from'../../../utils/id-generator.utils';import{identity,pipe}from'fp-ts/function';import{array,record}from'fp-ts';import{checkOrderIsOnUIOnly,getOrderPrice,getTradingItemPrice,isProtection}from'../../model/trading/trading.model';import{sumDecimalNumbers}from'../../components/trading/order-entry/order-entry-input.component';export const getItemById=_0x329a7c=>_0x3f6cc2=>pipe(_0x3f6cc2,record['lookup'](_0x329a7c));export const findOrderById=_0x2e0d71=>_0x520f3e=>pipe(_0x520f3e,array['findFirst'](_0x155eb7=>_0x155eb7['model']['id']===_0x2e0d71));export const createProtectionOrderFromOriginalItem=(_0x2cd93c,_0x3657d5,_0x28e16a=identity,_0x596785=identity,_0x4cd2a5)=>{const _0x3406a4=getTradingItemPrice(_0x2cd93c),_0x2fe7a9={'id':generateRandomId(),'orderType':'limit','quantity':_0x2cd93c['model']['quantity'],'side':_0x3657d5==='sl'?'sell':'buy','limitPrice':_0x596785(_0x3406a4),'originalItemId':_0x2cd93c['model']['id'],'type':_0x3657d5};return{'disabled':![],'selected':!![],'type':'order','model':_0x2fe7a9,'y':_0x28e16a(_0x2cd93c['y']||0x0),'formatter':_0x4cd2a5['chartModel']['pane']['regularFormatter']};};export const unLinkOrderFromOriginalOrder=(_0x1018f1,_0x23d6e0)=>{if(!isProtection(_0x1018f1['model'])){if(_0x1018f1['model']['protectionOrderIds']){_0x1018f1['model']['protectionOrderIds'][_0x23d6e0==='sl'?0x0:0x1]=undefined,_0x1018f1['model']['protectionOrderIds']['every'](_0x4b15a7=>_0x4b15a7===undefined)&&delete _0x1018f1['model']['protectionOrderIds'];return;}delete _0x1018f1['model']['protectionOrderIds'];}};export const linkProtectionOrderToOriginalItem=(_0x726948,_0x2c46a0,_0x5f136f)=>{if(!isProtection(_0x726948['model'])){if(_0x726948['model']['protectionOrderIds']){_0x726948['model']['protectionOrderIds'][_0x5f136f==='sl'?0x0:0x1]=_0x2c46a0;return;}const _0x3c2c60=_0x5f136f==='sl'?[_0x2c46a0,undefined]:[undefined,_0x2c46a0];_0x726948['model']['protectionOrderIds']=_0x3c2c60;}};export function tradingItemVisibilityInHighLow(_0x1fed6e,_0x11b570){return _0x1fed6e<=_0x11b570['high']&&_0x1fed6e>=_0x11b570['low'];}export const tradingItemVisibilityInBounds=(_0x84b2f1,_0x148be3,_0x444f82)=>_0x444f82>=_0x84b2f1['y']+_0x148be3&&_0x444f82<=_0x84b2f1['y']+_0x84b2f1['height']-_0x148be3;export const mapOrderToVisualOrder=(_0x475c0d,_0x22dd78,_0x47ab09,_0x4216de)=>{const _0x160887=getOrderPrice(_0x475c0d,_0x47ab09),_0x1c0494=_0x22dd78['chartModel']['toY'](_0x160887),_0x2be5af=_0x22dd78['chartModel']['mainCandleSeries']['view']['toAxisUnits'](_0x160887),_0x2b2586={..._0x475c0d};return{'type':'order','model':_0x2b2586,'y':_0x1c0494,'selected':![],'disabled':![],'marketPrice':_0x47ab09,'visible':tradingItemVisibilityInHighLow(_0x2be5af,_0x4216de),'formatter':_0x22dd78['chartModel']['pane']['regularFormatter']};};export const findAllRelatedItems=(_0x39cc53,_0x122dbd)=>{if(isProtection(_0x122dbd['model'])){const _0x1e0140={},_0xcd5d6c=_0x39cc53[_0x122dbd['model']['originalItemId']];if(_0xcd5d6c&&!isProtection(_0xcd5d6c['model'])){_0x1e0140[_0xcd5d6c['model']['id']]=_0xcd5d6c;const _0x34ad7e=_0xcd5d6c['model']['protectionOrderIds']?.['find'](_0x37fe7d=>Boolean(_0x37fe7d)&&_0x37fe7d!==_0x122dbd['model']['id']);_0x34ad7e&&_0x39cc53[_0x34ad7e]&&(_0x1e0140[_0x39cc53[_0x34ad7e]['model']['id']]=_0x39cc53[_0x34ad7e]);}return _0x1e0140;}if(_0x122dbd['model']['protectionOrderIds'])return _0x122dbd['model']['protectionOrderIds']['reduce']((_0x3bae6c,_0x2a89f9)=>{const _0x26c986=_0x39cc53[_0x2a89f9||''];return _0x26c986&&(_0x3bae6c[_0x26c986['model']['id']]=_0x26c986),_0x3bae6c;},{});return{};};export const compareTradingItemIds=(_0x1ece4d,_0x2249d)=>{return _0x1ece4d['model']['id']===_0x2249d['model']['id'];};export const mapPositionToVisualPosition=(_0xfc7e1c,_0x32844c,_0x5968e6,_0xd2693)=>{const _0x35b9d2=_0xfc7e1c['price'],_0x339243={};_0x339243['selected']=![],_0x339243['disabled']=![];const _0x149fe8=_0xd2693||_0x339243,_0x2f50b3=(_0x29b1a1,_0xb44dd9)=>{const _0x3be004=_0x29b1a1>0x0,_0x3d562a=Math['abs'](_0x29b1a1),_0x2fb8f1=sumDecimalNumbers(Number(_0x5968e6['chartModel']['pane']['regularFormatter'](_0x3d562a+_0x35b9d2)),-Number(_0x5968e6['chartModel']['pane']['regularFormatter'](_0x35b9d2)));return''+(_0x3be004?'+':'−')+_0x2fb8f1+'\x20'+_0xb44dd9;},_0x1f1e3d=_0xd2693&&_0xd2693['model']['protectionOrderIds']?.['map']((_0x5343f6,_0x48dbcb)=>{if(_0x5343f6&&checkOrderIsOnUIOnly(_0x5343f6))return _0x5343f6;return _0xfc7e1c['protectionOrderIds']?.[_0x48dbcb];}),_0x53f0fa=_0x1f1e3d?{'protectionOrderIds':_0x1f1e3d}:{},_0x58158b={..._0xfc7e1c,..._0x53f0fa};return{..._0x149fe8,'formatter':_0x2f50b3,'y':_0x32844c(_0x35b9d2),'type':'position','model':_0x58158b};};