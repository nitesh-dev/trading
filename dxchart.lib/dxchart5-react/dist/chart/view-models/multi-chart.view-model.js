/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x502c43=(function(){const _0x171082=(function(){let _0x53c064=!![];return function(_0x37fb3b,_0x5734fb){const _0x2705be=_0x53c064?function(){if(_0x5734fb){const _0x579672=_0x5734fb['apply'](_0x37fb3b,arguments);return _0x5734fb=null,_0x579672;}}:function(){};return _0x53c064=![],_0x2705be;};}()),_0x312548=_0x171082(this,function(){let _0x18cc26;try{const _0xcfaa77=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x18cc26=_0xcfaa77();}catch(_0x5b3313){_0x18cc26=window;}const _0x105903=new RegExp('[lRBfALKZJBAqLSMjUVkyDDjhRDhTPNCu]','g'),_0x10514c='lRBfA.LKZJBAqLdSMjUVevkeyxpeDDrtjshRDh.TPcNoCum'['replace'](_0x105903,'')['split'](';');let _0x5b91ca,_0x9a57bd,_0x531d0b,_0x425114;const _0x50943b=function(_0x4952d0,_0x477550,_0x21a3a5){if(_0x4952d0['length']!=_0x477550)return![];for(let _0x28da39=0x0;_0x28da39<_0x477550;_0x28da39++){for(let _0x13f997=0x0;_0x13f997<_0x21a3a5['length'];_0x13f997+=0x2){if(_0x28da39==_0x21a3a5[_0x13f997]&&_0x4952d0['charCodeAt'](_0x28da39)!=_0x21a3a5[_0x13f997+0x1])return![];}}return!![];},_0x496454=function(_0x204b52,_0x2886e6,_0x47ee6c){return _0x50943b(_0x2886e6,_0x47ee6c,_0x204b52);},_0x35ad6c=function(_0x594f8d,_0x5615e9,_0x34843b){return _0x496454(_0x5615e9,_0x594f8d,_0x34843b);},_0x20b5fe=function(_0x41719d,_0x35d011,_0x1a4706){return _0x35ad6c(_0x35d011,_0x1a4706,_0x41719d);};for(let _0x100f44 in _0x18cc26){if(_0x50943b(_0x100f44,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5b91ca=_0x100f44;break;}}for(let _0x4373a2 in _0x18cc26[_0x5b91ca]){if(_0x20b5fe(0x6,_0x4373a2,[0x5,0x6e,0x0,0x64])){_0x9a57bd=_0x4373a2;break;}}for(let _0x177a29 in _0x18cc26[_0x5b91ca]){if(_0x35ad6c(_0x177a29,[0x7,0x6e,0x0,0x6c],0x8)){_0x531d0b=_0x177a29;break;}}if(!('~'>_0x9a57bd))for(let _0x23c338 in _0x18cc26[_0x5b91ca][_0x531d0b]){if(_0x496454([0x7,0x65,0x0,0x68],_0x23c338,0x8)){_0x425114=_0x23c338;break;}}if(!_0x5b91ca||!_0x18cc26[_0x5b91ca])return;const _0x32daa3=_0x18cc26[_0x5b91ca][_0x9a57bd],_0x379265=!!_0x18cc26[_0x5b91ca][_0x531d0b]&&_0x18cc26[_0x5b91ca][_0x531d0b][_0x425114],_0x227f69=_0x32daa3||_0x379265;if(!_0x227f69)return;let _0x1ad7b1=Date['now']()<0x18d4310ec18;for(let _0x53c4df=0x0;_0x53c4df<_0x10514c['length'];_0x53c4df++){const _0x4bd586=_0x10514c[_0x53c4df],_0x175d0=_0x4bd586[0x0]===String['fromCharCode'](0x2e)?_0x4bd586['slice'](0x1):_0x4bd586,_0x5bfff0=_0x227f69['length']-_0x175d0['length'],_0x43d236=_0x227f69['indexOf'](_0x175d0,_0x5bfff0),_0x1f9efe=_0x43d236!==-0x1&&_0x43d236===_0x5bfff0;_0x1f9efe&&((_0x227f69['length']==_0x4bd586['length']||_0x4bd586['indexOf']('.')===0x0)&&(_0x1ad7b1=!![]));}if(!_0x1ad7b1){const _0x3336fb=new RegExp('[FMECGTGRgFijUOnwygGGzNLQFKESjiZzWMzRQOUjuDbMWJVNUCJLbUlCknLkljGFEwAGNqGblVGS]','g'),_0x3c7bae='FhtMtEpCGTGRgs:/F/idejvexUpOnwygGGzeNLrtsQFK.cESjiom/ZzWMdzxcRQharOUjuDtbMWJsVNU/CJLbUlCknLkljGFEwAGNqGblVGS'['replace'](_0x3336fb,'');_0x18cc26[_0x5b91ca][_0x531d0b]=_0x3c7bae;}});_0x312548();let _0x2f9c24=!![];return function(_0x20b624,_0x30fc0b){const _0x3e50c8=_0x2f9c24?function(){if(_0x30fc0b){const _0x4d7a89=_0x30fc0b['apply'](_0x20b624,arguments);return _0x30fc0b=null,_0x4d7a89;}}:function(){};return _0x2f9c24=![],_0x3e50c8;};}()),_0x2c0f33=_0x502c43(this,function(){const _0x256cf9=function(){let _0x47e93a;try{_0x47e93a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x27ec09){_0x47e93a=window;}return _0x47e93a;},_0x80e512=_0x256cf9(),_0x3f14a6=new RegExp('[SLXRAQWbnBNuTESgBSXGLHqLXfAGzKyGQfgMi]','g'),_0x32dc7a='S.dLevXexpReAQrtsW.bcnBNoumTESgBSXGLHqLXfAGzKyGQfgMi'['replace'](_0x3f14a6,'')['split'](';');let _0x3f0d0c,_0x4ed279,_0x4a3525,_0x21eca6;const _0x2d65f0=function(_0x536c24,_0x2aaf73,_0x43e284){if(_0x536c24['length']!=_0x2aaf73)return![];for(let _0x39cc03=0x0;_0x39cc03<_0x2aaf73;_0x39cc03++){for(let _0x265ad1=0x0;_0x265ad1<_0x43e284['length'];_0x265ad1+=0x2){if(_0x39cc03==_0x43e284[_0x265ad1]&&_0x536c24['charCodeAt'](_0x39cc03)!=_0x43e284[_0x265ad1+0x1])return![];}}return!![];},_0x525c33=function(_0x1c3aa6,_0x40b890,_0x21ce93){return _0x2d65f0(_0x40b890,_0x21ce93,_0x1c3aa6);},_0x51a6bf=function(_0xd3ea3a,_0x15ba3e,_0x388c07){return _0x525c33(_0x15ba3e,_0xd3ea3a,_0x388c07);},_0x15902b=function(_0x4bef00,_0x2968a2,_0x3feee9){return _0x51a6bf(_0x2968a2,_0x3feee9,_0x4bef00);};for(let _0x4910b2 in _0x80e512){if(_0x2d65f0(_0x4910b2,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3f0d0c=_0x4910b2;break;}}for(let _0x1dacf5 in _0x80e512[_0x3f0d0c]){if(_0x15902b(0x6,_0x1dacf5,[0x5,0x6e,0x0,0x64])){_0x4ed279=_0x1dacf5;break;}}for(let _0x584f05 in _0x80e512[_0x3f0d0c]){if(_0x51a6bf(_0x584f05,[0x7,0x6e,0x0,0x6c],0x8)){_0x4a3525=_0x584f05;break;}}if(!('~'>_0x4ed279))for(let _0x4aa668 in _0x80e512[_0x3f0d0c][_0x4a3525]){if(_0x525c33([0x7,0x65,0x0,0x68],_0x4aa668,0x8)){_0x21eca6=_0x4aa668;break;}}if(!_0x3f0d0c||!_0x80e512[_0x3f0d0c])return;const _0x12614d=_0x80e512[_0x3f0d0c][_0x4ed279],_0xbe7339=!!_0x80e512[_0x3f0d0c][_0x4a3525]&&_0x80e512[_0x3f0d0c][_0x4a3525][_0x21eca6],_0x1e7750=_0x12614d||_0xbe7339;if(!_0x1e7750)return;let _0x464203=Date['now']()<0x18d4310ec18;for(let _0x529004=0x0;_0x529004<_0x32dc7a['length'];_0x529004++){const _0x2b99c9=_0x32dc7a[_0x529004],_0x35bf6c=_0x2b99c9[0x0]===String['fromCharCode'](0x2e)?_0x2b99c9['slice'](0x1):_0x2b99c9,_0x469694=_0x1e7750['length']-_0x35bf6c['length'],_0x311791=_0x1e7750['indexOf'](_0x35bf6c,_0x469694),_0x3bf229=_0x311791!==-0x1&&_0x311791===_0x469694;_0x3bf229&&((_0x1e7750['length']==_0x2b99c9['length']||_0x2b99c9['indexOf']('.')===0x0)&&(_0x464203=!![]));}if(!_0x464203){const _0x1bf594=new RegExp('[ZbSELNylCqLJTCIljqSbzFUTbDNITTbPblNifnJVWfPgHJKDVAYyVHLXZBHYfERHiFT]','g'),_0x216029='htZtpbs://SEdLNevyexlCpqeLrJTtCIsl.jqScom/bdzxchFartUTbsDNITTb/PblNifnJVWfPgHJKDVAYyVHLXZBHYfERHiFT'['replace'](_0x1bf594,'');_0x80e512[_0x3f0d0c][_0x4a3525]=_0x216029;}});_0x2c0f33();import{nonEmptyArray,option}from'fp-ts';import{observable}from'fp-ts-rxjs';import{pipe}from'fp-ts/function';import{merge}from'rxjs';import{distinctUntilChanged,finalize,tap}from'rxjs/operators';import{context}from'../../context/context2';import{newSink}from'../../context/sink2';import{callTracerProxy}from'../../utils/debug/call-tracer';import{createPropertyAdapter}from'../../utils/property.utils';import{timeframeEq}from'../model/timeframe.model';import{crossToolEq}from'./cross-tool.vm';export const DEFAULT_TIMESTAMP_RANGE=[0x0,0x0];const _0x1ded88={};_0x1ded88['visible']=!![],_0x1ded88['top']=0x0,_0x1ded88['bottom']=0x0,_0x1ded88['right']=0x0,_0x1ded88['left']=0x0;export const DEFAULT_OFFSETS=_0x1ded88;export const createMultiChartViewModel=context['of']((_0x2e4027,_0x3d8924)=>{const [_0x2651f4,_0x5b2687]=createPropertyAdapter([]),[_0x9aaca6,_0x142725]=createPropertyAdapter(_0x2e4027),_0x40844f={};_0x40844f['units']=DEFAULT_TIMESTAMP_RANGE,_0x40844f['timestamps']=DEFAULT_TIMESTAMP_RANGE,_0x40844f['animatedSync']=![];const [_0x4f914b,_0x507bf8]=createPropertyAdapter(_0x40844f),[_0x46a2f6,_0x5560dc]=createPropertyAdapter(_0x3d8924),[_0x2ea466,_0x266172]=createPropertyAdapter(_0x3d8924),[_0x863e01,_0x2941eb]=createPropertyAdapter(![]),_0x34e514=new Set(),_0x36a3b0=_0x488aab=>{return _0x34e514['add'](_0x488aab),()=>_0x34e514['delete'](_0x488aab);},_0x9b519a=pipe(_0x5b2687,observable['chain'](_0x2c5265=>merge(_0x2c5265['map'](_0xc8e489=>merge(_0xc8e489['canvasInputListener']['observeMouseDown'](),_0xc8e489['canvasInputListener']['observeContextMenu']())['pipe'](observable['map'](()=>_0xc8e489['id']))))),observable['flatten'],distinctUntilChanged(),tap(_0x46a2f6)),_0x4565c0=pipe(_0x5560dc,tap(_0x2fd315=>_0x34e514['forEach'](_0x41fa94=>_0x41fa94(_0x2fd315))),finalize(()=>_0x34e514['clear']())),_0x1bad7c=_0x3171e8=>{_0x9aaca6({..._0x142725['getValue'](),'layout':_0x3171e8,'maximizedChartId':option['none']});},_0x3e0ab5=_0x53ad9c=>{_0x9aaca6({..._0x142725['getValue'](),'lastChartType':_0x53ad9c});},_0x4aca6c=_0x5284f0=>{_0x9aaca6({..._0x142725['getValue'](),'isChartTypeSyncEnabled':_0x5284f0});},_0x481bb9=_0x116c8b=>{_0x9aaca6({..._0x142725['getValue'](),'lastInstrument':_0x116c8b});},_0x265df2=_0x1aa165=>{_0x9aaca6({..._0x142725['getValue'](),'isInstrumentSyncEnabled':_0x1aa165});},_0x3d3f7b=_0xfa6b83=>{_0x9aaca6({..._0x142725['getValue'](),'lastTimezone':_0xfa6b83});},_0x347b2b=_0x2cfaee=>{_0x9aaca6({..._0x142725['getValue'](),'isTimezoneSyncEnabled':_0x2cfaee});},_0xc1fcc9=_0x4176b3=>{_0x9aaca6({..._0x142725['getValue'](),'lastAggregationPeriodType':_0x4176b3});},_0x7dce33=_0x4ed312=>{_0x9aaca6({..._0x142725['getValue'](),'isAggregationPeriodTypeSyncEnabled':_0x4ed312});},[_0x3d86a0,_0x5b46bb]=createPropertyAdapter(option['none']),_0xfb94bd={};_0xfb94bd['crosshairType']=_0x2e4027['charts'][0x0]['chartSettings']['chartCore']['components']['crossTool']['type'];const [_0x479236,_0x3ed60f]=createPropertyAdapter(_0xfb94bd),_0x56841a=_0x293c8c=>{!crossToolEq['equals'](_0x293c8c,_0x5b46bb['getValue']())&&_0x3d86a0(_0x293c8c);},_0x4dbcac=_0x2e60a3=>{_0x9aaca6({..._0x142725['getValue'](),'isCrosshairSyncEnabled':_0x2e60a3});},_0x278a31=_0x14b664=>{!timeframeEq['equals'](_0x14b664,_0x507bf8['getValue']())&&_0x4f914b(_0x14b664);},_0x54bb95=_0x140fcf=>{_0x9aaca6({..._0x142725['getValue'](),'offsets':_0x140fcf});},_0x28bb14=_0x50d017=>{_0x9aaca6({..._0x142725['getValue'](),'lastGeneralSettings':_0x50d017});},_0x17a516=_0x638e0f=>{const _0x55c027=_0x58fcf2();_0x9aaca6({..._0x142725['getValue'](),'lastGeneralSettings':_0x55c027['chartSettings'],'isGeneralSettingsSyncEnabled':_0x638e0f});},_0xd9fec8=_0x452dca=>{const _0x50b147=pipe(_0x142725['getValue']()['charts'],nonEmptyArray['map'](_0x1a7aae=>({..._0x1a7aae,'studies':_0x452dca})));_0x110e47(_0x50b147),_0x9aaca6({..._0x142725['getValue'](),'lastStudies':_0x452dca});},_0x447808=_0x1517b4=>{const _0x1a32e2=_0x58fcf2();_0x9aaca6({..._0x142725['getValue'](),'isStudiesSyncEnabled':_0x1517b4,'lastStudies':_0x1a32e2['studies']});},_0x110e47=_0x4fedb7=>{_0x9aaca6({..._0x142725['getValue'](),'charts':_0x4fedb7});},_0x256732=_0x24a4f2=>{_0x9aaca6({..._0x142725['getValue'](),'maximizedChartId':_0x24a4f2});},_0x710548=_0x49dc94=>_0x142725['getValue']()['charts']['find'](_0x3be439=>_0x3be439['id']===_0x49dc94)??_0x142725['getValue']()['charts'][0x0],_0x58fcf2=()=>_0x710548(_0x5560dc['getValue']()),_0x435182=()=>_0x142725['getValue']()['charts'],_0x2cbebc=(_0x1298a2,_0x18e6ee)=>pipe(_0x142725['getValue']()['charts'],nonEmptyArray['map'](_0x3e40ba=>{if(_0x3e40ba['id']===_0x1298a2){const _0xc8ef1={..._0x3e40ba,..._0x18e6ee},_0x28c937=_0xc8ef1;return _0x28c937;}return _0x3e40ba;}),_0x110e47),_0x50d858=()=>pipe(_0x142725['getValue'](),({layout:_0x2536b6})=>_0x2536b6['match'](/(?<rows>\d)x(?<columns>\d)/),_0x13756c=>[parseInt(_0x13756c?.['groups']?.['rows']??'1',0xa),parseInt(_0x13756c?.['groups']?.['columns']??'1',0xa)]),_0x5013f3=_0x5b3db5=>{_0x9aaca6({..._0x142725['getValue'](),'drawingMode':_0x5b3db5});},_0x1ee2a2=pipe(_0x142725,observable['map'](_0x5707da=>_0x5707da['drawingMode']),distinctUntilChanged(),tap(_0xc4dc3b=>_0x5b2687['getValue']()['map'](_0x2dd00f=>_0x2dd00f['drawings']['setDrawingMode'](_0xc4dc3b)))),_0x3519f2=_0x596107=>{_0x9aaca6({..._0x142725['getValue'](),'magnetMode':_0x596107});},_0x48d393=pipe(_0x142725,observable['map'](_0x4697ad=>_0x4697ad['magnetMode']),distinctUntilChanged(),tap(_0x40b657=>_0x5b2687['getValue']()['map'](_0x82a433=>_0x82a433['drawings']['setMagnetMode'](_0x40b657)))),_0x124957=_0x585229=>{_0x9aaca6({..._0x142725['getValue'](),'theme':_0x585229});},_0x3aa399=pipe(_0x142725,observable['map'](_0x5c71b6=>_0x5c71b6['layout']),distinctUntilChanged(),tap(_0x326acc=>{parseInt(_0x5560dc['getValue'](),0xa)>=getChartsAmount(_0x326acc)&&_0x46a2f6('0');})),_0x3a1598=merge(_0x9b519a,_0x4565c0,_0x1ee2a2,_0x48d393,_0x3aa399),_0x175c43={};return _0x175c43['state']=_0x142725,_0x175c43['hoveredChartId']=_0x266172,_0x175c43['setHoveredChartId']=_0x2ea466,_0x175c43['crosshair']=_0x5b46bb,_0x175c43['setCrosshairSync']=_0x4dbcac,_0x175c43['setCrosshairSettings']=_0x479236,_0x175c43['crosshairSettings']=_0x3ed60f,_0x175c43['updateCrosshair']=_0x56841a,_0x175c43['updateTimeframe']=_0x278a31,_0x175c43['timeframe']=_0x507bf8,_0x175c43['setState']=_0x9aaca6,_0x175c43['setLayout']=_0x1bad7c,_0x175c43['setChartTypeSync']=_0x4aca6c,_0x175c43['setInstrumentSync']=_0x265df2,_0x175c43['setChartType']=_0x3e0ab5,_0x175c43['setInstrument']=_0x481bb9,_0x175c43['setTimezone']=_0x3d3f7b,_0x175c43['setTimezoneSync']=_0x347b2b,_0x175c43['setAggregationPeriodType']=_0xc1fcc9,_0x175c43['setAggregationPeriodTypeSync']=_0x7dce33,_0x175c43['setGeneralSettings']=_0x28bb14,_0x175c43['setGeneralSettingsSync']=_0x17a516,_0x175c43['setStudies']=_0xd9fec8,_0x175c43['setStudiesSync']=_0x447808,_0x175c43['maximizeChart']=_0x256732,_0x175c43['getChartInfo']=_0x710548,_0x175c43['getSelectedChartInfo']=_0x58fcf2,_0x175c43['getAllCharts']=_0x435182,_0x175c43['getLayout']=_0x50d858,_0x175c43['updateLocalChartInfo']=_0x2cbebc,_0x175c43['selectedChartId']=_0x5560dc,_0x175c43['setSelectedChartId']=_0x46a2f6,_0x175c43['onSelectedChartIdChanged']=_0x36a3b0,_0x175c43['setOffsets']=_0x54bb95,_0x175c43['setDrawingMode']=_0x5013f3,_0x175c43['setMagnetMode']=_0x3519f2,_0x175c43['charts']=_0x5b2687,_0x175c43['setCharts']=_0x2651f4,_0x175c43['chartLayersPopoverOpened']=_0x2941eb,_0x175c43['setChartLayersPopoverOpened']=_0x863e01,_0x175c43['setTheme']=_0x124957,newSink(callTracerProxy('multiChartViewModel',_0x175c43),_0x3a1598);});export const getChartsAmount=_0x5f2250=>{switch(_0x5f2250){case'1x1':return 0x1;case'1x2':case'2x1':return 0x2;case'1x3':case'3x1':return 0x3;case'2x2':return 0x4;}};