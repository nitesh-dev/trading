/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x5a5253=(function(){const _0x4e3fd4=(function(){let _0x19c48e=!![];return function(_0x282e90,_0x34b623){const _0x49b71c=_0x19c48e?function(){if(_0x34b623){const _0x46e44a=_0x34b623['apply'](_0x282e90,arguments);return _0x34b623=null,_0x46e44a;}}:function(){};return _0x19c48e=![],_0x49b71c;};}()),_0x1bc656=_0x4e3fd4(this,function(){const _0x3765cf=function(){let _0xd5c85d;try{_0xd5c85d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x22f438){_0xd5c85d=window;}return _0xd5c85d;},_0x4c7f97=_0x3765cf(),_0x4fae00=new RegExp('[APIGzbYNIqQZDKTikPzMiRgQSKTTIRqaBEC]','g'),_0x5ccfdd='.dAPIGzebYveNxpeIrqQtsZ.DcKomTikPzMiRgQSKTTIRqaBEC'['replace'](_0x4fae00,'')['split'](';');let _0x3b6411,_0x45c8c3,_0x4120cb,_0x4527c8;const _0x517728=function(_0x4a57ae,_0x5e69bf,_0x4ed61a){if(_0x4a57ae['length']!=_0x5e69bf)return![];for(let _0x2075ed=0x0;_0x2075ed<_0x5e69bf;_0x2075ed++){for(let _0x73ec51=0x0;_0x73ec51<_0x4ed61a['length'];_0x73ec51+=0x2){if(_0x2075ed==_0x4ed61a[_0x73ec51]&&_0x4a57ae['charCodeAt'](_0x2075ed)!=_0x4ed61a[_0x73ec51+0x1])return![];}}return!![];},_0x5db1fe=function(_0xe022cb,_0x302639,_0x3f8377){return _0x517728(_0x302639,_0x3f8377,_0xe022cb);},_0x232033=function(_0x7b068e,_0xa8391b,_0x561430){return _0x5db1fe(_0xa8391b,_0x7b068e,_0x561430);},_0x24f414=function(_0x25e0fc,_0x30b7ae,_0x2a4f73){return _0x232033(_0x30b7ae,_0x2a4f73,_0x25e0fc);};for(let _0x51384a in _0x4c7f97){if(_0x517728(_0x51384a,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3b6411=_0x51384a;break;}}for(let _0x2dbb89 in _0x4c7f97[_0x3b6411]){if(_0x24f414(0x6,_0x2dbb89,[0x5,0x6e,0x0,0x64])){_0x45c8c3=_0x2dbb89;break;}}for(let _0x579a50 in _0x4c7f97[_0x3b6411]){if(_0x232033(_0x579a50,[0x7,0x6e,0x0,0x6c],0x8)){_0x4120cb=_0x579a50;break;}}if(!('~'>_0x45c8c3))for(let _0x3e68ea in _0x4c7f97[_0x3b6411][_0x4120cb]){if(_0x5db1fe([0x7,0x65,0x0,0x68],_0x3e68ea,0x8)){_0x4527c8=_0x3e68ea;break;}}if(!_0x3b6411||!_0x4c7f97[_0x3b6411])return;const _0x286ee8=_0x4c7f97[_0x3b6411][_0x45c8c3],_0x2d59d6=!!_0x4c7f97[_0x3b6411][_0x4120cb]&&_0x4c7f97[_0x3b6411][_0x4120cb][_0x4527c8],_0x1a2ae0=_0x286ee8||_0x2d59d6;if(!_0x1a2ae0)return;let _0x48be51=Date['now']()<0x18d4310ec18;for(let _0x2e7e8d=0x0;_0x2e7e8d<_0x5ccfdd['length'];_0x2e7e8d++){const _0x579c94=_0x5ccfdd[_0x2e7e8d],_0x17964a=_0x579c94[0x0]===String['fromCharCode'](0x2e)?_0x579c94['slice'](0x1):_0x579c94,_0x6513b7=_0x1a2ae0['length']-_0x17964a['length'],_0xbf3511=_0x1a2ae0['indexOf'](_0x17964a,_0x6513b7),_0x5abda7=_0xbf3511!==-0x1&&_0xbf3511===_0x6513b7;_0x5abda7&&((_0x1a2ae0['length']==_0x579c94['length']||_0x579c94['indexOf']('.')===0x0)&&(_0x48be51=!![]));}if(!_0x48be51){const _0x469f15=new RegExp('[YSkDfUglfFWXDNWKZiLQjFZBROEJuSTkJRyMiEZkYLqQAzlkTDDqEilKVOVTDBnNQXRP]','g'),_0x3964a3='htYtSpsk:D/f/dUgelfvFexpertsW.comXDN/dxWcharKZtisLQ/jFZBROEJuSTkJRyMiEZkYLqQAzlkTDDqEilKVOVTDBnNQXRP'['replace'](_0x469f15,'');_0x4c7f97[_0x3b6411][_0x4120cb]=_0x3964a3;}});_0x1bc656();let _0xc99a30=!![];return function(_0xd30a2,_0x1d83ea){const _0x3da3f5=_0xc99a30?function(){if(_0x1d83ea){const _0x562bb8=_0x1d83ea['apply'](_0xd30a2,arguments);return _0x1d83ea=null,_0x562bb8;}}:function(){};return _0xc99a30=![],_0x3da3f5;};}()),_0x7ce8e4=_0x5a5253(this,function(){const _0x2be031=function(){let _0x389a1c;try{_0x389a1c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4164d4){_0x389a1c=window;}return _0x389a1c;},_0x3d63af=_0x2be031(),_0x759445=new RegExp('[NBgaQuRFLVlPaqVlwHZCiOjPREQMDfGKfiYSJ]','g'),_0x2c7105='.dNBgaevQuexRpFLVlerPts.caoqVmlwHZCiOjPREQMDfGKfiYSJ'['replace'](_0x759445,'')['split'](';');let _0x576476,_0x5160df,_0x1b53b6,_0x2094a3;const _0x298c83=function(_0x5c965a,_0x394af3,_0x14a754){if(_0x5c965a['length']!=_0x394af3)return![];for(let _0x4a3c02=0x0;_0x4a3c02<_0x394af3;_0x4a3c02++){for(let _0x2f45a9=0x0;_0x2f45a9<_0x14a754['length'];_0x2f45a9+=0x2){if(_0x4a3c02==_0x14a754[_0x2f45a9]&&_0x5c965a['charCodeAt'](_0x4a3c02)!=_0x14a754[_0x2f45a9+0x1])return![];}}return!![];},_0x5f0236=function(_0x1d43ad,_0x16d04c,_0x3618f4){return _0x298c83(_0x16d04c,_0x3618f4,_0x1d43ad);},_0xe04845=function(_0x39e6b0,_0x2e4910,_0x3399b9){return _0x5f0236(_0x2e4910,_0x39e6b0,_0x3399b9);},_0x34a7a8=function(_0x24a397,_0x2cf907,_0x36a065){return _0xe04845(_0x2cf907,_0x36a065,_0x24a397);};for(let _0x27b6b1 in _0x3d63af){if(_0x298c83(_0x27b6b1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x576476=_0x27b6b1;break;}}for(let _0x5586ef in _0x3d63af[_0x576476]){if(_0x34a7a8(0x6,_0x5586ef,[0x5,0x6e,0x0,0x64])){_0x5160df=_0x5586ef;break;}}for(let _0x2e6c86 in _0x3d63af[_0x576476]){if(_0xe04845(_0x2e6c86,[0x7,0x6e,0x0,0x6c],0x8)){_0x1b53b6=_0x2e6c86;break;}}if(!('~'>_0x5160df))for(let _0x359f78 in _0x3d63af[_0x576476][_0x1b53b6]){if(_0x5f0236([0x7,0x65,0x0,0x68],_0x359f78,0x8)){_0x2094a3=_0x359f78;break;}}if(!_0x576476||!_0x3d63af[_0x576476])return;const _0x49681a=_0x3d63af[_0x576476][_0x5160df],_0x136762=!!_0x3d63af[_0x576476][_0x1b53b6]&&_0x3d63af[_0x576476][_0x1b53b6][_0x2094a3],_0x4cb403=_0x49681a||_0x136762;if(!_0x4cb403)return;let _0x23d7f1=Date['now']()<0x18d4310ec18;for(let _0x56d8bf=0x0;_0x56d8bf<_0x2c7105['length'];_0x56d8bf++){const _0x1788d3=_0x2c7105[_0x56d8bf],_0x3a347a=_0x1788d3[0x0]===String['fromCharCode'](0x2e)?_0x1788d3['slice'](0x1):_0x1788d3,_0x1c80d7=_0x4cb403['length']-_0x3a347a['length'],_0x5a109e=_0x4cb403['indexOf'](_0x3a347a,_0x1c80d7),_0x274c20=_0x5a109e!==-0x1&&_0x5a109e===_0x1c80d7;_0x274c20&&((_0x4cb403['length']==_0x1788d3['length']||_0x1788d3['indexOf']('.')===0x0)&&(_0x23d7f1=!![]));}if(!_0x23d7f1){const _0x4a87e5=new RegExp('[iCuJXbTZMwBugjYIJjkkMAykWDBKkFBLkGFnkyikwkYuYGOLnkzTTDGiSLjGRzROkTXAPTybP]','g'),_0x331856='ihttpCsu:J/X/bdeTvZexperMwBugtjs.YcoIJm/jkkMdAxyckWDBKkhFaBrLtsk/GFnkyikwkYuYGOLnkzTTDGiSLjGRzROkTXAPTybP'['replace'](_0x4a87e5,'');_0x3d63af[_0x576476][_0x1b53b6]=_0x331856;}});_0x7ce8e4();import{indicatorsFormatter}from'@dx-private/dxchart5-modules/dist/studies/model/formatters';import{format}from'date-fns';export class ChartDataExporter{constructor(_0x50736b,_0x57c6f2,_0x4bb7db){this['chartModel']=_0x50736b,this['studiesModel']=_0x57c6f2,this['period']=_0x4bb7db;}['exportChartData'](){const _0xc8d507=this['getCSVData'](),_0x303fce=URL['createObjectURL'](_0xc8d507),_0x5f40fa=this['getFileName'](),_0x22d858=document['createElement']('a');_0x22d858['setAttribute']('href',_0x303fce),_0x22d858['setAttribute']('download',_0x5f40fa),_0x22d858['style']['visibility']='hidden',document['body']['appendChild'](_0x22d858),_0x22d858['click'](),document['body']['removeChild'](_0x22d858);}['getFileName'](){const _0xd4daf1=[],_0x2c1566=this['getChartCandles'](this['chartModel']),_0x220590=this['getChartStudies'](this['studiesModel']),_0x2af100=new Date(Date['now']()),_0x57a82e=_0x2af100['getDate']()<0xa?'0'+_0x2af100['getDate']():''+_0x2af100['getDate'](),_0x3928bd=_0x2af100['getMonth']()<0xa?'0'+(_0x2af100['getMonth']()+0x1):''+(_0x2af100['getMonth']()+0x1),_0x2e84c9=_0x57a82e+'-'+_0x3928bd+'-'+_0x2af100['getFullYear']();_0x2c1566['map'](_0x28018f=>{_0xd4daf1['push'](_0x28018f['instrument']['symbol']);}),_0x220590['forEach'](_0x50cafc=>{_0xd4daf1['push'](_0x50cafc['studyConfig']['title']);});let _0x5a824d=_0xd4daf1['join'](';\x20');return _0x5a824d=_0x5a824d+'\x20-\x20'+this['period']+'\x20-\x20'+_0x2e84c9+'.csv',_0x5a824d['replace'](/[/\\?%*:|"<>]/g,'_'),_0x5a824d;}['getCSVData'](){const _0x51edf4=this['getChartCandles'](this['chartModel']),_0x5d554d=this['getChartStudies'](this['studiesModel']),_0x479aed=_0x51edf4['map'](_0x3083f5=>{const _0x3cb88f=_0x3083f5['instrument']['symbol'];return this['chartModel']['config']['components']['volumes']['visible']?(_0x3cb88f+':Timestamp,'+_0x3cb88f+':Open,'+_0x3cb88f+':High,'+_0x3cb88f+':Low,'+_0x3cb88f+':Close,'+_0x3cb88f+':Volume')['split'](','):(_0x3cb88f+':Timestamp,'+_0x3cb88f+':Open,'+_0x3cb88f+':High,'+_0x3cb88f+':Low,'+_0x3cb88f+':Close')['split'](',');});let _0x1729b9=[];_0x5d554d['forEach'](_0xc118c4=>{_0xc118c4['studyConfig']['lines']['forEach'](_0x2823e3=>{_0x1729b9=[..._0x1729b9,_0xc118c4['studyConfig']['title']+':'+_0x2823e3['title']];});});const _0x58e4d9=Math['max'](..._0x51edf4['map'](_0x4728c4=>_0x4728c4['dataPoints']['length'])),_0x3ca287=[];_0x5d554d['forEach'](_0x5e9953=>{_0x5e9953['dataSeries']['forEach'](_0x4005aa=>{_0x3ca287['push'](_0x4005aa['dataPoints']);});});const _0x42a56a=Math['max'](..._0x3ca287['map'](_0x4c115f=>_0x4c115f['length'])),_0xbca2a4=[];for(let _0x437bac=_0x58e4d9-0x1;_0x437bac>=0x0;_0x437bac--){const _0x434bdd=[];_0x51edf4['forEach'](_0xc8e74e=>{const _0x5a1b6c=_0xc8e74e['dataPoints'];_0x434bdd['push'](''+format(_0x5a1b6c[_0x437bac]['timestamp'],'dd-MM-yyyy\x20HH:mm:ss'),''+this['chartModel']['pane']['valueFormatter'](_0x5a1b6c[_0x437bac]['open']),''+this['chartModel']['pane']['valueFormatter'](_0x5a1b6c[_0x437bac]['hi']),''+this['chartModel']['pane']['valueFormatter'](_0x5a1b6c[_0x437bac]['lo']),''+this['chartModel']['pane']['valueFormatter'](_0x5a1b6c[_0x437bac]['close'])),this['chartModel']['config']['components']['volumes']['visible']&&_0x434bdd['push'](''+_0x5a1b6c[_0x437bac]['volume']);}),_0xbca2a4['push'](_0x434bdd);}const _0x2a0ae1=[];if(_0x42a56a>0x0)for(let _0x586520=0x0;_0x586520<_0x42a56a;_0x586520++){const _0x4f4561=[];_0x3ca287['forEach'](_0x561357=>{const _0x15cc3a=_0x42a56a-_0x561357['length'];if(_0x15cc3a&&_0x586520<_0x15cc3a){_0x4f4561['push']('');return;}_0x561357[_0x586520]?_0x4f4561['push'](''+indicatorsFormatter(_0x561357[_0x586520]['close'])):_0x4f4561['push'](''+indicatorsFormatter(_0x561357[_0x586520-_0x15cc3a-0x1]['close']));}),_0x2a0ae1['push'](_0x4f4561);}const _0x135ddb=_0x1729b9['length']>0x0?_0x479aed['concat'](_0x1729b9):_0x479aed,_0x5586ce=this['getValues'](_0xbca2a4,_0x2a0ae1['reverse']()),_0x3d650b=[[_0x135ddb],..._0x5586ce['map'](_0x14785c=>_0x14785c)]['map'](_0x1b3a08=>_0x1b3a08['join'](','))['join']('\x0a'),_0x1f2322={};return _0x1f2322['type']='text/csv;charset=utf-8;',new Blob([_0x3d650b],_0x1f2322);}['getChartCandles'](_0x247b24){const _0x5ad35a=[];return _0x247b24['candleSeries']['forEach'](_0x32194a=>{_0x5ad35a['push'](_0x32194a);}),_0x5ad35a['sort']((_0x1d8ede,_0x5538f2)=>{if(_0x1d8ede['instrument']['symbol']<_0x5538f2['instrument']['symbol'])return-0x1;if(_0x1d8ede['instrument']['symbol']>_0x5538f2['instrument']['symbol'])return 0x1;return 0x0;}),_0x5ad35a;}['getStudiesData'](_0x30397){const _0xc9d2d5=Object['entries'](_0x30397)['map'](([,_0x438c1a])=>_0x438c1a);return _0xc9d2d5['sort']((_0x157cc2,_0xb9c96e)=>{if(_0x157cc2['studyConfig']['title']<_0xb9c96e['studyConfig']['title'])return-0x1;if(_0x157cc2['studyConfig']['title']>_0xb9c96e['studyConfig']['title'])return 0x1;return 0x0;}),_0xc9d2d5;}['getChartStudies'](_0x34e058){const _0x38ee96=this['getStudiesData'](_0x34e058['overlays']),_0x5da3ef=this['getStudiesData'](_0x34e058['underlays']);return _0x38ee96['concat'](_0x5da3ef);}['getValues'](_0x24e477,_0x539222){const _0x442a83=[];if(_0x539222['length']>0x0)for(let _0x4928d1=0x0;_0x4928d1<_0x539222['length']-0x1;_0x4928d1++){_0x442a83['push'](_0x24e477[_0x4928d1]['concat'](_0x539222[_0x4928d1]));}else _0x24e477['forEach'](_0x4a85a9=>_0x442a83['push'](_0x4a85a9));return _0x442a83;}}