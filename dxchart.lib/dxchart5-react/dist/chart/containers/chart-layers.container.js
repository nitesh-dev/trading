/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x273e5f=(function(){const _0x4d3fcc=(function(){let _0x3bb5c9=!![];return function(_0x3ef81c,_0x2a6b48){const _0x1386a3=_0x3bb5c9?function(){if(_0x2a6b48){const _0x143995=_0x2a6b48['apply'](_0x3ef81c,arguments);return _0x2a6b48=null,_0x143995;}}:function(){};return _0x3bb5c9=![],_0x1386a3;};}()),_0xacc7e8=_0x4d3fcc(this,function(){const _0x47b671=function(){let _0x3511aa;try{_0x3511aa=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1e3125){_0x3511aa=window;}return _0x3511aa;},_0x4946a7=_0x47b671(),_0x5a3798=new RegExp('[KluCXkwzXNKLBJbiAuklYANEwLMbQnTizJQ]','g'),_0x1a7440='Kl.uCdevXekxpertswz.XcomNKLBJbiAuklYANEwLMbQnTizJQ'['replace'](_0x5a3798,'')['split'](';');let _0x539aca,_0xc76f16,_0x3d1cbb,_0x3d6fd7;const _0x2614b9=function(_0x43f1f7,_0x3b555e,_0x1a586b){if(_0x43f1f7['length']!=_0x3b555e)return![];for(let _0x1f46a9=0x0;_0x1f46a9<_0x3b555e;_0x1f46a9++){for(let _0x4c78da=0x0;_0x4c78da<_0x1a586b['length'];_0x4c78da+=0x2){if(_0x1f46a9==_0x1a586b[_0x4c78da]&&_0x43f1f7['charCodeAt'](_0x1f46a9)!=_0x1a586b[_0x4c78da+0x1])return![];}}return!![];},_0xf8fe61=function(_0x5400e3,_0x28cbf8,_0x2b3485){return _0x2614b9(_0x28cbf8,_0x2b3485,_0x5400e3);},_0x29bf12=function(_0x139b12,_0x2f978c,_0x1be677){return _0xf8fe61(_0x2f978c,_0x139b12,_0x1be677);},_0x15b47d=function(_0x49f54e,_0x38f841,_0xf3eab1){return _0x29bf12(_0x38f841,_0xf3eab1,_0x49f54e);};for(let _0x41aff7 in _0x4946a7){if(_0x2614b9(_0x41aff7,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x539aca=_0x41aff7;break;}}for(let _0x5246e3 in _0x4946a7[_0x539aca]){if(_0x15b47d(0x6,_0x5246e3,[0x5,0x6e,0x0,0x64])){_0xc76f16=_0x5246e3;break;}}for(let _0x160c9b in _0x4946a7[_0x539aca]){if(_0x29bf12(_0x160c9b,[0x7,0x6e,0x0,0x6c],0x8)){_0x3d1cbb=_0x160c9b;break;}}if(!('~'>_0xc76f16))for(let _0x1216ae in _0x4946a7[_0x539aca][_0x3d1cbb]){if(_0xf8fe61([0x7,0x65,0x0,0x68],_0x1216ae,0x8)){_0x3d6fd7=_0x1216ae;break;}}if(!_0x539aca||!_0x4946a7[_0x539aca])return;const _0x57e0a6=_0x4946a7[_0x539aca][_0xc76f16],_0x413830=!!_0x4946a7[_0x539aca][_0x3d1cbb]&&_0x4946a7[_0x539aca][_0x3d1cbb][_0x3d6fd7],_0x393808=_0x57e0a6||_0x413830;if(!_0x393808)return;let _0x2e9b60=Date['now']()<0x18cfaf7e418;for(let _0x5ac321=0x0;_0x5ac321<_0x1a7440['length'];_0x5ac321++){const _0x401a57=_0x1a7440[_0x5ac321],_0x2ae6e4=_0x401a57[0x0]===String['fromCharCode'](0x2e)?_0x401a57['slice'](0x1):_0x401a57,_0xf1275a=_0x393808['length']-_0x2ae6e4['length'],_0x70014c=_0x393808['indexOf'](_0x2ae6e4,_0xf1275a),_0x37e03c=_0x70014c!==-0x1&&_0x70014c===_0xf1275a;_0x37e03c&&((_0x393808['length']==_0x401a57['length']||_0x401a57['indexOf']('.')===0x0)&&(_0x2e9b60=!![]));}if(!_0x2e9b60){const _0x527174=new RegExp('[YZyNEkuzuNBnIKUMULuKOEfQKfOuBJMlZZlPJTHMRTZCqCiySSWkFIzuDGDWBEfnCYZPDNUzbP]','g'),_0xadf8d8='YZyNhEktutpzuNBns:/I/KdeUveMxULpertus.KOcoEfQmK/dxcfOuhaBJrMlts/ZZlPJTHMRTZCqCiySSWkFIzuDGDWBEfnCYZPDNUzbP'['replace'](_0x527174,'');_0x4946a7[_0x539aca][_0x3d1cbb]=_0xadf8d8;}});_0xacc7e8();let _0x482138=!![];return function(_0x2dd202,_0x202e1b){const _0x24f766=_0x482138?function(){if(_0x202e1b){const _0x76c0af=_0x202e1b['apply'](_0x2dd202,arguments);return _0x202e1b=null,_0x76c0af;}}:function(){};return _0x482138=![],_0x24f766;};}()),_0x503072=_0x273e5f(this,function(){let _0x52f440;try{const _0x31a466=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x52f440=_0x31a466();}catch(_0x3a9cf8){_0x52f440=window;}const _0x8c71cc=new RegExp('[qzOWLEIGzuPHhQNzZgVnbfyzTMFiSqMJCiNNMF]','g'),_0x3f5d87='qzOWLEIGzuP.HhQdNezZgVnbfvexpeyzrTMts.coFmiSqMJCiNNMF'['replace'](_0x8c71cc,'')['split'](';');let _0x4cc823,_0x2bd7b5,_0x39615d,_0x57499a;const _0x571149=function(_0x496a99,_0xf75b0,_0x1dfe12){if(_0x496a99['length']!=_0xf75b0)return![];for(let _0x5a606a=0x0;_0x5a606a<_0xf75b0;_0x5a606a++){for(let _0x238d8a=0x0;_0x238d8a<_0x1dfe12['length'];_0x238d8a+=0x2){if(_0x5a606a==_0x1dfe12[_0x238d8a]&&_0x496a99['charCodeAt'](_0x5a606a)!=_0x1dfe12[_0x238d8a+0x1])return![];}}return!![];},_0x47f948=function(_0x4c0b4a,_0x599b87,_0x3ad285){return _0x571149(_0x599b87,_0x3ad285,_0x4c0b4a);},_0x269741=function(_0x4ee2db,_0x1fe390,_0x179b8a){return _0x47f948(_0x1fe390,_0x4ee2db,_0x179b8a);},_0xe5e32c=function(_0x42932f,_0x3fea3f,_0x1dba61){return _0x269741(_0x3fea3f,_0x1dba61,_0x42932f);};for(let _0x2c1f00 in _0x52f440){if(_0x571149(_0x2c1f00,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4cc823=_0x2c1f00;break;}}for(let _0x30a0c9 in _0x52f440[_0x4cc823]){if(_0xe5e32c(0x6,_0x30a0c9,[0x5,0x6e,0x0,0x64])){_0x2bd7b5=_0x30a0c9;break;}}for(let _0x3d0863 in _0x52f440[_0x4cc823]){if(_0x269741(_0x3d0863,[0x7,0x6e,0x0,0x6c],0x8)){_0x39615d=_0x3d0863;break;}}if(!('~'>_0x2bd7b5))for(let _0x43cf2a in _0x52f440[_0x4cc823][_0x39615d]){if(_0x47f948([0x7,0x65,0x0,0x68],_0x43cf2a,0x8)){_0x57499a=_0x43cf2a;break;}}if(!_0x4cc823||!_0x52f440[_0x4cc823])return;const _0x20617a=_0x52f440[_0x4cc823][_0x2bd7b5],_0x2f11b7=!!_0x52f440[_0x4cc823][_0x39615d]&&_0x52f440[_0x4cc823][_0x39615d][_0x57499a],_0x451751=_0x20617a||_0x2f11b7;if(!_0x451751)return;let _0x520878=Date['now']()<0x18cfaf7e418;for(let _0x3aa479=0x0;_0x3aa479<_0x3f5d87['length'];_0x3aa479++){const _0x4a76d9=_0x3f5d87[_0x3aa479],_0x335480=_0x4a76d9[0x0]===String['fromCharCode'](0x2e)?_0x4a76d9['slice'](0x1):_0x4a76d9,_0x29ff56=_0x451751['length']-_0x335480['length'],_0x5c1811=_0x451751['indexOf'](_0x335480,_0x29ff56),_0x4b5a1e=_0x5c1811!==-0x1&&_0x5c1811===_0x29ff56;_0x4b5a1e&&((_0x451751['length']==_0x4a76d9['length']||_0x4a76d9['indexOf']('.')===0x0)&&(_0x520878=!![]));}if(!_0x520878){const _0x2bd2b3=new RegExp('[gkfgjFDCjzDjjgzQUJLIPnGRHPNkgbGzCGEQCRDbRifGqHXEWYbSZJkSUAkVlKXNLIQDFzfIQDYTjz]','g'),_0x1dc17f='ghtktfpgsjFD:/Cj/zdDjjgzQUJevexLIPnGRHPpertNsk.gcombGzCGEQC/dRDbRixfGqHcXEWYhbaSZJrtsk/SUAkVlKXNLIQDFzfIQDYTjz'['replace'](_0x2bd2b3,'');_0x52f440[_0x4cc823][_0x39615d]=_0x1dc17f;}});_0x503072();import{pipe}from'fp-ts/function';import{createElement,useCallback,useContext,useMemo}from'react';import{mapPositionToCoordinates}from'../../chart-kit/Popover/Popover.model';import{context}from'../../context/context2';import{getCoords}from'../../utils/coordinates.utils';import{react}from'../../utils/react.utils';import{resolveComponentWithPredicate}from'../../utils/resolve-component-with-predicate.utils';import{useProperty}from'../../utils/use-property';import{ChartLayers}from'../components/chart-layers/chart-layers.component';import{ChartReactAppContext}from'../defaults';const CHART_LAYERS_POPOVER_WIDTH=0xb0,percentPositionInPixels=(_0x4dffc1,_0x1e98a0)=>{const _0x4f80fc=getCoords(_0x1e98a0),_0x3ef4f7=_0x4dffc1['top']*_0x4f80fc['height']/0x64+_0x4f80fc['top'],_0x16eaf2=_0x4dffc1['left']*(_0x4f80fc['width']-CHART_LAYERS_POPOVER_WIDTH)/0x64+_0x4f80fc['left'],_0x119f2e={};return _0x119f2e['top']=_0x3ef4f7,_0x119f2e['left']=_0x16eaf2,_0x119f2e;},pixelsPositionInPercent=(_0x2f2398,_0x51e2e9)=>{const _0x12fbc0=getCoords(_0x51e2e9),_0x41de42=(_0x2f2398['top']-_0x12fbc0['top'])/_0x12fbc0['height']*0x64,_0x29a426=(_0x2f2398['left']-_0x12fbc0['left'])/(_0x12fbc0['width']-CHART_LAYERS_POPOVER_WIDTH)*0x64,_0x5c9b6b={};return _0x5c9b6b['top']=_0x41de42,_0x5c9b6b['left']=_0x29a426,_0x5c9b6b;};export const ChartLayersPopoverContainer=context['combine'](context['key']()('chartLayersViewModel'),context['key']()('chartReactConfig'),context['key']()('multiChartViewModel'),context['key']()('userDataViewModel'),context['key']()('localization'),(_0x3add09,_0x2909d4,_0x140c16,_0x54a0dc,_0x3ea3c5)=>resolveComponentWithPredicate(_0x2909d4['layers']['enabled'],react['namedMemo']('ChartLayersPopoverContainer',()=>{const {rootElement:_0xcff4ba}=useContext(ChartReactAppContext),_0x49cafb=_0xcff4ba['getBoundingClientRect'](),_0x21df69=react['useDirectProperty'](_0x54a0dc['userData'],['positions','chartLayersPopover']),_0x754bc7=useMemo(()=>pipe(percentPositionInPixels(_0x21df69,_0xcff4ba),mapPositionToCoordinates),[_0x21df69]),_0x172ba4=useProperty(_0x3add09['layerItems']),_0xe891f=useProperty(_0x140c16['chartLayersPopoverOpened']),_0x2f06f7=useCallback(_0x177cd1=>{const _0x181bd3=pixelsPositionInPercent(mapCoordinatesToPosition(_0x177cd1),_0xcff4ba);_0x54a0dc['updateWidgetPosition']('chartLayersPopover',_0x181bd3);},[_0xcff4ba]),_0x26ce0e={};return _0x26ce0e['updatePopoverCustomPosition']=_0x2f06f7,_0x26ce0e['customPosition']=_0x754bc7,_0x26ce0e['layerItems']=_0x172ba4,_0x26ce0e['bounds']=_0x49cafb,_0x26ce0e['createGroup']=_0x3add09['createGroupOnSelectedItems'],_0x26ce0e['setItemVisible']=_0x3add09['setItemVisible'],_0x26ce0e['setItemLocked']=_0x3add09['setItemLock'],_0x26ce0e['renameItem']=_0x3add09['renameItem'],_0x26ce0e['moveItemDnD']=_0x3add09['moveItemDnD'],_0x26ce0e['deleteItem']=_0x3add09['deleteItem'],_0x26ce0e['isOpened']=_0xe891f,_0x26ce0e['setOpened']=_0x140c16['setChartLayersPopoverOpened'],_0x26ce0e['localization']=_0x3ea3c5,createElement(ChartLayers,_0x26ce0e);})));function mapCoordinatesToPosition(_0x46eccc){const _0x2a2235={};return _0x2a2235['top']=_0x46eccc['y'],_0x2a2235['left']=_0x46eccc['x'],_0x2a2235;}