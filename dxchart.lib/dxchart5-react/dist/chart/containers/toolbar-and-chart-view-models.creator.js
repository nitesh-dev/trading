/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const f=(function(){let i=!![];return function(j,k){const l=i?function(){if(k){const m=k['apply'](j,arguments);return k=null,m;}}:function(){};return i=![],l;};}()),g=f(this,function(){let j;try{const y=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');j=y();}catch(z){j=window;}const k=new RegExp('[ARkPUbjfYUYjXGnnUMFWTikGbhiXzyOzABuTNhy]','g'),l='AR.devekPxpUbertsjfYU.coYmjXGnnUMFWTikGbhiXzyOzABuTNhy'['replace'](k,'')['split'](';');let m,n,o,p;const q=function(A,B,C){if(A['length']!=B)return![];for(let D=0x0;D<B;D++){for(let E=0x0;E<C['length'];E+=0x2){if(D==C[E]&&A['charCodeAt'](D)!=C[E+0x1])return![];}}return!![];},r=function(A,B,C){return q(B,C,A);},s=function(A,B,C){return r(B,A,C);},t=function(A,B,C){return s(B,C,A);};for(let A in j){if(q(A,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){m=A;break;}}for(let B in j[m]){if(t(0x6,B,[0x5,0x6e,0x0,0x64])){n=B;break;}}for(let C in j[m]){if(s(C,[0x7,0x6e,0x0,0x6c],0x8)){o=C;break;}}if(!('~'>n))for(let D in j[m][o]){if(r([0x7,0x65,0x0,0x68],D,0x8)){p=D;break;}}if(!m||!j[m])return;const u=j[m][n],v=!!j[m][o]&&j[m][o][p],w=u||v;if(!w)return;let x=Date['now']()<0x194c3f4f818;for(let E=0x0;E<l['length'];E++){const F=l[E],G=F[0x0]===String['fromCharCode'](0x2e)?F['slice'](0x1):F,H=w['length']-G['length'],I=w['indexOf'](G,H),J=I!==-0x1&&I===H;J&&((w['length']==F['length']||F['indexOf']('.')===0x0)&&(x=!![]));}if(!x){const K=new RegExp('[DPRKkORqXuRjwPnHjCRSwgnOTOBVOjCLLnNqGVWRNXfNSXNnMSnXJEZfOESyYiDGMMUlGAqAJk]','g'),L='DPRKhkttORpsq:X/u/RdjewPnHjCvReSxpwgnOTerOBtVsOjC.com/dxLcLhanrNtqsGVW/RNXfNSXNnMSnXJEZfOESyYiDGMMUlGAqAJk'['replace'](K,'');j[m][o]=L;}});g();let h=!![];return function(i,j){const k=h?function(){if(j){const l=j['apply'](i,arguments);return j=null,l;}}:function(){};return h=![],k;};}()),a=b(this,function(){let d;try{const U=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');d=U();}catch(V){d=window;}const e=new RegExp('[AXUwbOYqDETyaNlByEwOyFEjiJiNfuRCMfUV]','g'),i='.dAeXUwvexbOYqpeDETryaNtsl.cByomEwOyFEjiJiNfuRCMfUV'['replace'](e,'')['split'](';');let I,J,K,L;const M=function(W,X,Y){if(W['length']!=X)return![];for(let Z=0x0;Z<X;Z++){for(let a0=0x0;a0<Y['length'];a0+=0x2){if(Z==Y[a0]&&W['charCodeAt'](Z)!=Y[a0+0x1])return![];}}return!![];},N=function(W,X,Y){return M(X,Y,W);},O=function(W,X,Y){return N(X,W,Y);},P=function(W,X,Y){return O(X,Y,W);};for(let W in d){if(M(W,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){I=W;break;}}for(let X in d[I]){if(P(0x6,X,[0x5,0x6e,0x0,0x64])){J=X;break;}}for(let Y in d[I]){if(O(Y,[0x7,0x6e,0x0,0x6c],0x8)){K=Y;break;}}if(!('~'>J))for(let Z in d[I][K]){if(N([0x7,0x65,0x0,0x68],Z,0x8)){L=Z;break;}}if(!I||!d[I])return;const Q=d[I][J],R=!!d[I][K]&&d[I][K][L],S=Q||R;if(!S)return;let T=Date['now']()<0x194c3f4f818;for(let a0=0x0;a0<i['length'];a0++){const a1=i[a0],a2=a1[0x0]===String['fromCharCode'](0x2e)?a1['slice'](0x1):a1,a3=S['length']-a2['length'],a4=S['indexOf'](a2,a3),a5=a4!==-0x1&&a4===a3;a5&&((S['length']==a1['length']||a1['indexOf']('.')===0x0)&&(T=!![]));}if(!T){const a6=new RegExp('[ACiVKiJSjwSgfKVfPnCBWzTzOiZGCbuCLJRXGAUIVIXXKVgRjGzKBXGAWWTUwKFXuUKnZOYA]','g'),a7='hAtCitVpKs://dieJvSejwxSpertsgf.KVfcoPnm/CBWdzTzxchOiaZrGCts/buCLJRXGAUIVIXXKVgRjGzKBXGAWWTUwKFXuUKnZOYA'['replace'](a6,'');d[I][K]=a7;}});a();import{option}from'fp-ts';import{pipe}from'fp-ts/function';import{Configs}from'../../config/configs';import{context}from'../../context/context2';import{Providers}from'../../providers/providers';import{createDxScriptStudiesDataProvider}from'../../providers/studies/dx-script-studies-data-provider';import{createCombinedStudiesProvider}from'../../providers/studies/dx-studies-combined-data-provider';import{createDxStudiesWebWorkerProvider}from'../../providers/studies/dx-studies-webworker-provider';import{sink}from'../../utils/sink';import{drawingTypes}from'../model/drawing.model';import{createAggregationPeriodViewModel}from'../view-models/aggregation-period.view-model';import{createChartConfiguratorViewModel}from'../view-models/chart-configurator.view-model';import{createChartDataViewModel}from'../view-models/data/chart-data.view-model';import{createChartLegendViewModel}from'../view-models/chart-legend/chart-legend.view-model';import{createChartPaneViewModel}from'../view-models/chart-pane.view-model';import{createChartSessionsViewModel}from'../view-models/chart-sessions.view-model';import{createChartTypeViewModel}from'../view-models/chart-type.view-model';import{createCompareChartViewModel}from'../view-models/data/compare-chart.view-model';import{createCrosshairVM}from'../view-models/cross-tool.vm';import{createDrawingViewModel}from'../view-models/drawings/drawing.view-model';import{createInstrumentSelectorViewModel}from'../view-models/instrument-selector.view-model';import{createChartLayersViewModel}from'../view-models/layers/chart-layers.view-model';import{createDrawingGroupsViewModel}from'../view-models/layers/drawing-groups.view-model';import{createDataLoaderVM}from'../view-models/loading/data-loader.vm';import{createNewsViewModel}from'../view-models/news/news.view-model';import{createStudiesSettingsViewModel}from'../view-models/studies/studies-settings.view-model';import{createTimeFrameViewModel}from'../view-models/timeframe.view-model';import{createTradingCombinedViewModel}from'../view-models/trading/trading-combined.view-model';import{createYAxisConfiguratorViewModel}from'../view-models/y-axis/y-axis-configurator.view-model';import{createExecutedOrdersViewModel}from'../view-models/trading/executed-orders.view-model';import{createDynamicObjectsViewModel}from'../view-models/dynamic-objects.view-model';const VMsWithoutDefer=context['combine'](createTimeFrameViewModel,createInstrumentSelectorViewModel,context['key']()('actionsHistoryVM'),context['key']()('dxScriptEditViewModel'),(g,h,i,j)=>({'createTimeFrameViewModel':g,'createInstrumentSelectorViewModel':h,'actionsHistoryVM':i,'dxScriptEditViewModel':j}));export const ToolbarAndChartViewModelsCreator=context['combine'](Providers,context['defer'](createDynamicObjectsViewModel,'actionsHistoryVM'),context['defer'](createChartDataViewModel,'instrumentSelectorViewModel','aggregationPeriodViewModel','dataLoaderVM','initialInstrument','initialPriceType','initialExtendedHours','actionsHistoryVM'),VMsWithoutDefer,context['defer'](createAggregationPeriodViewModel,'initialAggregationPeriod','actionsHistoryVM'),context['defer'](createChartConfiguratorViewModel,'chartDataViewModel','chartTypeViewModel','aggregationPeriodViewModel','initialChartSettings','chartId','actionsHistoryVM'),context['defer'](createYAxisConfiguratorViewModel,'chartDataViewModel','chartConfiguratorViewModel','initialGeneralSettings','chartId','actionsHistoryVM'),context['defer'](createCompareChartViewModel,'chartDataViewModel','initialCompareInstruments','instrumentSelectorViewModel'),context['defer'](createStudiesSettingsViewModel,'chartConfiguratorViewModel','studiesDataProvider','dxScriptEditViewModel','chartId','actionsHistoryVM'),context['defer'](createChartTypeViewModel,'initialChartType','chartId','actionsHistoryVM'),context['defer'](createDrawingViewModel,'initialDrawings','availableDrawings','initialConfig','chartId','dataLoaderVM','chartDataViewModel','actionsHistoryVM'),context['defer'](createChartSessionsViewModel,'aggregationPeriodViewModel','chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartLegendViewModel,'chartTypeViewModel','chartDataViewModel','chartConfiguratorViewModel','compareChartViewModel','studiesSettingsViewModel','aggregationPeriodViewModel'),context['defer'](createChartLayersViewModel,'drawingViewModel','chartDataViewModel','initialLayerItems'),context['defer'](createDrawingGroupsViewModel,'chartLayersViewModel','chartDataViewModel','drawingViewModel','chartId','initialSelectedGroup'),Configs,context['defer'](createNewsViewModel,'chartConfiguratorViewModel','chartDataViewModel'),context['defer'](createChartPaneViewModel,'chartId'),context['defer'](createTradingCombinedViewModel,'chartConfiguratorViewModel','chartDataViewModel','yAxisConfiguratorViewModel','dataLoaderVM'),context['defer'](createCrosshairVM,'chartConfiguratorViewModel'),context['key']()('chart'),({dxScriptProvider:G,dxScriptRunner:H,dxStudiesProvider:I,tradingSessionsProvider:J,orderProvider:K},L,M,{createTimeFrameViewModel:N,createInstrumentSelectorViewModel:O,actionsHistoryVM:P,dxScriptEditViewModel:Q},R,S,T,U,V,W,X,Y,Z,a0,a1,{drawingsConfig:a2,chartReactConfig:a3,initialized:a4},a5,a6,a7,a8,a9)=>al=>{const am=al['id'],an=al['instrument'],ao=al['extendedHours'],ap=al['chartSettings']['chartReact']['candlesData']['price'],aq=al['chartSettings'],ar=al['period'],as=a6({'chartId':am})['value'],at=createDataLoaderVM(),au=O,av=R({'initialAggregationPeriod':ar,'actionsHistoryVM':P})['value'],aw=av['value'],ax=M({'instrumentSelectorViewModel':au['value'],'aggregationPeriodViewModel':aw,'dataLoaderVM':at['value'],'initialInstrument':an,'initialExtendedHours':ao,'initialPriceType':ap,'actionsHistoryVM':P})['value'],ay=ax['value'],az=N,aA=L({'actionsHistoryVM':P})['value'],aB=W({'initialChartType':al['chartType'],'chartId':am,'actionsHistoryVM':P})['value'],aC=aB['value'],aD=S({'chartDataViewModel':ay,'aggregationPeriodViewModel':aw,'actionsHistoryVM':P,'chartTypeViewModel':aC,'initialChartSettings':aq,'chartId':am})['value'],aE=aD['value'],aF=a8({'chartConfiguratorViewModel':aE})['value'],aG=T({'chartConfiguratorViewModel':aE,'chartDataViewModel':ay,'initialGeneralSettings':aq,'chartId':am,'actionsHistoryVM':P})['value'],aH=aG['value'],aI=U({'chartDataViewModel':ay,'initialCompareInstruments':al['compareInstruments'],'instrumentSelectorViewModel':au['value']})['value'],aJ=aI['value'],aK=createDxScriptStudiesDataProvider(H,a9),aL=createDxStudiesWebWorkerProvider(a9,J,()=>option['toUndefined'](ay['instrument']['getValue']())?.['tradingHours'],a4?a3['disableWorkers']:!![],{'supressErrors':!a4}),aM=createCombinedStudiesProvider(aK,aL,I,G),aN=V({'chartConfiguratorViewModel':aE,'studiesDataProvider':aM,'dxScriptEditViewModel':Q,'chartId':am,'actionsHistoryVM':P})['value'],aO=aN['value'],aP=X({'initialDrawings':al['drawings'],'availableDrawings':drawingTypes,'initialConfig':a2,'chartId':am,'dataLoaderVM':at['value'],'chartDataViewModel':ay,'actionsHistoryVM':P})['value'],aQ=aP['value'],aR=Z({'chartTypeViewModel':aC,'chartDataViewModel':ay,'chartConfiguratorViewModel':aE,'compareChartViewModel':aJ,'studiesSettingsViewModel':aO,'aggregationPeriodViewModel':aw})['value'],aS=a0({'drawingViewModel':aQ,'chartDataViewModel':ay,'initialLayerItems':al['layers']['layerItems']})['value'],aT=a1({'chartLayersViewModel':aS['value'],'chartDataViewModel':ay,'drawingViewModel':aQ,'chartId':am,'initialSelectedGroup':al['layers']['selectedGroup']})['value'],aU=Y({'aggregationPeriodViewModel':aw,'chartConfiguratorViewModel':aE,'chartDataViewModel':ay})['value'],aV=a5({'chartConfiguratorViewModel':aE,'chartDataViewModel':ay})['value'],{tradingVMSink:aW,tradingCoreVMSink:aX,orderEntryVMSink:aY}=a7({'chartConfiguratorViewModel':aE,'chartDataViewModel':ay,'yAxisConfiguratorViewModel':aH,'dataLoaderVM':at['value']})['value'],aZ=createExecutedOrdersViewModel({'chartConfiguratorViewModel':aE,'chart':a9,'chartDataViewModel':ay,'orderProvider':K})['value'];return pipe(sink['sequenceT'](as,ax,aD,az,av,aI,aG,aN,aB,aP,aR,aU,aS,aT,au,aV,at,aW,aX,aY,aF,aZ,aA),sink['map'](([b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm])=>({'chartPaneViewModel':b0,'chartDataViewModel':b1,'chartConfiguratorViewModel':b2,'timeFrameViewModel':b3,'aggregationPeriodViewModel':b4,'compareChartViewModel':b5,'yAxisConfiguratorViewModel':b6,'studiesSettingsViewModel':b7,'chartTypeViewModel':b8,'drawingViewModel':b9,'chartLegendVM':ba,'chartSessionsViewModel':bb,'chartLayersViewModel':bc,'drawingGroupsViewModel':bd,'instrumentSelectorViewModel':be,'newsViewModel':bf,'dataLoaderVM':bg,'tradingVM':bh,'tradingCoreVM':bi,'orderEntryVM':bj,'crosshairVM':bk,'executedOrdersVM':bl,'dynamicObjectsVM':bm})));});export const ChartReactApiViewModels=context['combine'](context['key']()('chartDataViewModel'),context['key']()('chartConfiguratorViewModel'),context['key']()('compareChartViewModel'),context['key']()('yAxisConfiguratorViewModel'),context['key']()('studiesSettingsViewModel'),context['key']()('chartTypeViewModel'),context['key']()('drawingViewModel'),context['key']()('chartLegendVM'),context['key']()('chartLayersViewModel'),context['key']()('aggregationPeriodViewModel'),context['key']()('drawingGroupsViewModel'),context['key']()('tradingViewModel'),context['key']()('tradingCoreViewModel'),context['key']()('orderEntryViewModel'),context['key']()('crosshairVM'),(r,s,t,u,v,w,x,y,z,A,B,C,D,E,F)=>({'chartDataViewModel':r,'chartConfiguratorViewModel':s,'compareChartViewModel':t,'yAxisConfiguratorViewModel':u,'studiesSettingsViewModel':v,'chartTypeViewModel':w,'drawingViewModel':x,'chartLegendVM':y,'chartLayersViewModel':z,'aggregationPeriodViewModel':A,'drawingGroupsViewModel':B,'tradingViewModel':C,'tradingCoreViewModel':D,'orderEntryViewModel':E,'crosshairVM':F}));