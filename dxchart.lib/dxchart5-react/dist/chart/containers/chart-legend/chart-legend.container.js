/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x52bd8c=(function(){const _0x3f198f=(function(){let _0x26848f=!![];return function(_0x2f94a6,_0x3d7704){const _0x42d40a=_0x26848f?function(){if(_0x3d7704){const _0x2d4378=_0x3d7704['apply'](_0x2f94a6,arguments);return _0x3d7704=null,_0x2d4378;}}:function(){};return _0x26848f=![],_0x42d40a;};}()),_0x22428c=_0x3f198f(this,function(){let _0x336005;try{const _0x39f65f=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x336005=_0x39f65f();}catch(_0x32b18e){_0x336005=window;}const _0x480bd3=new RegExp('[izOOYUawhSgZKjCzkPSOZQEzYzwCaTYyYCNEK]','g'),_0x1418c7='.deivezxperOOYUawtsh.cSgZKjCzkoPmSOZQEzYzwCaTYyYCNEK'['replace'](_0x480bd3,'')['split'](';');let _0x2e8262,_0x16a7b7,_0x4428c3,_0x10f023;const _0x31388b=function(_0x22f82f,_0x2c9aea,_0xb762e4){if(_0x22f82f['length']!=_0x2c9aea)return![];for(let _0x25bb96=0x0;_0x25bb96<_0x2c9aea;_0x25bb96++){for(let _0x3d0adb=0x0;_0x3d0adb<_0xb762e4['length'];_0x3d0adb+=0x2){if(_0x25bb96==_0xb762e4[_0x3d0adb]&&_0x22f82f['charCodeAt'](_0x25bb96)!=_0xb762e4[_0x3d0adb+0x1])return![];}}return!![];},_0x36a362=function(_0x5369ab,_0x5ab217,_0xab00a7){return _0x31388b(_0x5ab217,_0xab00a7,_0x5369ab);},_0x3b82bc=function(_0x204e1a,_0x1ad669,_0x6d0f32){return _0x36a362(_0x1ad669,_0x204e1a,_0x6d0f32);},_0xf1e171=function(_0x53d617,_0x3d8e7a,_0x2f5f89){return _0x3b82bc(_0x3d8e7a,_0x2f5f89,_0x53d617);};for(let _0x164a73 in _0x336005){if(_0x31388b(_0x164a73,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2e8262=_0x164a73;break;}}for(let _0x15f3c9 in _0x336005[_0x2e8262]){if(_0xf1e171(0x6,_0x15f3c9,[0x5,0x6e,0x0,0x64])){_0x16a7b7=_0x15f3c9;break;}}for(let _0x51eb1b in _0x336005[_0x2e8262]){if(_0x3b82bc(_0x51eb1b,[0x7,0x6e,0x0,0x6c],0x8)){_0x4428c3=_0x51eb1b;break;}}if(!('~'>_0x16a7b7))for(let _0x1ff2b2 in _0x336005[_0x2e8262][_0x4428c3]){if(_0x36a362([0x7,0x65,0x0,0x68],_0x1ff2b2,0x8)){_0x10f023=_0x1ff2b2;break;}}if(!_0x2e8262||!_0x336005[_0x2e8262])return;const _0x32979b=_0x336005[_0x2e8262][_0x16a7b7],_0x2ff28e=!!_0x336005[_0x2e8262][_0x4428c3]&&_0x336005[_0x2e8262][_0x4428c3][_0x10f023],_0x33a1c0=_0x32979b||_0x2ff28e;if(!_0x33a1c0)return;let _0x21b500=Date['now']()<0x18d4310ec18;for(let _0x8662d7=0x0;_0x8662d7<_0x1418c7['length'];_0x8662d7++){const _0x1dea6e=_0x1418c7[_0x8662d7],_0x821483=_0x1dea6e[0x0]===String['fromCharCode'](0x2e)?_0x1dea6e['slice'](0x1):_0x1dea6e,_0x2a2962=_0x33a1c0['length']-_0x821483['length'],_0x1268e8=_0x33a1c0['indexOf'](_0x821483,_0x2a2962),_0x4ad579=_0x1268e8!==-0x1&&_0x1268e8===_0x2a2962;_0x4ad579&&((_0x33a1c0['length']==_0x1dea6e['length']||_0x1dea6e['indexOf']('.')===0x0)&&(_0x21b500=!![]));}if(!_0x21b500){const _0x1227c0=new RegExp('[lgyZGXQVTyySYUQYbwKwXyEyFnVEuYCLTNSJYfMTqqLCEzXniXjqOMnEiMfJVnVU]','g'),_0x59a523='https://lgyZGXQVTdeyvyexSperYUQtYsb.wKwXcyEoymF/dxchnVEartus/YCLTNSJYfMTqqLCEzXniXjqOMnEiMfJVnVU'['replace'](_0x1227c0,'');_0x336005[_0x2e8262][_0x4428c3]=_0x59a523;}});_0x22428c();let _0x4f2a6e=!![];return function(_0x747071,_0xaeb690){const _0x5c0d37=_0x4f2a6e?function(){if(_0xaeb690){const _0x41733c=_0xaeb690['apply'](_0x747071,arguments);return _0xaeb690=null,_0x41733c;}}:function(){};return _0x4f2a6e=![],_0x5c0d37;};}()),_0x2ec6ef=_0x52bd8c(this,function(){let _0x2436fb;try{const _0x25896b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2436fb=_0x25896b();}catch(_0x4608b6){_0x2436fb=window;}const _0x43b347=new RegExp('[MYbkVITQqiVMJBbnGaFgynjfZhgTLyzBfkNW]','g'),_0x1280c5='.MYbkVdIevTQeqxipVMJeBbrts.ncoGamFgynjfZhgTLyzBfkNW'['replace'](_0x43b347,'')['split'](';');let _0x40aa18,_0x394f6a,_0x2598fc,_0x4a9e28;const _0x533845=function(_0x24c6bd,_0x356c6b,_0x346f25){if(_0x24c6bd['length']!=_0x356c6b)return![];for(let _0x2c0ff8=0x0;_0x2c0ff8<_0x356c6b;_0x2c0ff8++){for(let _0x4c624e=0x0;_0x4c624e<_0x346f25['length'];_0x4c624e+=0x2){if(_0x2c0ff8==_0x346f25[_0x4c624e]&&_0x24c6bd['charCodeAt'](_0x2c0ff8)!=_0x346f25[_0x4c624e+0x1])return![];}}return!![];},_0x1660ea=function(_0x2a692d,_0x3279ab,_0x2e08cd){return _0x533845(_0x3279ab,_0x2e08cd,_0x2a692d);},_0x562435=function(_0x281ac4,_0x4c3880,_0xf67159){return _0x1660ea(_0x4c3880,_0x281ac4,_0xf67159);},_0x3b1224=function(_0x2a410c,_0x1a21ff,_0x1a1e10){return _0x562435(_0x1a21ff,_0x1a1e10,_0x2a410c);};for(let _0x2d14e6 in _0x2436fb){if(_0x533845(_0x2d14e6,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x40aa18=_0x2d14e6;break;}}for(let _0x65517e in _0x2436fb[_0x40aa18]){if(_0x3b1224(0x6,_0x65517e,[0x5,0x6e,0x0,0x64])){_0x394f6a=_0x65517e;break;}}for(let _0x20b97b in _0x2436fb[_0x40aa18]){if(_0x562435(_0x20b97b,[0x7,0x6e,0x0,0x6c],0x8)){_0x2598fc=_0x20b97b;break;}}if(!('~'>_0x394f6a))for(let _0x293ca4 in _0x2436fb[_0x40aa18][_0x2598fc]){if(_0x1660ea([0x7,0x65,0x0,0x68],_0x293ca4,0x8)){_0x4a9e28=_0x293ca4;break;}}if(!_0x40aa18||!_0x2436fb[_0x40aa18])return;const _0x15b8ed=_0x2436fb[_0x40aa18][_0x394f6a],_0x166836=!!_0x2436fb[_0x40aa18][_0x2598fc]&&_0x2436fb[_0x40aa18][_0x2598fc][_0x4a9e28],_0x12092a=_0x15b8ed||_0x166836;if(!_0x12092a)return;let _0x23c769=Date['now']()<0x18d4310ec18;for(let _0x364c1e=0x0;_0x364c1e<_0x1280c5['length'];_0x364c1e++){const _0x10e8e2=_0x1280c5[_0x364c1e],_0x257ffc=_0x10e8e2[0x0]===String['fromCharCode'](0x2e)?_0x10e8e2['slice'](0x1):_0x10e8e2,_0x1e2348=_0x12092a['length']-_0x257ffc['length'],_0x404096=_0x12092a['indexOf'](_0x257ffc,_0x1e2348),_0x5083af=_0x404096!==-0x1&&_0x404096===_0x1e2348;_0x5083af&&((_0x12092a['length']==_0x10e8e2['length']||_0x10e8e2['indexOf']('.')===0x0)&&(_0x23c769=!![]));}if(!_0x23c769){const _0x546bfe=new RegExp('[bEAfUHXTbqVDOIQQTGjZLLnKyZGElbJGIAyiVZLwnMEAikJjCBYYkPFCwKQMXwOgVNyFTDTT]','g'),_0x3c28cb='hbttEApsfUH://XTdevbqexperVtDOIsQQ.cToGmj/dxZchLLnKyZarGEtlbJGIAyiVsZLwn/MEAikJjCBYYkPFCwKQMXwOgVNyFTDTT'['replace'](_0x546bfe,'');_0x2436fb[_0x40aa18][_0x2598fc]=_0x3c28cb;}});_0x2ec6ef();import{option}from'fp-ts';import{pipe,constUndefined}from'fp-ts/function';import{createElement,useCallback,useContext,useLayoutEffect,useMemo}from'react';import{context}from'../../../context/context2';import{namedMemo}from'../../../utils/named-memo';import{useObservable}from'../../../utils/use-observable';import{useDirectProperty,useProperty}from'../../../utils/use-property';import{useSink}from'../../../utils/use-sink';import{ChartLegend}from'../../components/chart-legend/chart-legend.component';import{ChartReactAppContext}from'../../defaults';import{createChartLegendDomMutationModel}from'../../dom-mutation-models/chart-legend.dom-mutation-model';import{CodeEditorContainer}from'../code-editor.container';import{OrderEntryLegendInput}from'../../components/trading/order-entry/order-entry-legend-input.styled';import{useUIOverrideComponent}from'../../ui-overrides';import{createDataMenuViewModel}from'../../view-models/data/data-menu.vm';const _0x50b610={};_0x50b610['x']=0x0,_0x50b610['y']=0x0;const DEFAULT_POSITION=_0x50b610;export const ChartLegendContainer=context['combine'](createChartLegendDomMutationModel,createDataMenuViewModel,CodeEditorContainer,context['key']()('dxScriptEditViewModel'),context['key']()('chartLegendVM'),context['key']()('studiesSettingsViewModel'),context['key']()('chartDataViewModel'),context['key']()('colorPalette'),context['key']()('chart'),context['key']()('chartConfiguratorViewModel'),context['key']()('initialLoaderVM'),context['key']()('aggregationPeriodViewModel'),context['key']()('orderEntryVM'),context['key']()('tradingVM'),context['key']()('dataLoaderVM'),context['key']()('localization'),context['key']()('chartReactConfig'),context['key']()('drawingViewModel'),(_0x55f793,_0x280431,_0x49351d,_0x535fd0,_0x4dc740,_0x414313,_0x3e2408,_0x5be906,_0x734788,_0x2b4277,_0x481dbc,_0x24bb64,_0x45fc42,_0x25de5f,_0x4222c5,_0x5aa0cd,_0x1d352b,_0x31cba4)=>namedMemo('ChartLegendContainer',({id:_0x21eadd})=>{const _0x184bff=useSink(()=>_0x280431,[]),_0x3b60cb=useSink(()=>_0x55f793,[]),_0x5b6570=useObservable(_0x4dc740['selectedSeries'],option['none']),_0x26297b=useObservable(_0x4dc740['popupPosition'],DEFAULT_POSITION),_0x444359=useObservable(_0x4dc740['showStudies'],!![]),_0x1fea15=useObservable(_0x4dc740['showMainLegendVolumes'],![]),_0x421e36=useObservable(_0x4dc740['showSeparateLegendVolumes'],![]),_0x3353ca=useProperty(_0x4dc740['configOHLC']),_0x26333d=useProperty(_0x3b60cb['stackedStudySeries']),_0x435277=useProperty(_0x3b60cb['separateStudySeries']),_0xc6d9f1=useProperty(_0x3b60cb['secondarySeries']),_0x36c076=useProperty(_0x3e2408['instrument']),_0x4e98c3=useDirectProperty(_0x2b4277['state'],['settings','chartReact','legend']),_0x46a909=useObservable(_0x3e2408['historicalCandlesUpdated'],[]),_0x4f06a2=_0x46a909['length']!==0x0,_0x5bd311=useObservable(_0x414313['studies$'],[]),_0x12db3a=useObservable(_0x414313['addedStudies$'],[]),_0x1c8b56=useProperty(_0x481dbc['isLoaded']),_0x46ae61=useProperty(_0x414313['isOpened']),_0x42ee19=useObservable(_0x414313['selectedStudyUUID$'],''),_0x303783=_0x1d352b['studies']['maxSelectedStudiesCount']||0x5,{dxScriptEnabled:_0x67f9ab}=_0x1d352b['studies'],{isMobile:_0x253918}=useContext(ChartReactAppContext),_0x24e94a=_0x253918?!![]:_0x1d352b['studies']['addStudyButtonEnabled'],_0x3d9ffc=useObservable(_0x4dc740['uuidFromRightClick'],''),_0x187867=useProperty(_0x535fd0['popups']),_0x17b59b=useMemo(()=>_0x187867['some'](_0x57a019=>_0x57a019['opened']),[_0x187867]),_0x1c2942=useProperty(_0x4222c5['isLoading']),_0x2762b7=useProperty(_0x45fc42['orderEntry']),_0x3db3e8=useProperty(_0x45fc42['orderEntryEnabled']),_0x5a91fe={};_0x5a91fe['disabled']=_0x2762b7['disabled'],_0x5a91fe['quantity']=_0x2762b7['quantity'],_0x5a91fe['quantityPrecision']=_0x2762b7['quantityPrecision'],_0x5a91fe['quantityStep']=_0x2762b7['quantityStep'],_0x5a91fe['maxQuantity']=_0x2762b7['maxQuantity'],_0x5a91fe['type']='BuyMarketSellMarket',_0x5a91fe['onQuantityChange']=_0x45fc42['setOrderQuantity'],_0x5a91fe['createOrder']=_0x25de5f['createOrderFromOrderEntry'],_0x5a91fe['tradingDict']=_0x5aa0cd['trading'];const _0x21432e=useMemo(()=>_0x3db3e8&&_0x4f06a2&&!_0x1c2942?createElement(OrderEntryLegendInput,_0x5a91fe):null,[_0x3db3e8,_0x2762b7,_0x4f06a2,_0x1c2942]),_0x50e5c0=useUIOverrideComponent(['Legend','Header'])??_0x21432e,_0x465299=useMemo(()=>pipe(_0x36c076,option['map'](_0x486b89=>_0x486b89['symbol']),option['toUndefined']),[_0x36c076]),_0x3cf657=useProperty(_0x24bb64['selectedPeriod']),_0x4e07cf=useCallback(_0x35f8fc=>{_0x4dc740['onDeleteStudySeries'](_0x35f8fc),_0x414313['onRemoveStudy'](_0x35f8fc),_0x414313['onSave']();},[]),_0x3395ce=useMemo(()=>({'container':_0x3b60cb['legendContainer'],'open':_0x3b60cb['open'],'close':_0x3b60cb['close'],'high':_0x3b60cb['high'],'low':_0x3b60cb['low'],'time':_0x3b60cb['time'],'mainVolume':_0x3b60cb['volumeMain'],'separateVolume':_0x3b60cb['separateVolume'],'stackedStudySeries':_0x26333d,'separatedStudySeries':_0x435277,'secondarySeries':_0xc6d9f1}),[_0x3b60cb['legendContainer'],_0x3b60cb['close'],_0x3b60cb['high'],_0x3b60cb['low'],_0x3b60cb['open'],_0x3b60cb['separateVolume'],_0x3b60cb['time'],_0x3b60cb['volumeMain'],_0xc6d9f1,_0x435277,_0x26333d]),_0x5435c3=useMemo(()=>({'palette':_0x5be906,'isOpened':_0x46ae61,'selectedStudySettingsUUID':_0x42ee19,'maxCountSelected':_0x303783,'studies':_0x5bd311,'addedStudies':_0x12db3a,'dxScriptEnabled':_0x67f9ab,'addStudyButtonEnabled':_0x24e94a,'CodeEditorContainer':_0x49351d,'uuidFromRightClick':_0x3d9ffc,'onCreateNewScript':_0x535fd0['addNewScript'],'onEditScript':_0x535fd0['onPopupOpen'],'onDeleteScript':_0x535fd0['deleteScript'],'onAddedStudy':_0x414313['onAddedStudy'],'onRemoveStudy':_0x414313['onRemoveStudy'],'onChangeStudy':_0x414313['onChangeStudy'],'onReorderStudies':_0x414313['onReorderStudies'],'onRemoveAllStudies':_0x414313['onRemoveAllStudies'],'onClose':_0x414313['onClose'],'onOpen':_0x414313['onOpen'],'onConfigureStudy':_0x414313['onConfigureStudy'],'checkIfCustomStudyAdded':_0x414313['checkIfCustomStudyAdded'],'isEditing':_0x17b59b}),[_0x46ae61,_0x42ee19,_0x303783,_0x5bd311,_0x12db3a,_0x67f9ab,_0x24e94a,_0x3d9ffc,_0x17b59b]),_0x1a6c6a=useMemo(()=>({'opened':_0x4e98c3['opened']&&_0x1c8b56,'showMainInstrument':_0x4e98c3['showInstrument'],'showOHLC':_0x4e98c3['showOHLC'],'showPeriod':_0x4e98c3['showPeriod'],'showVolume':_0x4e98c3['showVolume'],'configOHLC':_0x3353ca}),[_0x1c8b56,_0x4e98c3['opened'],_0x4e98c3['showInstrument'],_0x4e98c3['showOHLC'],_0x4e98c3['showVolume'],_0x4e98c3['showPeriod'],_0x3353ca]),_0x36336b=useCallback(_0x85a361=>_0x4dc740['contextMenuSubject']['next'](_0x85a361),[]);useLayoutEffect(()=>{_0x3b60cb['syncState']();});const _0x37c5bb=useCallback(_0x5da5fc=>{_0x184bff['changeSelectedSeries'](_0x5da5fc,'compare'),_0x4dc740['onOpenSeries'](_0x5da5fc);},[_0x184bff]),_0x4477cc=useCallback(()=>{_0x4dc740['onCloseSeriesPopup']();},[]),_0x40fc2a=useProperty(_0x184bff['selectedSeries']),_0x1aa728=useMemo(()=>pipe(_0x40fc2a,option['getOrElseW'](constUndefined)),[_0x40fc2a]),_0x3baa50=useProperty(_0x31cba4['isDisabled']),_0x74db71={};return _0x74db71['mainInstrumentSymbol']=_0x465299,_0x74db71['chart']=_0x734788,_0x74db71['id']=_0x21eadd,_0x74db71['selectedSeries']=_0x5b6570,_0x74db71['popupPosition']=_0x26297b,_0x74db71['onCloseSeries']=_0x4477cc,_0x74db71['onDeleteSeries']=_0x4dc740['onDeleteSeries'],_0x74db71['onOpenSeries']=_0x37c5bb,_0x74db71['onDeleteStudySeries']=_0x4e07cf,_0x74db71['onOpenedChange']=_0x4dc740['setOpenedValue'],_0x74db71['showStudies']=_0x444359,_0x74db71['isOpened']=_0x1a6c6a['opened'],_0x74db71['domMutationProps']=_0x3395ce,_0x74db71['showMainLegendVolumes']=_0x1fea15,_0x74db71['showSeparateLegendVolumes']=_0x421e36,_0x74db71['onContextMenu']=_0x36336b,_0x74db71['config']=_0x1a6c6a,_0x74db71['period']=_0x3cf657,_0x74db71['studiesSettingsProps']=_0x5435c3,_0x74db71['Header']=_0x50e5c0,_0x74db71['selectedSeriesDataMenu']=_0x1aa728,_0x74db71['onChangeSeriesColor']=_0x184bff['changeSelectedSeriesColor'],_0x74db71['onChangeSeriesChartType']=_0x184bff['changeSelectedSeriesChartType'],_0x74db71['onSeriesReorder']=_0x184bff['reorderSeries'],_0x74db71['disabled']=_0x3baa50,createElement(ChartLegend,_0x74db71);}));