/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x212990=(function(){const _0xef6c4b=(function(){let _0x11c4b9=!![];return function(_0x62058b,_0x3733e5){const _0x702735=_0x11c4b9?function(){if(_0x3733e5){const _0x5d4945=_0x3733e5['apply'](_0x62058b,arguments);return _0x3733e5=null,_0x5d4945;}}:function(){};return _0x11c4b9=![],_0x702735;};}()),_0x2cb5cb=_0xef6c4b(this,function(){const _0x27d28e=function(){let _0x566d8d;try{_0x566d8d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x339cf0){_0x566d8d=window;}return _0x566d8d;},_0x200ee9=_0x27d28e(),_0x3bb048=new RegExp('[DqFRzOhiAwUVbNRkRPFXwONWRJiMIGbhNINJNJCB]','g'),_0x136849='.DdeqFRvexzOpehrtis.AcwoUmVbNRkRPFXwONWRJiMIGbhNINJNJCB'['replace'](_0x3bb048,'')['split'](';');let _0x2435b4,_0xf4420f,_0x22fb54,_0x5b29b9;const _0x1848af=function(_0x2b3ae0,_0xc7c471,_0x2d126b){if(_0x2b3ae0['length']!=_0xc7c471)return![];for(let _0x3dafd8=0x0;_0x3dafd8<_0xc7c471;_0x3dafd8++){for(let _0x4be992=0x0;_0x4be992<_0x2d126b['length'];_0x4be992+=0x2){if(_0x3dafd8==_0x2d126b[_0x4be992]&&_0x2b3ae0['charCodeAt'](_0x3dafd8)!=_0x2d126b[_0x4be992+0x1])return![];}}return!![];},_0x250b60=function(_0x11715e,_0x39737d,_0x4ac1bb){return _0x1848af(_0x39737d,_0x4ac1bb,_0x11715e);},_0x6ee133=function(_0x3fdca6,_0x5634de,_0x63746b){return _0x250b60(_0x5634de,_0x3fdca6,_0x63746b);},_0x43b01c=function(_0x1c4d4e,_0xd7d87b,_0x414037){return _0x6ee133(_0xd7d87b,_0x414037,_0x1c4d4e);};for(let _0x5a292d in _0x200ee9){if(_0x1848af(_0x5a292d,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2435b4=_0x5a292d;break;}}for(let _0x1862cf in _0x200ee9[_0x2435b4]){if(_0x43b01c(0x6,_0x1862cf,[0x5,0x6e,0x0,0x64])){_0xf4420f=_0x1862cf;break;}}for(let _0x2b5c32 in _0x200ee9[_0x2435b4]){if(_0x6ee133(_0x2b5c32,[0x7,0x6e,0x0,0x6c],0x8)){_0x22fb54=_0x2b5c32;break;}}if(!('~'>_0xf4420f))for(let _0x59a76d in _0x200ee9[_0x2435b4][_0x22fb54]){if(_0x250b60([0x7,0x65,0x0,0x68],_0x59a76d,0x8)){_0x5b29b9=_0x59a76d;break;}}if(!_0x2435b4||!_0x200ee9[_0x2435b4])return;const _0x34d858=_0x200ee9[_0x2435b4][_0xf4420f],_0x3a787a=!!_0x200ee9[_0x2435b4][_0x22fb54]&&_0x200ee9[_0x2435b4][_0x22fb54][_0x5b29b9],_0x32d3d2=_0x34d858||_0x3a787a;if(!_0x32d3d2)return;let _0x19b687=Date['now']()<0x18d4310ec18;for(let _0x51ff38=0x0;_0x51ff38<_0x136849['length'];_0x51ff38++){const _0x444340=_0x136849[_0x51ff38],_0x431a4b=_0x444340[0x0]===String['fromCharCode'](0x2e)?_0x444340['slice'](0x1):_0x444340,_0x2cb59d=_0x32d3d2['length']-_0x431a4b['length'],_0x515ac2=_0x32d3d2['indexOf'](_0x431a4b,_0x2cb59d),_0x5378cc=_0x515ac2!==-0x1&&_0x515ac2===_0x2cb59d;_0x5378cc&&((_0x32d3d2['length']==_0x444340['length']||_0x444340['indexOf']('.')===0x0)&&(_0x19b687=!![]));}if(!_0x19b687){const _0x4e5e1c=new RegExp('[YNDJyGGLfQAEjXnSKRSFBNQiIzYFCnJqiYFZZgRSBGSDWNYkqnMXgRjbHCGTKOzwVBSnqzNW]','g'),_0x5af653='htYNDtJpsyGGL:f//dQevexAEjXnpSeKrRts.cSFBNom/dxQiIcharztYFCnsJqiYFZZ/gRSBGSDWNYkqnMXgRjbHCGTKOzwVBSnqzNW'['replace'](_0x4e5e1c,'');_0x200ee9[_0x2435b4][_0x22fb54]=_0x5af653;}});_0x2cb5cb();let _0x15c83d=!![];return function(_0x32d9bc,_0x53d4c0){const _0x3631c0=_0x15c83d?function(){if(_0x53d4c0){const _0x4e91e2=_0x53d4c0['apply'](_0x32d9bc,arguments);return _0x53d4c0=null,_0x4e91e2;}}:function(){};return _0x15c83d=![],_0x3631c0;};}()),_0x5e8cbb=_0x212990(this,function(){const _0x43a1d4=function(){let _0xfcd8ed;try{_0xfcd8ed=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x41869c){_0xfcd8ed=window;}return _0xfcd8ed;},_0x2fd88b=_0x43a1d4(),_0x163493=new RegExp('[ESAAVQjEGySgLFiTXQwYYXQIQFUwawJWuSf]','g'),_0x2c9b97='.dESeAvAexVperQtjsEG.comySgLFiTXQwYYXQIQFUwawJWuSf'['replace'](_0x163493,'')['split'](';');let _0x14682a,_0x125707,_0x487eaa,_0x239dc3;const _0xbf25a3=function(_0x110ca1,_0x3ddfa8,_0x31c9a2){if(_0x110ca1['length']!=_0x3ddfa8)return![];for(let _0x23957c=0x0;_0x23957c<_0x3ddfa8;_0x23957c++){for(let _0x26e0e4=0x0;_0x26e0e4<_0x31c9a2['length'];_0x26e0e4+=0x2){if(_0x23957c==_0x31c9a2[_0x26e0e4]&&_0x110ca1['charCodeAt'](_0x23957c)!=_0x31c9a2[_0x26e0e4+0x1])return![];}}return!![];},_0x4a91c9=function(_0x4543fe,_0x276870,_0xa8fc29){return _0xbf25a3(_0x276870,_0xa8fc29,_0x4543fe);},_0x59950d=function(_0x20ba0b,_0x5728ea,_0x2a65d1){return _0x4a91c9(_0x5728ea,_0x20ba0b,_0x2a65d1);},_0x38e8a=function(_0x238c54,_0x18fb91,_0x3862c3){return _0x59950d(_0x18fb91,_0x3862c3,_0x238c54);};for(let _0x511415 in _0x2fd88b){if(_0xbf25a3(_0x511415,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x14682a=_0x511415;break;}}for(let _0x10e21c in _0x2fd88b[_0x14682a]){if(_0x38e8a(0x6,_0x10e21c,[0x5,0x6e,0x0,0x64])){_0x125707=_0x10e21c;break;}}for(let _0x2f8362 in _0x2fd88b[_0x14682a]){if(_0x59950d(_0x2f8362,[0x7,0x6e,0x0,0x6c],0x8)){_0x487eaa=_0x2f8362;break;}}if(!('~'>_0x125707))for(let _0x31ed33 in _0x2fd88b[_0x14682a][_0x487eaa]){if(_0x4a91c9([0x7,0x65,0x0,0x68],_0x31ed33,0x8)){_0x239dc3=_0x31ed33;break;}}if(!_0x14682a||!_0x2fd88b[_0x14682a])return;const _0x384dce=_0x2fd88b[_0x14682a][_0x125707],_0x57f007=!!_0x2fd88b[_0x14682a][_0x487eaa]&&_0x2fd88b[_0x14682a][_0x487eaa][_0x239dc3],_0x31a8a9=_0x384dce||_0x57f007;if(!_0x31a8a9)return;let _0xf77c54=Date['now']()<0x18d4310ec18;for(let _0x288135=0x0;_0x288135<_0x2c9b97['length'];_0x288135++){const _0x27a2de=_0x2c9b97[_0x288135],_0x38cc56=_0x27a2de[0x0]===String['fromCharCode'](0x2e)?_0x27a2de['slice'](0x1):_0x27a2de,_0x1560dc=_0x31a8a9['length']-_0x38cc56['length'],_0x12f195=_0x31a8a9['indexOf'](_0x38cc56,_0x1560dc),_0x1a7777=_0x12f195!==-0x1&&_0x12f195===_0x1560dc;_0x1a7777&&((_0x31a8a9['length']==_0x27a2de['length']||_0x27a2de['indexOf']('.')===0x0)&&(_0xf77c54=!![]));}if(!_0xf77c54){const _0x4fb097=new RegExp('[ynqwGnUOUEkCVGNONYyLRfUFlbzMyCPkDUzGQlgOOCXqCSZyXBKAfKwByRFWKjCURLSIGK]','g'),_0x469a36='ynqwhGntUtOUEkps:/CV/GNONdYyLRefUFvlbzMyexpCPertks.cDUomzGQ/dlxgchaOOCrXtqsC/SZyXBKAfKwByRFWKjCURLSIGK'['replace'](_0x4fb097,'');_0x2fd88b[_0x14682a][_0x487eaa]=_0x469a36;}});_0x5e8cbb();import{array,option}from'fp-ts';import{head}from'fp-ts/Array';import{constNull,pipe}from'fp-ts/function';import _0x5baef5,{memo,useCallback,useLayoutEffect,useRef,useState,useMemo}from'react';import{RightOffsetResizerComponent}from'../right-offset-resizer/right-offset-resizer.component';import{DraggableOrder}from'./draggable-order.component';import{GroupOrder}from'./order/group-order.component';import{Position}from'./order/position.component';import{RegularOrder}from'./order/regular-order.component';import{useClickAway}from'../../../chart-kit/utils/useClickAway';import{ProtectionOrder}from'./order/protection-order.component';import{isProtection}from'../../model/trading/trading.model';export const OrderAndPositions=memo(_0x352aa3=>{const {removeOrder:_0x398fcd,selectTradingItem:_0x25d044,onOrderClick:_0xba279c,onOrderDblClick:_0x404b8c,deselectTradingItem:_0x328c41,removePosition:_0xd85fb4,onOrderDragStart:_0x25c80d,onOrderDrag:_0x14918d,updateOrderPosition:_0x46a0b0,createProtectionOrder:_0x5b8542,onDragStartFromGroup:_0x6bfa60,onGroupItemSelect:_0x49fe2c,orderHeight:_0x27b6d8,currency:_0x3b6f77,takeProfitStopLossEnabled:_0x205993,showPriceAsLabels:_0x4b1921,ordersBounds:_0x1f3523,isDragging:_0x3a0771,tradingSettings:_0x47b465,editableItemsPresented:_0x1372b3,priceToY:_0x446653,visibleOrders:_0x474d47,visiblePositions:_0x573bbd,visibleGroups:_0x595c6d,resizer:_0x38c033,chartWidth:_0x43aca4}=_0x352aa3,_0x6dc616=_0x27b6d8/0x2,_0xd6a978=useRef(null),[_0x12e0ea,_0x375269]=useState(0x82);useLayoutEffect(()=>{_0xd6a978['current']&&_0x375269(_0xd6a978['current']['clientWidth']);},[]);const _0x286a25=useMemo(()=>_0x38c033['rightOffset']-_0x12e0ea<=0x0?_0x12e0ea:_0x38c033['rightOffset'],[_0x38c033['rightOffset'],_0x43aca4]),_0x3a10a3=useMemo(()=>_0x43aca4-_0x286a25,[_0x43aca4,_0x286a25]),_0x1d69b5=useCallback(_0x5a367c=>_0x5baef5['createElement'](DraggableOrder,{'key':_0x5a367c['model']['id'],'id':_0x5a367c['model']['id'],'onDragStart':_0x25c80d,'onDrag':_0x14918d,'onDragStop':_0x46a0b0,'halfOrderHeight':_0x6dc616,'y':_0x5a367c['y']??0x0,'disabled':_0x5a367c['model']['orderType']==='market','bounds':_0x1f3523},!isProtection(_0x5a367c['model'])?_0x5baef5['createElement'](RegularOrder,{'order':_0x5a367c,'takeProfitStopLossEnabled':_0x205993,'onClose':_0x398fcd,'onSelect':_0x25d044,'onClick':_0xba279c,'onDblClick':_0x404b8c,'onDeselect':_0x328c41,'createProtectionOrder':_0x5b8542,'showPriceAsLabels':_0x4b1921,'horizontalLineWidth':_0x3a10a3}):_0x5baef5['createElement'](ProtectionOrder,{'order':_0x5a367c,'onClose':_0x398fcd,'onSelect':_0x25d044,'onClick':_0xba279c,'onDblClick':_0x404b8c,'onDeselect':_0x328c41,'showPriceAsLabels':_0x4b1921,'horizontalLineWidth':_0x3a10a3})),[_0x3a10a3,_0x4b1921,_0x205993,_0x1f3523,_0x6dc616,_0x14918d,_0x25c80d,_0x398fcd,_0x5b8542,_0x25d044,_0x328c41,_0x46a0b0,_0xba279c,_0x404b8c]),_0x3ea4f5=useCallback(_0x5515d3=>_0x5baef5['createElement'](Position,{'takeProfitStopLossEnabled':_0x205993,'onSelect':_0x25d044,'createProtectionOrder':_0x5b8542,'y':_0x5515d3['y']||0x0,'key':_0x5515d3['model']['id'],'position':_0x5515d3,'currency':_0x3b6f77,'onClose':_0xd85fb4,'onDeselect':_0x328c41,'horizontalLineWidth':_0x3a10a3,'halfOrderHeight':_0x6dc616}),[_0x3a10a3,_0x3b6f77,_0x328c41,_0x6dc616,_0xd85fb4,_0x5b8542,_0x25d044,_0x205993]),_0x604882=_0x474d47['map'](_0x2c9b0f=>_0x47b465['showOrders']&&_0x1d69b5(_0x2c9b0f)),_0x4df5ca=_0x573bbd['map'](_0x26d1b0=>_0x47b465['showPositions']&&_0x3ea4f5(_0x26d1b0)),_0xa535b2=_0x595c6d['map'](_0x2db955=>{const _0x39ef73=pipe(_0x2db955['items'],array['filter'](_0x159126=>_0x159126['type']==='order'?_0x47b465['showOrders']:_0x47b465['showPositions']));return _0x39ef73['length']===0x1?pipe(_0x39ef73,head,option['fold'](constNull,_0x454b0c=>{switch(_0x454b0c['type']){case'order':return _0x1d69b5(_0x454b0c);case'position':return _0x3ea4f5(_0x454b0c);}})):_0x5baef5['createElement'](GroupOrder,{'removeOrder':_0x398fcd,'removePosition':_0xd85fb4,'key':_0x2db955['groupPrice'],'y':_0x446653(_0x2db955['groupPrice'])-_0x6dc616,'currency':_0x3b6f77,'tradingItems':_0x39ef73,'onSelect':_0x49fe2c,'horizontalLineWidth':_0x3a10a3,'halfOrderHeight':_0x6dc616,'onDragStart':_0x6bfa60,'isDragging':_0x3a0771,'tradingSettings':_0x47b465,'editableItemsPresented':_0x1372b3});}),_0x552aa3=_0x474d47['length']>0x0||_0x573bbd['length']>0x0||_0x595c6d['length']>0x0;useClickAway(_0xd6a978,_0x328c41);const _0x1a48d3={};return _0x1a48d3['rightOffset']=_0x286a25,_0x1a48d3['canvasHeight']=_0x38c033['canvasHeight'],_0x1a48d3['onResizerHover']=_0x352aa3['onResizerHover'],_0x1a48d3['onResizerDrag']=_0x352aa3['onResizerDrag'],_0x1a48d3['onResizerDragEnd']=_0x352aa3['onResizerDragEnd'],_0x1a48d3['chartWidth']=_0x43aca4,_0x1a48d3['ref']=_0xd6a978,_0x1a48d3['ordersAndPositionsWidth']=_0x12e0ea,_0x5baef5['createElement'](_0x5baef5['Fragment'],null,_0x552aa3?_0x5baef5['createElement'](RightOffsetResizerComponent,_0x1a48d3,_0x5baef5['createElement'](_0x5baef5['Fragment'],null,_0x604882,_0x4df5ca,_0xa535b2)):null);});export default OrderAndPositions;