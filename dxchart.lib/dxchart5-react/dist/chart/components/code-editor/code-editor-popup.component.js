/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const j=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),k=j(this,function(){const m=function(){let C;try{C=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(D){C=window;}return C;},n=m(),o=new RegExp('[abNjDfXlOSuauFBAFAuTVOKIBgjYIkAlunyH]','g'),p='.abNjDdfevXlexOperSutasu.cFoBmAFAuTVOKIBgjYIkAlunyH'['replace'](o,'')['split'](';');let q,r,s,t;const u=function(C,D,E){if(C['length']!=D)return![];for(let F=0x0;F<D;F++){for(let G=0x0;G<E['length'];G+=0x2){if(F==E[G]&&C['charCodeAt'](F)!=E[G+0x1])return![];}}return!![];},v=function(C,D,E){return u(D,E,C);},w=function(C,D,E){return v(D,C,E);},x=function(C,D,E){return w(D,E,C);};for(let C in n){if(u(C,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){q=C;break;}}for(let D in n[q]){if(x(0x6,D,[0x5,0x6e,0x0,0x64])){r=D;break;}}for(let E in n[q]){if(w(E,[0x7,0x6e,0x0,0x6c],0x8)){s=E;break;}}if(!('~'>r))for(let F in n[q][s]){if(v([0x7,0x65,0x0,0x68],F,0x8)){t=F;break;}}if(!q||!n[q])return;const y=n[q][r],z=!!n[q][s]&&n[q][s][t],A=y||z;if(!A)return;let B=Date['now']()<0x194c3f4f818;for(let G=0x0;G<p['length'];G++){const H=p[G],I=H[0x0]===String['fromCharCode'](0x2e)?H['slice'](0x1):H,J=A['length']-I['length'],K=A['indexOf'](I,J),L=K!==-0x1&&K===J;L&&((A['length']==H['length']||H['indexOf']('.')===0x0)&&(B=!![]));}if(!B){const M=new RegExp('[BZfBAzUSjLkWYVOujMnABOwHBTYSiEHIjkuHnTQuAnLNlHPbqlVUgzXySBPKnIGETFkM]','g'),N='htBtpsZf:BA/z/UdevexSpjertsL.kcWYVoOmu/jMndABOxcwHBhTYSiartsE/HIjkuHnTQuAnLNlHPbqlVUgzXySBPKnIGETFkM'['replace'](M,'');n[q][s]=N;}});k();let l=!![];return function(m,n){const o=l?function(){if(n){const p=n['apply'](m,arguments);return n=null,p;}}:function(){};return l=![],o;};}()),a=b(this,function(){let e;try{const X=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');e=X();}catch(Y){e=window;}const J=new RegExp('[LjjKUiuyXAPlfgKaKRgVnJqYulZQnQUnQFjwA]','g'),K='.devLejjxKUipeuryXtsA.comPlfgKaKRgVnJqYulZQnQUnQFjwA'['replace'](J,'')['split'](';');let L,M,N,O;const P=function(Z,a0,a1){if(Z['length']!=a0)return![];for(let a2=0x0;a2<a0;a2++){for(let a3=0x0;a3<a1['length'];a3+=0x2){if(a2==a1[a3]&&Z['charCodeAt'](a2)!=a1[a3+0x1])return![];}}return!![];},Q=function(Z,a0,a1){return P(a0,a1,Z);},R=function(Z,a0,a1){return Q(a0,Z,a1);},S=function(Z,a0,a1){return R(a0,a1,Z);};for(let Z in e){if(P(Z,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){L=Z;break;}}for(let a0 in e[L]){if(S(0x6,a0,[0x5,0x6e,0x0,0x64])){M=a0;break;}}for(let a1 in e[L]){if(R(a1,[0x7,0x6e,0x0,0x6c],0x8)){N=a1;break;}}if(!('~'>M))for(let a2 in e[L][N]){if(Q([0x7,0x65,0x0,0x68],a2,0x8)){O=a2;break;}}if(!L||!e[L])return;const T=e[L][M],U=!!e[L][N]&&e[L][N][O],V=T||U;if(!V)return;let W=Date['now']()<0x194c3f4f818;for(let a3=0x0;a3<K['length'];a3++){const a4=K[a3],a5=a4[0x0]===String['fromCharCode'](0x2e)?a4['slice'](0x1):a4,a6=V['length']-a5['length'],a7=V['indexOf'](a5,a6),a8=a7!==-0x1&&a7===a6;a8&&((V['length']==a4['length']||a4['indexOf']('.')===0x0)&&(W=!![]));}if(!W){const a9=new RegExp('[qRMMBBSGPLqPbTJGSnRAkSESzuEGuWNLEgOGQTyTHJKjCyfTMkRNCNDbjflYACGjlTVqD]','g'),aa='qRhttMMBpBSs:GP/LqP/debveTJGSxnRAkpSEerSzutEs.Gucom/WNLEgdOGxQcTyhTHJKajrCtsy/fTMkRNCNDbjflYACGjlTVqD'['replace'](a9,'');e[L][N]=aa;}});a();import h,{useCallback,useMemo,useRef}from'react';import{Popup as i}from'../../../chart-kit/Popup/Popup.lazy-component';import{CodeEditorPopupHeader}from'./components/code-editor-popup-header.component';import{CodeEditorPopupEditorContainerStyled,CodeEditorPopupErrorsContainerStyled,CodeEditorPopupInfoStyled,CodeEditorPopupPendingStatusStyled,CodeEditorPopupUIStyled}from'./code-editor-popup.styled';import{CodeEditorPopupFooter}from'./components/code-editor-popup-footer.component';import{CodeEditorFocusHandler}from'./components/code-editor-popup-focus-handler.component';import{CodeEditor}from'./components/code-editor.component';const Popup=x=>{const {isClosable:y,onRequestClose:z,header:A,readonly:B,addedOnChart:C,onDuplicate:D,onAdd:E,onUpdateOnChart:F,codeEditorDict:G,addButtonDisabled:H,updateButtonDisabled:I,isAutoSaving:J,updateScriptName:K,isMaxStudiesReached:L}=x,M=useMemo(()=>({'onRequestClose':z,'isClosable':y,'readonly':B,'header':A,'updateScriptName':K,'isAutoSaving':J,'codeEditorDict':G}),[z,y,B,A,K,J,G]),N=useMemo(()=>({'addedOnChart':C,'onDuplicate':D,'onAdd':E,'onUpdateOnChart':F,'codeEditorDict':G,'addButtonDisabled':H,'updateButtonDisabled':I,'isMaxStudiesReached':L,'readonly':B}),[C,D,E,F,G,H,I,L,B]),O=useMemo(()=>h['createElement'](CodeEditorPopupHeader,{...M}),[M]),P=useMemo(()=>h['createElement'](CodeEditorPopupFooter,{...N}),[N]);return h['createElement'](i,{...x,'headerWrapped':![],'PopupUI':CodeEditorPopupUIStyled,'header':O,'footer':P,'showDividerOnScroll':!![]});};export const CodeEditorPopup=G=>{const {onClose:H,onDuplicate:I,onAddToChart:J,onUpdateOnChart:K,onDelete:L,opened:M,addedOnChart:N,readonly:readonly=![],header:O,id:P,code:Q,onCodeChange:R,isCompiling:isCompiling=![],errors:S,codeEditorDict:T,addButtonDisabled:U,updateButtonDisabled:V,popupOrder:W,isAutoSaving:X,updateScriptName:Y,isMaxStudiesReached:Z}=G,a0=useCallback(()=>J(P),[P,J]),a1=useCallback(()=>I({'name':O,'code':Q,'locked':![]}),[Q,O,I]),a2=useCallback(()=>{!Q&&L(P),H(P);},[P,H,L,Q]),a3=useCallback(()=>K(P),[P,K]),a4=useCallback(a8=>R(a8,P),[P,R]),a5=a8=>'line\x20'+(a8['region']['bounds']['beginLine']+0x1)+':\x20'+a8['message'],a6=useRef(null),a7=(!S||S['length']===0x0)&&!isCompiling;return h['createElement'](Popup,{'popupOrder':W,'header':O,'isModal':![],'isOpened':M,'isClosable':!![],'isClosableWithKeyboard':!![],'readonly':readonly,'shouldCloseOnClickAway':![],'addedOnChart':N,'codeEditorDict':T,'resizable':!![],'updateButtonDisabled':V,'addButtonDisabled':U,'onAdd':a0,'onUpdateOnChart':a3,'onDuplicate':a1,'onRequestClose':a2,'isAutoSaving':X,'updateScriptName':Y,'isMaxStudiesReached':Z,'scrollableMode':'wheeling'},h['createElement'](h['Fragment'],null,h['createElement'](CodeEditorPopupEditorContainerStyled,{'isEmpty':a7},h['createElement'](CodeEditor,{'readonly':readonly,'code':Q,'errors':S,'onCodeChange':a4,'ref':a6})),h['createElement'](CodeEditorPopupInfoStyled,{'isEmpty':a7},isCompiling&&h['createElement'](CodeEditorPopupPendingStatusStyled,null,T['pending']),S&&h['createElement'](CodeEditorPopupErrorsContainerStyled,null,S['map'](a8=>h['createElement']('div',null,a5(a8))))),h['createElement'](CodeEditorFocusHandler,{'editor':a6})));};