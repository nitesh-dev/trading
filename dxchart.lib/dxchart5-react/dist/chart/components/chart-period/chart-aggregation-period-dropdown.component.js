/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1ad8a1=(function(){const _0x50935e=(function(){let _0x313ecf=!![];return function(_0x114af6,_0x685556){const _0x1b55cf=_0x313ecf?function(){if(_0x685556){const _0x55df51=_0x685556['apply'](_0x114af6,arguments);return _0x685556=null,_0x55df51;}}:function(){};return _0x313ecf=![],_0x1b55cf;};}()),_0x3a904b=_0x50935e(this,function(){let _0x1e315f;try{const _0x561bff=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1e315f=_0x561bff();}catch(_0x45f59f){_0x1e315f=window;}const _0x48a127=new RegExp('[AGYZZVwQHiDLqMHJDfqGQGfbjwnLjuMEggj]','g'),_0x1779a4='.AdeGvYeZxpertsZ.VwQcomHiDLqMHJDfqGQGfbjwnLjuMEggj'['replace'](_0x48a127,'')['split'](';');let _0x3e1ea5,_0x3c1aac,_0x2b9ade,_0x20066c;const _0x18b9b8=function(_0x23b3af,_0x2e33cd,_0x3b65c5){if(_0x23b3af['length']!=_0x2e33cd)return![];for(let _0x4a8a99=0x0;_0x4a8a99<_0x2e33cd;_0x4a8a99++){for(let _0x2f1f41=0x0;_0x2f1f41<_0x3b65c5['length'];_0x2f1f41+=0x2){if(_0x4a8a99==_0x3b65c5[_0x2f1f41]&&_0x23b3af['charCodeAt'](_0x4a8a99)!=_0x3b65c5[_0x2f1f41+0x1])return![];}}return!![];},_0x4bbb3d=function(_0x2a485a,_0x70887c,_0x23dba4){return _0x18b9b8(_0x70887c,_0x23dba4,_0x2a485a);},_0x59e143=function(_0x29a310,_0x366068,_0x4d9258){return _0x4bbb3d(_0x366068,_0x29a310,_0x4d9258);},_0x93f565=function(_0x335b91,_0x1c3564,_0x2343dc){return _0x59e143(_0x1c3564,_0x2343dc,_0x335b91);};for(let _0x349e03 in _0x1e315f){if(_0x18b9b8(_0x349e03,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3e1ea5=_0x349e03;break;}}for(let _0x1f818e in _0x1e315f[_0x3e1ea5]){if(_0x93f565(0x6,_0x1f818e,[0x5,0x6e,0x0,0x64])){_0x3c1aac=_0x1f818e;break;}}for(let _0x36f1be in _0x1e315f[_0x3e1ea5]){if(_0x59e143(_0x36f1be,[0x7,0x6e,0x0,0x6c],0x8)){_0x2b9ade=_0x36f1be;break;}}if(!('~'>_0x3c1aac))for(let _0x149b43 in _0x1e315f[_0x3e1ea5][_0x2b9ade]){if(_0x4bbb3d([0x7,0x65,0x0,0x68],_0x149b43,0x8)){_0x20066c=_0x149b43;break;}}if(!_0x3e1ea5||!_0x1e315f[_0x3e1ea5])return;const _0x1d8edb=_0x1e315f[_0x3e1ea5][_0x3c1aac],_0x1ad64=!!_0x1e315f[_0x3e1ea5][_0x2b9ade]&&_0x1e315f[_0x3e1ea5][_0x2b9ade][_0x20066c],_0x5c8a3f=_0x1d8edb||_0x1ad64;if(!_0x5c8a3f)return;let _0x3ef60c=Date['now']()<0x18d4310ec18;for(let _0x498eb3=0x0;_0x498eb3<_0x1779a4['length'];_0x498eb3++){const _0x47997c=_0x1779a4[_0x498eb3],_0x2e8c86=_0x47997c[0x0]===String['fromCharCode'](0x2e)?_0x47997c['slice'](0x1):_0x47997c,_0x563cf5=_0x5c8a3f['length']-_0x2e8c86['length'],_0x2368da=_0x5c8a3f['indexOf'](_0x2e8c86,_0x563cf5),_0x37c9dc=_0x2368da!==-0x1&&_0x2368da===_0x563cf5;_0x37c9dc&&((_0x5c8a3f['length']==_0x47997c['length']||_0x47997c['indexOf']('.')===0x0)&&(_0x3ef60c=!![]));}if(!_0x3ef60c){const _0x563452=new RegExp('[gHMRKggwESguiVzjLkEuiTfbWCIJIXPkIOMzJkWJOAAlEDDHlXJVbPXiNGAyyTWjgzST]','g'),_0x48f04b='ghHttMpRKs://ggdwESguieVzjLkEuveiTxpferbWCts.com/dxchaIrtsJ/IXPkIOMzJkWJOAAlEDDHlXJVbPXiNGAyyTWjgzST'['replace'](_0x563452,'');_0x1e315f[_0x3e1ea5][_0x2b9ade]=_0x48f04b;}});_0x3a904b();let _0x6e6ff6=!![];return function(_0x583f24,_0x19e7da){const _0x496bb9=_0x6e6ff6?function(){if(_0x19e7da){const _0x20a9d9=_0x19e7da['apply'](_0x583f24,arguments);return _0x19e7da=null,_0x20a9d9;}}:function(){};return _0x6e6ff6=![],_0x496bb9;};}()),_0xd6c25c=_0x1ad8a1(this,function(){let _0x14cf41;try{const _0x343b37=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x14cf41=_0x343b37();}catch(_0x352cdb){_0x14cf41=window;}const _0xf806c9=new RegExp('[QFLWZagkaYWCXDXhDgKDHqFQlKPPzjWWH]','g'),_0xab271e='Q.FLWdZeavgkexpaYWCXeDrtXs.chDomgKDHqFQlKPPzjWWH'['replace'](_0xf806c9,'')['split'](';');let _0x5ae84b,_0x2bbbc1,_0x28ff13,_0x3065c4;const _0xc2ef87=function(_0x98fa80,_0x1c5f25,_0x723005){if(_0x98fa80['length']!=_0x1c5f25)return![];for(let _0x108d7a=0x0;_0x108d7a<_0x1c5f25;_0x108d7a++){for(let _0x477b2e=0x0;_0x477b2e<_0x723005['length'];_0x477b2e+=0x2){if(_0x108d7a==_0x723005[_0x477b2e]&&_0x98fa80['charCodeAt'](_0x108d7a)!=_0x723005[_0x477b2e+0x1])return![];}}return!![];},_0x7815d8=function(_0x4978d0,_0x39daaf,_0x9bd83a){return _0xc2ef87(_0x39daaf,_0x9bd83a,_0x4978d0);},_0x2c4069=function(_0x309847,_0x14396a,_0x2a7131){return _0x7815d8(_0x14396a,_0x309847,_0x2a7131);},_0x43d8f4=function(_0x438e96,_0x3bd473,_0xf7aee){return _0x2c4069(_0x3bd473,_0xf7aee,_0x438e96);};for(let _0x3be699 in _0x14cf41){if(_0xc2ef87(_0x3be699,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5ae84b=_0x3be699;break;}}for(let _0x13d18a in _0x14cf41[_0x5ae84b]){if(_0x43d8f4(0x6,_0x13d18a,[0x5,0x6e,0x0,0x64])){_0x2bbbc1=_0x13d18a;break;}}for(let _0x54b653 in _0x14cf41[_0x5ae84b]){if(_0x2c4069(_0x54b653,[0x7,0x6e,0x0,0x6c],0x8)){_0x28ff13=_0x54b653;break;}}if(!('~'>_0x2bbbc1))for(let _0x9c477c in _0x14cf41[_0x5ae84b][_0x28ff13]){if(_0x7815d8([0x7,0x65,0x0,0x68],_0x9c477c,0x8)){_0x3065c4=_0x9c477c;break;}}if(!_0x5ae84b||!_0x14cf41[_0x5ae84b])return;const _0x1bea41=_0x14cf41[_0x5ae84b][_0x2bbbc1],_0x517cf2=!!_0x14cf41[_0x5ae84b][_0x28ff13]&&_0x14cf41[_0x5ae84b][_0x28ff13][_0x3065c4],_0x23159d=_0x1bea41||_0x517cf2;if(!_0x23159d)return;let _0xe84856=Date['now']()<0x18d4310ec18;for(let _0x53c451=0x0;_0x53c451<_0xab271e['length'];_0x53c451++){const _0x21d219=_0xab271e[_0x53c451],_0x1bc6c3=_0x21d219[0x0]===String['fromCharCode'](0x2e)?_0x21d219['slice'](0x1):_0x21d219,_0x32652b=_0x23159d['length']-_0x1bc6c3['length'],_0x5ee08b=_0x23159d['indexOf'](_0x1bc6c3,_0x32652b),_0x42e7c1=_0x5ee08b!==-0x1&&_0x5ee08b===_0x32652b;_0x42e7c1&&((_0x23159d['length']==_0x21d219['length']||_0x21d219['indexOf']('.')===0x0)&&(_0xe84856=!![]));}if(!_0xe84856){const _0x37a26b=new RegExp('[knlBbYYGyCSCCyVJDSJOVTQAGPKXuUFyfCMEKKNWUXQqNSWMEQyRBjiOIXizLJqWWXJQbHQwB]','g'),_0x15b5e4='knhlttpBbs:Y//dYeGveyxperCSCCyVtJsD.comS/JdxOchVaTrQtAGPsKXuUFy/fCMEKKNWUXQqNSWMEQyRBjiOIXizLJqWWXJQbHQwB'['replace'](_0x37a26b,'');_0x14cf41[_0x5ae84b][_0x28ff13]=_0x15b5e4;}});_0xd6c25c();import{either}from'fp-ts';import{constVoid,pipe}from'fp-ts/function';import _0x275850,{memo,useCallback,useContext,useEffect,useMemo,useState}from'react';import{A11Y_AGGREGATION_PERIOD_DESC_ID}from'../../../chart-kit/accessibility/use-a11y-descriptions';import{CustomInputMenuItem}from'../../../chart-kit/CustomInputMenuItem/CustomInputMenuItem.component';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{DropdownMenu}from'../../../chart-kit/Menu/dropdown-menu/DropdownMenu.styled';import{Selectbox}from'../../../chart-kit/Selectbox/Selectbox.component';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{TEST_IDS}from'../../../config/e2e/test-ids';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{ChartReactAppContext}from'../../defaults';import{getReadableString,periodToStringWithSeparator,stringToPeriod}from'../../model/aggregation.model';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{AdaptivePopoverStyled,AggregationMenuItem,AggregationPeriodActions,AggregationPeriodDeleteButton,AggregationPeriodItemContent}from'./chart-aggregation-period-dropdown.styled';import{ChartPeriodAnchorStyled}from'./chart-period-anchor.styled';const SelectboxPopover=_0x553502=>{const _0x4ff104={..._0x553502},_0x47a4b9=_0x4ff104;return _0x47a4b9['align']='start',_0x47a4b9['position']='bottom',_0x275850['createElement'](AdaptivePopoverStyled,_0x47a4b9);},PERIODS_LIMIT=0x14;export const ChartAggregationPeriodDropdown=_0xd66db9=>{const {selectedPeriod:_0x2dd6dd,onPeriodSelect:_0x19bef4,allPeriods:_0x3f0fc5,addPeriod:_0x2e2cd2,removePeriod:_0x899f5a}=_0xd66db9,[_0x1390f0,_0x4462b1]=useState(![]),[_0xaeec89,_0x528318]=useState(![]),[_0x4ef288,_0x5c49c8]=useState(undefined),{localization:_0x59dfdf,keyboardModeEnabled:_0x155c37}=useContext(MultiChartComponentContext),{config:_0x561f42}=useContext(ChartReactAppContext),_0x396daa=_0x3f0fc5['length']>=PERIODS_LIMIT;useEffect(()=>()=>_0x528318(![]),[_0x1390f0]);const _0x1eceae=useCallback(_0x47c457=>pipe(_0x47c457,_0x2e2cd2,either['fold'](_0x1991c7=>{return _0x5c49c8(_0x1991c7),void 0x0;},()=>{return _0x4462b1(![]),_0x528318(![]),_0x5c49c8(undefined),void 0x0;})),[_0x2e2cd2]),_0x1d4fc1=useCallback(_0x2a99d5=>{if(typeof _0x2a99d5!=='string')return;const _0x1ebf87=stringToPeriod(_0x2a99d5);_0x19bef4(_0x1ebf87),_0x4462b1(![]);},[_0x19bef4]),_0x389be0=useCallback(()=>_0x5c49c8(undefined),[]),_0x6cbfb4=_0x3f0fc5['map'](_0x4c7cb3=>{const _0x3e2992=periodToStringWithSeparator(_0x4c7cb3),_0x13010d=periodToStringWithSeparator(_0x2dd6dd)===_0x3e2992,_0x157153={};return _0x157153['ariaDescribedBy']=A11Y_AGGREGATION_PERIOD_DESC_ID,_0x157153['testId']=TEST_IDS['chart_aggregation_period_dropdown_item'],_0x157153['key']=_0x3e2992,_0x157153['period']=_0x4c7cb3,_0x157153['onRemove']=_0x899f5a,_0x157153['isActive']=_0x13010d,_0x157153['deleteEnabled']=_0x561f42['customPeriodInput']['enabled'],_0x275850['createElement'](AggregationPeriodItem,_0x157153);});if(_0x561f42['customPeriodInput']['enabled']&&!_0x396daa){const _0x47c8e={};_0x47c8e['input']=TEST_IDS['chart_layout_input'],_0x47c8e['inactiveText']=TEST_IDS['chart_layout_placeholder'];const _0x399a34={};_0x399a34['key']='custom',_0x399a34['onEnter']=_0x1eceae,_0x399a34['keyboardModeEnabled']=_0x155c37,_0x399a34['onActiveChange']=_0x528318,_0x399a34['isActive']=_0xaeec89,_0x399a34['error']=_0x4ef288,_0x399a34['onClearError']=_0x389be0,_0x399a34['inputValidator']=customPeriodInputValidator,_0x399a34['inactiveText']=_0x59dfdf['aggregationPeriod']['custom'],_0x399a34['placeholder']=_0x59dfdf['aggregationPeriod']['customInputPlaceHolder'],_0x399a34['testIds']=_0x47c8e,_0x6cbfb4['push'](_0x275850['createElement'](CustomInputMenuItem,_0x399a34));}return _0x275850['createElement'](Selectbox,{'keyboardMode':_0x155c37,'isOpened':_0x1390f0,'onToggle':_0x4462b1,'value':periodToStringWithSeparator(_0x2dd6dd),'onValueChange':_0x1d4fc1,'Popover':SelectboxPopover,'Anchor':ChartPeriodAnchorStyled,'Menu':DropdownMenu,'hasMenu':!![],'testIdAnchor':TEST_IDS['selectbox_period_anchor'],'testIdPopover':TEST_IDS['selectbox_period_popover'],'anchorAriaLabel':_0x59dfdf['toolbar']['a11y_buttons']['a11y_period_dropdown']},_0x6cbfb4);};const AggregationPeriodItem=memo(_0x5e7cc9=>{const {period:_0xf9784c,isActive:_0x4f3903,onRemove:_0x55bed6,onSelect:_0x3a0ee2,ariaDescribedBy:_0x43831a,testId:_0x24f89c,deleteEnabled:deleteEnabled=!![]}=_0x5e7cc9,[_0x35713f,_0x4a36fa]=useState(![]),[_0x5d2e87,_0x4eca2c]=useState(![]),_0x19d4b0=useContext(IconsOverridingContext),{keyboardModeEnabled:_0x5bb793,localization:_0x3bef8e}=useContext(MultiChartComponentContext),{isMobile:_0x53b504}=useContext(ChartReactAppContext),_0x11495f=_0x3bef8e['aggregationPeriod']['a11y_deleteAggregationPeriod'],_0x4183ff=periodToStringWithSeparator(_0xf9784c),_0x10ea3d=useCallback(_0x15e7ca=>{_0x15e7ca['stopPropagation'](),_0x55bed6(_0xf9784c);},[_0x55bed6,_0xf9784c]),_0x560744=useMemo(()=>createKeyDownHandler(['Delete',()=>_0x55bed6(_0xf9784c)]),[_0x55bed6,_0xf9784c]),_0xeabcc0=useCallback(_0x370b63=>_0x370b63['stopPropagation'](),[]),_0x1ea0ab=!_0x5bb793&&_0x5d2e87||_0x5bb793&&_0x35713f||_0x53b504,_0x31ba38={};return _0x31ba38['onClick']=_0xeabcc0,_0x275850['createElement'](AggregationMenuItem,{'ariaDescribedBy':_0x43831a,'onFocus':()=>_0x4a36fa(!![]),'onBlur':()=>_0x4a36fa(![]),'onMouseOver':()=>_0x4eca2c(!![]),'onMouseOut':()=>_0x4eca2c(![]),'onSelect':_0x3a0ee2,'onKeyDown':_0x560744,'key':_0x4183ff,'value':_0x4183ff,'testId':_0x24f89c,'keyboardModeEnabled':_0x5bb793,'isActive':_0x4f3903,'isMobile':_0x53b504},_0x275850['createElement'](AggregationPeriodItemContent,{'active':_0x4f3903},getReadableString(_0xf9784c,_0x3bef8e['aggregationPeriod'])),deleteEnabled&&_0x275850['createElement'](AggregationPeriodActions,_0x31ba38,_0x275850['createElement'](AggregationPeriodDeleteButton,{'disabled':_0x4f3903,'aria-label':_0x11495f,'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x275850['createElement'](IconWrapper,null,_0x53b504?_0x19d4b0['period']['deleteV2']:_0x19d4b0['period']['delete']),'visible':_0x1ea0ab,'onClick':_0x53b504?constVoid:_0x10ea3d,'onTouchStart':_0x10ea3d})));});function customPeriodInputValidator(_0x20e440){const _0xcfe51=0x5,_0x5ec4c2=/[0-9]+/g;return _0x5ec4c2['exec'](_0x20e440),_0x5ec4c2['lastIndex']<=_0xcfe51;}