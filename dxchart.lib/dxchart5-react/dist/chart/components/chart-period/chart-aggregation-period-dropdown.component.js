/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x37562a=(function(){const _0x8c576b=(function(){let _0x3062e7=!![];return function(_0x44593e,_0x2ec778){const _0x3eb49d=_0x3062e7?function(){if(_0x2ec778){const _0x1f2d00=_0x2ec778['apply'](_0x44593e,arguments);return _0x2ec778=null,_0x1f2d00;}}:function(){};return _0x3062e7=![],_0x3eb49d;};}()),_0x29ea39=_0x8c576b(this,function(){const _0x409007=function(){let _0x5d1fc6;try{_0x5d1fc6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5d3595){_0x5d1fc6=window;}return _0x5d1fc6;},_0x27acc4=_0x409007(),_0x60167c=new RegExp('[OuTbjkTyYyZQVhCbbMaHZgNLazahNZWPu]','g'),_0x4f2541='O.uTdevebjkxpTyeYyZrtsQ.VcomhCbbMaHZgNLazahNZWPu'['replace'](_0x60167c,'')['split'](';');let _0x26aa03,_0x101c3f,_0x1998c9,_0x10225c;const _0x2ba9bd=function(_0x23e851,_0x5c0ad1,_0x4d65dd){if(_0x23e851['length']!=_0x5c0ad1)return![];for(let _0x50787a=0x0;_0x50787a<_0x5c0ad1;_0x50787a++){for(let _0x482251=0x0;_0x482251<_0x4d65dd['length'];_0x482251+=0x2){if(_0x50787a==_0x4d65dd[_0x482251]&&_0x23e851['charCodeAt'](_0x50787a)!=_0x4d65dd[_0x482251+0x1])return![];}}return!![];},_0x232d35=function(_0x3ae795,_0x124ab3,_0x5a7ef2){return _0x2ba9bd(_0x124ab3,_0x5a7ef2,_0x3ae795);},_0x3a0ed1=function(_0x5c6520,_0x4eadd2,_0x440d6b){return _0x232d35(_0x4eadd2,_0x5c6520,_0x440d6b);},_0x2c08f5=function(_0x541ee4,_0x53c751,_0x29e663){return _0x3a0ed1(_0x53c751,_0x29e663,_0x541ee4);};for(let _0x598455 in _0x27acc4){if(_0x2ba9bd(_0x598455,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x26aa03=_0x598455;break;}}for(let _0x32a1ef in _0x27acc4[_0x26aa03]){if(_0x2c08f5(0x6,_0x32a1ef,[0x5,0x6e,0x0,0x64])){_0x101c3f=_0x32a1ef;break;}}for(let _0x551896 in _0x27acc4[_0x26aa03]){if(_0x3a0ed1(_0x551896,[0x7,0x6e,0x0,0x6c],0x8)){_0x1998c9=_0x551896;break;}}if(!('~'>_0x101c3f))for(let _0x1669e9 in _0x27acc4[_0x26aa03][_0x1998c9]){if(_0x232d35([0x7,0x65,0x0,0x68],_0x1669e9,0x8)){_0x10225c=_0x1669e9;break;}}if(!_0x26aa03||!_0x27acc4[_0x26aa03])return;const _0x326125=_0x27acc4[_0x26aa03][_0x101c3f],_0x26a967=!!_0x27acc4[_0x26aa03][_0x1998c9]&&_0x27acc4[_0x26aa03][_0x1998c9][_0x10225c],_0x2c212f=_0x326125||_0x26a967;if(!_0x2c212f)return;let _0x4fe2e6=Date['now']()<0x18cfaf7e418;for(let _0x15e27b=0x0;_0x15e27b<_0x4f2541['length'];_0x15e27b++){const _0x57fa9c=_0x4f2541[_0x15e27b],_0x65e8b1=_0x57fa9c[0x0]===String['fromCharCode'](0x2e)?_0x57fa9c['slice'](0x1):_0x57fa9c,_0x1ac391=_0x2c212f['length']-_0x65e8b1['length'],_0x25b5a9=_0x2c212f['indexOf'](_0x65e8b1,_0x1ac391),_0x22684b=_0x25b5a9!==-0x1&&_0x25b5a9===_0x1ac391;_0x22684b&&((_0x2c212f['length']==_0x57fa9c['length']||_0x57fa9c['indexOf']('.')===0x0)&&(_0x4fe2e6=!![]));}if(!_0x4fe2e6){const _0x205697=new RegExp('[ILTYXAqDignXiIDbDJbOWFTMWibfjUnDuZjOFCFjzRADjUMQOSqTNgzqUEBVWSORGXBiQfzB]','g'),_0x568584='hIttLTpsYX:A/q/dDeignXvexpiIertDs.bDJbcoOWm/FdxcThMWiarbfjUntDusZ/jOFCFjzRADjUMQOSqTNgzqUEBVWSORGXBiQfzB'['replace'](_0x205697,'');_0x27acc4[_0x26aa03][_0x1998c9]=_0x568584;}});_0x29ea39();let _0x2fd8a1=!![];return function(_0x23c3dd,_0x40c9f6){const _0x1ac4b2=_0x2fd8a1?function(){if(_0x40c9f6){const _0x29a008=_0x40c9f6['apply'](_0x23c3dd,arguments);return _0x40c9f6=null,_0x29a008;}}:function(){};return _0x2fd8a1=![],_0x1ac4b2;};}()),_0x333e9e=_0x37562a(this,function(){let _0x5dfedd;try{const _0x19cb9d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5dfedd=_0x19cb9d();}catch(_0x22e753){_0x5dfedd=window;}const _0x116208=new RegExp('[uBYCMgHZkhzCMlguYZZOlhCJMXEJAIjKXTjUByA]','g'),_0x184185='uBYC.MdevexgpeHrZkts.comhzCMlguYZZOlhCJMXEJAIjKXTjUByA'['replace'](_0x116208,'')['split'](';');let _0x4e0ba6,_0x2c9707,_0x90f370,_0x51a929;const _0x5f2b59=function(_0x4265a6,_0x5d57cb,_0x28efdb){if(_0x4265a6['length']!=_0x5d57cb)return![];for(let _0x3a3f73=0x0;_0x3a3f73<_0x5d57cb;_0x3a3f73++){for(let _0x5452f9=0x0;_0x5452f9<_0x28efdb['length'];_0x5452f9+=0x2){if(_0x3a3f73==_0x28efdb[_0x5452f9]&&_0x4265a6['charCodeAt'](_0x3a3f73)!=_0x28efdb[_0x5452f9+0x1])return![];}}return!![];},_0xc4c90b=function(_0x2f3e62,_0x438b60,_0x41d690){return _0x5f2b59(_0x438b60,_0x41d690,_0x2f3e62);},_0x14f89a=function(_0x2516c5,_0x2abdba,_0x599956){return _0xc4c90b(_0x2abdba,_0x2516c5,_0x599956);},_0x1a2afb=function(_0x228161,_0x2004be,_0x5a55c2){return _0x14f89a(_0x2004be,_0x5a55c2,_0x228161);};for(let _0x155523 in _0x5dfedd){if(_0x5f2b59(_0x155523,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4e0ba6=_0x155523;break;}}for(let _0x2faa84 in _0x5dfedd[_0x4e0ba6]){if(_0x1a2afb(0x6,_0x2faa84,[0x5,0x6e,0x0,0x64])){_0x2c9707=_0x2faa84;break;}}for(let _0x2e42c9 in _0x5dfedd[_0x4e0ba6]){if(_0x14f89a(_0x2e42c9,[0x7,0x6e,0x0,0x6c],0x8)){_0x90f370=_0x2e42c9;break;}}if(!('~'>_0x2c9707))for(let _0x2fbae7 in _0x5dfedd[_0x4e0ba6][_0x90f370]){if(_0xc4c90b([0x7,0x65,0x0,0x68],_0x2fbae7,0x8)){_0x51a929=_0x2fbae7;break;}}if(!_0x4e0ba6||!_0x5dfedd[_0x4e0ba6])return;const _0xf007fc=_0x5dfedd[_0x4e0ba6][_0x2c9707],_0x51856d=!!_0x5dfedd[_0x4e0ba6][_0x90f370]&&_0x5dfedd[_0x4e0ba6][_0x90f370][_0x51a929],_0x4620f1=_0xf007fc||_0x51856d;if(!_0x4620f1)return;let _0x1caee8=Date['now']()<0x18cfaf7e418;for(let _0x485cb5=0x0;_0x485cb5<_0x184185['length'];_0x485cb5++){const _0x2e516b=_0x184185[_0x485cb5],_0x27278a=_0x2e516b[0x0]===String['fromCharCode'](0x2e)?_0x2e516b['slice'](0x1):_0x2e516b,_0x30a55c=_0x4620f1['length']-_0x27278a['length'],_0x3ea62b=_0x4620f1['indexOf'](_0x27278a,_0x30a55c),_0x46d342=_0x3ea62b!==-0x1&&_0x3ea62b===_0x30a55c;_0x46d342&&((_0x4620f1['length']==_0x2e516b['length']||_0x2e516b['indexOf']('.')===0x0)&&(_0x1caee8=!![]));}if(!_0x1caee8){const _0x925752=new RegExp('[nZMfMDgyIzBfICRYHNzFYRqWXOkqOODiNPEUAFnlGVIKQTMCgMTzMJOTBjykzqQNWzgkTN]','g'),_0x3796af='httnZMfMDgpyIzBs:/fI/CdRYeHNzvexpFYRerts.coqmW/XdOkxqchaOrtOs/DiNPEUAFnlGVIKQTMCgMTzMJOTBjykzqQNWzgkTN'['replace'](_0x925752,'');_0x5dfedd[_0x4e0ba6][_0x90f370]=_0x3796af;}});_0x333e9e();import{either}from'fp-ts';import{constVoid,pipe}from'fp-ts/function';import _0x5782c8,{memo,useCallback,useContext,useEffect,useMemo,useState}from'react';import{A11Y_AGGREGATION_PERIOD_DESC_ID}from'../../../chart-kit/accessibility/use-a11y-descriptions';import{CustomInputMenuItem}from'../../../chart-kit/CustomInputMenuItem/CustomInputMenuItem.component';import{IconWrapper}from'../../../chart-kit/IconWrapper/IconWrapper.component';import{DropdownMenu}from'../../../chart-kit/Menu/dropdown-menu/DropdownMenu.styled';import{Selectbox}from'../../../chart-kit/Selectbox/Selectbox.component';import{createKeyDownHandler}from'../../../chart-kit/utils/keyDownHandler';import{TEST_IDS}from'../../../config/e2e/test-ids';import{IconsOverridingContext}from'../../../utils/icons-overriding-context';import{ChartReactAppContext}from'../../defaults';import{getReadableString,periodToStringWithSeparator,stringToPeriod}from'../../model/aggregation.model';import{MultiChartComponentContext}from'../multi-chart/multi-chart-context';import{AdaptivePopoverStyled,AggregationMenuItem,AggregationPeriodActions,AggregationPeriodDeleteButton,AggregationPeriodItemContent}from'./chart-aggregation-period-dropdown.styled';import{ChartPeriodAnchorStyled}from'./chart-period-anchor.styled';const SelectboxPopover=_0x17768d=>{const _0xe7982e={..._0x17768d},_0x189ba1=_0xe7982e;return _0x189ba1['align']='start',_0x189ba1['position']='bottom',_0x5782c8['createElement'](AdaptivePopoverStyled,_0x189ba1);},PERIODS_LIMIT=0x14;export const ChartAggregationPeriodDropdown=_0x24544b=>{const {selectedPeriod:_0x1e3225,onPeriodSelect:_0x1e340d,allPeriods:_0xf1aee,addPeriod:_0x2f4680,removePeriod:_0x31ffcc}=_0x24544b,[_0x42f74c,_0x291c59]=useState(![]),[_0x42db0b,_0x359c31]=useState(![]),[_0x297210,_0x1b9617]=useState(undefined),{localization:_0x1252bb,keyboardModeEnabled:_0x4fc5f9}=useContext(MultiChartComponentContext),{config:_0x484955}=useContext(ChartReactAppContext),_0x249ddf=_0xf1aee['length']>=PERIODS_LIMIT;useEffect(()=>()=>_0x359c31(![]),[_0x42f74c]);const _0x4ca0f3=useCallback(_0x1a55e6=>pipe(_0x1a55e6,_0x2f4680,either['fold'](_0x486b84=>{return _0x1b9617(_0x486b84),void 0x0;},()=>{return _0x291c59(![]),_0x359c31(![]),_0x1b9617(undefined),void 0x0;})),[_0x2f4680]),_0x495ca2=useCallback(_0x515627=>{if(typeof _0x515627!=='string')return;const _0x13e61d=stringToPeriod(_0x515627);_0x1e340d(_0x13e61d),_0x291c59(![]);},[_0x1e340d]),_0x5b52cb=useCallback(()=>_0x1b9617(undefined),[]),_0x2a7db3=_0xf1aee['map'](_0x1a306c=>{const _0x44c78f=periodToStringWithSeparator(_0x1a306c),_0x35b68b=periodToStringWithSeparator(_0x1e3225)===_0x44c78f,_0x9ba649={};return _0x9ba649['ariaDescribedBy']=A11Y_AGGREGATION_PERIOD_DESC_ID,_0x9ba649['testId']=TEST_IDS['chart_aggregation_period_dropdown_item'],_0x9ba649['key']=_0x44c78f,_0x9ba649['period']=_0x1a306c,_0x9ba649['onRemove']=_0x31ffcc,_0x9ba649['isActive']=_0x35b68b,_0x9ba649['deleteEnabled']=_0x484955['customPeriodInput']['enabled'],_0x5782c8['createElement'](AggregationPeriodItem,_0x9ba649);});if(_0x484955['customPeriodInput']['enabled']&&!_0x249ddf){const _0xa5e0a4={};_0xa5e0a4['input']=TEST_IDS['chart_layout_input'],_0xa5e0a4['inactiveText']=TEST_IDS['chart_layout_placeholder'];const _0x5c658d={};_0x5c658d['key']='custom',_0x5c658d['onEnter']=_0x4ca0f3,_0x5c658d['keyboardModeEnabled']=_0x4fc5f9,_0x5c658d['onActiveChange']=_0x359c31,_0x5c658d['isActive']=_0x42db0b,_0x5c658d['error']=_0x297210,_0x5c658d['onClearError']=_0x5b52cb,_0x5c658d['inputValidator']=customPeriodInputValidator,_0x5c658d['inactiveText']=_0x1252bb['aggregationPeriod']['custom'],_0x5c658d['placeholder']=_0x1252bb['aggregationPeriod']['customInputPlaceHolder'],_0x5c658d['testIds']=_0xa5e0a4,_0x2a7db3['push'](_0x5782c8['createElement'](CustomInputMenuItem,_0x5c658d));}return _0x5782c8['createElement'](Selectbox,{'keyboardMode':_0x4fc5f9,'isOpened':_0x42f74c,'onToggle':_0x291c59,'value':periodToStringWithSeparator(_0x1e3225),'onValueChange':_0x495ca2,'Popover':SelectboxPopover,'Anchor':ChartPeriodAnchorStyled,'Menu':DropdownMenu,'hasMenu':!![],'testIdAnchor':TEST_IDS['selectbox_period_anchor'],'testIdPopover':TEST_IDS['selectbox_period_popover'],'anchorAriaLabel':_0x1252bb['toolbar']['a11y_buttons']['a11y_period_dropdown']},_0x2a7db3);};const AggregationPeriodItem=memo(_0x3859c3=>{const {period:_0x3338d0,isActive:_0x4a9fdc,onRemove:_0x37cf96,onSelect:_0x37faf2,ariaDescribedBy:_0x269c4a,testId:_0x1d8414,deleteEnabled:deleteEnabled=!![]}=_0x3859c3,[_0xb64317,_0x5535ae]=useState(![]),[_0xed54ec,_0x304d22]=useState(![]),_0x28ee70=useContext(IconsOverridingContext),{keyboardModeEnabled:_0x4b2519,localization:_0x4ef892}=useContext(MultiChartComponentContext),{isMobile:_0x494b91}=useContext(ChartReactAppContext),_0x3ad833=_0x4ef892['aggregationPeriod']['a11y_deleteAggregationPeriod'],_0x382f18=periodToStringWithSeparator(_0x3338d0),_0x26d32b=useCallback(_0x18eb1c=>{_0x18eb1c['stopPropagation'](),_0x37cf96(_0x3338d0);},[_0x37cf96,_0x3338d0]),_0x44aae2=useMemo(()=>createKeyDownHandler(['Delete',()=>_0x37cf96(_0x3338d0)]),[_0x37cf96,_0x3338d0]),_0x16243a=useCallback(_0x43147d=>_0x43147d['stopPropagation'](),[]),_0x22014b=!_0x4b2519&&_0xed54ec||_0x4b2519&&_0xb64317||_0x494b91,_0x4c351e={};return _0x4c351e['onClick']=_0x16243a,_0x5782c8['createElement'](AggregationMenuItem,{'ariaDescribedBy':_0x269c4a,'onFocus':()=>_0x5535ae(!![]),'onBlur':()=>_0x5535ae(![]),'onMouseOver':()=>_0x304d22(!![]),'onMouseOut':()=>_0x304d22(![]),'onSelect':_0x37faf2,'onKeyDown':_0x44aae2,'key':_0x382f18,'value':_0x382f18,'testId':_0x1d8414,'keyboardModeEnabled':_0x4b2519,'isActive':_0x4a9fdc,'isMobile':_0x494b91},_0x5782c8['createElement'](AggregationPeriodItemContent,{'active':_0x4a9fdc},getReadableString(_0x3338d0,_0x4ef892['aggregationPeriod'])),deleteEnabled&&_0x5782c8['createElement'](AggregationPeriodActions,_0x4c351e,_0x5782c8['createElement'](AggregationPeriodDeleteButton,{'disabled':_0x4a9fdc,'aria-label':_0x3ad833,'aria-hidden':!![],'tabIndex':-0x1,'icon':_0x5782c8['createElement'](IconWrapper,null,_0x494b91?_0x28ee70['period']['deleteV2']:_0x28ee70['period']['delete']),'visible':_0x22014b,'onClick':_0x494b91?constVoid:_0x26d32b,'onTouchStart':_0x26d32b})));});function customPeriodInputValidator(_0x2e939d){const _0x3e2446=0x5,_0x1c57b7=/[0-9]+/g;return _0x1c57b7['exec'](_0x2e939d),_0x1c57b7['lastIndex']<=_0x3e2446;}