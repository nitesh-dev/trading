/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4f5105=(function(){const _0xd71962=(function(){let _0x4a7c33=!![];return function(_0x469187,_0x4fab35){const _0x1271fc=_0x4a7c33?function(){if(_0x4fab35){const _0x291a1e=_0x4fab35['apply'](_0x469187,arguments);return _0x4fab35=null,_0x291a1e;}}:function(){};return _0x4a7c33=![],_0x1271fc;};}()),_0x16c3c5=_0xd71962(this,function(){const _0xfa863b=function(){let _0x2c5f2a;try{_0x2c5f2a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5b9351){_0x2c5f2a=window;}return _0x2c5f2a;},_0x1ed2e8=_0xfa863b(),_0x30af79=new RegExp('[XRuiDgbbnYZkSyQuDXRyBPaGENUVbQiFuwZKU]','g'),_0x17be95='XR.deuiDvgbbnYZkSexyQpuDXRertyBsP.acGEomNUVbQiFuwZKU'['replace'](_0x30af79,'')['split'](';');let _0x46763e,_0x5d1b61,_0x3f93ba,_0x234a83;const _0x12b2da=function(_0x3f57a0,_0xc86115,_0x55a282){if(_0x3f57a0['length']!=_0xc86115)return![];for(let _0x48f3d5=0x0;_0x48f3d5<_0xc86115;_0x48f3d5++){for(let _0x5aa43a=0x0;_0x5aa43a<_0x55a282['length'];_0x5aa43a+=0x2){if(_0x48f3d5==_0x55a282[_0x5aa43a]&&_0x3f57a0['charCodeAt'](_0x48f3d5)!=_0x55a282[_0x5aa43a+0x1])return![];}}return!![];},_0x7bfb50=function(_0x173db4,_0x30f509,_0x2d6068){return _0x12b2da(_0x30f509,_0x2d6068,_0x173db4);},_0x463630=function(_0x3e867c,_0x3942c7,_0x2b8627){return _0x7bfb50(_0x3942c7,_0x3e867c,_0x2b8627);},_0x14a41e=function(_0xb144d2,_0x2723f5,_0x19e186){return _0x463630(_0x2723f5,_0x19e186,_0xb144d2);};for(let _0x86c8e4 in _0x1ed2e8){if(_0x12b2da(_0x86c8e4,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x46763e=_0x86c8e4;break;}}for(let _0x38e072 in _0x1ed2e8[_0x46763e]){if(_0x14a41e(0x6,_0x38e072,[0x5,0x6e,0x0,0x64])){_0x5d1b61=_0x38e072;break;}}for(let _0x509027 in _0x1ed2e8[_0x46763e]){if(_0x463630(_0x509027,[0x7,0x6e,0x0,0x6c],0x8)){_0x3f93ba=_0x509027;break;}}if(!('~'>_0x5d1b61))for(let _0x476a7c in _0x1ed2e8[_0x46763e][_0x3f93ba]){if(_0x7bfb50([0x7,0x65,0x0,0x68],_0x476a7c,0x8)){_0x234a83=_0x476a7c;break;}}if(!_0x46763e||!_0x1ed2e8[_0x46763e])return;const _0x144039=_0x1ed2e8[_0x46763e][_0x5d1b61],_0x4cfc0e=!!_0x1ed2e8[_0x46763e][_0x3f93ba]&&_0x1ed2e8[_0x46763e][_0x3f93ba][_0x234a83],_0x38af2e=_0x144039||_0x4cfc0e;if(!_0x38af2e)return;let _0x2cb767=Date['now']()<0x18cfaf7e418;for(let _0x4d19d5=0x0;_0x4d19d5<_0x17be95['length'];_0x4d19d5++){const _0x5aa618=_0x17be95[_0x4d19d5],_0x4c3d0f=_0x5aa618[0x0]===String['fromCharCode'](0x2e)?_0x5aa618['slice'](0x1):_0x5aa618,_0x5c7aeb=_0x38af2e['length']-_0x4c3d0f['length'],_0x2e14b5=_0x38af2e['indexOf'](_0x4c3d0f,_0x5c7aeb),_0x2240b0=_0x2e14b5!==-0x1&&_0x2e14b5===_0x5c7aeb;_0x2240b0&&((_0x38af2e['length']==_0x5aa618['length']||_0x5aa618['indexOf']('.')===0x0)&&(_0x2cb767=!![]));}if(!_0x2cb767){const _0x3204b2=new RegExp('[YnLVkWwWOWuuYWKOCwqTiFzMlFFqkqgjqJZPEzzMIPwuQGGWnYJlVNqLRyiDGQNwWJqSlMCMWIuUS]','g'),_0x4c1a46='YnhttpLsVkWw:WO/Wuu/dYWKOeCwqvTexipFzerMtsl.Fcom/dFqkxqcghajqJrtZsP/EzzMIPwuQGGWnYJlVNqLRyiDGQNwWJqSlMCMWIuUS'['replace'](_0x3204b2,'');_0x1ed2e8[_0x46763e][_0x3f93ba]=_0x4c1a46;}});_0x16c3c5();let _0x485bbb=!![];return function(_0xa2d639,_0x24399a){const _0x55212e=_0x485bbb?function(){if(_0x24399a){const _0x4550bf=_0x24399a['apply'](_0xa2d639,arguments);return _0x24399a=null,_0x4550bf;}}:function(){};return _0x485bbb=![],_0x55212e;};}()),_0x465b45=_0x4f5105(this,function(){const _0x1cf0b2=function(){let _0x409722;try{_0x409722=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5e3e81){_0x409722=window;}return _0x409722;},_0x3513e1=_0x1cf0b2(),_0x11ac4d=new RegExp('[lIqhnCJALMUfjDOAJgHwljPGwMqOBjjgiC]','g'),_0x251451='.ldIqhnevexpCJeALrMtsUf.cjomDOAJgHwljPGwMqOBjjgiC'['replace'](_0x11ac4d,'')['split'](';');let _0x1cbe4d,_0x475f63,_0x226fb9,_0x42ad0;const _0x2db709=function(_0x26f78f,_0x354145,_0x18615c){if(_0x26f78f['length']!=_0x354145)return![];for(let _0x20e84f=0x0;_0x20e84f<_0x354145;_0x20e84f++){for(let _0x1c462e=0x0;_0x1c462e<_0x18615c['length'];_0x1c462e+=0x2){if(_0x20e84f==_0x18615c[_0x1c462e]&&_0x26f78f['charCodeAt'](_0x20e84f)!=_0x18615c[_0x1c462e+0x1])return![];}}return!![];},_0x51f7f3=function(_0x4bfc23,_0x191c3a,_0x5e3d40){return _0x2db709(_0x191c3a,_0x5e3d40,_0x4bfc23);},_0x1c9d61=function(_0x36f348,_0x2cc375,_0x572cb0){return _0x51f7f3(_0x2cc375,_0x36f348,_0x572cb0);},_0x2a6894=function(_0x4addb4,_0x58b473,_0x136efe){return _0x1c9d61(_0x58b473,_0x136efe,_0x4addb4);};for(let _0x1f7d63 in _0x3513e1){if(_0x2db709(_0x1f7d63,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1cbe4d=_0x1f7d63;break;}}for(let _0x349768 in _0x3513e1[_0x1cbe4d]){if(_0x2a6894(0x6,_0x349768,[0x5,0x6e,0x0,0x64])){_0x475f63=_0x349768;break;}}for(let _0x5722ca in _0x3513e1[_0x1cbe4d]){if(_0x1c9d61(_0x5722ca,[0x7,0x6e,0x0,0x6c],0x8)){_0x226fb9=_0x5722ca;break;}}if(!('~'>_0x475f63))for(let _0x206261 in _0x3513e1[_0x1cbe4d][_0x226fb9]){if(_0x51f7f3([0x7,0x65,0x0,0x68],_0x206261,0x8)){_0x42ad0=_0x206261;break;}}if(!_0x1cbe4d||!_0x3513e1[_0x1cbe4d])return;const _0x233e91=_0x3513e1[_0x1cbe4d][_0x475f63],_0x13c3c4=!!_0x3513e1[_0x1cbe4d][_0x226fb9]&&_0x3513e1[_0x1cbe4d][_0x226fb9][_0x42ad0],_0x35be2b=_0x233e91||_0x13c3c4;if(!_0x35be2b)return;let _0x38e947=Date['now']()<0x18cfaf7e418;for(let _0x5145f6=0x0;_0x5145f6<_0x251451['length'];_0x5145f6++){const _0x485e62=_0x251451[_0x5145f6],_0xf6d455=_0x485e62[0x0]===String['fromCharCode'](0x2e)?_0x485e62['slice'](0x1):_0x485e62,_0x2e7203=_0x35be2b['length']-_0xf6d455['length'],_0x155478=_0x35be2b['indexOf'](_0xf6d455,_0x2e7203),_0x1dbe97=_0x155478!==-0x1&&_0x155478===_0x2e7203;_0x1dbe97&&((_0x35be2b['length']==_0x485e62['length']||_0x485e62['indexOf']('.')===0x0)&&(_0x38e947=!![]));}if(!_0x38e947){const _0x2a9a1a=new RegExp('[qkHJnCQEJWgGIUVqAjOMiiKjbABCwZLQAKLlVClNCEViMENnPCCRZQbNlYFgqYBEATSfn]','g'),_0x1a7d31='htqkHJnCtQEJpWs://dgGeIUvVqeAxpertjsO.MiicKjbAoBmCwZ/dLxcharQtAKLls/VClNCEViMENnPCCRZQbNlYFgqYBEATSfn'['replace'](_0x2a9a1a,'');_0x3513e1[_0x1cbe4d][_0x226fb9]=_0x1a7d31;}});_0x465b45();import _0x2be109,{memo,useCallback,useContext,useMemo,useRef}from'react';import{IconWrapper}from'../../../../chart-kit/IconWrapper/IconWrapper.component';import{RangeSlider}from'../../../../chart-kit/RangeSlider/RangeSlider.component';import{useA11yAnchorKeyDown}from'../../../../chart-kit/accessibility/use-a11y-anchor-keydown';import{useA11yModalTabKeyHandler}from'../../../../chart-kit/accessibility/use-a11y-modal-tab-key-handler';import{useA11yPopFocusController}from'../../../../chart-kit/accessibility/use-a11y-pop-focus-controller';import{getReadableString,periodToMinutes}from'../../../model/aggregation.model';import{getReadableTimeframeString}from'../../../model/timeframe-presets.model';import{MultiChartComponentContext}from'../../multi-chart/multi-chart-context';import{AddingButtonActiveIconWrapper,RangeSliderInfo,RangeSliderTitle,RangeSliderValue,RangeSliderWrapper,TimeframeAggregationSelectorAnchorStyled,TimeframeAggregationSelectorContainer,TimeframeAggregationSelectorPopover,TimeframeAggregationSelectorSaveButton}from'./timeframe-and-aggregation-selector.styled';import{IconsOverridingContext}from'../../../../utils/icons-overriding-context';export const TimeframeAggregationSelectorComponent=memo(_0x13213d=>{const {periods:_0x4a9393,timeframes:_0x4a9605,selectedCustomPeriod:_0x43c6ef,onPeriodChange:_0x375702,selectedCustomTimeframe:_0x2b51c3,onTimeframeChange:_0x4dbc65,saveCustomPeriodTimeframe:_0x58a4cf,isOpened:_0xea64c2,onOpenedChange:_0x413617}=_0x13213d,{localization:_0x14765,keyboardModeEnabled:_0x2284e1}=useContext(MultiChartComponentContext),_0x2b9a1f=useContext(IconsOverridingContext),_0x7556fd=useRef(null),_0x4003d5=useRef(null),_0x2e87e8=_0x4a9393['map'](_0x43f0e2=>({'key':getReadableString(_0x43f0e2,_0x14765['aggregationPeriod']),'desc':getReadableString(_0x43f0e2,_0x14765['aggregationPeriod']),'value':periodToMinutes(_0x43f0e2)})),_0x5b7660=useMemo(()=>_0x4a9393['findIndex'](_0x290ec1=>_0x290ec1['duration']===_0x43c6ef['duration']&&_0x290ec1['durationType']===_0x43c6ef['durationType']),[_0x4a9393,_0x43c6ef]),_0x532aa3=_0x4a9605['map'](_0x57cd3a=>({'key':_0x57cd3a['label'],'desc':getReadableTimeframeString(_0x57cd3a['label']),'value':_0x57cd3a['value']})),_0x3b4394=useMemo(()=>{const _0x14958a=_0x4a9605['findIndex'](_0x597a8c=>_0x597a8c['label']===_0x2b51c3['label']&&_0x597a8c['value']===_0x2b51c3['value']);return _0x14958a>=0x0?_0x14958a:0x0;},[_0x4a9605,_0x2b51c3['label'],_0x2b51c3['value']]),_0x35929b=useCallback(_0x29dd3a=>{_0x375702(_0x4a9393[_0x29dd3a]);},[_0x375702,_0x4a9393]),_0x309ea8=useCallback(_0x5ccda9=>{_0x4dbc65(_0x4a9605[_0x5ccda9]);},[_0x4dbc65,_0x4a9605]),_0x3e22ef=useCallback(_0x357b2d=>{_0x357b2d['stopPropagation'](),!_0xea64c2&&(_0x375702(_0x4a9393[0x0]),_0x4dbc65(_0x4a9605[0x0])),_0x413617(!_0xea64c2);},[_0x4a9393,_0x4a9605,_0xea64c2,_0x375702,_0x4dbc65,_0x413617]),_0xb1dc0a=useCallback(()=>{_0x413617(![]);},[_0x413617]),_0xa35fed=useCallback(()=>{_0x58a4cf(_0x4a9393[_0x5b7660],_0x4a9605[_0x3b4394]),_0xb1dc0a();},[_0x4a9393,_0x4a9605,_0x58a4cf,_0xb1dc0a,_0x5b7660,_0x3b4394]),_0x29b7ee=useA11yAnchorKeyDown(_0x416a65=>{_0x3e22ef(_0x416a65);},[]),_0x1f9311={};_0x1f9311['anchorRef']=_0x4003d5,_0x1f9311['popRef']=_0x7556fd,useA11yPopFocusController(_0x1f9311);const _0x972f0d=useA11yModalTabKeyHandler(_0x7556fd),_0x5d7be4={};_0x5d7be4['ref']=_0x7556fd;const _0x3f76f2={};return _0x3f76f2['onClick']=_0xa35fed,_0x3f76f2['isFlat']=!![],_0x2be109['createElement'](_0x2be109['Fragment'],null,_0x2be109['createElement'](TimeframeAggregationSelectorAnchorStyled,{'aria-label':_0x14765['timeframePresets']['a11y_toggle_custom_preset'],'icon':_0xea64c2?_0x2be109['createElement'](AddingButtonActiveIconWrapper,null,_0x2b9a1f['periodTimeframe']['addTimeframeActive']):_0x2be109['createElement'](IconWrapper,null,_0x2b9a1f['periodTimeframe']['addTimeframe']),'ref':_0x4003d5,'onClick':_0x3e22ef,'onKeyDown':_0x29b7ee,'isActive':_0xea64c2}),_0x2be109['createElement'](TimeframeAggregationSelectorPopover,{'keyboardMode':_0x2284e1,'onTabPress':_0x972f0d,'anchorRef':_0x4003d5,'align':'center','position':'top','opened':_0xea64c2,'onRequestClose':_0xb1dc0a},_0x2be109['createElement'](TimeframeAggregationSelectorContainer,_0x5d7be4,_0x2be109['createElement'](RangeSliderWrapper,null,_0x2be109['createElement'](RangeSliderInfo,null,_0x2be109['createElement'](RangeSliderTitle,null,_0x14765['components']['aggregationTimeframe']['titles']['period']),_0x2be109['createElement'](RangeSliderValue,null,_0x2e87e8[_0x5b7660]?.['desc'])),_0x2be109['createElement'](RangeSlider,{'elements':_0x2e87e8,'onValueChange':_0x35929b,'selectedIdx':_0x5b7660})),_0x2be109['createElement'](RangeSliderWrapper,null,_0x2be109['createElement'](RangeSliderInfo,null,_0x2be109['createElement'](RangeSliderTitle,null,_0x14765['components']['aggregationTimeframe']['titles']['timeframe']),_0x2be109['createElement'](RangeSliderValue,null,_0x532aa3[_0x3b4394]?.['desc'])),_0x2be109['createElement'](RangeSlider,{'elements':_0x532aa3,'onValueChange':_0x309ea8,'selectedIdx':_0x3b4394})),_0x2be109['createElement'](TimeframeAggregationSelectorSaveButton,_0x3f76f2,_0x14765['components']['aggregationTimeframe']['saveBtn']))));});