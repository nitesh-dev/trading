/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xcb16a9=(function(){const _0x3aaa3c=(function(){let _0x4573bb=!![];return function(_0x558c93,_0x268e8c){const _0x3a141c=_0x4573bb?function(){if(_0x268e8c){const _0x3e08f2=_0x268e8c['apply'](_0x558c93,arguments);return _0x268e8c=null,_0x3e08f2;}}:function(){};return _0x4573bb=![],_0x3a141c;};}()),_0x3b2fb1=_0x3aaa3c(this,function(){const _0x5b448e=function(){let _0x4b0889;try{_0x4b0889=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x13a689){_0x4b0889=window;}return _0x4b0889;},_0x10b453=_0x5b448e(),_0x448884=new RegExp('[HSinfXgNWbSbqEgDwBuHOEnZQTXUgZkP]','g'),_0x55d099='.dHSeinvexfXpgNeWrtsbS.combqEgDwBuHOEnZQTXUgZkP'['replace'](_0x448884,'')['split'](';');let _0x1a7322,_0x135845,_0x4ecb79,_0x39a0f3;const _0x4ea586=function(_0x54e670,_0x1d2d7b,_0x412984){if(_0x54e670['length']!=_0x1d2d7b)return![];for(let _0x24a664=0x0;_0x24a664<_0x1d2d7b;_0x24a664++){for(let _0x4ffae3=0x0;_0x4ffae3<_0x412984['length'];_0x4ffae3+=0x2){if(_0x24a664==_0x412984[_0x4ffae3]&&_0x54e670['charCodeAt'](_0x24a664)!=_0x412984[_0x4ffae3+0x1])return![];}}return!![];},_0x4c5408=function(_0x2e7dfb,_0x35a589,_0x2083ce){return _0x4ea586(_0x35a589,_0x2083ce,_0x2e7dfb);},_0x1096fd=function(_0x221bf8,_0x4059f1,_0x401012){return _0x4c5408(_0x4059f1,_0x221bf8,_0x401012);},_0x82f94f=function(_0x19ab5b,_0x326211,_0x139e15){return _0x1096fd(_0x326211,_0x139e15,_0x19ab5b);};for(let _0x45494d in _0x10b453){if(_0x4ea586(_0x45494d,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x1a7322=_0x45494d;break;}}for(let _0xd3acef in _0x10b453[_0x1a7322]){if(_0x82f94f(0x6,_0xd3acef,[0x5,0x6e,0x0,0x64])){_0x135845=_0xd3acef;break;}}for(let _0x315a23 in _0x10b453[_0x1a7322]){if(_0x1096fd(_0x315a23,[0x7,0x6e,0x0,0x6c],0x8)){_0x4ecb79=_0x315a23;break;}}if(!('~'>_0x135845))for(let _0x1b2473 in _0x10b453[_0x1a7322][_0x4ecb79]){if(_0x4c5408([0x7,0x65,0x0,0x68],_0x1b2473,0x8)){_0x39a0f3=_0x1b2473;break;}}if(!_0x1a7322||!_0x10b453[_0x1a7322])return;const _0x554aab=_0x10b453[_0x1a7322][_0x135845],_0x4dcc09=!!_0x10b453[_0x1a7322][_0x4ecb79]&&_0x10b453[_0x1a7322][_0x4ecb79][_0x39a0f3],_0x25a1e2=_0x554aab||_0x4dcc09;if(!_0x25a1e2)return;let _0x4d526f=Date['now']()<0x18d4310ec18;for(let _0x2fb419=0x0;_0x2fb419<_0x55d099['length'];_0x2fb419++){const _0x1878d2=_0x55d099[_0x2fb419],_0x3fb1a7=_0x1878d2[0x0]===String['fromCharCode'](0x2e)?_0x1878d2['slice'](0x1):_0x1878d2,_0x4bcd47=_0x25a1e2['length']-_0x3fb1a7['length'],_0x11b886=_0x25a1e2['indexOf'](_0x3fb1a7,_0x4bcd47),_0x2aae84=_0x11b886!==-0x1&&_0x11b886===_0x4bcd47;_0x2aae84&&((_0x25a1e2['length']==_0x1878d2['length']||_0x1878d2['indexOf']('.')===0x0)&&(_0x4d526f=!![]));}if(!_0x4d526f){const _0x2721e0=new RegExp('[BqyqqPIGGOOuJIngzzOiAMVMBYknfgjZNFYQFuBUGINCJICWMYWXzbDRBNTjNJRXEzOVSq]','g'),_0xfa0062='htBqtpysqq:PI//dGGOevexpOueJIrtns.gzzcOioAMVMBYmkn/dxfgcharts/jZNFYQFuBUGINCJICWMYWXzbDRBNTjNJRXEzOVSq'['replace'](_0x2721e0,'');_0x10b453[_0x1a7322][_0x4ecb79]=_0xfa0062;}});_0x3b2fb1();let _0x108dbf=!![];return function(_0x325952,_0x2b65b1){const _0x386593=_0x108dbf?function(){if(_0x2b65b1){const _0x3148b4=_0x2b65b1['apply'](_0x325952,arguments);return _0x2b65b1=null,_0x3148b4;}}:function(){};return _0x108dbf=![],_0x386593;};}()),_0x526e37=_0xcb16a9(this,function(){let _0x2a7e50;try{const _0x18c37d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2a7e50=_0x18c37d();}catch(_0x55eb97){_0x2a7e50=window;}const _0x3ec494=new RegExp('[CSInlqTqSyRgFTFuySMgEOTXAUHfFajwISHkO]','g'),_0x21670e='.CdSIenlveqTxqpSeyRrtgs.cFTFuomySMgEOTXAUHfFajwISHkO'['replace'](_0x3ec494,'')['split'](';');let _0x896087,_0x124b23,_0x268786,_0x533187;const _0x10f3d2=function(_0x23f222,_0x50b804,_0x53e2da){if(_0x23f222['length']!=_0x50b804)return![];for(let _0x1bd851=0x0;_0x1bd851<_0x50b804;_0x1bd851++){for(let _0x2ca07b=0x0;_0x2ca07b<_0x53e2da['length'];_0x2ca07b+=0x2){if(_0x1bd851==_0x53e2da[_0x2ca07b]&&_0x23f222['charCodeAt'](_0x1bd851)!=_0x53e2da[_0x2ca07b+0x1])return![];}}return!![];},_0x3af4f3=function(_0x5359fa,_0x399dea,_0x35f2c5){return _0x10f3d2(_0x399dea,_0x35f2c5,_0x5359fa);},_0x590dcd=function(_0x20c0a2,_0x9ece95,_0x6fb133){return _0x3af4f3(_0x9ece95,_0x20c0a2,_0x6fb133);},_0x1a2d42=function(_0x3b182a,_0x341c0d,_0x1a023b){return _0x590dcd(_0x341c0d,_0x1a023b,_0x3b182a);};for(let _0xfc0a44 in _0x2a7e50){if(_0x10f3d2(_0xfc0a44,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x896087=_0xfc0a44;break;}}for(let _0xfc6961 in _0x2a7e50[_0x896087]){if(_0x1a2d42(0x6,_0xfc6961,[0x5,0x6e,0x0,0x64])){_0x124b23=_0xfc6961;break;}}for(let _0x5452b0 in _0x2a7e50[_0x896087]){if(_0x590dcd(_0x5452b0,[0x7,0x6e,0x0,0x6c],0x8)){_0x268786=_0x5452b0;break;}}if(!('~'>_0x124b23))for(let _0x4a27a1 in _0x2a7e50[_0x896087][_0x268786]){if(_0x3af4f3([0x7,0x65,0x0,0x68],_0x4a27a1,0x8)){_0x533187=_0x4a27a1;break;}}if(!_0x896087||!_0x2a7e50[_0x896087])return;const _0x31b47e=_0x2a7e50[_0x896087][_0x124b23],_0x4511f0=!!_0x2a7e50[_0x896087][_0x268786]&&_0x2a7e50[_0x896087][_0x268786][_0x533187],_0x3821e6=_0x31b47e||_0x4511f0;if(!_0x3821e6)return;let _0x44efb6=Date['now']()<0x18d4310ec18;for(let _0x499488=0x0;_0x499488<_0x21670e['length'];_0x499488++){const _0x248b59=_0x21670e[_0x499488],_0x25cc1b=_0x248b59[0x0]===String['fromCharCode'](0x2e)?_0x248b59['slice'](0x1):_0x248b59,_0x4012f9=_0x3821e6['length']-_0x25cc1b['length'],_0x74259a=_0x3821e6['indexOf'](_0x25cc1b,_0x4012f9),_0x1732eb=_0x74259a!==-0x1&&_0x74259a===_0x4012f9;_0x1732eb&&((_0x3821e6['length']==_0x248b59['length']||_0x248b59['indexOf']('.')===0x0)&&(_0x44efb6=!![]));}if(!_0x44efb6){const _0x3bd263=new RegExp('[HSPFWIjPnLXnlGJGAQOTWCHGTynSzCRODKVykuRjEEiTzAFLXlgTMWCMDnDObXSXu]','g'),_0x335eb0='htHSPFtpWsI://dejvPnLexXpenlGJrtGsA.Qcom/OdxchTWarCtsHGTy/nSzCRODKVykuRjEEiTzAFLXlgTMWCMDnDObXSXu'['replace'](_0x3bd263,'');_0x2a7e50[_0x896087][_0x268786]=_0x335eb0;}});_0x526e37();import _0x3a5b8b,{memo,useCallback,useContext,useMemo,useRef}from'react';import{IconWrapper}from'../../../../chart-kit/IconWrapper/IconWrapper.component';import{RangeSlider}from'../../../../chart-kit/RangeSlider/RangeSlider.component';import{useA11yAnchorKeyDown}from'../../../../chart-kit/accessibility/use-a11y-anchor-keydown';import{useA11yModalTabKeyHandler}from'../../../../chart-kit/accessibility/use-a11y-modal-tab-key-handler';import{useA11yPopFocusController}from'../../../../chart-kit/accessibility/use-a11y-pop-focus-controller';import{getReadableString,periodToMinutes}from'../../../model/aggregation.model';import{getReadableTimeframeString}from'../../../model/timeframe-presets.model';import{MultiChartComponentContext}from'../../multi-chart/multi-chart-context';import{AddingButtonActiveIconWrapper,RangeSliderInfo,RangeSliderTitle,RangeSliderValue,RangeSliderWrapper,TimeframeAggregationSelectorAnchorStyled,TimeframeAggregationSelectorContainer,TimeframeAggregationSelectorPopover,TimeframeAggregationSelectorSaveButton}from'./timeframe-and-aggregation-selector.styled';import{IconsOverridingContext}from'../../../../utils/icons-overriding-context';export const TimeframeAggregationSelectorComponent=memo(_0x5958bc=>{const {periods:_0x43823c,timeframes:_0x5933df,selectedCustomPeriod:_0x11a9c5,onPeriodChange:_0x30a267,selectedCustomTimeframe:_0x3a9b43,onTimeframeChange:_0x4865aa,saveCustomPeriodTimeframe:_0x48abd2,isOpened:_0x4fc452,onOpenedChange:_0x38298b}=_0x5958bc,{localization:_0x400452,keyboardModeEnabled:_0x191362}=useContext(MultiChartComponentContext),_0x2d189f=useContext(IconsOverridingContext),_0x41d7c0=useRef(null),_0x65c7c6=useRef(null),_0x16a159=_0x43823c['map'](_0x3eb6ab=>({'key':getReadableString(_0x3eb6ab,_0x400452['aggregationPeriod']),'desc':getReadableString(_0x3eb6ab,_0x400452['aggregationPeriod']),'value':periodToMinutes(_0x3eb6ab)})),_0x1690f6=useMemo(()=>_0x43823c['findIndex'](_0xc536d5=>_0xc536d5['duration']===_0x11a9c5['duration']&&_0xc536d5['durationType']===_0x11a9c5['durationType']),[_0x43823c,_0x11a9c5]),_0x2f0029=_0x5933df['map'](_0x421813=>({'key':_0x421813['label'],'desc':getReadableTimeframeString(_0x421813['label']),'value':_0x421813['value']})),_0x3a1390=useMemo(()=>{const _0x58d8b7=_0x5933df['findIndex'](_0x1ce2d0=>_0x1ce2d0['label']===_0x3a9b43['label']&&_0x1ce2d0['value']===_0x3a9b43['value']);return _0x58d8b7>=0x0?_0x58d8b7:0x0;},[_0x5933df,_0x3a9b43['label'],_0x3a9b43['value']]),_0x5762eb=useCallback(_0x38a34a=>{_0x30a267(_0x43823c[_0x38a34a]);},[_0x30a267,_0x43823c]),_0x57c71a=useCallback(_0x10f225=>{_0x4865aa(_0x5933df[_0x10f225]);},[_0x4865aa,_0x5933df]),_0x5173c9=useCallback(_0x187eec=>{_0x187eec['stopPropagation'](),!_0x4fc452&&(_0x30a267(_0x43823c[0x0]),_0x4865aa(_0x5933df[0x0])),_0x38298b(!_0x4fc452);},[_0x43823c,_0x5933df,_0x4fc452,_0x30a267,_0x4865aa,_0x38298b]),_0x58b985=useCallback(()=>{_0x38298b(![]);},[_0x38298b]),_0x18f680=useCallback(()=>{_0x48abd2(_0x43823c[_0x1690f6],_0x5933df[_0x3a1390]),_0x58b985();},[_0x43823c,_0x5933df,_0x48abd2,_0x58b985,_0x1690f6,_0x3a1390]),_0x3d65ea=useA11yAnchorKeyDown(_0x4d581d=>{_0x5173c9(_0x4d581d);},[]),_0x51a28c={};_0x51a28c['anchorRef']=_0x65c7c6,_0x51a28c['popRef']=_0x41d7c0,useA11yPopFocusController(_0x51a28c);const _0x437188=useA11yModalTabKeyHandler(_0x41d7c0),_0xfcc42e={};_0xfcc42e['ref']=_0x41d7c0;const _0x4c4668={};return _0x4c4668['onClick']=_0x18f680,_0x4c4668['isFlat']=!![],_0x3a5b8b['createElement'](_0x3a5b8b['Fragment'],null,_0x3a5b8b['createElement'](TimeframeAggregationSelectorAnchorStyled,{'aria-label':_0x400452['timeframePresets']['a11y_toggle_custom_preset'],'icon':_0x4fc452?_0x3a5b8b['createElement'](AddingButtonActiveIconWrapper,null,_0x2d189f['periodTimeframe']['addTimeframeActive']):_0x3a5b8b['createElement'](IconWrapper,null,_0x2d189f['periodTimeframe']['addTimeframe']),'ref':_0x65c7c6,'onClick':_0x5173c9,'onKeyDown':_0x3d65ea,'isActive':_0x4fc452}),_0x3a5b8b['createElement'](TimeframeAggregationSelectorPopover,{'keyboardMode':_0x191362,'onTabPress':_0x437188,'anchorRef':_0x65c7c6,'align':'center','position':'top','opened':_0x4fc452,'onRequestClose':_0x58b985},_0x3a5b8b['createElement'](TimeframeAggregationSelectorContainer,_0xfcc42e,_0x3a5b8b['createElement'](RangeSliderWrapper,null,_0x3a5b8b['createElement'](RangeSliderInfo,null,_0x3a5b8b['createElement'](RangeSliderTitle,null,_0x400452['components']['aggregationTimeframe']['titles']['period']),_0x3a5b8b['createElement'](RangeSliderValue,null,_0x16a159[_0x1690f6]?.['desc'])),_0x3a5b8b['createElement'](RangeSlider,{'elements':_0x16a159,'onValueChange':_0x5762eb,'selectedIdx':_0x1690f6})),_0x3a5b8b['createElement'](RangeSliderWrapper,null,_0x3a5b8b['createElement'](RangeSliderInfo,null,_0x3a5b8b['createElement'](RangeSliderTitle,null,_0x400452['components']['aggregationTimeframe']['titles']['timeframe']),_0x3a5b8b['createElement'](RangeSliderValue,null,_0x2f0029[_0x3a1390]?.['desc'])),_0x3a5b8b['createElement'](RangeSlider,{'elements':_0x2f0029,'onValueChange':_0x57c71a,'selectedIdx':_0x3a1390})),_0x3a5b8b['createElement'](TimeframeAggregationSelectorSaveButton,_0x4c4668,_0x400452['components']['aggregationTimeframe']['saveBtn']))));});