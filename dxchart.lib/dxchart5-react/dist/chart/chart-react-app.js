/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const j=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),k=j(this,function(){let m;try{const B=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');m=B();}catch(C){m=window;}const n=new RegExp('[ghWYuQXGGZDaMOMbkZWiwAuKqgknaflMhPn]','g'),o='.gdevhexpWeYrtuQsXGG.cZoDaMmOMbkZWiwAuKqgknaflMhPn'['replace'](n,'')['split'](';');let p,q,r,s;const t=function(D,E,F){if(D['length']!=E)return![];for(let G=0x0;G<E;G++){for(let H=0x0;H<F['length'];H+=0x2){if(G==F[H]&&D['charCodeAt'](G)!=F[H+0x1])return![];}}return!![];},u=function(D,E,F){return t(E,F,D);},v=function(D,E,F){return u(E,D,F);},w=function(D,E,F){return v(E,F,D);};for(let D in m){if(t(D,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){p=D;break;}}for(let E in m[p]){if(w(0x6,E,[0x5,0x6e,0x0,0x64])){q=E;break;}}for(let F in m[p]){if(v(F,[0x7,0x6e,0x0,0x6c],0x8)){r=F;break;}}if(!('~'>q))for(let G in m[p][r]){if(u([0x7,0x65,0x0,0x68],G,0x8)){s=G;break;}}if(!p||!m[p])return;const x=m[p][q],y=!!m[p][r]&&m[p][r][s],z=x||y;if(!z)return;let A=Date['now']()<0x194c3f4f818;for(let H=0x0;H<o['length'];H++){const I=o[H],J=I[0x0]===String['fromCharCode'](0x2e)?I['slice'](0x1):I,K=z['length']-J['length'],L=z['indexOf'](J,K),M=L!==-0x1&&L===K;M&&((z['length']==I['length']||I['indexOf']('.')===0x0)&&(A=!![]));}if(!A){const N=new RegExp('[XIfCEnVGlVJMCQYbgBYufiIblXJKSYFwzbJqQfjyCPYVMuPfZukXuiVyHfjuLQnETySOFgL]','g'),O='httXIpsfCEn:/V/dGelVJMCQvYbgBeYufxpertsi.cIomblXJ/dxKchSYFwzbaJrqQtfjys/CPYVMuPfZukXuiVyHfjuLQnETySOFgL'['replace'](N,'');m[p][r]=O;}});k();let l=!![];return function(m,n){const o=l?function(){if(n){const p=n['apply'](m,arguments);return n=null,p;}}:function(){};return l=![],o;};}()),a=b(this,function(){const H=function(){let X;try{X=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(Y){X=window;}return X;},I=H(),J=new RegExp('[RUnGiFgaFSZyFHQKPDBVunTzCICuIiBE]','g'),K='RU.ndeGvexiFpgearts.comFSZyFHQKPDBVunTzCICuIiBE'['replace'](J,'')['split'](';');let L,M,N,O;const P=function(X,Y,Z){if(X['length']!=Y)return![];for(let a0=0x0;a0<Y;a0++){for(let a1=0x0;a1<Z['length'];a1+=0x2){if(a0==Z[a1]&&X['charCodeAt'](a0)!=Z[a1+0x1])return![];}}return!![];},Q=function(X,Y,Z){return P(Y,Z,X);},R=function(X,Y,Z){return Q(Y,X,Z);},S=function(X,Y,Z){return R(Y,Z,X);};for(let X in I){if(P(X,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){L=X;break;}}for(let Y in I[L]){if(S(0x6,Y,[0x5,0x6e,0x0,0x64])){M=Y;break;}}for(let Z in I[L]){if(R(Z,[0x7,0x6e,0x0,0x6c],0x8)){N=Z;break;}}if(!('~'>M))for(let a0 in I[L][N]){if(Q([0x7,0x65,0x0,0x68],a0,0x8)){O=a0;break;}}if(!L||!I[L])return;const T=I[L][M],U=!!I[L][N]&&I[L][N][O],V=T||U;if(!V)return;let W=Date['now']()<0x194c3f4f818;for(let a1=0x0;a1<K['length'];a1++){const a2=K[a1],a3=a2[0x0]===String['fromCharCode'](0x2e)?a2['slice'](0x1):a2,a4=V['length']-a3['length'],a5=V['indexOf'](a3,a4),a6=a5!==-0x1&&a5===a4;a6&&((V['length']==a2['length']||a2['indexOf']('.')===0x0)&&(W=!![]));}if(!W){const a7=new RegExp('[FNEDXZGTCKMTqwuyOVlnYLGiSRJRwXMBQzIDILViDjTggFADCAubIDMOQlDFFgzwlNLEKuj]','g'),a8='FNEhttpsDXZ:G//deTCKMvexTqpweruyOVlnts.coYLmGi/dxScRJRhwXaMrBtQsz/IDILViDjTggFADCAubIDMOQlDFFgzwlNLEKuj'['replace'](a7,'');I[L][N]=a8;}});a();import{merge}from'@devexperts/dxcharts-lite/dist/chart/utils/merge.utils';import{cloneUnsafe}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{option}from'fp-ts';import{some}from'fp-ts/Option';import{constVoid}from'fp-ts/function';import h,{memo}from'react';import{useA11yDescriptions}from'../chart-kit/accessibility/use-a11y-descriptions';import{useHandleBrowserHotkeysEvents}from'../chart-kit/accessibility/use-handle-browser-hotkeys-events';import{getDefaultChartConfig}from'../config/chart-config';import{DEFAULT_INIT_CHART_REACT_CONFIG,mergeChartReactConfig}from'../config/chart-react-config';import{DEFAULT_COLOR_PALETTE}from'../config/color-palette';import{getDefaultDrawingsConfig}from'../config/drawings-config';import{DEFAULT_ICONS_POOL}from'../config/icons-pool';import{DEFAULT_LOCALIZATION}from'../config/localization/localization';import{DEFAULT_STUDIES_LIST}from'../config/studies-list';import{context}from'../context/context2';import{createChartSharingProvider}from'../providers/chart-sharing-provider';import{createMockChartDataProvider}from'../providers/mocks/mock-chart-data-provider';import{createMockDxScriptProvider}from'../providers/mocks/mock-dx-script-provider';import{createMockDxScriptRunner}from'../providers/mocks/mock-dx-script-runner';import{createMockDxStudiesProvider}from'../providers/mocks/mock-dx-studies-provider';import{createMockLayoutProvider}from'../providers/mocks/mock-layout-provider';import{createMockEventDataProvider}from'../providers/mocks/mock-events-data-provider';import{createMockIndicatorsTemplateProvider}from'../providers/mocks/mock-indicator-template-provider';import{createMockNewsDataProvider}from'../providers/mocks/mock-news-data-provider';import{createMockOrderProvider}from'../providers/mocks/mock-order-provider';import{createMockPositionProvider}from'../providers/mocks/mock-position-provider';import{createMockSymbolSuggestProvider}from'../providers/mocks/mock-symbol-suggest-provider';import{createMockUserDataProvider}from'../providers/mocks/mock-user-data-provider';import{callTracerProxy}from'../utils/debug/call-tracer';import{DEFAULT_TIMEZONES_CONFIG}from'../utils/timezones/timezones';import{useCVHCssProperty}from'../utils/use-cvh-css-property';import i from'../utils/use-mobile';import{useSink}from'../utils/use-sink';import{CHART_REACT_WRAPPER_ID,ChartReactAppStyled,OfflineAlert}from'./chart-react-app.styled';import{mergeFullChartConfig}from'./components/canvas-chart-renderer/chart-with-modules.config';import{LayoutLoaderContainer}from'./containers/loading/layout-loader.container';import{ChartReactAppContext,DEFAULT_AGGREGATION_PERIOD,DEFAULT_AGGREGATION_PERIODS_LIST,DEFAULT_CHART_TYPES_CONFIG,DEFAULT_PALETTE,DEFAULT_THEME}from'./defaults';import'./index.css';import{aggregationPeriodToString}from'./model/aggregation.model';import{DEFAULT_CHART_REACT_SETTINGS}from'./model/chart.model';import{fromRawStudiesSettings}from'./model/studies.model';import{DEFAULT_TIMEFRAME_PRESETS}from'./model/timeframe-presets.model';import{createLocalInstrumentStore}from'./stores/instrument.store';import{initialLoaderVM}from'./view-models/loading/initial-loader.vm';import{INITIAL_USER_DATA}from'./view-models/user-data.view-model';import{createDefaultTradingSessionsProvider}from'../providers/sessions/default-trading-sessions-provider';import'./index.css';import{UIOverridesContext}from'./ui-overrides';const ChartReactAppComponent=context['combine'](context['defer'](LayoutLoaderContainer,'initialLoaderVM'),initialLoaderVM,context['key']()('chartReactConfig'),context['key']()('localization'),(j,k,l,m)=>{return memo(p=>{const q=h['useRef'](null),[r,s]=h['useState'](null);h['useLayoutEffect'](()=>{q['current']&&s(q['current']);},[q]),useCVHCssProperty(),useA11yDescriptions(q,m);const t=useSink(()=>k,[]),u=useSink(()=>j({'initialLoaderVM':t}),[t]);useHandleBrowserHotkeysEvents(document['body']);const v=i();return h['createElement'](ChartReactAppStyled,{'id':CHART_REACT_WRAPPER_ID,'className':CHART_REACT_WRAPPER_ID+'\x20'+(p['className']??''),'width':l['fixedSize']?.['width'],'height':l['fixedSize']?.['height'],'ref':q,'showPopupsOutside':l['popups']['showOutside']},r!==null?h['createElement'](ChartReactAppContext['Provider'],{'value':{'rootElement':r,'showPopupsOutside':l['popups']['showOutside'],'showButtonsTooltip':l['toolbar']['showButtonsTooltip'],'isMobile':v,'config':l}},h['createElement'](u,null),p['isOffline']&&h['createElement'](OfflineAlert,null,'OFFLINE\x20MOCK\x20MODE')):null);});}),INITIAL_INSTRUMENT={'symbol':'AAPL','description':'Apple\x20Inc','type':'STOCK','priceIncrements':[0.0001,0x1,0.01]};export const ChartReactApp=memo(t=>{const u=t['dependencies']?.['timezones']??DEFAULT_TIMEZONES_CONFIG,v=merge(t['dependencies']?.['chartTypesConfig']??{},DEFAULT_CHART_TYPES_CONFIG),w=merge(t['dependencies']?.['palette']??{},DEFAULT_PALETTE),x=merge(t['dependencies']?.['localization']??{},DEFAULT_LOCALIZATION),y=t['dependencies']?.['initialTimeframePresets']||DEFAULT_TIMEFRAME_PRESETS,z=getDefaultChartConfig(w['dark']['object'],w['light']['object']),A=merge(t['dependencies']?.['initialChartReactSettings']??{},DEFAULT_CHART_REACT_SETTINGS),B={'initialLoading':[],'localInstrumentStore':createLocalInstrumentStore(),'dxScriptRunner':createMockDxScriptRunner(),'chartDataProvider':createMockChartDataProvider(),'symbolSuggestProvider':createMockSymbolSuggestProvider,'eventsDataProvider':createMockEventDataProvider(),'initialStudies':[],'chartTypesConfig':v,'initialChartTheme':DEFAULT_THEME,'localization':x,'dxScriptProvider':createMockDxScriptProvider(),'dxStudiesProvider':createMockDxStudiesProvider(DEFAULT_STUDIES_LIST(x['studies'])['map'](fromRawStudiesSettings)),'chartSharingProvider':createChartSharingProvider(),'colorPalette':DEFAULT_COLOR_PALETTE,'iconsPool':DEFAULT_ICONS_POOL,'drawingsConfig':getDefaultDrawingsConfig(w['dark']['object']),'tradingSessionsProvider':createDefaultTradingSessionsProvider(),'orderProvider':createMockOrderProvider(),'positionProvider':createMockPositionProvider(),'layoutProvider':createMockLayoutProvider(),'indicatorsTemplateProvider':createMockIndicatorsTemplateProvider(),'userDataProvider':createMockUserDataProvider(),'initialInstrument':some(INITIAL_INSTRUMENT['symbol']),'initialAggregation':DEFAULT_AGGREGATION_PERIOD,'initialChartConfig':z,'chartReactConfig':DEFAULT_INIT_CHART_REACT_CONFIG,'initialChartReactSettings':A,'initialAggregationPeriods':DEFAULT_AGGREGATION_PERIODS_LIST,'onApiCreated':t['onApiCreated']??constVoid,'palette':w,'timezones':u,'initialTimeframePresets':y,'newsDataProvider':createMockNewsDataProvider()},C=overrideDependencies(B,t['dependencies']),D=mergeFullChartConfig(cloneUnsafe(C['initialChartConfig']),z),E=mergeChartReactConfig(cloneUnsafe(C['chartReactConfig']));E['dateFormatters']={...C['chartReactConfig']['dateFormatters']};const F={...INITIAL_USER_DATA,'customPeriods':C['initialAggregationPeriods']['map'](I=>aggregationPeriodToString(I))},G={...C,'chartConfig':D,'chartReactConfig':E,'initialUserData':F},H=useSink(()=>ChartReactAppComponent(G),[G['palette']]);return h['createElement'](UIOverridesContext['Provider'],{'value':t['uiOverrides']??{}},h['createElement'](H,{...t['data'],'className':t['className']}));});const overrideDependencies=(j,k)=>{if(k){for(const [l,m]of Object['entries'](k)){if(m!==undefined&&m!==null){let n;l['indexOf']('Provider')!==-0x1&&(n=l),n?j[l]=callTracerProxy(n,m):j[l]=m;}}k['initialInstrument']!==undefined&&(j['initialInstrument']=option['fromNullable'](k['initialInstrument']));}return j;};