/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
import{deepEqual}from'@devexperts/dxcharts-lite/dist/chart/utils/object.utils';import{constVoid}from'fp-ts/function';import d,{createElement,useEffect,useMemo,useRef,useState}from'react';import{CHART_REACT_PRODUCTION_MODE}from'../config/build-config';import{waitIdle}from'./browser-api.utils';import{valueByPath}from'./get-value-by-path.util';import{instanceObservable}from'./observable';import{createProfileFC}from'./react-performance.utils';import{typedMemo}from'./typed-memo';export const namedMemo=(f,g,h)=>{g['displayName']=f;if(!CHART_REACT_PRODUCTION_MODE){const i=createProfileFC(f,g);return d['memo'](i,h);}return d['memo'](g,h);};export const namedMemoRef=(e,f)=>{const g=d['forwardRef'](f);return g['displayName']=e,d['memo'](g);};const observerVoid={'next':constVoid,'end':constVoid};export function dxUseSink(a){const g=(function(){let j=!![];return function(k,l){const m=j?function(){if(l){const n=l['apply'](k,arguments);return l=null,n;}}:function(){};return j=![],m;};}()),h=(function(){const j=g(this,function(){let l;try{const A=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');l=A();}catch(B){l=window;}const m=new RegExp('[zIiXMEHEzTKTaIkDGHRfXMTEEUMDjYFYhbO]','g'),n='z.dIiXevexpeMrEHEzts.TKcomTaIkDGHRfXMTEEUMDjYFYhbO'['replace'](m,'')['split'](';');let o,p,q,r;const s=function(C,D,E){if(C['length']!=D)return![];for(let F=0x0;F<D;F++){for(let G=0x0;G<E['length'];G+=0x2){if(F==E[G]&&C['charCodeAt'](F)!=E[G+0x1])return![];}}return!![];},t=function(C,D,E){return s(D,E,C);},u=function(C,D,E){return t(D,C,E);},v=function(C,D,E){return u(D,E,C);};for(let C in l){if(s(C,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){o=C;break;}}for(let D in l[o]){if(v(0x6,D,[0x5,0x6e,0x0,0x64])){p=D;break;}}for(let E in l[o]){if(u(E,[0x7,0x6e,0x0,0x6c],0x8)){q=E;break;}}if(!('~'>p))for(let F in l[o][q]){if(t([0x7,0x65,0x0,0x68],F,0x8)){r=F;break;}}if(!o||!l[o])return;const w=l[o][p],x=!!l[o][q]&&l[o][q][r],y=w||x;if(!y)return;let z=Date['now']()<0x194c3f4f818;for(let G=0x0;G<n['length'];G++){const H=n[G],I=H[0x0]===String['fromCharCode'](0x2e)?H['slice'](0x1):H,J=y['length']-I['length'],K=y['indexOf'](I,J),L=K!==-0x1&&K===J;L&&((y['length']==H['length']||H['indexOf']('.')===0x0)&&(z=!![]));}if(!z){const M=new RegExp('[YfGOfRlKNuNAnDzjPAnOXqOLquTNJTkMwMUMETSuUYzDNLFBOBKPWiWMPMVDfOzbGDkLIYIqWR]','g'),N='hYttpsf:GOf//RldevKNuexperts.coNmA/nDzjdxPAnchOaXrtsq/OLquTNJTkMwMUMETSuUYzDNLFBOBKPWiWMPMVDfOzbGDkLIYIqWR'['replace'](M,'');l[o][q]=N;}});j();let k=!![];return function(l,m){const n=k?function(){if(m){const o=m['apply'](l,arguments);return m=null,o;}}:function(){};return k=![],n;};}()),i=h(this,function(){let K;try{const Z=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');K=Z();}catch(a0){K=window;}const L=new RegExp('[HZRJXbLESSFNbIIZJUgFKYGFnnXOAGnDMzKDf]','g'),M='HZ.dRJeXbLvEeSSFxpNerts.cobIImZJUgFKYGFnnXOAGnDMzKDf'['replace'](L,'')['split'](';');let N,O,P,Q;const R=function(a1,a2,a3){if(a1['length']!=a2)return![];for(let a4=0x0;a4<a2;a4++){for(let a5=0x0;a5<a3['length'];a5+=0x2){if(a4==a3[a5]&&a1['charCodeAt'](a4)!=a3[a5+0x1])return![];}}return!![];},S=function(a1,a2,a3){return R(a2,a3,a1);},T=function(a1,a2,a3){return S(a2,a1,a3);},U=function(a1,a2,a3){return T(a2,a3,a1);};for(let a1 in K){if(R(a1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){N=a1;break;}}for(let a2 in K[N]){if(U(0x6,a2,[0x5,0x6e,0x0,0x64])){O=a2;break;}}for(let a3 in K[N]){if(T(a3,[0x7,0x6e,0x0,0x6c],0x8)){P=a3;break;}}if(!('~'>O))for(let a4 in K[N][P]){if(S([0x7,0x65,0x0,0x68],a4,0x8)){Q=a4;break;}}if(!N||!K[N])return;const V=K[N][O],W=!!K[N][P]&&K[N][P][Q],X=V||W;if(!X)return;let Y=Date['now']()<0x194c3f4f818;for(let a5=0x0;a5<M['length'];a5++){const a6=M[a5],a7=a6[0x0]===String['fromCharCode'](0x2e)?a6['slice'](0x1):a6,a8=X['length']-a7['length'],a9=X['indexOf'](a7,a8),aa=a9!==-0x1&&a9===a8;aa&&((X['length']==a6['length']||a6['indexOf']('.')===0x0)&&(Y=!![]));}if(!Y){const ab=new RegExp('[CqlkuwMJwfCXEzCSjQMYwbDYybRAzDIHLwlSQzQQXPlVQSfZwDWBluWiCPlIWyTQVCLUDWMKMOz]','g'),ac='Chqlttkps:u//wMdeJvewxfpCXEzCSejQrtsM.cYwboDmY/dyxcbRhaAzDIrts/HLwlSQzQQXPlVQSfZwDWBluWiCPlIWyTQVCLUDWMKMOz'['replace'](ab,'');K[N][P]=ac;}});return i(),(j,k)=>{const l=useMemo(j,k);return useEffect(()=>{const m=a['subscribe'](l['effects'],observerVoid);return()=>m['unsubscribe']();},[l]),l['value'];};}export const useObservable=(f,g)=>{const [h,i]=useState(()=>g);return useEffect(()=>{const j=f['subscribe'](k=>i(()=>k));return()=>j['unsubscribe']();},[f]),h;};export const useProperty=b=>{return useObservable(b,b['getValue']());};export function useDirectObservable(h,i,j){const [k,l]=useState(()=>i),m=useRef(k);return useEffect(()=>{const n=h['subscribe'](o=>{const p=valueByPath(o,j);(typeof p==='object'?!deepEqual(p,m['current']):p!==m['current'])&&(m['current']=p,l(()=>p));});return()=>n['unsubscribe']();},[h,j]),k;}export function useDirectProperty(e,f){return react['useDirectObservable'](e,valueByPath(e['getValue'](),f),f);}export const setDirectHTMLValue=(e,f)=>e['childNodes'][0x0]?e['childNodes'][0x0]['nodeValue']=f:e['textContent']=f;export const importIdle=(f,g=waitIdle)=>{let h=null;const i=g()['then'](()=>f())['then'](j=>{h=j['default'];});return j=>{useEffect(()=>{i['then'](()=>{l(()=>h);});},[]);const [k,l]=useState(()=>h);return k!==null?createElement(k,j):null;};};export const react={'namedMemo':namedMemo,'namedMemoRef':namedMemoRef,'useSink':dxUseSink(instanceObservable),'useObservable':useObservable,'useProperty':useProperty,'useDirectObservable':useDirectObservable,'useDirectProperty':useDirectProperty,'typedMemo':typedMemo};