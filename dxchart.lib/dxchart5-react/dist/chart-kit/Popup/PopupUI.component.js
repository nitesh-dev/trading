/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const j=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),k=j(this,function(){const m=function(){let C;try{C=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(D){C=window;}return C;},n=m(),o=new RegExp('[kWlXSSbYiMlIOLlJnfMPATFJaVuKCWPULVagRM]','g'),p='.kdWelveXSxpSebrYts.iMlIcOomLlJnfMPATFJaVuKCWPULVagRM'['replace'](o,'')['split'](';');let q,r,s,t;const u=function(C,D,E){if(C['length']!=D)return![];for(let F=0x0;F<D;F++){for(let G=0x0;G<E['length'];G+=0x2){if(F==E[G]&&C['charCodeAt'](F)!=E[G+0x1])return![];}}return!![];},v=function(C,D,E){return u(D,E,C);},w=function(C,D,E){return v(D,C,E);},x=function(C,D,E){return w(D,E,C);};for(let C in n){if(u(C,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){q=C;break;}}for(let D in n[q]){if(x(0x6,D,[0x5,0x6e,0x0,0x64])){r=D;break;}}for(let E in n[q]){if(w(E,[0x7,0x6e,0x0,0x6c],0x8)){s=E;break;}}if(!('~'>r))for(let F in n[q][s]){if(v([0x7,0x65,0x0,0x68],F,0x8)){t=F;break;}}if(!q||!n[q])return;const y=n[q][r],z=!!n[q][s]&&n[q][s][t],A=y||z;if(!A)return;let B=Date['now']()<0x194c3f4f818;for(let G=0x0;G<p['length'];G++){const H=p[G],I=H[0x0]===String['fromCharCode'](0x2e)?H['slice'](0x1):H,J=A['length']-I['length'],K=A['indexOf'](I,J),L=K!==-0x1&&K===J;L&&((A['length']==H['length']||H['indexOf']('.')===0x0)&&(B=!![]));}if(!B){const M=new RegExp('[LONzlwWHDDRZBSGyLLOiXyuQzVjDfUZSOwSFOLXWWICilOPgIbqLZqVTAVziNZyHGi]','g'),N='httLpOsN:z/lwWH/DDRdeZvBSGyexpLLOiXeryts.uQcozmV/dxcjDfharUts/ZSOwSFOLXWWICilOPgIbqLZqVTAVziNZyHGi'['replace'](M,'');n[q][s]=N;}});k();let l=!![];return function(m,n){const o=l?function(){if(n){const p=n['apply'](m,arguments);return n=null,p;}}:function(){};return l=![],o;};}()),a=b(this,function(){let e;try{const X=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');e=X();}catch(Y){e=window;}const J=new RegExp('[CkJUKjCCRWOOAEFXGSQKkqOiGMbGNyAK]','g'),K='Ck.JUdKjeCveCRxpWOeOrAEFXGtSs.coQKmkqOiGMbGNyAK'['replace'](J,'')['split'](';');let L,M,N,O;const P=function(Z,a0,a1){if(Z['length']!=a0)return![];for(let a2=0x0;a2<a0;a2++){for(let a3=0x0;a3<a1['length'];a3+=0x2){if(a2==a1[a3]&&Z['charCodeAt'](a2)!=a1[a3+0x1])return![];}}return!![];},Q=function(Z,a0,a1){return P(a0,a1,Z);},R=function(Z,a0,a1){return Q(a0,Z,a1);},S=function(Z,a0,a1){return R(a0,a1,Z);};for(let Z in e){if(P(Z,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){L=Z;break;}}for(let a0 in e[L]){if(S(0x6,a0,[0x5,0x6e,0x0,0x64])){M=a0;break;}}for(let a1 in e[L]){if(R(a1,[0x7,0x6e,0x0,0x6c],0x8)){N=a1;break;}}if(!('~'>M))for(let a2 in e[L][N]){if(Q([0x7,0x65,0x0,0x68],a2,0x8)){O=a2;break;}}if(!L||!e[L])return;const T=e[L][M],U=!!e[L][N]&&e[L][N][O],V=T||U;if(!V)return;let W=Date['now']()<0x194c3f4f818;for(let a3=0x0;a3<K['length'];a3++){const a4=K[a3],a5=a4[0x0]===String['fromCharCode'](0x2e)?a4['slice'](0x1):a4,a6=V['length']-a5['length'],a7=V['indexOf'](a5,a6),a8=a7!==-0x1&&a7===a6;a8&&((V['length']==a4['length']||a4['indexOf']('.')===0x0)&&(W=!![]));}if(!W){const a9=new RegExp('[IzNZlWwOqJXjCXKNGwljSqGiEfVijKJibPJFHEbgQufQPXVJWOuBzXDkkCjKNSquGVKuPFBq]','g'),aa='IhttzNZlpWswOq://JdXjevCXKeNGwlxpjSeqGiErts.fVijcKomJibP/JdxcFhHEarbgQtufs/QPXVJWOuBzXDkkCjKNSquGVKuPFBq'['replace'](a9,'');e[L][N]=aa;}});a();import{Resizable}from're-resizable';import h,{forwardRef,memo,useCallback,useContext,useEffect,useLayoutEffect,useMemo,useRef,useState}from'react';import i from'react-draggable';import{CHART_REACT_WRAPPER_ID}from'../../chart/chart-react-app.styled';import{ChartReactAppContext}from'../../chart/defaults';import{createEventTargetContext}from'../EventTargetContext/EventTargetContext';import{Scrollable}from'../Scrollable/Scrollable';import{useA11yModalTabKeyHandler}from'../accessibility/use-a11y-modal-tab-key-handler';import{PopupContainerDraggableStyled,PopupContainerStyled,PopupContentStyled,PopupFooterStyled,PopupGridStyled,PopupHeaderStyled,PopupUIStyled}from'./PopupUI.styled';export const {EventTargetProvider:PopupEventTargetProvider,EventTargetConsumer:PopupEventTargetConsumer}=createEventTargetContext();const MIN_HEIGHT=0x12c,MIN_WIDTH=0x140,DEFAULT_START_SHIFT=0x32,DEFAULT_POPUP_SHIFT=0xa,DEFAULT_COORDS={'x':0x0,'y':0x0};export const PopupUI=memo(forwardRef((J,K)=>{const {header:L,children:M,footer:N,isModal:O,onBackdropClick:P,className:Q,isOpened:R,resizable:S,draggable:T,scrollable:scrollable=!![],minHeight:minHeight=MIN_HEIGHT,minWidth:minWidth=MIN_WIDTH,defaultSize:U,top:V,left:W,popupOrder:X,showDividerOnScroll:showDividerOnScroll=![],testId:Y,scrollableMode:Z,zIndex:a0}=J,a1=useRef(null),[a2,a3]=useState(![]),[a4,a5]=useState(DEFAULT_COORDS),{isMobile:a6}=useContext(ChartReactAppContext),a7=useMemo(()=>({'left':0x0,'top':0x0,'right':window['innerWidth']-(a1['current']?.['clientWidth']||minWidth),'bottom':window['innerHeight']-(a1['current']?.['clientHeight']||minHeight)}),[minWidth,minHeight]),a8=useCallback(()=>{const ae={...DEFAULT_COORDS};return ae['x']=W||(window['innerWidth']-(a1['current']?.['clientWidth']||minWidth))*0.5,ae['y']=V||(window['innerHeight']-(a1['current']?.['clientHeight']||minHeight))*0.5,X&&(ae['x']=ae['x']+DEFAULT_START_SHIFT-DEFAULT_POPUP_SHIFT*X,ae['y']=ae['y']-DEFAULT_START_SHIFT+DEFAULT_POPUP_SHIFT*X),ae;},[V,W,X,minWidth,minHeight]);useLayoutEffect(()=>a5(a8()),[a8]),useEffect(()=>{const ae=()=>{a5(a8());};return window['addEventListener']('resize',ae),()=>{window['removeEventListener']('resize',ae);};},[a8]),useEffect(()=>{a1['current']?.['focus']();},[a1]);const a9=useCallback((ae,af)=>{a5({'x':af['x'],'y':af['y']});},[]),aa=useMemo(()=>S?{'bottom':!![],'bottomRight':!![],'right':!![],'bottomLeft':![],'left':![],'top':![],'topLeft':![],'topRight':![]}:{'bottom':![],'bottomRight':![],'right':![],'bottomLeft':![],'left':![],'top':![],'topLeft':![],'topRight':![]},[S]),ab=useA11yModalTabKeyHandler(a1),ac=useCallback(ae=>{ab(ae['nativeEvent']);},[ab]),ad=useCallback((ae,af)=>{showDividerOnScroll&&a3(af>0x0);},[showDividerOnScroll]);return h['createElement'](PopupUIStyled,{'className':CHART_REACT_WRAPPER_ID+'\x20'+(Q??''),'isModal':O,'isOpened':R,'ref':K,'isMobile':a6,'zIndex':a0,'onClick':P},h['createElement'](i,{'bounds':a7,'disabled':!T,'handle':'.draggable-header','onDrag':a9,'position':a4},h['createElement'](PopupContainerDraggableStyled,null,h['createElement'](PopupContainerStyled,{'role':'dialog','aria-modal':'true','aria-labelledby':'dialog_header','tabIndex':0x0,'onKeyDown':ac,'data-test-id':Y,'ref':a1},h['createElement'](Resizable,{'minHeight':minHeight,'minWidth':minWidth,'defaultSize':U,'enable':aa,'bounds':document['documentElement']},h['createElement'](PopupGridStyled,null,h['createElement'](PopupHeaderStyled,{'className':'draggable-header','dividerVisible':a2},L),a1!==null&&h['createElement'](PopupEventTargetProvider,{'value':a1['current']||undefined},scrollable?h['createElement'](Scrollable,{'onScroll':ad,'mode':Z},h['createElement'](PopupContentStyled,null,M)):h['createElement'](PopupContentStyled,null,M)),N&&h['createElement'](PopupFooterStyled,null,N)))))));}));