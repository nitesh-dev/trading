/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const j=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),k=j(this,function(){const m=function(){let C;try{C=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(D){C=window;}return C;},n=m(),o=new RegExp('[hHygCnwfLOEEEiFXaMDiSTaJPMbyAMwJu]','g'),p='.devehHxperytgCsn.wfLcOEomEEiFXaMDiSTaJPMbyAMwJu'['replace'](o,'')['split'](';');let q,r,s,t;const u=function(C,D,E){if(C['length']!=D)return![];for(let F=0x0;F<D;F++){for(let G=0x0;G<E['length'];G+=0x2){if(F==E[G]&&C['charCodeAt'](F)!=E[G+0x1])return![];}}return!![];},v=function(C,D,E){return u(D,E,C);},w=function(C,D,E){return v(D,C,E);},x=function(C,D,E){return w(D,E,C);};for(let C in n){if(u(C,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){q=C;break;}}for(let D in n[q]){if(x(0x6,D,[0x5,0x6e,0x0,0x64])){r=D;break;}}for(let E in n[q]){if(w(E,[0x7,0x6e,0x0,0x6c],0x8)){s=E;break;}}if(!('~'>r))for(let F in n[q][s]){if(v([0x7,0x65,0x0,0x68],F,0x8)){t=F;break;}}if(!q||!n[q])return;const y=n[q][r],z=!!n[q][s]&&n[q][s][t],A=y||z;if(!A)return;let B=Date['now']()<0x194c3f4f818;for(let G=0x0;G<p['length'];G++){const H=p[G],I=H[0x0]===String['fromCharCode'](0x2e)?H['slice'](0x1):H,J=A['length']-I['length'],K=A['indexOf'](I,J),L=K!==-0x1&&K===J;L&&((A['length']==H['length']||H['indexOf']('.')===0x0)&&(B=!![]));}if(!B){const M=new RegExp('[MIWPlECFDJDEJFqXuzAPOnRGqiUKQTPiTLMUQnuEFfJVFgYAfffJGUAyYJHQEJISjYZnBCHGR]','g'),N='MhtItps://WPldECeveFDJDEJxFpqXuzerAPOnRtGqsiUK.QTcom/dxPichTartLsMUQn/uEFfJVFgYAfffJGUAyYJHQEJISjYZnBCHGR'['replace'](M,'');n[q][s]=N;}});k();let l=!![];return function(m,n){const o=l?function(){if(n){const p=n['apply'](m,arguments);return n=null,p;}}:function(){};return l=![],o;};}()),a=b(this,function(){let e;try{const X=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');e=X();}catch(Y){e=window;}const J=new RegExp('[UyQLDFXbkVkhqJwijVjRhuuUPWIfbjbjVjP]','g'),K='U.deyQLvexperDts.cFXombkVkhqJwijVjRhuuUPWIfbjbjVjP'['replace'](J,'')['split'](';');let L,M,N,O;const P=function(Z,a0,a1){if(Z['length']!=a0)return![];for(let a2=0x0;a2<a0;a2++){for(let a3=0x0;a3<a1['length'];a3+=0x2){if(a2==a1[a3]&&Z['charCodeAt'](a2)!=a1[a3+0x1])return![];}}return!![];},Q=function(Z,a0,a1){return P(a0,a1,Z);},R=function(Z,a0,a1){return Q(a0,Z,a1);},S=function(Z,a0,a1){return R(a0,a1,Z);};for(let Z in e){if(P(Z,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){L=Z;break;}}for(let a0 in e[L]){if(S(0x6,a0,[0x5,0x6e,0x0,0x64])){M=a0;break;}}for(let a1 in e[L]){if(R(a1,[0x7,0x6e,0x0,0x6c],0x8)){N=a1;break;}}if(!('~'>M))for(let a2 in e[L][N]){if(Q([0x7,0x65,0x0,0x68],a2,0x8)){O=a2;break;}}if(!L||!e[L])return;const T=e[L][M],U=!!e[L][N]&&e[L][N][O],V=T||U;if(!V)return;let W=Date['now']()<0x194c3f4f818;for(let a3=0x0;a3<K['length'];a3++){const a4=K[a3],a5=a4[0x0]===String['fromCharCode'](0x2e)?a4['slice'](0x1):a4,a6=V['length']-a5['length'],a7=V['indexOf'](a5,a6),a8=a7!==-0x1&&a7===a6;a8&&((V['length']==a4['length']||a4['indexOf']('.')===0x0)&&(W=!![]));}if(!W){const a9=new RegExp('[NVJIIykCUZAbMjAzfAMbBHBGFALSBRnyUnilikbwnDZEMnkjAWUzZTAjSiqRIjGIQCbinMZMIBi]','g'),aa='htNtpVJsIIy:/kC/deUZveAxbMpjeAzrtfAMsb.com/dBxchHaBGFrALts/SBRnyUnilikbwnDZEMnkjAWUzZTAjSiqRIjGIQCbinMZMIBi'['replace'](a9,'');e[L][N]=aa;}});a();import{__decorate}from'tslib';import h from'react';import i from'react-dom';import{KEY_CODE_NUM_MAP}from'../Control/Control';import{alt,chain,isSome,map,none,some}from'fp-ts/Option';import{ActiveSection,checkParentsUpTo,decrementMonthOption,format,inc,incrementMonthOption,isDatesDifferent}from'./DateInput.model';import{pipe}from'fp-ts/function';import{DateInputContent,DateSteppableInputStyled,SectionStyled,SeparatorStyled}from'./DateInput.styled';import{PURE}from'../../utils/pure';let DateInputKit=class DateInputKit extends h['Component']{constructor(){super(...arguments),this['state']={'isOpened':![]},this['secondInput']=![],this['onIncrement']=()=>{this['secondInput']=![];const {value:{day:l,month:m,year:n}}=this['props'],{activeSection:o}=this['state'];switch(o){case ActiveSection['Day']:{const p=pipe(l,map(q=>(q+0x1)%0x20||0x1),alt(()=>some(0x1)));this['onValueChange'](p,m,n);break;}case ActiveSection['Month']:{const q=incrementMonthOption(m);this['onValueChange'](l,q,n);break;}case ActiveSection['Year']:{const r=pipe(n,chain(s=>{return s!==0x270f?some(s+0x1):none;}),alt(()=>some(new Date()['getFullYear']())));this['onValueChange'](l,m,r);break;}}},this['onDecrement']=()=>{this['secondInput']=![];const {value:{day:l,month:m,year:n}}=this['props'],{activeSection:o}=this['state'];switch(o){case ActiveSection['Day']:{const p=pipe(l,map(q=>(q-0x1)%0x20||0x1f),alt(()=>some(0x1f)));this['onValueChange'](p,m,n);break;}case ActiveSection['Month']:{const q=decrementMonthOption(m);this['onValueChange'](l,q,n);break;}case ActiveSection['Year']:{const r=pipe(n,chain(s=>{return s!==0x0?some(s-0x1):none;}),alt(()=>some(new Date()['getFullYear']())));this['onValueChange'](l,m,r);break;}}},this['onClear']=()=>{this['secondInput']=![],this['onValueChange'](none,none,none);const {onClear:f}=this['props'];f&&f();},this['onDayMouseDown']=e=>{!this['props']['isDisabled']&&this['setState']({'activeSection':ActiveSection['Day']});},this['onMonthMouseDown']=e=>{!this['props']['isDisabled']&&this['setState']({'activeSection':ActiveSection['Month']});},this['onYearMouseDown']=e=>{!this['props']['isDisabled']&&this['setState']({'activeSection':ActiveSection['Year']});},this['onKeyDown']=e=>{e['stopPropagation']();const {value:{day:l,month:m,year:n}}=this['props'],{activeSection:o}=this['state'];switch(e['code']){case'Escape':{this['state']['isOpened']&&this['setState']({'isOpened':![]});break;}case'ArrowLeft':{e['preventDefault']();switch(o){case ActiveSection['Month']:case ActiveSection['Year']:{this['secondInput']=![];break;}}this['selectPreviousSection']();break;}case'ArrowRight':{e['preventDefault']();switch(o){case ActiveSection['Day']:case ActiveSection['Month']:{this['secondInput']=![];break;}}this['selectNextSection']();break;}case'Delete':case'Backspace':{this['secondInput']=![];switch(o){case ActiveSection['Day']:{this['onValueChange'](none,m,n);break;}case ActiveSection['Month']:{this['onValueChange'](l,none,n);break;}case ActiveSection['Year']:{this['onValueChange'](l,m,none);break;}}break;}default:{const p=KEY_CODE_NUM_MAP[e['code']];isDefined(p)&&this['handleDigitKeyDown'](p);}}},this['onSteppableInputClick']=e=>{if(this['state']['isOpened']){const j=i['findDOMNode'](this['calendarButtonRef']),k=i['findDOMNode'](this);if(j===null||j instanceof Text||k===null||k instanceof Text)return;checkParentsUpTo(e['target'],j,k)?this['setState']({'isOpened':![]}):this['setState']({'isOpened':!![]});}else this['setState']({'isOpened':!![]});},this['onBlur']=e=>{this['secondInput']=![],this['setState']({'activeSection':undefined,'isOpened':![]}),this['props']['onBlur']&&this['props']['onBlur']();},this['onFocus']=e=>{this['secondInput']=![],!isDefined(this['state']['activeSection'])&&this['setState']({'activeSection':this['getDefaultActiveSection'](this['props']['dateFormatType'])}),this['props']['onFocus']&&this['props']['onFocus']();},this['onMouseEnter']=e=>{this['props']['onMouseEnter']&&this['props']['onMouseEnter']();},this['onMouseLeave']=e=>{this['props']['onMouseLeave']&&this['props']['onMouseLeave']();};}['render'](){const {isDisabled:p,error:q,clearIcon:r,incrementIcon:s,decrementIcon:t,SteppableInput:SteppableInput=DateSteppableInputStyled,dateFormatType:dateFormatType='DMY',value:{day:u,month:v,year:w}}=this['props'],{activeSection:x}=this['state'],y=!p&&ActiveSection['Year']===x,z=isSome(u)||isSome(v)||isSome(w)?this['onClear']:undefined;return h['createElement'](SteppableInput,{'isDisabled':p,'onClear':z,'error':q,'decrementIcon':t,'incrementIcon':s,'clearIcon':r,'onIncrement':this['onIncrement'],'onDecrement':this['onDecrement'],'onBlur':this['onBlur'],'onFocus':this['onFocus'],'onKeyDown':this['onKeyDown'],'onClick':this['onSteppableInputClick'],'onMouseEnter':this['onMouseEnter'],'onMouseLeave':this['onMouseLeave'],'ref':this['props']['innerRef']},h['createElement'](DateInputContent,{'tabIndex':0x1},dateFormatType==='DMY'&&this['renderDay'](),dateFormatType==='MDY'&&this['renderMonth'](),h['createElement'](SeparatorStyled,null,'/'),dateFormatType==='DMY'&&this['renderMonth'](),dateFormatType==='MDY'&&this['renderDay'](),h['createElement'](SeparatorStyled,null,'/'),h['createElement'](SectionStyled,{'isActive':y,'onMouseDown':this['onYearMouseDown']},format(w,ActiveSection['Year']))));}['renderDay'](){const {value:{day:j},isDisabled:k}=this['props'],{activeSection:l}=this['state'],m=!k&&ActiveSection['Day']===l;return h['createElement'](SectionStyled,{'isActive':m,'onMouseDown':this['onDayMouseDown']},format(j,ActiveSection['Day']));}['renderMonth'](){const {value:{month:j},isDisabled:k}=this['props'],{activeSection:l}=this['state'],m=!k&&ActiveSection['Month']===l,n=map(inc)(j);return h['createElement'](SectionStyled,{'isActive':m,'onMouseDown':this['onMonthMouseDown']},format(n,ActiveSection['Month']));}['onValueChange'](j,k,l){const {onValueChange:m,value:n}=this['props'];isDatesDifferent(n,{'day':j,'month':k,'year':l})&&m&&m({'day':j,'month':k,'year':l});}['getDefaultActiveSection'](f='DMY'){switch(f){case'DMY':{return ActiveSection['Day'];}case'MDY':{return ActiveSection['Month'];}}}['selectNextSection'](){const {activeSection:g}=this['state'],{dateFormatType:j}=this['props'];switch(g){case ActiveSection['Day']:{switch(j){case'DMY':{this['setState']({'activeSection':ActiveSection['Month']});break;}case'MDY':{this['setState']({'activeSection':ActiveSection['Year']});break;}}break;}case ActiveSection['Month']:{switch(j){case'DMY':{this['setState']({'activeSection':ActiveSection['Year']});break;}case'MDY':{this['setState']({'activeSection':ActiveSection['Day']});break;}}break;}}}['selectPreviousSection'](){const {activeSection:g}=this['state'],{dateFormatType:j}=this['props'];switch(g){case ActiveSection['Day']:{switch(j){case'MDY':{this['setState']({'activeSection':ActiveSection['Month']});break;}}break;}case ActiveSection['Month']:{switch(j){case'DMY':{this['setState']({'activeSection':ActiveSection['Day']});break;}}break;}case ActiveSection['Year']:{switch(j){case'DMY':{this['setState']({'activeSection':ActiveSection['Month']});break;}case'MDY':{this['setState']({'activeSection':ActiveSection['Day']});break;}}break;}}}['handleDigitKeyDown'](l){const {value:{day:m,month:n,year:o}}=this['props'];switch(this['state']['activeSection']){case ActiveSection['Day']:{if(this['secondInput']){const p=pipe(m,map(q=>{const r=Number(''+q+l);if(q<0x3)return r;else return q===0x3?Math['min'](r,0x1f):l;}));this['onValueChange'](p,n,o),this['selectNextSection'](),this['secondInput']=![];}else this['onValueChange'](some(l),n,o),l>0x3?(this['selectNextSection'](),this['secondInput']=![]):this['secondInput']=!![];break;}case ActiveSection['Month']:{if(this['secondInput']){const q=pipe(n,map(r=>{const s=r+0x1,t=Number(''+s+l)-0x1;if(s<0x1)return t;else return s===0x1?Math['min'](t,0xb):l-0x1;}));this['onValueChange'](m,q,o),this['selectNextSection'](),this['secondInput']=![];}else l&&this['onValueChange'](m,some(l-0x1),o),l>0x1?(this['selectNextSection'](),this['secondInput']=![]):this['secondInput']=!![];break;}case ActiveSection['Year']:{if(this['secondInput']){const r=pipe(o,map(s=>{return s<0x3e8?Number(''+s+l):Number((''+s+l)['substring'](0x1));}));this['onValueChange'](m,n,r);}else this['onValueChange'](m,n,some(l)),this['secondInput']=!![];break;}}}};DateInputKit=__decorate([PURE],DateInputKit);export{DateInputKit};function isDefined(f){return typeof f!=='undefined';}