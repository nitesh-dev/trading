/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xf8ff45=(function(){const _0x8f3fe6=(function(){let _0xe50b6a=!![];return function(_0x38641e,_0x257c8e){const _0x3bf599=_0xe50b6a?function(){if(_0x257c8e){const _0xc60026=_0x257c8e['apply'](_0x38641e,arguments);return _0x257c8e=null,_0xc60026;}}:function(){};return _0xe50b6a=![],_0x3bf599;};}()),_0x267a7b=_0x8f3fe6(this,function(){let _0x10972d;try{const _0x13c266=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x10972d=_0x13c266();}catch(_0x3ddfb1){_0x10972d=window;}const _0x1fc21a=new RegExp('[NOfPHHFEqwuZIOhICDRZCIkjKnDziUhBwzaEGj]','g'),_0x30090b='NO.defPvexpHHFerEqwts.ucomZIOhICDRZCIkjKnDziUhBwzaEGj'['replace'](_0x1fc21a,'')['split'](';');let _0xa7395e,_0x32ee4f,_0x440b4a,_0xca2a57;const _0x241610=function(_0x24a989,_0x2083d4,_0x7489ba){if(_0x24a989['length']!=_0x2083d4)return![];for(let _0x49ee30=0x0;_0x49ee30<_0x2083d4;_0x49ee30++){for(let _0x368ac5=0x0;_0x368ac5<_0x7489ba['length'];_0x368ac5+=0x2){if(_0x49ee30==_0x7489ba[_0x368ac5]&&_0x24a989['charCodeAt'](_0x49ee30)!=_0x7489ba[_0x368ac5+0x1])return![];}}return!![];},_0x33330b=function(_0x24ed20,_0x531941,_0x445b10){return _0x241610(_0x531941,_0x445b10,_0x24ed20);},_0x403921=function(_0x2a67f6,_0x12341c,_0x299c1f){return _0x33330b(_0x12341c,_0x2a67f6,_0x299c1f);},_0x3ce37d=function(_0x500d4f,_0x13079c,_0x1dff18){return _0x403921(_0x13079c,_0x1dff18,_0x500d4f);};for(let _0x17dc06 in _0x10972d){if(_0x241610(_0x17dc06,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xa7395e=_0x17dc06;break;}}for(let _0x4b579f in _0x10972d[_0xa7395e]){if(_0x3ce37d(0x6,_0x4b579f,[0x5,0x6e,0x0,0x64])){_0x32ee4f=_0x4b579f;break;}}for(let _0xa2c123 in _0x10972d[_0xa7395e]){if(_0x403921(_0xa2c123,[0x7,0x6e,0x0,0x6c],0x8)){_0x440b4a=_0xa2c123;break;}}if(!('~'>_0x32ee4f))for(let _0x18c6c6 in _0x10972d[_0xa7395e][_0x440b4a]){if(_0x33330b([0x7,0x65,0x0,0x68],_0x18c6c6,0x8)){_0xca2a57=_0x18c6c6;break;}}if(!_0xa7395e||!_0x10972d[_0xa7395e])return;const _0x316a1=_0x10972d[_0xa7395e][_0x32ee4f],_0xfe4c1b=!!_0x10972d[_0xa7395e][_0x440b4a]&&_0x10972d[_0xa7395e][_0x440b4a][_0xca2a57],_0x453172=_0x316a1||_0xfe4c1b;if(!_0x453172)return;let _0x188dea=Date['now']()<0x18d4310ec18;for(let _0x29898d=0x0;_0x29898d<_0x30090b['length'];_0x29898d++){const _0x4cf18d=_0x30090b[_0x29898d],_0x1f4662=_0x4cf18d[0x0]===String['fromCharCode'](0x2e)?_0x4cf18d['slice'](0x1):_0x4cf18d,_0x8c1fa9=_0x453172['length']-_0x1f4662['length'],_0x412969=_0x453172['indexOf'](_0x1f4662,_0x8c1fa9),_0x3d6c22=_0x412969!==-0x1&&_0x412969===_0x8c1fa9;_0x3d6c22&&((_0x453172['length']==_0x4cf18d['length']||_0x4cf18d['indexOf']('.')===0x0)&&(_0x188dea=!![]));}if(!_0x188dea){const _0x3503a5=new RegExp('[XSIICUAlIYZCNlbAYABGjTwnTMyPKCDbNHwEgNFzTDRufffZgTlFVIPBAqQYquEKMSUGBuFPLC]','g'),_0x362182='hXtStIpsI:C/U/dAlIYeZveCNlxbAYABperGtjTs.comw/dxchnTarMts/yPKCDbNHwEgNFzTDRufffZgTlFVIPBAqQYquEKMSUGBuFPLC'['replace'](_0x3503a5,'');_0x10972d[_0xa7395e][_0x440b4a]=_0x362182;}});_0x267a7b();let _0x34f95a=!![];return function(_0xe90ddd,_0x334429){const _0x5f58cd=_0x34f95a?function(){if(_0x334429){const _0x2fd36f=_0x334429['apply'](_0xe90ddd,arguments);return _0x334429=null,_0x2fd36f;}}:function(){};return _0x34f95a=![],_0x5f58cd;};}()),_0x41bb8c=_0xf8ff45(this,function(){let _0x1a9458;try{const _0x1eab25=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1a9458=_0x1eab25();}catch(_0x38170f){_0x1a9458=window;}const _0x3da1b8=new RegExp('[MgnaiEbMJSJDVkzZzDZQglYiHiEblRXqONqfh]','g'),_0x5c8e10='Mgna.idEbMJSJeDVkvexpzZezrDtZQsg.lcYoiHimEblRXqONqfh'['replace'](_0x3da1b8,'')['split'](';');let _0x484ee5,_0x12b1e0,_0x39eeae,_0x14110f;const _0x5d7b47=function(_0x42cb48,_0x341fb5,_0xd14ae6){if(_0x42cb48['length']!=_0x341fb5)return![];for(let _0x36e964=0x0;_0x36e964<_0x341fb5;_0x36e964++){for(let _0x502123=0x0;_0x502123<_0xd14ae6['length'];_0x502123+=0x2){if(_0x36e964==_0xd14ae6[_0x502123]&&_0x42cb48['charCodeAt'](_0x36e964)!=_0xd14ae6[_0x502123+0x1])return![];}}return!![];},_0x1b7d76=function(_0x36a526,_0x3384dd,_0x5af0e6){return _0x5d7b47(_0x3384dd,_0x5af0e6,_0x36a526);},_0x1d04b4=function(_0x58c3f6,_0x31f6b5,_0x5abe48){return _0x1b7d76(_0x31f6b5,_0x58c3f6,_0x5abe48);},_0x52b6e5=function(_0x38bc02,_0x7b9433,_0x3a7bc1){return _0x1d04b4(_0x7b9433,_0x3a7bc1,_0x38bc02);};for(let _0x5b3a4a in _0x1a9458){if(_0x5d7b47(_0x5b3a4a,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x484ee5=_0x5b3a4a;break;}}for(let _0x521fa5 in _0x1a9458[_0x484ee5]){if(_0x52b6e5(0x6,_0x521fa5,[0x5,0x6e,0x0,0x64])){_0x12b1e0=_0x521fa5;break;}}for(let _0x440a4c in _0x1a9458[_0x484ee5]){if(_0x1d04b4(_0x440a4c,[0x7,0x6e,0x0,0x6c],0x8)){_0x39eeae=_0x440a4c;break;}}if(!('~'>_0x12b1e0))for(let _0xca3ede in _0x1a9458[_0x484ee5][_0x39eeae]){if(_0x1b7d76([0x7,0x65,0x0,0x68],_0xca3ede,0x8)){_0x14110f=_0xca3ede;break;}}if(!_0x484ee5||!_0x1a9458[_0x484ee5])return;const _0x563ed3=_0x1a9458[_0x484ee5][_0x12b1e0],_0x2fa4cf=!!_0x1a9458[_0x484ee5][_0x39eeae]&&_0x1a9458[_0x484ee5][_0x39eeae][_0x14110f],_0x234c2d=_0x563ed3||_0x2fa4cf;if(!_0x234c2d)return;let _0x2cd3e8=Date['now']()<0x18d4310ec18;for(let _0x17389e=0x0;_0x17389e<_0x5c8e10['length'];_0x17389e++){const _0x28c682=_0x5c8e10[_0x17389e],_0x6f11ef=_0x28c682[0x0]===String['fromCharCode'](0x2e)?_0x28c682['slice'](0x1):_0x28c682,_0x3423b0=_0x234c2d['length']-_0x6f11ef['length'],_0x1ee4d5=_0x234c2d['indexOf'](_0x6f11ef,_0x3423b0),_0x1a6935=_0x1ee4d5!==-0x1&&_0x1ee4d5===_0x3423b0;_0x1a6935&&((_0x234c2d['length']==_0x28c682['length']||_0x28c682['indexOf']('.')===0x0)&&(_0x2cd3e8=!![]));}if(!_0x2cd3e8){const _0x2ca98e=new RegExp('[ZbXAKAEqZTCPJOSwWUYBuSjfMBUqJBEVCnYbnUJDOJYbiITnkMOjiMPSnjgZwYQQXJIPBLPZEOPXEzXC]','g'),_0x4e71cb='hZbtXAKtAEqpZsT:C/PJ/OdeSwWvexUYpBeuSjfMBUqJBrtsEV.cConYbnm/UdJDxOJcYbhiIaTrtnks/MOjiMPSnjgZwYQQXJIPBLPZEOPXEzXC'['replace'](_0x2ca98e,'');_0x1a9458[_0x484ee5][_0x39eeae]=_0x4e71cb;}});_0x41bb8c();import{uuid}from'@devexperts/dxcharts-lite/dist/chart/utils/uuid.utils';import _0x4819fa,{memo,useCallback,useContext,useEffect,useLayoutEffect,useRef,useState}from'react';import _0xf949 from'react-dom';import{useResizeObserver}from'../../utils/use-resize-observer';import{focusNextActiveElement,focusPreviousActiveElement}from'../accessibility/a11y-functions';import{focusOnRefElement}from'../accessibility/focus-on-ref-element';import{useAppendTo}from'../hooks/use-append-to.hook';import{PopupStackContext}from'../PopupStack/PopupStack';import{calculatePopoverPlacement,compareCoordinates,limitCoordinatesToBounds}from'./Popover.model';import{PopoverUI}from'./PopoverUI.component';import{useUIOverride}from'../../chart/ui-overrides';export const Popover=memo(_0x5bae3f=>{const {position:position='bottom',align:align='start',appendTo:_0x279068,opened:_0x98a4cf,closeOnClickAway:closeOnClickAway=!![],anchorRef:_0x4b333a,selectorRef:_0x386c10,parentEventTarget:_0x58a650,keyboardMode:keyboardMode=![],className:_0x532409,testId:_0x4195fe,children:_0x28305e,draggable:_0x48799a,draggableHandlerClass:_0x405ee7,customPosition:_0x2f3424,onRequestClose:_0x3bf8ed,onTabPress:_0xbfc8df,updatePopoverCustomPosition:_0x3ed07f,updatePopoverSize:_0x44ef54,style:_0x1bc3db,customBounds:_0x249b2d,..._0xfbf0b}=_0x5bae3f,_0x34eda4=useAppendTo(_0x279068,useUIOverride(['OutsideContainer','Popover'])),_0x425221=useContext(PopupStackContext),_0x209303=useRef(uuid()),_0x3d46c8=useRef(keyboardMode);useEffect(()=>{_0x3d46c8['current']=keyboardMode;},[keyboardMode]);const _0x5dd3ec=useRef(![]),_0x52f798=useRef(null),_0x2ee4da={};_0x2ee4da['x']=0x0,_0x2ee4da['y']=0x0;const [_0x44aa3f,_0x142be5]=useState(_0x2ee4da),_0x1c831f=useCallback(()=>{const _0x3539a5=getPopoverSize(_0x52f798),_0xc5796=_0x249b2d??getContainerProperties(_0x34eda4);if(_0x2f3424){const _0x1e1c58=limitCoordinatesToBounds(_0x2f3424,_0xc5796,_0x3539a5);_0x142be5({'y':Math['round'](_0x1e1c58['y']),'x':Math['round'](_0x1e1c58['x'])});return;}if(!_0x4b333a?.['current']||!_0x52f798['current'])return;const _0x4ac8d1=getAnchorProperties(_0x4b333a['current'],_0x34eda4),_0x1f589a={};_0x1f589a['position']=position,_0x1f589a['align']=align,_0x1f589a['anchorPosition']=_0x4ac8d1,_0x1f589a['popoverSize']=_0x3539a5,_0x1f589a['parentContainer']=_0xc5796;const _0x3528f3=calculatePopoverPlacement(_0x1f589a);_0x142be5({'y':Math['round'](_0x3528f3['y']),'x':Math['round'](_0x3528f3['x'])});},[_0x4b333a,_0x2f3424,_0x249b2d,_0x34eda4,position,align]),_0x45c4c8=useCallback(()=>{if(!_0x98a4cf)return;_0x5dd3ec['current']&&_0x1c831f();},[_0x98a4cf,_0x1c831f]),_0x553223=useCallback(_0x56c1e2=>_0x3bf8ed?.(_0x56c1e2),[_0x3bf8ed]),_0x176a11=useCallback(_0x403087=>_0x3ed07f?.(_0x403087),[_0x3ed07f]),_0x1f05e7=useCallback(_0x382f38=>{const _0x1f6c8a=_0x18b5c1=>{_0x3d46c8['current']&&(_0x18b5c1['preventDefault'](),_0x553223(_0x18b5c1),focusOnRefElement(_0x386c10??_0x4b333a),setTimeout(()=>_0x18b5c1['shiftKey']?focusPreviousActiveElement():focusNextActiveElement()));};_0xbfc8df?_0xbfc8df?.(_0x382f38):_0x1f6c8a(_0x382f38);},[_0xbfc8df,_0x553223,_0x4b333a,_0x386c10]),_0x27089c=useCallback(_0x588915=>{closeOnClickAway&&!_0x4b333a?.['current']?.['contains'](_0x588915['target'])&&!_0x52f798['current']?.['contains'](_0x588915['target'])&&_0x553223(_0x588915);},[_0x553223,closeOnClickAway,_0x4b333a]),_0x539300=useCallback(()=>{_0x52f798['current']&&_0x45c4c8();},[_0x45c4c8]),[_0x5ad328,_0x3d03f7]=useState(_0x2f3424??null);_0x2f3424&&_0x5ad328&&!compareCoordinates(_0x2f3424,_0x5ad328)&&(_0x3d03f7(_0x2f3424),_0x45c4c8()),(useLayoutEffect(()=>{return _0x4b333a?.['current']&&(_0x98a4cf?_0x425221['addPopupToStack'](_0x209303['current'],_0x57ebdc=>{switch(_0x57ebdc['code']){case'Tab':{_0x1f05e7(_0x57ebdc);break;}case'Escape':{_0x553223(_0x57ebdc),focusOnRefElement(_0x386c10??_0x4b333a);break;}}}):_0x3d46c8['current']&&focusOnRefElement(_0x386c10??_0x4b333a)),!_0x5dd3ec['current']&&(_0x5dd3ec['current']=!![]),()=>{_0x5dd3ec['current']=![],_0x425221['removePopupFromStack'](_0x209303['current']);};},[_0x98a4cf,_0x425221,_0x4b333a]),useLayoutEffect(()=>{_0x98a4cf&&_0x45c4c8();},[_0x98a4cf,_0x45c4c8]),useEffect(()=>{if(_0x98a4cf){const _0x37f041=getPopoverSize(_0x52f798);_0x44ef54?.(_0x37f041);}},[_0x98a4cf,_0x44ef54]),useResizeObserver(_0x52f798,_0x45c4c8),useEffect(()=>{const _0x72c8d0=_0x58a650||document,_0x2ebdd5=_0x34eda4;if(_0x98a4cf){const _0x1e0b9e={};_0x1e0b9e['passive']=![],_0x72c8d0['addEventListener']('touchstart',_0x27089c,_0x1e0b9e),_0x72c8d0['addEventListener']('mousedown',_0x27089c);const _0xea2fe4={};_0xea2fe4['capture']=!![],_0x72c8d0['addEventListener']('contextmenu',_0x27089c,_0xea2fe4),_0x2ebdd5?.['addEventListener']('resize',_0x539300);}return()=>{_0x72c8d0['removeEventListener']('touchstart',_0x27089c),_0x72c8d0['removeEventListener']('mousedown',_0x27089c),_0x72c8d0['removeEventListener']('contextmenu',_0x27089c),_0x2ebdd5?.['removeEventListener']('resize',_0x539300);};},[_0x27089c,_0x539300,_0x98a4cf,_0x58a650,_0x34eda4]));const _0x28690e=_0x4b333a?.['current']||_0x2f3424;if(!_0x98a4cf||!_0x28690e)return null;const _0x34f93={..._0x44aa3f},_0x325a06=_0x34f93,_0x2c6bf6={'position':_0x325a06,'anchorRef':_0x4b333a,'className':_0x532409,'style':_0x1bc3db,'testId':_0x4195fe,'children':_0x28305e,'draggable':_0x48799a,'draggableHandlerClass':_0x405ee7,'onDragStop':_0x176a11,..._0xfbf0b},_0x642d2d=_0x2c6bf6,_0x2f4d61={..._0x642d2d};_0x2f4d61['ref']=_0x52f798;const _0x2512a7=_0x4819fa['createElement'](PopoverUI,_0x2f4d61);return _0xf949['createPortal'](_0x2512a7,_0x34eda4);});function getPopoverSize(_0x3916f1){const _0xf6ca18=_0xf949['findDOMNode'](_0x3916f1['current']);if(_0xf6ca18 instanceof HTMLElement)return _0xf6ca18['getBoundingClientRect']();const _0x47a477={};return _0x47a477['height']=0x0,_0x47a477['width']=0x0,_0x47a477;}function getAnchorProperties(_0x435f40,_0x2a9539){const _0x32dd91=_0x435f40['getBoundingClientRect'](),_0xbec9cb=_0x2a9539['getBoundingClientRect'](),_0x15a856={};return _0x15a856['left']=_0x32dd91['left']-_0xbec9cb['left'],_0x15a856['top']=_0x32dd91['top']-_0xbec9cb['top'],_0x15a856['height']=_0x32dd91['height'],_0x15a856['width']=_0x32dd91['width'],_0x15a856;}function getContainerProperties(_0x554135){const _0xf3b414={};return _0xf3b414['top']=_0x554135['clientTop'],_0xf3b414['left']=_0x554135['clientLeft'],_0xf3b414['width']=_0x554135['clientWidth'],_0xf3b414['height']=_0x554135['clientHeight'],_0xf3b414;}export default Popover;