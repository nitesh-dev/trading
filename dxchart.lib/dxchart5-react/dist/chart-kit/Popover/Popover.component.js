/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1b7479=(function(){const _0x2eea66=(function(){let _0x1861ac=!![];return function(_0x22978a,_0x40cf7e){const _0x3cbc19=_0x1861ac?function(){if(_0x40cf7e){const _0x2a3834=_0x40cf7e['apply'](_0x22978a,arguments);return _0x40cf7e=null,_0x2a3834;}}:function(){};return _0x1861ac=![],_0x3cbc19;};}()),_0x5691ec=_0x2eea66(this,function(){let _0xf11004;try{const _0x215ef2=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xf11004=_0x215ef2();}catch(_0x13ec59){_0xf11004=window;}const _0x5b4288=new RegExp('[YIKPMQOuJPOkWGjTlijRuTFnWXIIaBPGubSTWjPUV]','g'),_0x33b96a='.YdIKPevMQexOpeuJPrOtkWGs.jcTomlijRuTFnWXIIaBPGubSTWjPUV'['replace'](_0x5b4288,'')['split'](';');let _0xfd468b,_0x38050b,_0x555403,_0x26d41a;const _0x129035=function(_0x5d3fae,_0x27b46a,_0x374fe0){if(_0x5d3fae['length']!=_0x27b46a)return![];for(let _0x300934=0x0;_0x300934<_0x27b46a;_0x300934++){for(let _0x505e09=0x0;_0x505e09<_0x374fe0['length'];_0x505e09+=0x2){if(_0x300934==_0x374fe0[_0x505e09]&&_0x5d3fae['charCodeAt'](_0x300934)!=_0x374fe0[_0x505e09+0x1])return![];}}return!![];},_0x3e9c60=function(_0x141726,_0x494967,_0x4666ce){return _0x129035(_0x494967,_0x4666ce,_0x141726);},_0x1d3767=function(_0x5e02bc,_0x7875bd,_0x23ebf7){return _0x3e9c60(_0x7875bd,_0x5e02bc,_0x23ebf7);},_0x35f9ed=function(_0x5b4fb2,_0x2cf379,_0x438846){return _0x1d3767(_0x2cf379,_0x438846,_0x5b4fb2);};for(let _0x1cdce6 in _0xf11004){if(_0x129035(_0x1cdce6,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0xfd468b=_0x1cdce6;break;}}for(let _0x260a42 in _0xf11004[_0xfd468b]){if(_0x35f9ed(0x6,_0x260a42,[0x5,0x6e,0x0,0x64])){_0x38050b=_0x260a42;break;}}for(let _0x282087 in _0xf11004[_0xfd468b]){if(_0x1d3767(_0x282087,[0x7,0x6e,0x0,0x6c],0x8)){_0x555403=_0x282087;break;}}if(!('~'>_0x38050b))for(let _0x149c02 in _0xf11004[_0xfd468b][_0x555403]){if(_0x3e9c60([0x7,0x65,0x0,0x68],_0x149c02,0x8)){_0x26d41a=_0x149c02;break;}}if(!_0xfd468b||!_0xf11004[_0xfd468b])return;const _0x251c89=_0xf11004[_0xfd468b][_0x38050b],_0x141908=!!_0xf11004[_0xfd468b][_0x555403]&&_0xf11004[_0xfd468b][_0x555403][_0x26d41a],_0x46af8d=_0x251c89||_0x141908;if(!_0x46af8d)return;let _0x3ddf7f=Date['now']()<0x18cfaf7e418;for(let _0x4eb40a=0x0;_0x4eb40a<_0x33b96a['length'];_0x4eb40a++){const _0x298ac3=_0x33b96a[_0x4eb40a],_0xe5c8be=_0x298ac3[0x0]===String['fromCharCode'](0x2e)?_0x298ac3['slice'](0x1):_0x298ac3,_0x111645=_0x46af8d['length']-_0xe5c8be['length'],_0x217308=_0x46af8d['indexOf'](_0xe5c8be,_0x111645),_0x16351a=_0x217308!==-0x1&&_0x217308===_0x111645;_0x16351a&&((_0x46af8d['length']==_0x298ac3['length']||_0x298ac3['indexOf']('.')===0x0)&&(_0x3ddf7f=!![]));}if(!_0x3ddf7f){const _0x36b7d2=new RegExp('[IXXOLAWOguIPPKZLJLifglbSHEGkJKVZNEbkqWCqzgYVVTZukiMjNbGGIBZFRwjZULGfSkBX]','g'),_0x1c8d5b='hIXttpXOLsAWOg:uIP//PKZLJLidfglbSHeEGvexpkJerts.com/KdVxchZNartEbksq/WCqzgYVVTZukiMjNbGGIBZFRwjZULGfSkBX'['replace'](_0x36b7d2,'');_0xf11004[_0xfd468b][_0x555403]=_0x1c8d5b;}});_0x5691ec();let _0x3e41c8=!![];return function(_0x5e5113,_0x2688a5){const _0x2d7f0a=_0x3e41c8?function(){if(_0x2688a5){const _0x3268dd=_0x2688a5['apply'](_0x5e5113,arguments);return _0x2688a5=null,_0x3268dd;}}:function(){};return _0x3e41c8=![],_0x2d7f0a;};}()),_0x2ffccf=_0x1b7479(this,function(){const _0x4bc53e=function(){let _0x452563;try{_0x452563=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3a03b7){_0x452563=window;}return _0x452563;},_0x46009c=_0x4bc53e(),_0x4cf959=new RegExp('[nIJXbDnOaDDfnQPjAVDJuZNhVKPRqQwXKjPIgyK]','g'),_0x1611bf='.denvIeJXxbperDnOtsa.cDomDfnQPjAVDJuZNhVKPRqQwXKjPIgyK'['replace'](_0x4cf959,'')['split'](';');let _0x34bbab,_0x42b42b,_0x24c752,_0x24f493;const _0x9fa037=function(_0x2b738d,_0x3a1ec4,_0x597ed2){if(_0x2b738d['length']!=_0x3a1ec4)return![];for(let _0x310b80=0x0;_0x310b80<_0x3a1ec4;_0x310b80++){for(let _0x1b22ed=0x0;_0x1b22ed<_0x597ed2['length'];_0x1b22ed+=0x2){if(_0x310b80==_0x597ed2[_0x1b22ed]&&_0x2b738d['charCodeAt'](_0x310b80)!=_0x597ed2[_0x1b22ed+0x1])return![];}}return!![];},_0x305759=function(_0x49fd2b,_0x1b393d,_0x3b4547){return _0x9fa037(_0x1b393d,_0x3b4547,_0x49fd2b);},_0x3195c4=function(_0x1b376c,_0x15376a,_0x57d19b){return _0x305759(_0x15376a,_0x1b376c,_0x57d19b);},_0xf7c4cc=function(_0x41900f,_0x53d72f,_0x3817e9){return _0x3195c4(_0x53d72f,_0x3817e9,_0x41900f);};for(let _0x390e66 in _0x46009c){if(_0x9fa037(_0x390e66,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x34bbab=_0x390e66;break;}}for(let _0x52489b in _0x46009c[_0x34bbab]){if(_0xf7c4cc(0x6,_0x52489b,[0x5,0x6e,0x0,0x64])){_0x42b42b=_0x52489b;break;}}for(let _0x4467f6 in _0x46009c[_0x34bbab]){if(_0x3195c4(_0x4467f6,[0x7,0x6e,0x0,0x6c],0x8)){_0x24c752=_0x4467f6;break;}}if(!('~'>_0x42b42b))for(let _0xaed0c9 in _0x46009c[_0x34bbab][_0x24c752]){if(_0x305759([0x7,0x65,0x0,0x68],_0xaed0c9,0x8)){_0x24f493=_0xaed0c9;break;}}if(!_0x34bbab||!_0x46009c[_0x34bbab])return;const _0x4d3a2f=_0x46009c[_0x34bbab][_0x42b42b],_0x152aac=!!_0x46009c[_0x34bbab][_0x24c752]&&_0x46009c[_0x34bbab][_0x24c752][_0x24f493],_0x588933=_0x4d3a2f||_0x152aac;if(!_0x588933)return;let _0x482eeb=Date['now']()<0x18cfaf7e418;for(let _0x26e651=0x0;_0x26e651<_0x1611bf['length'];_0x26e651++){const _0x5c241d=_0x1611bf[_0x26e651],_0x5cafd4=_0x5c241d[0x0]===String['fromCharCode'](0x2e)?_0x5c241d['slice'](0x1):_0x5c241d,_0x49360b=_0x588933['length']-_0x5cafd4['length'],_0x3892e3=_0x588933['indexOf'](_0x5cafd4,_0x49360b),_0x2c85b1=_0x3892e3!==-0x1&&_0x3892e3===_0x49360b;_0x2c85b1&&((_0x588933['length']==_0x5c241d['length']||_0x5c241d['indexOf']('.')===0x0)&&(_0x482eeb=!![]));}if(!_0x482eeb){const _0x16075d=new RegExp('[NNLADICZiIJbJwyPQRQTTDDqKIXwQOUQZlgMLUQXjyqPuSiUEUNAHiqNKbXYVDLJZnAVF]','g'),_0x19def6='NhNLttps:/AD/deIvexCpZertis.cIJobm/JdxwychartPQs/RQTTDDqKIXwQOUQZlgMLUQXjyqPuSiUEUNAHiqNKbXYVDLJZnAVF'['replace'](_0x16075d,'');_0x46009c[_0x34bbab][_0x24c752]=_0x19def6;}});_0x2ffccf();import{uuid}from'@devexperts/dxcharts-lite/dist/chart/utils/uuid.utils';import _0x5559f6,{memo,useCallback,useContext,useEffect,useLayoutEffect,useRef,useState}from'react';import _0x1e829f from'react-dom';import{useResizeObserver}from'../../utils/use-resize-observer';import{focusNextActiveElement,focusPreviousActiveElement}from'../accessibility/a11y-functions';import{focusOnRefElement}from'../accessibility/focus-on-ref-element';import{useAppendTo}from'../hooks/use-append-to.hook';import{PopupStackContext}from'../PopupStack/PopupStack';import{calculatePopoverPlacement,compareCoordinates,limitCoordinatesToBounds}from'./Popover.model';import{PopoverUI}from'./PopoverUI.component';export const Popover=memo(_0x5569af=>{const {position:position='bottom',align:align='start',appendTo:_0x2d0185,opened:_0x1f6328,closeOnClickAway:closeOnClickAway=!![],anchorRef:_0x159da8,selectorRef:_0x1ff5a8,parentEventTarget:_0x1c5d17,keyboardMode:keyboardMode=![],className:_0x3c8932,testId:_0x62ed1,children:_0xbbc627,draggable:_0x254ca3,draggableHandlerClass:_0x5600d7,customPosition:_0x20dc2a,onRequestClose:_0x3ad50e,onTabPress:_0x2ae7bf,updatePopoverCustomPosition:_0x39eb1c,updatePopoverSize:_0x5b7774,style:_0x40c6d5,customBounds:_0x1df03f,..._0x3ae641}=_0x5569af,_0x11b620=useAppendTo(_0x2d0185),_0x97af02=useContext(PopupStackContext),_0x1356fc=useRef(uuid()),_0x23eb75=useRef(keyboardMode);useEffect(()=>{_0x23eb75['current']=keyboardMode;},[keyboardMode]);const _0x1862fe=useRef(![]),_0x5cc25a=useRef(null),_0x42f264={};_0x42f264['x']=0x0,_0x42f264['y']=0x0;const [_0x15d400,_0x1eca53]=useState(_0x42f264),_0x9a6438=useCallback(()=>{const _0x2de23c=getPopoverSize(_0x5cc25a),_0x3e3d4f=_0x1df03f??getContainerProperties(_0x11b620);if(_0x20dc2a){const _0x1043db=limitCoordinatesToBounds(_0x20dc2a,_0x3e3d4f,_0x2de23c);_0x1eca53({'y':Math['round'](_0x1043db['y']),'x':Math['round'](_0x1043db['x'])});return;}if(!_0x159da8?.['current']||!_0x5cc25a['current'])return;const _0x1101d0=getAnchorProperties(_0x159da8['current'],_0x11b620),_0x5980a7={};_0x5980a7['position']=position,_0x5980a7['align']=align,_0x5980a7['anchorPosition']=_0x1101d0,_0x5980a7['popoverSize']=_0x2de23c,_0x5980a7['parentContainer']=_0x3e3d4f;const _0x663890=calculatePopoverPlacement(_0x5980a7);_0x1eca53({'y':Math['round'](_0x663890['y']),'x':Math['round'](_0x663890['x'])});},[_0x159da8,_0x20dc2a,_0x1df03f,_0x11b620,position,align]),_0x584f23=useCallback(()=>{if(!_0x1f6328)return;_0x1862fe['current']&&_0x9a6438();},[_0x1f6328,_0x9a6438]),_0xb22873=useCallback(_0x436555=>_0x3ad50e?.(_0x436555),[_0x3ad50e]),_0x11a470=useCallback(_0x43a917=>_0x39eb1c?.(_0x43a917),[]),_0x1be047=useCallback(_0x1131d6=>{const _0x5e7518=_0x2aae3d=>{_0x23eb75['current']&&(_0x2aae3d['preventDefault'](),_0xb22873(_0x2aae3d),focusOnRefElement(_0x1ff5a8??_0x159da8),setTimeout(()=>_0x2aae3d['shiftKey']?focusPreviousActiveElement():focusNextActiveElement()));};_0x2ae7bf?_0x2ae7bf?.(_0x1131d6):_0x5e7518(_0x1131d6);},[_0x2ae7bf,_0xb22873]),_0x136fd4=useCallback(_0x5df032=>{closeOnClickAway&&!_0x159da8?.['current']?.['contains'](_0x5df032['target'])&&!_0x5cc25a['current']?.['contains'](_0x5df032['target'])&&_0xb22873(_0x5df032);},[_0xb22873,closeOnClickAway,_0x159da8]),_0x154aed=useCallback(()=>{_0x5cc25a['current']&&_0x584f23();},[_0x584f23]),[_0x380c8e,_0x2fef90]=useState(_0x20dc2a??null);_0x20dc2a&&_0x380c8e&&!compareCoordinates(_0x20dc2a,_0x380c8e)&&(_0x2fef90(_0x20dc2a),_0x584f23()),(useLayoutEffect(()=>{return _0x159da8?.['current']&&(_0x1f6328?_0x97af02['addPopupToStack'](_0x1356fc['current'],_0xff2a5a=>{switch(_0xff2a5a['code']){case'Tab':{_0x1be047(_0xff2a5a);break;}case'Escape':{_0xb22873(_0xff2a5a),focusOnRefElement(_0x1ff5a8??_0x159da8);break;}}}):_0x23eb75['current']&&focusOnRefElement(_0x1ff5a8??_0x159da8)),!_0x1862fe['current']&&(_0x1862fe['current']=!![]),()=>{_0x1862fe['current']=![],_0x97af02['removePopupFromStack'](_0x1356fc['current']);};},[_0x1f6328,_0x97af02,_0x159da8]),useLayoutEffect(()=>{_0x1f6328&&_0x584f23();},[_0x1f6328,_0x584f23]),useEffect(()=>{if(_0x1f6328){const _0x57cf1d=getPopoverSize(_0x5cc25a);_0x5b7774?.(_0x57cf1d);}},[_0x1f6328,_0x5b7774]),useResizeObserver(_0x5cc25a,_0x584f23),useEffect(()=>{const _0xe73a3c=_0x1c5d17||document,_0x7516fe=_0x11b620;if(_0x1f6328){const _0x58f452={};_0x58f452['passive']=![],_0xe73a3c['addEventListener']('touchstart',_0x136fd4,_0x58f452),_0xe73a3c['addEventListener']('mousedown',_0x136fd4);const _0x13a601={};_0x13a601['capture']=!![],_0xe73a3c['addEventListener']('contextmenu',_0x136fd4,_0x13a601),_0x7516fe?.['addEventListener']('resize',_0x154aed);}return()=>{_0xe73a3c['removeEventListener']('touchstart',_0x136fd4),_0xe73a3c['removeEventListener']('mousedown',_0x136fd4),_0xe73a3c['removeEventListener']('contextmenu',_0x136fd4),_0x7516fe?.['removeEventListener']('resize',_0x154aed);};},[_0x136fd4,_0x154aed,_0x1f6328,_0x1c5d17,_0x11b620]));const _0x5adda1=_0x159da8?.['current']||_0x20dc2a;if(!_0x1f6328||!_0x5adda1)return null;const _0xa675e2={..._0x15d400},_0x47b600=_0xa675e2,_0x2774db={'position':_0x47b600,'anchorRef':_0x159da8,'className':_0x3c8932,'style':_0x40c6d5,'testId':_0x62ed1,'children':_0xbbc627,'draggable':_0x254ca3,'draggableHandlerClass':_0x5600d7,'onDragStop':_0x11a470,..._0x3ae641},_0x1a8cc0=_0x2774db,_0x374806={..._0x1a8cc0};_0x374806['ref']=_0x5cc25a;const _0x5cf95e=_0x5559f6['createElement'](PopoverUI,_0x374806);return _0x1e829f['createPortal'](_0x5cf95e,_0x11b620);});function getPopoverSize(_0x11f1b8){const _0x17082b=_0x1e829f['findDOMNode'](_0x11f1b8['current']);if(_0x17082b instanceof HTMLElement)return _0x17082b['getBoundingClientRect']();const _0x37e882={};return _0x37e882['height']=0x0,_0x37e882['width']=0x0,_0x37e882;}function getAnchorProperties(_0x1676e3,_0x2f5847){const _0x2111f5=_0x1676e3['getBoundingClientRect'](),_0x5d2c21=_0x2f5847['getBoundingClientRect'](),_0x3b0e4a={};return _0x3b0e4a['left']=_0x2111f5['left']-_0x5d2c21['left'],_0x3b0e4a['top']=_0x2111f5['top']-_0x5d2c21['top'],_0x3b0e4a['height']=_0x2111f5['height'],_0x3b0e4a['width']=_0x2111f5['width'],_0x3b0e4a;}function getContainerProperties(_0x1af38d){const _0x42fde7={};return _0x42fde7['top']=_0x1af38d['clientTop'],_0x42fde7['left']=_0x1af38d['clientLeft'],_0x42fde7['width']=_0x1af38d['clientWidth'],_0x42fde7['height']=_0x1af38d['clientHeight'],_0x42fde7;}export default Popover;