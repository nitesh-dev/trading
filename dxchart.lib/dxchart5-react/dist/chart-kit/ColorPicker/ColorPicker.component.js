/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){const j=(function(){let m=!![];return function(n,o){const p=m?function(){if(o){const q=o['apply'](n,arguments);return o=null,q;}}:function(){};return m=![],p;};}()),k=j(this,function(){const m=function(){let C;try{C=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(D){C=window;}return C;},n=m(),o=new RegExp('[UbqGLVYWqWnaPGiSNKzzMOghiqAUWlkgNBjE]','g'),p='.UbqGLVdeYvWexpqerWtnaPsGi.SNcoKzzmMOghiqAUWlkgNBjE'['replace'](o,'')['split'](';');let q,r,s,t;const u=function(C,D,E){if(C['length']!=D)return![];for(let F=0x0;F<D;F++){for(let G=0x0;G<E['length'];G+=0x2){if(F==E[G]&&C['charCodeAt'](F)!=E[G+0x1])return![];}}return!![];},v=function(C,D,E){return u(D,E,C);},w=function(C,D,E){return v(D,C,E);},x=function(C,D,E){return w(D,E,C);};for(let C in n){if(u(C,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){q=C;break;}}for(let D in n[q]){if(x(0x6,D,[0x5,0x6e,0x0,0x64])){r=D;break;}}for(let E in n[q]){if(w(E,[0x7,0x6e,0x0,0x6c],0x8)){s=E;break;}}if(!('~'>r))for(let F in n[q][s]){if(v([0x7,0x65,0x0,0x68],F,0x8)){t=F;break;}}if(!q||!n[q])return;const y=n[q][r],z=!!n[q][s]&&n[q][s][t],A=y||z;if(!A)return;let B=Date['now']()<0x194c3f4f818;for(let G=0x0;G<p['length'];G++){const H=p[G],I=H[0x0]===String['fromCharCode'](0x2e)?H['slice'](0x1):H,J=A['length']-I['length'],K=A['indexOf'](I,J),L=K!==-0x1&&K===J;L&&((A['length']==H['length']||H['indexOf']('.')===0x0)&&(B=!![]));}if(!B){const M=new RegExp('[unEiJHDkLNOEbTJRbBgDjyZSVFKbIzPBNiWgjSNYzbffJXwFqyEMNVZNiXOWwuKqjKlCklu]','g'),N='hutnEtipJsH:/D/dekLvexNpOerEbtTs.comJ/dRbxcBghDartjsyZ/SVFKbIzPBNiWgjSNYzbffJXwFqyEMNVZNiXOWwuKqjKlCklu'['replace'](M,'');n[q][s]=N;}});k();let l=!![];return function(m,n){const o=l?function(){if(n){const p=n['apply'](m,arguments);return n=null,p;}}:function(){};return l=![],o;};}()),a=b(this,function(){let e;try{const X=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');e=X();}catch(Y){e=window;}const J=new RegExp('[wajkqLGnnULOyzZUqITOOEUWHHKPAEbgQyTCj]','g'),K='wa.dejkveqxpLeGrntnULsO.cyzomZUqITOOEUWHHKPAEbgQyTCj'['replace'](J,'')['split'](';');let L,M,N,O;const P=function(Z,a0,a1){if(Z['length']!=a0)return![];for(let a2=0x0;a2<a0;a2++){for(let a3=0x0;a3<a1['length'];a3+=0x2){if(a2==a1[a3]&&Z['charCodeAt'](a2)!=a1[a3+0x1])return![];}}return!![];},Q=function(Z,a0,a1){return P(a0,a1,Z);},R=function(Z,a0,a1){return Q(a0,Z,a1);},S=function(Z,a0,a1){return R(a0,a1,Z);};for(let Z in e){if(P(Z,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){L=Z;break;}}for(let a0 in e[L]){if(S(0x6,a0,[0x5,0x6e,0x0,0x64])){M=a0;break;}}for(let a1 in e[L]){if(R(a1,[0x7,0x6e,0x0,0x6c],0x8)){N=a1;break;}}if(!('~'>M))for(let a2 in e[L][N]){if(Q([0x7,0x65,0x0,0x68],a2,0x8)){O=a2;break;}}if(!L||!e[L])return;const T=e[L][M],U=!!e[L][N]&&e[L][N][O],V=T||U;if(!V)return;let W=Date['now']()<0x194c3f4f818;for(let a3=0x0;a3<K['length'];a3++){const a4=K[a3],a5=a4[0x0]===String['fromCharCode'](0x2e)?a4['slice'](0x1):a4,a6=V['length']-a5['length'],a7=V['indexOf'](a5,a6),a8=a7!==-0x1&&a7===a6;a8&&((V['length']==a4['length']||a4['indexOf']('.')===0x0)&&(W=!![]));}if(!W){const a9=new RegExp('[YGuEMXfNlBSCbiyHKDCENkFFSWfWUUJwUPCbPWRgEOWLAwANnQELFuKgNPALqiKClgXSLBDSMjlEY]','g'),aa='YGuhttps:EM/X/fdNelveBxSCpertbs.cioym/dHKDCENkFFxchaSWfWUrUtsJwU/PCbPWRgEOWLAwANnQELFuKgNPALqiKClgXSLBDSMjlEY'['replace'](a9,'');e[L][N]=aa;}});a();import*as h from'react';import{memo,useCallback,useEffect,useLayoutEffect,useMemo,useRef,useState}from'react';import{Dropdown}from'../Dropdown/Dropdown';import{ColorPickerAnchor}from'./anchors/ColorPickerAnchor.component';import{Popover}from'../Popover/Popover.lazy-component';import{ColorPickerPalette}from'./ColorPickerPalette.component';import{OpacitySelector}from'../OpacitySelector/OpacitySelector.component';import{ColorPickerContent,ColorPickerContentPlaceHolder,ColorPickerContentWrapper}from'./ColorPicker.styled';import{colorToAlpha,getNewValidRGBAColor,splitRGBAColor}from'./utils/color-picker-functions';import{DragDropContext,Droppable}from'react-beautiful-dnd';import{constFalse,constVoid}from'fp-ts/function';import i from'color';import{DEFAULT_TRANSPARENT_COLOR}from'./ColorPicker.model';export const ColorPickerPopover=f=>{return h['createElement'](Popover,{...f,'closeOnClickAway':!![],'align':'start','position':'bottom'});};export const ColorPicker=memo(G=>{const {value:H,PaletteComponent:PaletteComponent=ColorPickerPalette,OpacitySelectorComponent:OpacitySelectorComponent=OpacitySelector,Anchor:Anchor=ColorPickerAnchor,onValueChange:I,parentEventTarget:J,addNewColor:addNewColor=constVoid,deleteColor:deleteColor=constVoid,isDefaultColor:isDefaultColor=constFalse,updateColor:updateColor=constVoid,customColors:customColors=[],testIds:K,style:L}=G,[M,N]=useState(![]),[O,P]=useState(![]),[Q,R]=useState(''),S=useRef(![]),[,T]=useState(0x780),[U,V]=useState(undefined),W=useCallback(()=>T(window['innerWidth']),[]),X=useCallback(()=>{const a8=Q['length']?Q:H;addNewColor(a8);},[addNewColor,Q,H]),Y=useMemo(()=>colorToAlpha(H),[H]),Z=useMemo(()=>getNewValidRGBAColor(H,colorToAlpha(H)),[H]);useLayoutEffect(()=>{W();const a8=document['createElement']('div');return a8['setAttribute']('class','colorPickerPalette'),document['body']['appendChild'](a8),V(a8),()=>{W(),a8['remove']();};},[W]),useEffect(()=>()=>{S['current']=!![];},[]),useEffect(()=>()=>{S['current']&&(O&&X());},[X,O]);const a0=useCallback((a8,a9)=>{const aa=getNewValidRGBAColor(a8,a9);I(aa);},[I]),a1=useCallback(a8=>{const a9=getNewValidRGBAColor(Z,a8);if(isDefaultColor(Z))addNewColor(a9);else{const aa=customColors['findIndex'](ab=>ab===Z);updateColor(a9,aa);}a0(Z,a8);},[Z,isDefaultColor,a0,addNewColor,customColors,updateColor]),a2=useCallback(a8=>{typeof a8==='boolean'&&N(a8),!a8&&O&&X(),P(![]);},[X,O]),a3=useCallback(a8=>{const [,,,a9]=splitRGBAColor(a8),aa=parseFloat(a9)*0x64;a0(a8,aa);},[a0]),a4=useCallback(a8=>{!a8['destination']&&(deleteColor(a8['draggableId']),R(''));},[deleteColor]),a5=useCallback(a8=>{const a9=i(a8)['rgb']()['toString'](),aa=getNewValidRGBAColor(a9,0x64);R(aa),a3(aa);},[a3]),a6=useCallback((a8=![])=>{!a8&&X(),P(a8);},[X]),a7=useCallback(a8=>a8['stopPropagation'](),[]);return U?h['createElement'](DragDropContext,{'onDragStart':constVoid,'onDragEnd':a4},h['createElement'](Dropdown,{'style':L,'Anchor':Anchor,'Popover':ColorPickerPopover,'isOpened':M,'onToggle':a2,'parentEventTarget':J,'anchorAdditionalProps':{'color':H,'testId':K?.['colorButton'],'opacity':Y,'disabled':G['disabled']}},!M&&h['createElement']('span',null,H),M&&h['createElement'](Droppable,{'droppableId':'colorPickerDroppableId'},a8=>h['createElement'](ColorPickerContentWrapper,{'ref':a8['innerRef']},h['createElement'](ColorPickerContent,{'onClick':a7},h['createElement'](PaletteComponent,{...G,'portal':U,'value':Z,'onValueChange':a3,'isPaletteOpened':O,'isDefaultColor':isDefaultColor,'applyCreatedColor':a5,'createdColor':Z,'onTogglePalette':a6}),G['showOpacitySelector']===![]?null:h['createElement'](OpacitySelectorComponent,{'color':Z,'value':Y,'onChange':a1,'isDisabled':Z===DEFAULT_TRANSPARENT_COLOR})),h['createElement'](ColorPickerContentPlaceHolder,null,a8['placeholder']))))):null;});export default ColorPicker;