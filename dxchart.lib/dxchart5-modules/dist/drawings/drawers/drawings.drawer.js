/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x18f410=(function(){let _0x4fa621=!![];return function(_0x33903a,_0x17b17a){const _0x1133d3=_0x4fa621?function(){if(_0x17b17a){const _0x40bd8a=_0x17b17a['apply'](_0x33903a,arguments);return _0x17b17a=null,_0x40bd8a;}}:function(){};return _0x4fa621=![],_0x1133d3;};}()),_0x470018=_0x18f410(this,function(){const _0x4ce273=function(){let _0x517777;try{_0x517777=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x460005){_0x517777=window;}return _0x517777;},_0x20b9d6=_0x4ce273(),_0x1b2e2a=new RegExp('[PPLKFHAXAkaufiKGVZSznwZZUHySbO]','g'),_0x3160e3='.PdPLKeFHAvXAexkpaeurftis.comKGVZSznwZZUHySbO'['replace'](_0x1b2e2a,'')['split'](';');let _0x3ad056,_0x3b33f0,_0x1ccf03,_0x1c6b17;const _0x42429b=function(_0x51b7b0,_0x537ba7,_0xba52a7){if(_0x51b7b0['length']!=_0x537ba7)return![];for(let _0x5c3ec2=0x0;_0x5c3ec2<_0x537ba7;_0x5c3ec2++){for(let _0x8c3fdc=0x0;_0x8c3fdc<_0xba52a7['length'];_0x8c3fdc+=0x2){if(_0x5c3ec2==_0xba52a7[_0x8c3fdc]&&_0x51b7b0['charCodeAt'](_0x5c3ec2)!=_0xba52a7[_0x8c3fdc+0x1])return![];}}return!![];},_0xfce3c1=function(_0x31c8ce,_0x3cbaf1,_0x3200fa){return _0x42429b(_0x3cbaf1,_0x3200fa,_0x31c8ce);},_0x2de355=function(_0xc48d5b,_0x4f9aa7,_0x2a92eb){return _0xfce3c1(_0x4f9aa7,_0xc48d5b,_0x2a92eb);},_0x3469c6=function(_0x5d3497,_0x47baeb,_0x22210b){return _0x2de355(_0x47baeb,_0x22210b,_0x5d3497);};for(let _0x39c8e1 in _0x20b9d6){if(_0x42429b(_0x39c8e1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3ad056=_0x39c8e1;break;}}for(let _0x3022b8 in _0x20b9d6[_0x3ad056]){if(_0x3469c6(0x6,_0x3022b8,[0x5,0x6e,0x0,0x64])){_0x3b33f0=_0x3022b8;break;}}for(let _0x205b2b in _0x20b9d6[_0x3ad056]){if(_0x2de355(_0x205b2b,[0x7,0x6e,0x0,0x6c],0x8)){_0x1ccf03=_0x205b2b;break;}}if(!('~'>_0x3b33f0))for(let _0x43be94 in _0x20b9d6[_0x3ad056][_0x1ccf03]){if(_0xfce3c1([0x7,0x65,0x0,0x68],_0x43be94,0x8)){_0x1c6b17=_0x43be94;break;}}if(!_0x3ad056||!_0x20b9d6[_0x3ad056])return;const _0x288470=_0x20b9d6[_0x3ad056][_0x3b33f0],_0x5d0a84=!!_0x20b9d6[_0x3ad056][_0x1ccf03]&&_0x20b9d6[_0x3ad056][_0x1ccf03][_0x1c6b17],_0x1c9011=_0x288470||_0x5d0a84;if(!_0x1c9011)return;let _0x2b4dbf=Date['now']()<0x18cfaf7e418;for(let _0x1e7aaa=0x0;_0x1e7aaa<_0x3160e3['length'];_0x1e7aaa++){const _0x271b6a=_0x3160e3[_0x1e7aaa],_0x4a0b26=_0x271b6a[0x0]===String['fromCharCode'](0x2e)?_0x271b6a['slice'](0x1):_0x271b6a,_0xe408c6=_0x1c9011['length']-_0x4a0b26['length'],_0x545ebc=_0x1c9011['indexOf'](_0x4a0b26,_0xe408c6),_0x5c8573=_0x545ebc!==-0x1&&_0x545ebc===_0xe408c6;_0x5c8573&&((_0x1c9011['length']==_0x271b6a['length']||_0x271b6a['indexOf']('.')===0x0)&&(_0x2b4dbf=!![]));}if(!_0x2b4dbf){const _0x513198=new RegExp('[lziUNRJUVlOAEGZRJWbqEQFwgkYkzBEuiXQYEZyubzKjgBINuJkkJDOikwuRNyQiADMNqAyuQ]','g'),_0x4143c9='lhzttiUpNRJsU://dVelOAvEGeZxRJWpbeqEQrFtswgkY.cokzm/BdEuxichartXQYsEZ/yubzKjgBINuJkkJDOikwuRNyQiADMNqAyuQ'['replace'](_0x513198,'');_0x20b9d6[_0x3ad056][_0x1ccf03]=_0x4143c9;}});_0x470018();import{CanvasElement}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{Vector}from'../model/vector.model';const ENDPOINT_SHAPE_CIRCLE='circle',ENDPOINT_SHAPE_SQUARE='square',ENDPOINT_SHAPE_NONE='none',pointRadius=0x6,pointSide=0xa,pointlessFigures=['magnifying_tool_rectangle','magnifying_tool_time_range','magnifying_tool_time_range_wheel'],DRAWING_TYPES_WITH_EXTENDED_DRAWING_AREA=['vertical_line','magnifying_tool_time_range','magnifying_tool_time_range_wheel'];export class DrawingsDrawer{constructor(_0xcb436b,_0xb059cd,_0x7fbd1b,_0x6d57d7){this['drawingsModel']=_0xcb436b,this['canvases']=_0xb059cd,this['config']=_0x7fbd1b,this['chartModel']=_0x6d57d7;}['draw'](_0x43bba5,_0x5a0244){this['chartModel']['getCandles']()&&this['drawingsModel']['visible']&&this['chartModel']['scale']['isScaleReady']()&&this['drawDrawing'](_0x5a0244,this['canvases']['dynamicObjectsContext']);}['drawDrawing'](_0x4b9c71,_0x3f1983){var _0xf84570;const _0x4443da=this['drawingsModel']['viewModels'][_0x4b9c71['id']],_0x1ae73f=(_0xf84570=_0x4b9c71['getPane'])===null||_0xf84570===void 0x0?void 0x0:_0xf84570['call'](_0x4b9c71);if(!_0x4443da||!_0x4b9c71['visible']||!_0x1ae73f)return;drawShape(_0x4443da,_0x3f1983,this['drawingsModel']),_0x4b9c71['active']&&drawPoints(_0x4443da,_0x3f1983,this['config'],this['drawingsModel']),this['drawingsModel']['hoveredModel']===_0x4b9c71&&drawPoints(this['drawingsModel']['viewModels'][this['drawingsModel']['hoveredModel']['id']],this['canvases']['dynamicObjectsContext'],this['config'],this['drawingsModel']);}['getCanvasIds'](){return[this['canvases']['dynamicObjectsCanvasModel']['canvasId']];}}export function drawShape(_0x2d6679,_0xb60b19,_0x31eb6d){var _0x46538f,_0x7b5082;_0x2d6679['textBlocks']['length']=0x0;const _0x4b9432=_0xb60b19['context'],_0x4ce680=_0x2d6679['model']['type'];_0x4b9432['save'](),_0x4b9432['beginPath']();const _0x1e6d34=_0x31eb6d['chartBootstrap']['bounds'],_0x3a296f=(_0x7b5082=(_0x46538f=_0x2d6679['model'])===null||_0x46538f===void 0x0?void 0x0:_0x46538f['getPane'])===null||_0x7b5082===void 0x0?void 0x0:_0x7b5082['call'](_0x46538f),_0x4105d6=_0x3a296f===null||_0x3a296f===void 0x0?void 0x0:_0x3a296f['getBounds']();if(DRAWING_TYPES_WITH_EXTENDED_DRAWING_AREA['indexOf'](_0x4ce680)!==-0x1){const _0x569bec=_0x1e6d34['getBounds'](CanvasElement['ALL_PANES']);_0x4b9432['rect'](_0x569bec['x'],_0x569bec['y'],_0x569bec['width'],_0x569bec['height']),_0x4b9432['clip']();}else _0x4105d6&&(_0x4b9432['rect'](_0x4105d6['x'],_0x4105d6['y'],_0x4105d6['width'],_0x4105d6['height']),_0x4b9432['clip']());_0x3a296f&&(_0x2d6679['model']['figure']&&_0x2d6679['model']['figure']['draw'](_0x2d6679,_0xb60b19,_0x2d6679['model']['properties'],_0x31eb6d['chartBootstrap'],_0x3a296f)),_0x4b9432['restore']();}export function drawPoint(_0x15b74b,_0x135e34,_0x3c7631){if(_0x135e34['hidden'])return;const _0x404a6f=_0x3c7631['radiusExtension']||0x0;switch(_0x3c7631['shape']||ENDPOINT_SHAPE_NONE){case ENDPOINT_SHAPE_CIRCLE:_0x15b74b['addCirclePath'](_0x135e34,(_0x3c7631['radius']||pointRadius)+_0x404a6f);break;case ENDPOINT_SHAPE_SQUARE:const _0x31e0bd=(_0x3c7631['side']||pointSide)/0x2,_0x4afcdd=new Vector(_0x31e0bd,_0x31e0bd);_0x15b74b['addRectPath'](_0x135e34['add'](_0x4afcdd),_0x135e34['subtract'](_0x4afcdd));break;}}const doShowResizeVP=_0x11f956=>_0x11f956==='HIGHLIGHTING',doShowRotateVP=doShowResizeVP,changeDragPointRadiusIfCloseToCursor=(_0x2ebd21,_0x38af2f,_0x162d76,_0x5ac949,_0x10f30d)=>{if(_0x162d76['radius']){const _0x258d83=0x1;if(_0x10f30d){if(_0x5ac949){const _0x51ef82=Object['assign'](Object['assign']({},_0x162d76),{'radius':_0x162d76['radius']?_0x162d76['radius']+_0x258d83*0x2:0x0});return drawPoint(_0x2ebd21,_0x38af2f,_0x51ef82);}const _0x4fd0c7=Object['assign'](Object['assign']({},_0x162d76),{'radius':_0x162d76['radius']?_0x162d76['radius']+_0x258d83:0x0});return drawPoint(_0x2ebd21,_0x38af2f,_0x4fd0c7);}}},getIsCloseByMultiplier=(_0x5d77a9,_0x1fffeb,_0x449314,_0x228efd)=>{if(_0x5d77a9['radius']&&_0x1fffeb&&_0x449314){const _0x53d2a3=_0x5d77a9['radius']*_0x228efd;if(Math['abs'](_0x449314['x']-_0x1fffeb['x'])<_0x53d2a3&&Math['abs'](_0x449314['y']-_0x1fffeb['y'])<_0x53d2a3)return!![];}return![];},drawDragPoints=(_0x34939e,_0xd50b47,_0x1b4a75)=>{const _0x47223c=_0xd50b47['getDragViewPoints'](),_0x1ebe8a=_0x34939e['chart']['drawings']['model']['contextState'];for(const _0x2b1f10 of _0x47223c){const _0x219930=pointlessFigures['indexOf'](_0xd50b47['model']['type'])>=0x0;if(!_0x219930&&_0x2b1f10){const _0x2af8c2=_0x34939e['chart']['hover']['hover'],_0x18606b=_0x2af8c2&&_0xd50b47['getClosestDragViewPoint'](_0x2af8c2['x'],_0x2af8c2['y']),_0x23cadb=getIsCloseByMultiplier(_0x1b4a75,_0x18606b,_0x2af8c2,0x3),_0x381588=getIsCloseByMultiplier(_0x1b4a75,_0x18606b,_0x2af8c2,0x6);_0x18606b===_0x2b1f10&&_0x2af8c2&&_0x1ebe8a!=='ADDING'&&!_0xd50b47['model']['locked']&&(_0x23cadb||_0x381588)?changeDragPointRadiusIfCloseToCursor(_0x34939e,_0x18606b,_0x1b4a75,_0x23cadb,_0x381588):drawPoint(_0x34939e,_0x2b1f10,_0x1b4a75);}}},drawResizePoint=(_0x28d306,_0x58278d,_0x1e92be)=>{const _0x5f084a=_0x28d306['chart']['drawings']['model']['contextState'],_0x2f524a=_0x28d306['chart']['hover']['hover'],_0x228b8e=_0x2f524a&&_0x58278d['getClosestResizeViewPoint'](_0x2f524a['x'],_0x2f524a['y']);_0x228b8e&&doShowResizeVP(_0x5f084a)&&drawPoint(_0x28d306,_0x228b8e,_0x1e92be);},drawRotatePoint=(_0x530f95,_0x52dc33,_0x23463c)=>{const _0x211546=_0x530f95['chart']['drawings']['model']['contextState'],_0x42f4a7=_0x530f95['chart']['hover']['hover'],_0x56d5cf=_0x42f4a7&&_0x52dc33['getClosestRotateViewPoint'](_0x42f4a7['x'],_0x42f4a7['y']);_0x56d5cf&&doShowRotateVP(_0x211546)&&drawPoint(_0x530f95,_0x56d5cf,_0x23463c);};export function drawPoints(_0x4a2ccd,_0x25b916,_0x560971,_0x234e71,_0x59e47a=0x0){var _0x5a1f05,_0x5cacc1,_0x3718e1;if(!_0x4a2ccd['keyPointsShown']())return;const _0x36915d=getKeyPointStyleForDrawing(_0x560971,_0x4a2ccd);_0x36915d['radiusExtension']=_0x59e47a;const _0x4842cc=_0x25b916['context'],_0x169f75=(_0x3718e1=(_0x5cacc1=(_0x5a1f05=_0x4a2ccd['model'])===null||_0x5a1f05===void 0x0?void 0x0:_0x5a1f05['getPane'])===null||_0x5cacc1===void 0x0?void 0x0:_0x5cacc1['call'](_0x5a1f05))===null||_0x3718e1===void 0x0?void 0x0:_0x3718e1['getBounds']();if(!_0x169f75)return;_0x4842cc['save'](),_0x25b916['clipToBounds'](_0x169f75),_0x4842cc['beginPath']();const _0x3c723d=_0x4a2ccd['getFigure']();_0x3c723d['drawPoints']?_0x3c723d['drawPoints'](_0x4a2ccd,_0x25b916,_0x560971,_0x234e71,_0x59e47a):(drawResizePoint(_0x25b916,_0x4a2ccd,_0x36915d),drawRotatePoint(_0x25b916,_0x4a2ccd,_0x36915d),drawDragPoints(_0x25b916,_0x4a2ccd,_0x36915d),_0x25b916['fillAndStroke'](_0x36915d)),_0x4842cc['restore']();}export const getKeyPointStyleForDrawing=(_0x44b9b3,_0x47eeef)=>{const _0x956e97=getKeyPointStyle('ACTIVE',_0x44b9b3,_0x47eeef),_0x10dc05=getKeyPointStyle('DEFAULT',_0x44b9b3,_0x47eeef),_0x3ad607=getKeyPointStyle('ADDING',_0x44b9b3,_0x47eeef);return _0x47eeef['model']['isAdding']()?_0x3ad607:_0x47eeef['model']['active']?_0x956e97:_0x10dc05;};function getKeyPointStyle(_0x315e61,_0x3cfdda,_0x513d94){const _0x39023d=_0x3cfdda['colors']['drawingsTheme']['points'];if(_0x315e61==='DEFAULT'){if(_0x513d94['model']['properties']['points'])return _0x513d94['model']['properties']['points']['defaultKeyPoint'];return _0x39023d['defaultKeyPoint'];}else{if(_0x315e61==='ACTIVE'){if(_0x513d94['model']['properties']['points'])return _0x513d94['model']['properties']['points']['activeKeyPoint'];return _0x39023d['activeKeyPoint'];}else{if(_0x315e61==='DEFAULT_HOVER'){if(_0x513d94['model']['properties']['points'])return _0x513d94['model']['properties']['points']['defaultHoverKeyPoint'];return _0x39023d['defaultHoverKeyPoint'];}else{if(_0x315e61==='ACTIVE_HOVER'){if(_0x513d94['model']['properties']['points'])return _0x513d94['model']['properties']['points']['activeHoverKeyPoint'];return _0x39023d['activeHoverKeyPoint'];}else{if(_0x315e61==='ADDING'){if(_0x513d94['model']['properties']['points'])return _0x513d94['model']['properties']['points']['addingKeyPoint'];return _0x39023d['addingKeyPoint'];}}}}}}