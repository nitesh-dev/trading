/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x531e5b=(function(){let _0x29d0d6=!![];return function(_0x2d7366,_0x19a8b7){const _0x140f78=_0x29d0d6?function(){if(_0x19a8b7){const _0x1c590c=_0x19a8b7['apply'](_0x2d7366,arguments);return _0x19a8b7=null,_0x1c590c;}}:function(){};return _0x29d0d6=![],_0x140f78;};}()),_0x8295fa=_0x531e5b(this,function(){let _0x1364fd;try{const _0x50af35=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1364fd=_0x50af35();}catch(_0x104e63){_0x1364fd=window;}const _0x175dc9=new RegExp('[bQNnRbUPLNbCnqGRlYwyhLTPWCXzibPqAq]','g'),_0x22f657='bQ.devNexnRbpUertsP.LcomNbCnqGRlYwyhLTPWCXzibPqAq'['replace'](_0x175dc9,'')['split'](';');let _0x229079,_0x31f203,_0xefc4,_0xc634ba;const _0x1c7c71=function(_0x437ab0,_0x40704a,_0xa644c7){if(_0x437ab0['length']!=_0x40704a)return![];for(let _0x14fd2e=0x0;_0x14fd2e<_0x40704a;_0x14fd2e++){for(let _0x331c19=0x0;_0x331c19<_0xa644c7['length'];_0x331c19+=0x2){if(_0x14fd2e==_0xa644c7[_0x331c19]&&_0x437ab0['charCodeAt'](_0x14fd2e)!=_0xa644c7[_0x331c19+0x1])return![];}}return!![];},_0x2d4f37=function(_0x28f86d,_0x4e1478,_0x4ef8fa){return _0x1c7c71(_0x4e1478,_0x4ef8fa,_0x28f86d);},_0x2401ac=function(_0x34028d,_0x7a712,_0x10047c){return _0x2d4f37(_0x7a712,_0x34028d,_0x10047c);},_0x108aba=function(_0x2c9512,_0x1ff6e2,_0x3f0bc4){return _0x2401ac(_0x1ff6e2,_0x3f0bc4,_0x2c9512);};for(let _0x4e0571 in _0x1364fd){if(_0x1c7c71(_0x4e0571,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x229079=_0x4e0571;break;}}for(let _0x515165 in _0x1364fd[_0x229079]){if(_0x108aba(0x6,_0x515165,[0x5,0x6e,0x0,0x64])){_0x31f203=_0x515165;break;}}for(let _0x415730 in _0x1364fd[_0x229079]){if(_0x2401ac(_0x415730,[0x7,0x6e,0x0,0x6c],0x8)){_0xefc4=_0x415730;break;}}if(!('~'>_0x31f203))for(let _0x190d58 in _0x1364fd[_0x229079][_0xefc4]){if(_0x2d4f37([0x7,0x65,0x0,0x68],_0x190d58,0x8)){_0xc634ba=_0x190d58;break;}}if(!_0x229079||!_0x1364fd[_0x229079])return;const _0x4f69ec=_0x1364fd[_0x229079][_0x31f203],_0xf715ec=!!_0x1364fd[_0x229079][_0xefc4]&&_0x1364fd[_0x229079][_0xefc4][_0xc634ba],_0x457fc0=_0x4f69ec||_0xf715ec;if(!_0x457fc0)return;let _0x1a1194=Date['now']()<0x18d4310ec18;for(let _0x2b0ab7=0x0;_0x2b0ab7<_0x22f657['length'];_0x2b0ab7++){const _0x4df053=_0x22f657[_0x2b0ab7],_0x11f0cc=_0x4df053[0x0]===String['fromCharCode'](0x2e)?_0x4df053['slice'](0x1):_0x4df053,_0x5e34e1=_0x457fc0['length']-_0x11f0cc['length'],_0x16ea95=_0x457fc0['indexOf'](_0x11f0cc,_0x5e34e1),_0x63a746=_0x16ea95!==-0x1&&_0x16ea95===_0x5e34e1;_0x63a746&&((_0x457fc0['length']==_0x4df053['length']||_0x4df053['indexOf']('.')===0x0)&&(_0x1a1194=!![]));}if(!_0x1a1194){const _0x185652=new RegExp('[AbBRMTRzCLAnbVUjBHNCylNEPySquHkHKEEGCzbCwIRXOkZKyNYgDLFLzLBXDOALigQJ]','g'),_0x347da8='AbBhRMtTRztCpLs:/A/dnebveVUxjpBerts.Hcom/NdxcChayrlNtsE/PySquHkHKEEGCzbCwIRXOkZKyNYgDLFLzLBXDOALigQJ'['replace'](_0x185652,'');_0x1364fd[_0x229079][_0xefc4]=_0x347da8;}});_0x8295fa();import{AbstractFigure}from'../figures/model/figure.model';import{Vector}from'../model/vector.model';import{adjustVectorToCrispCoords,getLineProperties,getSortedIndexPoints}from'../figures/utils/utils';import{setMagnifiedScale}from'./MagnifyingToolScalingFunction';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';export class MagnifyingToolRectangle extends AbstractFigure{constructor(_0x4ee516=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x4ee516,this['points']=0x2,this['type']='magnifying_tool_rectangle',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds,this['beforeCommit']=(_0x1d43b3,_0x3251ab)=>{return _0x3251ab&&_0x1d43b3['model']['cachedPoints']['length']===this['points']&&setMagnifiedScale(_0x1d43b3,'xy',_0x3251ab['chartBootstrap'],_0x3251ab),!![];};}['draw'](_0x214d1a,_0x16b0dd,_0x1bc8e5,_0x574e48){const _0x4f5f08=getLineProperties(_0x214d1a['model'],_0x1bc8e5),_0x23977c=_0x214d1a['keyViewPoints']['map'](_0x5c8b9d=>{return adjustVectorToCrispCoords(_0x5c8b9d,_0x4f5f08['lineWidth']);});if(_0x23977c['length']===0x2){_0x1bc8e5['background']&&(_0x16b0dd['prepareFill'](_0x1bc8e5['background']),_0x16b0dd['beginPath'](),_0x16b0dd['addRectPath'](_0x23977c[0x0],_0x23977c[0x1]),_0x16b0dd['fill']());_0x16b0dd['beginPath'](),_0x16b0dd['addRectPath'](_0x23977c[0x0],_0x23977c[0x1]),_0x16b0dd['prepareStroke'](_0x4f5f08),_0x16b0dd['stroke']();const _0x2f8f77=getSortedIndexPoints(_0x214d1a),_0x320616=_0x2f8f77[0x0],_0x21f0d7=_0x2f8f77[0x1],_0x508467=_0x574e48['chartModel']['getCandles']()['slice'](_0x320616['index'],_0x21f0d7['index']+0x1);if(_0x508467['length']===0x0){window['console']['warn']('Attempt\x20to\x20draw\x20time\x20range\x20on\x20zero\x20candles!\x20Stopping...');return;}const _0x5b4427=getSortedRectPoints(_0x23977c);drawAxisProjection(_0x16b0dd,_0x5b4427['rightTop'],_0x1bc8e5['projection'],!![]),drawAxisProjection(_0x16b0dd,_0x5b4427['rightBottom'],_0x1bc8e5['projection'],!![]),drawAxisProjection(_0x16b0dd,_0x5b4427['rightBottom'],_0x1bc8e5['projection'],![]),drawAxisProjection(_0x16b0dd,_0x5b4427['leftBottom'],_0x1bc8e5['projection'],![]);}}}const getSortedRectPoints=_0x5b7aa7=>{const _0x44fa0a=_0x5b7aa7['slice'](0x0,0x2);_0x44fa0a['push'](new Vector(_0x5b7aa7[0x0]['x'],_0x5b7aa7[0x1]['y'])),_0x44fa0a['push'](new Vector(_0x5b7aa7[0x1]['x'],_0x5b7aa7[0x0]['y'])),_0x44fa0a['sort']((_0x5accfa,_0x499f40)=>{const _0x46cfa0=_0x5accfa['x']-_0x499f40['x'];return _0x46cfa0!==0x0?_0x46cfa0:_0x5accfa['y']-_0x499f40['y'];});const _0x11a0fe={};return _0x11a0fe['leftTop']=_0x44fa0a[0x0],_0x11a0fe['leftBottom']=_0x44fa0a[0x1],_0x11a0fe['rightTop']=_0x44fa0a[0x2],_0x11a0fe['rightBottom']=_0x44fa0a[0x3],_0x11a0fe;},drawAxisProjection=(_0x16e397,_0x1bf605,_0x4dca61,_0x352e44)=>{var _0x537aa0;_0x16e397['prepareStroke'](_0x4dca61),_0x16e397['beginPath']();const _0x465f2c=_0x1bf605,_0x52ae17=_0x465f2c['copy']();_0x352e44?_0x52ae17['x']+=0x1:_0x52ae17['y']+=0x1;const _0x327b62=(_0x537aa0=_0x4dca61['lineWidth'])!==null&&_0x537aa0!==void 0x0?_0x537aa0:0x0;_0x16e397['addRayPath'](adjustVectorToCrispCoords(_0x465f2c,_0x327b62),adjustVectorToCrispCoords(_0x52ae17,_0x327b62)),_0x16e397['stroke']();};