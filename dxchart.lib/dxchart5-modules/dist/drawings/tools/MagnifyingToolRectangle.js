/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x578b5b=(function(){let _0x3041ef=!![];return function(_0x276239,_0x135f3e){const _0x26e592=_0x3041ef?function(){if(_0x135f3e){const _0x27f177=_0x135f3e['apply'](_0x276239,arguments);return _0x135f3e=null,_0x27f177;}}:function(){};return _0x3041ef=![],_0x26e592;};}()),_0x3f66f7=_0x578b5b(this,function(){const _0x533981=function(){let _0x11f881;try{_0x11f881=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xb3c1c8){_0x11f881=window;}return _0x11f881;},_0x3e887a=_0x533981(),_0x9a3e5=new RegExp('[SgzYEfzFEgqaHGzjwUSufgRZUGIPOSVNzjKLTUHSN]','g'),_0x461632='S.dgevzYEexpertfs.zFEcogqmaHGzjwUSufgRZUGIPOSVNzjKLTUHSN'['replace'](_0x9a3e5,'')['split'](';');let _0x395e87,_0x1a7adf,_0x36725c,_0x10c2ca;const _0x1665fa=function(_0x4889df,_0x50f856,_0x2d094c){if(_0x4889df['length']!=_0x50f856)return![];for(let _0x34ce1c=0x0;_0x34ce1c<_0x50f856;_0x34ce1c++){for(let _0x137ac3=0x0;_0x137ac3<_0x2d094c['length'];_0x137ac3+=0x2){if(_0x34ce1c==_0x2d094c[_0x137ac3]&&_0x4889df['charCodeAt'](_0x34ce1c)!=_0x2d094c[_0x137ac3+0x1])return![];}}return!![];},_0x248406=function(_0x99645d,_0x58bedb,_0x4a434a){return _0x1665fa(_0x58bedb,_0x4a434a,_0x99645d);},_0x39d91e=function(_0x3daebc,_0x30af01,_0x422e1d){return _0x248406(_0x30af01,_0x3daebc,_0x422e1d);},_0x58f566=function(_0x16c07f,_0x33cb6c,_0x8572f6){return _0x39d91e(_0x33cb6c,_0x8572f6,_0x16c07f);};for(let _0x394bf3 in _0x3e887a){if(_0x1665fa(_0x394bf3,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x395e87=_0x394bf3;break;}}for(let _0x3a5c69 in _0x3e887a[_0x395e87]){if(_0x58f566(0x6,_0x3a5c69,[0x5,0x6e,0x0,0x64])){_0x1a7adf=_0x3a5c69;break;}}for(let _0x24e63f in _0x3e887a[_0x395e87]){if(_0x39d91e(_0x24e63f,[0x7,0x6e,0x0,0x6c],0x8)){_0x36725c=_0x24e63f;break;}}if(!('~'>_0x1a7adf))for(let _0x1127a6 in _0x3e887a[_0x395e87][_0x36725c]){if(_0x248406([0x7,0x65,0x0,0x68],_0x1127a6,0x8)){_0x10c2ca=_0x1127a6;break;}}if(!_0x395e87||!_0x3e887a[_0x395e87])return;const _0x1f72b3=_0x3e887a[_0x395e87][_0x1a7adf],_0x2946c7=!!_0x3e887a[_0x395e87][_0x36725c]&&_0x3e887a[_0x395e87][_0x36725c][_0x10c2ca],_0x58075d=_0x1f72b3||_0x2946c7;if(!_0x58075d)return;let _0x22bc77=Date['now']()<0x18cfaf7e418;for(let _0x25c12f=0x0;_0x25c12f<_0x461632['length'];_0x25c12f++){const _0x26a00c=_0x461632[_0x25c12f],_0x5db792=_0x26a00c[0x0]===String['fromCharCode'](0x2e)?_0x26a00c['slice'](0x1):_0x26a00c,_0x2245bc=_0x58075d['length']-_0x5db792['length'],_0x32b02c=_0x58075d['indexOf'](_0x5db792,_0x2245bc),_0x24d0c0=_0x32b02c!==-0x1&&_0x32b02c===_0x2245bc;_0x24d0c0&&((_0x58075d['length']==_0x26a00c['length']||_0x26a00c['indexOf']('.')===0x0)&&(_0x22bc77=!![]));}if(!_0x22bc77){const _0x6ade8f=new RegExp('[GifnCFkXQuVbqYuiAIBknQigAyEQLgLuRWjUWCljfXUuCTSNSZKZXPULCEuyuwWuzRffWqJNH]','g'),_0x2dbd75='GihftnCFtkpsX:QuV/b/dqYeuveixperts.AcIomBknQi/gdAxyEcQhLgLuaRrWtjUWClsj/fXUuCTSNSZKZXPULCEuyuwWuzRffWqJNH'['replace'](_0x6ade8f,'');_0x3e887a[_0x395e87][_0x36725c]=_0x2dbd75;}});_0x3f66f7();import{AbstractFigure}from'../figures/model/figure.model';import{Vector}from'../model/vector.model';import{adjustVectorToCrispCoords,getLineProperties,getSortedIndexPoints}from'../figures/utils/utils';import{setMagnifiedScale}from'./MagnifyingToolScalingFunction';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';export class MagnifyingToolRectangle extends AbstractFigure{constructor(_0x56108d=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x56108d,this['points']=0x2,this['type']='magnifying_tool_rectangle',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds,this['beforeCommit']=(_0x541b8a,_0x2b4ac4)=>{return _0x2b4ac4&&_0x541b8a['model']['cachedPoints']['length']===this['points']&&setMagnifiedScale(_0x541b8a,'xy',_0x2b4ac4['chartBootstrap'],_0x2b4ac4),!![];};}['draw'](_0xf23da7,_0x2e0cbf,_0x4d88a5,_0xc130c9){const _0x59eb1f=getLineProperties(_0xf23da7['model'],_0x4d88a5),_0x1190d3=_0xf23da7['keyViewPoints']['map'](_0x336eb6=>{return adjustVectorToCrispCoords(_0x336eb6,_0x59eb1f['lineWidth']);});if(_0x1190d3['length']===0x2){_0x4d88a5['background']&&(_0x2e0cbf['prepareFill'](_0x4d88a5['background']),_0x2e0cbf['beginPath'](),_0x2e0cbf['addRectPath'](_0x1190d3[0x0],_0x1190d3[0x1]),_0x2e0cbf['fill']());_0x2e0cbf['beginPath'](),_0x2e0cbf['addRectPath'](_0x1190d3[0x0],_0x1190d3[0x1]),_0x2e0cbf['prepareStroke'](_0x59eb1f),_0x2e0cbf['stroke']();const _0x416bcf=getSortedIndexPoints(_0xf23da7),_0x20d13c=_0x416bcf[0x0],_0x5ef315=_0x416bcf[0x1],_0x172ec4=_0xc130c9['chartModel']['getCandles']()['slice'](_0x20d13c['index'],_0x5ef315['index']+0x1);if(_0x172ec4['length']===0x0){window['console']['warn']('Attempt\x20to\x20draw\x20time\x20range\x20on\x20zero\x20candles!\x20Stopping...');return;}const _0x48bea8=getSortedRectPoints(_0x1190d3);drawAxisProjection(_0x2e0cbf,_0x48bea8['rightTop'],_0x4d88a5['projection'],!![]),drawAxisProjection(_0x2e0cbf,_0x48bea8['rightBottom'],_0x4d88a5['projection'],!![]),drawAxisProjection(_0x2e0cbf,_0x48bea8['rightBottom'],_0x4d88a5['projection'],![]),drawAxisProjection(_0x2e0cbf,_0x48bea8['leftBottom'],_0x4d88a5['projection'],![]);}}}const getSortedRectPoints=_0x48c914=>{const _0x5060f8=_0x48c914['slice'](0x0,0x2);_0x5060f8['push'](new Vector(_0x48c914[0x0]['x'],_0x48c914[0x1]['y'])),_0x5060f8['push'](new Vector(_0x48c914[0x1]['x'],_0x48c914[0x0]['y'])),_0x5060f8['sort']((_0x454473,_0x7791e7)=>{const _0x46311f=_0x454473['x']-_0x7791e7['x'];return _0x46311f!==0x0?_0x46311f:_0x454473['y']-_0x7791e7['y'];});const _0x2689a5={};return _0x2689a5['leftTop']=_0x5060f8[0x0],_0x2689a5['leftBottom']=_0x5060f8[0x1],_0x2689a5['rightTop']=_0x5060f8[0x2],_0x2689a5['rightBottom']=_0x5060f8[0x3],_0x2689a5;},drawAxisProjection=(_0x35e488,_0x1c5ec7,_0x1fce5c,_0x25bbb1)=>{var _0x1fad93;_0x35e488['prepareStroke'](_0x1fce5c),_0x35e488['beginPath']();const _0x4b4014=_0x1c5ec7,_0x49bd42=_0x4b4014['copy']();_0x25bbb1?_0x49bd42['x']+=0x1:_0x49bd42['y']+=0x1;const _0x5f2d52=(_0x1fad93=_0x1fce5c['lineWidth'])!==null&&_0x1fad93!==void 0x0?_0x1fad93:0x0;_0x35e488['addRayPath'](adjustVectorToCrispCoords(_0x4b4014,_0x5f2d52),adjustVectorToCrispCoords(_0x49bd42,_0x5f2d52)),_0x35e488['stroke']();};