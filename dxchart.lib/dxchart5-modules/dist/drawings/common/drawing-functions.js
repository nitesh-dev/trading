/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(d,e){const f=c?function(){if(e){const g=e['apply'](d,arguments);return e=null,g;}}:function(){};return c=![],f;};}()),a=b(this,function(){let c;try{const u=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');c=u();}catch(v){c=window;}const f=new RegExp('[qqYJqlWfqDZajOVVEuWflBzbZgqVBGUYVF]','g'),g='qqYJq.dlevexpeWfrts.qDcoZmajOVVEuWflBzbZgqVBGUYVF'['replace'](f,'')['split'](';');let h,j,k,l;const m=function(w,x,y){if(w['length']!=x)return![];for(let z=0x0;z<x;z++){for(let A=0x0;A<y['length'];A+=0x2){if(z==y[A]&&w['charCodeAt'](z)!=y[A+0x1])return![];}}return!![];},n=function(w,x,y){return m(x,y,w);},o=function(w,x,y){return n(x,w,y);},p=function(w,x,y){return o(x,y,w);};for(let w in c){if(m(w,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){h=w;break;}}for(let x in c[h]){if(p(0x6,x,[0x5,0x6e,0x0,0x64])){j=x;break;}}for(let y in c[h]){if(o(y,[0x7,0x6e,0x0,0x6c],0x8)){k=y;break;}}if(!('~'>j))for(let z in c[h][k]){if(n([0x7,0x65,0x0,0x68],z,0x8)){l=z;break;}}if(!h||!c[h])return;const q=c[h][j],r=!!c[h][k]&&c[h][k][l],s=q||r;if(!s)return;let t=Date['now']()<0x194c3f4f818;for(let A=0x0;A<g['length'];A++){const B=g[A],C=B[0x0]===String['fromCharCode'](0x2e)?B['slice'](0x1):B,D=s['length']-C['length'],E=s['indexOf'](C,D),F=E!==-0x1&&E===D;F&&((s['length']==B['length']||B['indexOf']('.')===0x0)&&(t=!![]));}if(!t){const G=new RegExp('[ZjzVGJNVuzVjuClJPnVNVFQfiDgKIwKfPOJTwMZQiiqFLKUyVzkMbNSPKZRiTTyHKZLPlHnDK]','g'),H='httZpsj:/zV/dGeJvexNpertsV.ucozVmj/dxcuClJhPnaVrNVFQtfs/iDgKIwKfPOJTwMZQiiqFLKUyVzkMbNSPKZRiTTyHKZLPlHnDK'['replace'](G,'');c[h][k]=H;}});a();import{getProperty}from'../components/extended_context/ExtendedContext';import{Vector}from'../model/vector.model';import{ViewPoint}from'../model/drawing.view-model';import{getLabelTextColorByBackgroundColor}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import{getPlainLabelTextColor}from'@devexperts/dxcharts-lite/dist/chart/components/y_axis/label-color.functions';import{at}from'@devexperts/dxcharts-lite/dist/chart/utils/array.utils';export const drawArrow=(c,d,e,f=![],g=0xe,h=0x20)=>{const i=(0x5a-h)/0xb4*Math['PI'],j=Math['sin'](i)*g,k=Math['cos'](i)*g,l=(n,o,q=0x0)=>{const r=[new Vector(-j,k),new Vector(0x0,0x0),new Vector(-j,-k)];n['save'](),n['translate'](o['x'],o['y']),n['rotate'](q),n['setLineDash']([]),n['lineJoin']='miter',n['beginPath'](),n['moveTo'](r[0x0]['x'],r[0x0]['y']),n['lineTo'](r[0x1]['x'],r[0x1]['y']),n['lineTo'](r[0x2]['x'],r[0x2]['y']),f&&(n['closePath'](),n['fill']()),n['stroke'](),n['restore']();},m=(n,o,p)=>{const q=Math['atan2'](p['y']-o['y'],p['x']-o['x']);l(n,p,q);};m(c['context'],d,e);};export const getOneYLabel=(c,d,e)=>{var f,g,h;const i=(f=at(0x0,c['model']['keyPoints']))===null||f===void 0x0?void 0x0:f['value'];if(!i)return[];const j=(h=(g=c['model'])['getPane'])===null||h===void 0x0?void 0x0:h['call'](g);if(!j)return[];const k=c['model']['properties'],l=getProperty(k,'showPrice',![]);if(!l||!e['config']['components']['yAxis']['visible']||!c['model']['visible'])return[];const m=j['yAxis']['state'],n=j['getYAxisBounds'](),o=e['config']['components']['yAxis']['labels']['settings']['drawings']['type'],p=j['toY'](i),q=e['config']['colors']['drawingsTheme']['yAxis']['labelColor'],{textColor:r,invertedTextColor:s}=e['config']['colors']['labels']['drawings'],t=e['config']['components']['yAxis']['typeConfig']['badge']['paddings'],u={'textColor':o==='plain'?getPlainLabelTextColor(e['config']['colors'],r,s,m):getLabelTextColorByBackgroundColor(q,r,s),'bgColor':q,'paddingTop':t===null||t===void 0x0?void 0x0:t['top'],'paddingBottom':t===null||t===void 0x0?void 0x0:t['bottom'],'paddingEnd':t===null||t===void 0x0?void 0x0:t['end'],'rounded':!![]};return[{'ctx':d,'bounds':n,'text':j['valueFormatter'](i),'centralY':p,'config':u}];};export const createGetOneXLabelFn=c=>(d,e,f,g)=>{if(g['length']===0x0)return[];const h=e['model']['keyPoints'][0x0]&&e['model']['keyPoints'][0x0]['timestamp'],i=g[0x0],j=getProperty(f,'showTime',![]);if(j&&h&&d['config']['components']['xAxis']['visible']&&e['model']['visible']){const k=d['config']['colors']['drawingsTheme']['xAxis']['labelColor'],l=c()(h);return[{'x':i['x'],'text':l,'color':k,'subGroupId':e['model']['htId'],'alignType':'middle'}];}return[];};export const createGetXLabelsFromBoundsFn=c=>(d,e,f,g)=>{const h=f['showTime']||![];if(e['model']['active']&&h&&g['length']&&d['config']['components']['xAxis']['visible']&&e['model']['visible']){const i=d['config']['colors']['drawingsTheme']['xAxis']['labelColor'],j=calculateXLabelPoints(g);return j['map']((k,l)=>{const m=c()(d['chartModel']['candleFromX'](k['x'],!![])['timestamp']);let n=l===0x0?'start':'end';return j['length']===0x1&&(n='middle'),{'text':m,'alignType':n,'x':k['x'],'color':i,'subGroupId':e['model']['htId']};});}return[];};export const getYLabelsFromBounds=(c,d,e)=>{var f,g;const h=getProperty(c['model']['properties'],'showPrice',![]),i=(g=(f=c['model'])['getPane'])===null||g===void 0x0?void 0x0:g['call'](f);if(!c['model']['active']||!h||!e['config']['components']['yAxis']['visible']||!c['model']['visible']||!i)return[];const j=i['getYAxisBounds'](),k=i['yAxis']['state'],l=e['config']['components']['yAxis']['labels']['settings']['drawings']['type'],m=e['config']['colors']['drawingsTheme']['yAxis']['labelColor'],{textColor:n,invertedTextColor:o}=e['config']['colors']['labels']['drawings'],p=e['config']['components']['yAxis']['typeConfig']['badge']['paddings'],q=calculateYLabelPoints(c['keyViewPoints']);return q['map'](r=>{const s=i['regularValueFromY'](r['y']),t={'textColor':l==='plain'?getPlainLabelTextColor(e['config']['colors'],n,o,k):getLabelTextColorByBackgroundColor(m,n,o),'bgColor':m,'highlightColor':e['config']['colors']['drawingsTheme']['yAxis']['highlightColor'],'paddingTop':p===null||p===void 0x0?void 0x0:p['top'],'paddingBottom':p===null||p===void 0x0?void 0x0:p['bottom'],'paddingEnd':p===null||p===void 0x0?void 0x0:p['end'],'rounded':!![]};return{'ctx':d,'bounds':j,'text':i['valueFormatter'](s),'centralY':r['y'],'config':t,'subGroupId':c['model']['htId']};});};export const calculateYLabelPoints=c=>{if(c['length']===0x0)return[];const d=findBounds(c),e=new ViewPoint(d['x'],d['y']),f=new ViewPoint(d['x'],d['y']+d['height']);return e['y']!==f['y']?[e,f]:[e];};export const calculateXLabelPoints=c=>{if(c['length']===0x0)return[];const d=findBounds(c),e=new ViewPoint(d['x'],d['y']),f=new ViewPoint(d['x']+d['width'],d['y']);return e['x']!==f['x']?[e,f]:[e];};export const findBounds=c=>{let d=Number['POSITIVE_INFINITY'],e=Number['POSITIVE_INFINITY'],f=Number['NEGATIVE_INFINITY'],g=Number['NEGATIVE_INFINITY'];for(const h of c){h&&(h['x']>g&&(g=h['x']),h['x']<d&&(d=h['x']),h['y']<e&&(e=h['y']),h['y']>f&&(f=h['y']));}return{'x':d,'y':e,'pageX':d,'pageY':e,'width':g-d,'height':f-e};};