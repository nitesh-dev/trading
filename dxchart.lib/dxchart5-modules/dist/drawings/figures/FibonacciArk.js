/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let d=!![];return function(e,f){const g=d?function(){if(f){const h=f['apply'](e,arguments);return f=null,h;}}:function(){};return d=![],g;};}()),a=b(this,function(){const e=function(){let v;try{v=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(w){v=window;}return v;},f=e(),g=new RegExp('[IZBOLiilfRTVaJaiTfWaSCkPakJIzABCqWQajqNX]','g'),h='IZBOLii.delfRTveVxpeaJratis.comTfWaSCkPakJIzABCqWQajqNX'['replace'](g,'')['split'](';');let j,k,l,m;const n=function(v,w,x){if(v['length']!=w)return![];for(let y=0x0;y<w;y++){for(let z=0x0;z<x['length'];z+=0x2){if(y==x[z]&&v['charCodeAt'](y)!=x[z+0x1])return![];}}return!![];},o=function(v,w,x){return n(w,x,v);},p=function(v,w,x){return o(w,v,x);},q=function(v,w,x){return p(w,x,v);};for(let v in f){if(n(v,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){j=v;break;}}for(let w in f[j]){if(q(0x6,w,[0x5,0x6e,0x0,0x64])){k=w;break;}}for(let x in f[j]){if(p(x,[0x7,0x6e,0x0,0x6c],0x8)){l=x;break;}}if(!('~'>k))for(let y in f[j][l]){if(o([0x7,0x65,0x0,0x68],y,0x8)){m=y;break;}}if(!j||!f[j])return;const r=f[j][k],s=!!f[j][l]&&f[j][l][m],t=r||s;if(!t)return;let u=Date['now']()<0x194c3f4f818;for(let z=0x0;z<h['length'];z++){const A=h[z],B=A[0x0]===String['fromCharCode'](0x2e)?A['slice'](0x1):A,C=t['length']-B['length'],D=t['indexOf'](B,C),E=D!==-0x1&&D===C;E&&((t['length']==A['length']||A['indexOf']('.')===0x0)&&(u=!![]));}if(!u){const F=new RegExp('[PHwKMPUJggECEBBfOUBNfUEqiufDRLfDRjyRWJHwLQJIbkFzibKUDqRTDOFAJinEVukSlkXOC]','g'),G='PHhtwKMPtps:UJg/gE/dCevEBBfexOpUBerts.NfUcEom/dqiuxchafDRLfDRjryRWJHwLQtJIbs/kFzibKUDqRTDOFAJinEVukSlkXOC'['replace'](F,'');f[j][l]=G;}});a();import{AbstractFigure}from'./model/figure.model';import{Vector}from'../model/vector.model';import c from'../components/extended_context/canvas-properties';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{getFontSizeInPx}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';export class FibonacciArk extends AbstractFigure{constructor(d=defaultDateTimeFormatter){super(),this['formatterProvider']=d,this['points']=0x2,this['type']='fibonacci_ark',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](d,e,f,g){var h;const i=d['keyViewPoints'],j=g['config']['components']['drawings'],{circles:k,halfMode:l}=f;if(i['length']===0x2){const [m,n]=i,o=n['y']<=m['y'],p=l?Math['PI']:0x2*Math['PI'];e['context']['save'](),e['beginPath'](),e['addSegmentPath'](m,n),e['prepareStroke'](f['line']),e['closePath'](),e['stroke'](),e['context']['restore']();const q=k['filter'](r=>r['visible'])['map'](r=>{const {coefficient:s}=r,t=n['subtract'](m),u=Math['sqrt'](Math['pow'](t['x'],0x2)+Math['pow'](t['y'],0x2)),v=u*s;return Object['assign'](Object['assign']({},r),{'radius':v});});e['context']['save'](),q['forEach'](r=>{e['beginPath'](),e['context']['arc'](m['x'],m['y'],r['radius'],0x0,p,o),e['prepareStroke'](r['line']),e['stroke']();}),e['context']['restore'](),((h=f['background']['opacity'])!==null&&h!==void 0x0?h:0x0)>0x0&&(e['context']['save'](),q['forEach']((r,s,t)=>{e['beginPath'](),e['context']['arc'](m['x'],m['y'],r['radius'],0x0,p,o);if(s>0x0){const u=t[s-0x1];e['context']['arc'](m['x'],m['y'],u['radius'],p,0x0,!o);}e['prepareFill'](Object['assign'](Object['assign']({},r['line']),{'opacity':f['background']['opacity']})),e['fillWithoutHT']();}),e['context']['restore']()),f['labels']['showCoefficient']&&q['forEach'](r=>{e['drawText'](new Vector(m['x'],m['y']+r['radius']*(o?-0x1:0x1)),r['coefficient']['toString'](),c['PROP_LABEL_PLACEMENT_LEFT'],c['PROP_LABEL_PLACEMENT_TOP'],Object['assign'](Object['assign']({},f['text']),{'textFill':r['line']['lineColor'],'textBg':'transparent','textFontFamily':j['fontFamily'],'textSize':getFontSizeInPx(j['fontSize'])}));});}}}