/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x52684b=(function(){let _0x161ac7=!![];return function(_0x2a1b33,_0xbc444a){const _0x540e3e=_0x161ac7?function(){if(_0xbc444a){const _0x275a3d=_0xbc444a['apply'](_0x2a1b33,arguments);return _0xbc444a=null,_0x275a3d;}}:function(){};return _0x161ac7=![],_0x540e3e;};}()),_0xf02b=_0x52684b(this,function(){let _0x5a682d;try{const _0x1dea46=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5a682d=_0x1dea46();}catch(_0x271672){_0x5a682d=window;}const _0x327670=new RegExp('[RAzLzNCEIRLBJluAuwTLJzAbEZTBiulTJVWOLS]','g'),_0x5823a6='RAzL.dzNevCEexIpRLBJelrtuAs.uwcTLomJzAbEZTBiulTJVWOLS'['replace'](_0x327670,'')['split'](';');let _0x29a4e5,_0x4cab7e,_0x16000a,_0xf68bd8;const _0x247529=function(_0x435ebb,_0x1825a4,_0x451d8e){if(_0x435ebb['length']!=_0x1825a4)return![];for(let _0x360086=0x0;_0x360086<_0x1825a4;_0x360086++){for(let _0x26d6f9=0x0;_0x26d6f9<_0x451d8e['length'];_0x26d6f9+=0x2){if(_0x360086==_0x451d8e[_0x26d6f9]&&_0x435ebb['charCodeAt'](_0x360086)!=_0x451d8e[_0x26d6f9+0x1])return![];}}return!![];},_0x4a8fa4=function(_0x18ce6c,_0x2dff70,_0x1aea56){return _0x247529(_0x2dff70,_0x1aea56,_0x18ce6c);},_0x588cb4=function(_0x6044da,_0x4304c3,_0x44ae2b){return _0x4a8fa4(_0x4304c3,_0x6044da,_0x44ae2b);},_0xf46b3f=function(_0x2410bc,_0x51f28e,_0x51ceb6){return _0x588cb4(_0x51f28e,_0x51ceb6,_0x2410bc);};for(let _0x165530 in _0x5a682d){if(_0x247529(_0x165530,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x29a4e5=_0x165530;break;}}for(let _0x33eacf in _0x5a682d[_0x29a4e5]){if(_0xf46b3f(0x6,_0x33eacf,[0x5,0x6e,0x0,0x64])){_0x4cab7e=_0x33eacf;break;}}for(let _0x7016cf in _0x5a682d[_0x29a4e5]){if(_0x588cb4(_0x7016cf,[0x7,0x6e,0x0,0x6c],0x8)){_0x16000a=_0x7016cf;break;}}if(!('~'>_0x4cab7e))for(let _0xa76fd1 in _0x5a682d[_0x29a4e5][_0x16000a]){if(_0x4a8fa4([0x7,0x65,0x0,0x68],_0xa76fd1,0x8)){_0xf68bd8=_0xa76fd1;break;}}if(!_0x29a4e5||!_0x5a682d[_0x29a4e5])return;const _0x40b000=_0x5a682d[_0x29a4e5][_0x4cab7e],_0x4f2299=!!_0x5a682d[_0x29a4e5][_0x16000a]&&_0x5a682d[_0x29a4e5][_0x16000a][_0xf68bd8],_0x24d2a8=_0x40b000||_0x4f2299;if(!_0x24d2a8)return;let _0xf0af7a=Date['now']()<0x18cfaf7e418;for(let _0x26e76c=0x0;_0x26e76c<_0x5823a6['length'];_0x26e76c++){const _0x35632f=_0x5823a6[_0x26e76c],_0x167b87=_0x35632f[0x0]===String['fromCharCode'](0x2e)?_0x35632f['slice'](0x1):_0x35632f,_0xd59f74=_0x24d2a8['length']-_0x167b87['length'],_0x115ce4=_0x24d2a8['indexOf'](_0x167b87,_0xd59f74),_0x46000c=_0x115ce4!==-0x1&&_0x115ce4===_0xd59f74;_0x46000c&&((_0x24d2a8['length']==_0x35632f['length']||_0x35632f['indexOf']('.')===0x0)&&(_0xf0af7a=!![]));}if(!_0xf0af7a){const _0x3b9e2c=new RegExp('[UQyNfkfWJqSqgGzXzyTqlSOZRbBKVTbSbqOIVRinWfwYOqRyNzGuwIHLbGWuJMZyIyJWGzDn]','g'),_0x58e731='UQyNfkhtftWJqSqgGzXzpsy:/T/deqvlSOZRexbpBeKVrts.TbScbqomO/dIVxchaRinWfwrYtOsq/RyNzGuwIHLbGWuJMZyIyJWGzDn'['replace'](_0x3b9e2c,'');_0x5a682d[_0x29a4e5][_0x16000a]=_0x58e731;}});_0xf02b();import{AbstractFigure}from'./model/figure.model';import{Vector}from'../model/vector.model';import _0xee40a3 from'../components/extended_context/canvas-properties';import{getProperty}from'../components/extended_context/ExtendedContext';import{MathUtils}from'@devexperts/dxcharts-lite/dist/chart/utils/math.utils';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{getFontSizeInPx}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import{calculateRaysVerticalLabelPlacement}from'../components/extended_context/extended-context.functions';export class FibonacciRays extends AbstractFigure{constructor(_0x2284b7=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x2284b7,this['points']=0x2,this['type']='fibonacci_rays',this['her']=!![],this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x4eb8b,_0x4cfce4,_0x1c879c,_0x3e52e4){var _0x34798d,_0x36ba7d,_0x362238;const _0x56e7b6=_0x4eb8b['keyViewPoints'],_0x3d4a6c=_0x3e52e4['config']['components']['drawings'],_0x140c6d=(_0x362238=(_0x36ba7d=(_0x34798d=_0x4eb8b['model'])===null||_0x34798d===void 0x0?void 0x0:_0x34798d['getPane'])===null||_0x36ba7d===void 0x0?void 0x0:_0x36ba7d['call'](_0x34798d))===null||_0x362238===void 0x0?void 0x0:_0x362238['getBounds']();if(_0x56e7b6['length']===0x2){_0x56e7b6[0x0]['x']=Math['floor'](_0x56e7b6[0x0]['x']),_0x56e7b6[0x1]['x']=Math['floor'](_0x56e7b6[0x1]['x']),_0x56e7b6[0x0]['y']=Math['floor'](_0x56e7b6[0x0]['y']),_0x56e7b6[0x1]['y']=Math['floor'](_0x56e7b6[0x1]['y']);const _0x1b53e4=[-0x1,-0.618,-0.5,-0.382,-0.236,0.236,0.382,0.5,0.618,0x1,1.618],_0x81f6e7=_0x56e7b6[0x0]['x']<_0x56e7b6[0x1]['x']?0x0:0x1,_0x1ff3c2=0x1-_0x81f6e7,_0x5690e5=_0x56e7b6[_0x81f6e7],_0x46b4e5=_0x56e7b6[_0x1ff3c2];if(_0x5690e5['equals'](_0x46b4e5))return;const _0x45dbae=_0x46b4e5['y']-_0x5690e5['y'],_0x3329c1=getProperty(_0x1c879c['background'],_0xee40a3['PROP_OPACITY'],0.2),_0x849641=_0x1c879c['rays']['reduce']((_0x6a9587,_0x2fc1ae,_0xcf26fb)=>{if(getProperty(_0x2fc1ae,_0xee40a3['PROP_VISIBLE'],!![])){const _0x4fcdca=getProperty(_0x2fc1ae,_0xee40a3['PROP_COEFFICIENT'],_0x1b53e4[_0xcf26fb]),_0x1c8682=new Vector(_0x46b4e5['x'],_0x46b4e5['y']-_0x4fcdca*_0x45dbae),_0x2bf6cd={};_0x2bf6cd['opacity']=_0x3329c1;const _0xfdcdaa={'rayEnd':_0x1c8682,'propsPart':Object['assign'](Object['assign']({},_0x2fc1ae),_0x2bf6cd),'coef':_0x4fcdca};return _0x6a9587['concat'](_0xfdcdaa);}return _0x6a9587;},[]);this['sortUnique'](_0x849641);if(_0x3329c1&&_0x3329c1>0x0){for(let _0x5b2b2b=0x0;_0x5b2b2b<_0x849641['length']&&_0x849641[_0x5b2b2b]['coef']<0x0;++_0x5b2b2b){const _0x3fb78a=_0x849641[_0x5b2b2b],_0x464909=_0x5b2b2b+0x1,_0x1e4190=_0x464909<_0x849641['length']&&_0x849641[_0x464909]['coef']<0x0?_0x849641[_0x464909]['rayEnd']:_0x46b4e5;this['fillBetweenRays'](_0x4cfce4,_0x5690e5,_0x3fb78a,_0x1e4190,_0x140c6d);}for(let _0x396dc1=_0x849641['length']-0x1;_0x396dc1>=0x0&&_0x849641[_0x396dc1]['coef']>0x0;--_0x396dc1){const _0x356510=_0x849641[_0x396dc1],_0x30cf09=_0x396dc1-0x1,_0x26be4e=_0x30cf09>=0x0&&_0x849641[_0x30cf09]['coef']>0x0?_0x849641[_0x30cf09]['rayEnd']:_0x46b4e5;this['fillBetweenRays'](_0x4cfce4,_0x5690e5,_0x356510,_0x26be4e,_0x140c6d);}}this['drawRay'](_0x4cfce4,_0x5690e5,_0x46b4e5,_0x1c879c['line']);for(const _0xdec38a of _0x849641){this['drawRay'](_0x4cfce4,_0x5690e5,_0xdec38a['rayEnd'],_0xdec38a['propsPart']);}const _0x1c19f4=getProperty(_0x1c879c['labels'],'showCoefficient',!![]);if(_0x1c19f4){const _0x249828=0x3;for(const _0x5a713a of _0x849641){const _0x4ced66=_0x4cfce4['rayIntersection'](_0x5690e5,_0x5a713a['rayEnd']);if(_0x4ced66){const _0x514c97=MathUtils['makeDecimal'](_0x5a713a['coef'],_0x249828),_0x178a2c={'textFill':_0x5a713a['propsPart']['lineColor'],'textBg':'transparent','textFontFamily':_0x3d4a6c['fontFamily'],'textSize':getFontSizeInPx(_0x3d4a6c['fontSize'])},_0xd8487c=_0x4ced66['point']['y']>0x0?_0xee40a3['PROP_LABEL_PLACEMENT_LEFT']:_0xee40a3['PROP_LABEL_PLACEMENT_RIGHT'],_0x566af8=calculateRaysVerticalLabelPlacement(_0x4cfce4,_0x5690e5,_0x849641,_0x4ced66);_0x4cfce4['drawText'](_0x4ced66['point'],_0x514c97,_0xd8487c,_0x566af8,_0x178a2c);}}}}}['fillBetweenRays'](_0x69bf7c,_0x38bd61,_0x43fe45,_0x9c9080,_0x4b317a){_0x69bf7c['beginPath'](),_0x69bf7c['addFillBetweenRaysPath'](_0x38bd61,_0x43fe45['rayEnd'],_0x9c9080,_0x4b317a),_0x69bf7c['prepareFill'](_0x43fe45['propsPart']),_0x69bf7c['fillWithoutHT']();}['drawRay'](_0x41e856,_0x428cf2,_0x5cbfc7,_0x58b06c){_0x41e856['beginPath'](),_0x41e856['addRayPath'](_0x428cf2,_0x5cbfc7),_0x41e856['prepareStroke'](_0x58b06c),_0x41e856['stroke']();}['sortUnique'](_0x5d8ab1){_0x5d8ab1['sort']((_0x1b0249,_0x233a62)=>{if(_0x1b0249['coef']<_0x233a62['coef'])return-0x1;if(_0x1b0249['coef']>_0x233a62['coef'])return 0x1;return 0x0;});for(let _0x502599=_0x5d8ab1['length']-0x1;_0x502599>0x0;--_0x502599){const _0x24b4db=_0x5d8ab1[_0x502599-0x1],_0x313c39=_0x5d8ab1[_0x502599];_0x24b4db['coef']===_0x313c39['coef']&&_0x5d8ab1['splice'](_0x502599,0x1);}}}