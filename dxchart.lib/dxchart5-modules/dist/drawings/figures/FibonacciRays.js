/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4637ae=(function(){let _0x1ae1e9=!![];return function(_0x4adc27,_0x25986c){const _0x3ddd2c=_0x1ae1e9?function(){if(_0x25986c){const _0x5c10d4=_0x25986c['apply'](_0x4adc27,arguments);return _0x25986c=null,_0x5c10d4;}}:function(){};return _0x1ae1e9=![],_0x3ddd2c;};}()),_0xd6e710=_0x4637ae(this,function(){let _0x44cac1;try{const _0x12453c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x44cac1=_0x12453c();}catch(_0x5f3d56){_0x44cac1=window;}const _0x27427d=new RegExp('[bAIUZaMMhWEFhXDwfqAOBjjRDYwPwQXCO]','g'),_0x445fd8='.devebAxIUpZaerMts.cMhoWmEFhXDwfqAOBjjRDYwPwQXCO'['replace'](_0x27427d,'')['split'](';');let _0x3452fd,_0x27d3ee,_0x2a4f5f,_0x3b4eb2;const _0x394ccc=function(_0x6f13d5,_0x3a1339,_0x3c06f2){if(_0x6f13d5['length']!=_0x3a1339)return![];for(let _0x184a1b=0x0;_0x184a1b<_0x3a1339;_0x184a1b++){for(let _0x2f31b7=0x0;_0x2f31b7<_0x3c06f2['length'];_0x2f31b7+=0x2){if(_0x184a1b==_0x3c06f2[_0x2f31b7]&&_0x6f13d5['charCodeAt'](_0x184a1b)!=_0x3c06f2[_0x2f31b7+0x1])return![];}}return!![];},_0x2ee820=function(_0x1af1d0,_0x4782ee,_0xb156f1){return _0x394ccc(_0x4782ee,_0xb156f1,_0x1af1d0);},_0x918b34=function(_0x2052f3,_0x179dc3,_0x50ea65){return _0x2ee820(_0x179dc3,_0x2052f3,_0x50ea65);},_0x349f84=function(_0x24529d,_0x3d3a6c,_0xcbc085){return _0x918b34(_0x3d3a6c,_0xcbc085,_0x24529d);};for(let _0x131842 in _0x44cac1){if(_0x394ccc(_0x131842,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x3452fd=_0x131842;break;}}for(let _0x55e815 in _0x44cac1[_0x3452fd]){if(_0x349f84(0x6,_0x55e815,[0x5,0x6e,0x0,0x64])){_0x27d3ee=_0x55e815;break;}}for(let _0x29c4d7 in _0x44cac1[_0x3452fd]){if(_0x918b34(_0x29c4d7,[0x7,0x6e,0x0,0x6c],0x8)){_0x2a4f5f=_0x29c4d7;break;}}if(!('~'>_0x27d3ee))for(let _0x7e48d9 in _0x44cac1[_0x3452fd][_0x2a4f5f]){if(_0x2ee820([0x7,0x65,0x0,0x68],_0x7e48d9,0x8)){_0x3b4eb2=_0x7e48d9;break;}}if(!_0x3452fd||!_0x44cac1[_0x3452fd])return;const _0x2686bd=_0x44cac1[_0x3452fd][_0x27d3ee],_0x37e876=!!_0x44cac1[_0x3452fd][_0x2a4f5f]&&_0x44cac1[_0x3452fd][_0x2a4f5f][_0x3b4eb2],_0x4803ef=_0x2686bd||_0x37e876;if(!_0x4803ef)return;let _0x2fc52e=Date['now']()<0x18d4310ec18;for(let _0x564e14=0x0;_0x564e14<_0x445fd8['length'];_0x564e14++){const _0x1dc21d=_0x445fd8[_0x564e14],_0x4407d8=_0x1dc21d[0x0]===String['fromCharCode'](0x2e)?_0x1dc21d['slice'](0x1):_0x1dc21d,_0x47d621=_0x4803ef['length']-_0x4407d8['length'],_0x23f605=_0x4803ef['indexOf'](_0x4407d8,_0x47d621),_0xc13a78=_0x23f605!==-0x1&&_0x23f605===_0x47d621;_0xc13a78&&((_0x4803ef['length']==_0x1dc21d['length']||_0x1dc21d['indexOf']('.')===0x0)&&(_0x2fc52e=!![]));}if(!_0x2fc52e){const _0x389c23=new RegExp('[nWWJTUSIlGDDubfjiATFjSnQgQVkNXMFPiZIwjZkDGKCKUjXBPzykfRIEJNCPLNBGSZnH]','g'),_0x27fca6='nWhWttJpTs:/US/devexpertIs.lcoGmDDu/bdfjxichATFjartSs/nQgQVkNXMFPiZIwjZkDGKCKUjXBPzykfRIEJNCPLNBGSZnH'['replace'](_0x389c23,'');_0x44cac1[_0x3452fd][_0x2a4f5f]=_0x27fca6;}});_0xd6e710();import{AbstractFigure}from'./model/figure.model';import{Vector}from'../model/vector.model';import _0x1f9d39 from'../components/extended_context/canvas-properties';import{getProperty}from'../components/extended_context/ExtendedContext';import{MathUtils}from'@devexperts/dxcharts-lite/dist/chart/utils/math.utils';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{getFontSizeInPx}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import{calculateRaysVerticalLabelPlacement}from'../components/extended_context/extended-context.functions';export class FibonacciRays extends AbstractFigure{constructor(_0x5ef379=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x5ef379,this['points']=0x2,this['type']='fibonacci_rays',this['her']=!![],this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x3e87b1,_0x2f58e8,_0x5844f5,_0x4d5f56){var _0x1feddc,_0x995307,_0x3cbeda;const _0x4f6ba8=_0x3e87b1['keyViewPoints'],_0x5d949a=_0x4d5f56['config']['components']['drawings'],_0x40d371=(_0x3cbeda=(_0x995307=(_0x1feddc=_0x3e87b1['model'])===null||_0x1feddc===void 0x0?void 0x0:_0x1feddc['getPane'])===null||_0x995307===void 0x0?void 0x0:_0x995307['call'](_0x1feddc))===null||_0x3cbeda===void 0x0?void 0x0:_0x3cbeda['getBounds']();if(_0x4f6ba8['length']===0x2){_0x4f6ba8[0x0]['x']=Math['floor'](_0x4f6ba8[0x0]['x']),_0x4f6ba8[0x1]['x']=Math['floor'](_0x4f6ba8[0x1]['x']),_0x4f6ba8[0x0]['y']=Math['floor'](_0x4f6ba8[0x0]['y']),_0x4f6ba8[0x1]['y']=Math['floor'](_0x4f6ba8[0x1]['y']);const _0x55eb82=[-0x1,-0.618,-0.5,-0.382,-0.236,0.236,0.382,0.5,0.618,0x1,1.618],_0x417c49=_0x4f6ba8[0x0]['x']<_0x4f6ba8[0x1]['x']?0x0:0x1,_0x155f51=0x1-_0x417c49,_0x411982=_0x4f6ba8[_0x417c49],_0x293455=_0x4f6ba8[_0x155f51];if(_0x411982['equals'](_0x293455))return;const _0x187aaa=_0x293455['y']-_0x411982['y'],_0x59f94b=getProperty(_0x5844f5['background'],_0x1f9d39['PROP_OPACITY'],0.2),_0x27bd1d=_0x5844f5['rays']['reduce']((_0x284833,_0x1cdeb9,_0x4820fc)=>{if(getProperty(_0x1cdeb9,_0x1f9d39['PROP_VISIBLE'],!![])){const _0x518273=getProperty(_0x1cdeb9,_0x1f9d39['PROP_COEFFICIENT'],_0x55eb82[_0x4820fc]),_0x133719=new Vector(_0x293455['x'],_0x293455['y']-_0x518273*_0x187aaa),_0x39f08f={};_0x39f08f['opacity']=_0x59f94b;const _0x5078c4={'rayEnd':_0x133719,'propsPart':Object['assign'](Object['assign']({},_0x1cdeb9),_0x39f08f),'coef':_0x518273};return _0x284833['concat'](_0x5078c4);}return _0x284833;},[]);this['sortUnique'](_0x27bd1d);if(_0x59f94b&&_0x59f94b>0x0){for(let _0x4bf48a=0x0;_0x4bf48a<_0x27bd1d['length']&&_0x27bd1d[_0x4bf48a]['coef']<0x0;++_0x4bf48a){const _0x5e3c12=_0x27bd1d[_0x4bf48a],_0x53ac95=_0x4bf48a+0x1,_0x3249c1=_0x53ac95<_0x27bd1d['length']&&_0x27bd1d[_0x53ac95]['coef']<0x0?_0x27bd1d[_0x53ac95]['rayEnd']:_0x293455;this['fillBetweenRays'](_0x2f58e8,_0x411982,_0x5e3c12,_0x3249c1,_0x40d371);}for(let _0x28d227=_0x27bd1d['length']-0x1;_0x28d227>=0x0&&_0x27bd1d[_0x28d227]['coef']>0x0;--_0x28d227){const _0x547010=_0x27bd1d[_0x28d227],_0xfaf5dc=_0x28d227-0x1,_0x23d005=_0xfaf5dc>=0x0&&_0x27bd1d[_0xfaf5dc]['coef']>0x0?_0x27bd1d[_0xfaf5dc]['rayEnd']:_0x293455;this['fillBetweenRays'](_0x2f58e8,_0x411982,_0x547010,_0x23d005,_0x40d371);}}this['drawRay'](_0x2f58e8,_0x411982,_0x293455,_0x5844f5['line']);for(const _0x4d1fc9 of _0x27bd1d){this['drawRay'](_0x2f58e8,_0x411982,_0x4d1fc9['rayEnd'],_0x4d1fc9['propsPart']);}const _0x331177=getProperty(_0x5844f5['labels'],'showCoefficient',!![]);if(_0x331177){const _0x4c265b=0x3;for(const _0x4c7725 of _0x27bd1d){const _0x1a6564=_0x2f58e8['rayIntersection'](_0x411982,_0x4c7725['rayEnd']);if(_0x1a6564){const _0x23b4ef=MathUtils['makeDecimal'](_0x4c7725['coef'],_0x4c265b),_0x136da9={'textFill':_0x4c7725['propsPart']['lineColor'],'textBg':'transparent','textFontFamily':_0x5d949a['fontFamily'],'textSize':getFontSizeInPx(_0x5d949a['fontSize'])},_0x193db4=_0x1a6564['point']['y']>0x0?_0x1f9d39['PROP_LABEL_PLACEMENT_LEFT']:_0x1f9d39['PROP_LABEL_PLACEMENT_RIGHT'],_0x29c1a6=calculateRaysVerticalLabelPlacement(_0x2f58e8,_0x411982,_0x27bd1d,_0x1a6564);_0x2f58e8['drawText'](_0x1a6564['point'],_0x23b4ef,_0x193db4,_0x29c1a6,_0x136da9);}}}}}['fillBetweenRays'](_0x2a2f11,_0x5434a5,_0x531742,_0x42e3a0,_0x28ecf4){_0x2a2f11['beginPath'](),_0x2a2f11['addFillBetweenRaysPath'](_0x5434a5,_0x531742['rayEnd'],_0x42e3a0,_0x28ecf4),_0x2a2f11['prepareFill'](_0x531742['propsPart']),_0x2a2f11['fillWithoutHT']();}['drawRay'](_0x11c041,_0x29b0be,_0x4f24ed,_0x41d9ea){_0x11c041['beginPath'](),_0x11c041['addRayPath'](_0x29b0be,_0x4f24ed),_0x11c041['prepareStroke'](_0x41d9ea),_0x11c041['stroke']();}['sortUnique'](_0x4eae4d){_0x4eae4d['sort']((_0x53313c,_0x2e11b1)=>{if(_0x53313c['coef']<_0x2e11b1['coef'])return-0x1;if(_0x53313c['coef']>_0x2e11b1['coef'])return 0x1;return 0x0;});for(let _0x124363=_0x4eae4d['length']-0x1;_0x124363>0x0;--_0x124363){const _0x38dcc1=_0x4eae4d[_0x124363-0x1],_0x2b3153=_0x4eae4d[_0x124363];_0x38dcc1['coef']===_0x2b3153['coef']&&_0x4eae4d['splice'](_0x124363,0x1);}}}