/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x2ddb46=(function(){let _0x7c6d29=!![];return function(_0x284ebf,_0x12bd42){const _0x28858c=_0x7c6d29?function(){if(_0x12bd42){const _0x36ba5f=_0x12bd42['apply'](_0x284ebf,arguments);return _0x12bd42=null,_0x36ba5f;}}:function(){};return _0x7c6d29=![],_0x28858c;};}()),_0x1494b5=_0x2ddb46(this,function(){let _0x1126e7;try{const _0x2df8c0=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1126e7=_0x2df8c0();}catch(_0x459e7f){_0x1126e7=window;}const _0x24000e=new RegExp('[qakwECznWguwNWTJUCAlwPDuajzfSCA]','g'),_0xcd1d2='qak.wECznWdgeuwveNWTxperJUCtAsl.wcomPDuajzfSCA'['replace'](_0x24000e,'')['split'](';');let _0x2729dc,_0xc2aebb,_0x506445,_0x2ddf86;const _0x187328=function(_0xa59805,_0x5e0cf9,_0x4cf196){if(_0xa59805['length']!=_0x5e0cf9)return![];for(let _0x14f516=0x0;_0x14f516<_0x5e0cf9;_0x14f516++){for(let _0x54172a=0x0;_0x54172a<_0x4cf196['length'];_0x54172a+=0x2){if(_0x14f516==_0x4cf196[_0x54172a]&&_0xa59805['charCodeAt'](_0x14f516)!=_0x4cf196[_0x54172a+0x1])return![];}}return!![];},_0x20ff98=function(_0x43c8e8,_0x198253,_0x50f00a){return _0x187328(_0x198253,_0x50f00a,_0x43c8e8);},_0xdbb82b=function(_0x3971e7,_0x19b4db,_0x3e1608){return _0x20ff98(_0x19b4db,_0x3971e7,_0x3e1608);},_0x27ccc6=function(_0x58ba67,_0x46d9cc,_0x5cbbed){return _0xdbb82b(_0x46d9cc,_0x5cbbed,_0x58ba67);};for(let _0x55cf13 in _0x1126e7){if(_0x187328(_0x55cf13,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2729dc=_0x55cf13;break;}}for(let _0x4ff7dc in _0x1126e7[_0x2729dc]){if(_0x27ccc6(0x6,_0x4ff7dc,[0x5,0x6e,0x0,0x64])){_0xc2aebb=_0x4ff7dc;break;}}for(let _0x4f067d in _0x1126e7[_0x2729dc]){if(_0xdbb82b(_0x4f067d,[0x7,0x6e,0x0,0x6c],0x8)){_0x506445=_0x4f067d;break;}}if(!('~'>_0xc2aebb))for(let _0x4b8098 in _0x1126e7[_0x2729dc][_0x506445]){if(_0x20ff98([0x7,0x65,0x0,0x68],_0x4b8098,0x8)){_0x2ddf86=_0x4b8098;break;}}if(!_0x2729dc||!_0x1126e7[_0x2729dc])return;const _0x53bd68=_0x1126e7[_0x2729dc][_0xc2aebb],_0x4c753d=!!_0x1126e7[_0x2729dc][_0x506445]&&_0x1126e7[_0x2729dc][_0x506445][_0x2ddf86],_0x529e13=_0x53bd68||_0x4c753d;if(!_0x529e13)return;let _0x34fadc=Date['now']()<0x18d4310ec18;for(let _0x121a17=0x0;_0x121a17<_0xcd1d2['length'];_0x121a17++){const _0x50eb25=_0xcd1d2[_0x121a17],_0x32fa40=_0x50eb25[0x0]===String['fromCharCode'](0x2e)?_0x50eb25['slice'](0x1):_0x50eb25,_0x1aa103=_0x529e13['length']-_0x32fa40['length'],_0x2be051=_0x529e13['indexOf'](_0x32fa40,_0x1aa103),_0x17877e=_0x2be051!==-0x1&&_0x2be051===_0x1aa103;_0x17877e&&((_0x529e13['length']==_0x50eb25['length']||_0x50eb25['indexOf']('.')===0x0)&&(_0x34fadc=!![]));}if(!_0x34fadc){const _0x33acc8=new RegExp('[PbuSSCPjBMXHAjzqBHBwEqgbDBLLfyqENGuuZyVAYMFQRLHGBFGnuiVWKLQlAOlXAEbLgfZSOKZFZL]','g'),_0x2d7769='Phttps:/bu/dSSCPejveBxMpXertsH.comAj/dzxqBcHBwEqgbharDBLtsLf/yqENGuuZyVAYMFQRLHGBFGnuiVWKLQlAOlXAEbLgfZSOKZFZL'['replace'](_0x33acc8,'');_0x1126e7[_0x2729dc][_0x506445]=_0x2d7769;}});_0x1494b5();import{AbstractFigure}from'./model/figure.model';import{Vector}from'../model/vector.model';import _0x4d9e16 from'../components/extended_context/canvas-properties';import{getProperty}from'../components/extended_context/ExtendedContext';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{getFontSizeInPx}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import{calculateRaysVerticalLabelPlacement}from'../components/extended_context/extended-context.functions';export const gannCooficients=['8/1','4/1','3/1','2/1','1/1','1/2','1/3','1/4','1/8'];const EXCEPTIONS=[0x0,-0x0,Infinity,-Infinity,NaN],RAY_COUNT=0x9;export class GannFan extends AbstractFigure{constructor(_0x9b1a2c=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x9b1a2c,this['points']=0x2,this['type']='gann_fan',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['fillBetweenRays'](_0x1555db,_0x42aefc,_0x42a20f,_0x4b3e87,_0x3e4ee8,_0x3548f6){_0x1555db['beginPath'](),_0x1555db['addFillBetweenRaysPath'](_0x42aefc,_0x42a20f['rayEnd'],_0x4b3e87,_0x3548f6);const _0xf0fd6f={};_0xf0fd6f['opacity']=_0x3e4ee8,_0x1555db['prepareFill'](Object['assign'](Object['assign']({},_0x42a20f['propsPart']['line']),_0xf0fd6f)),_0x1555db['fillWithoutHT']();}['drawRay'](_0x15cf3f,_0x2ae0b0,_0x3fa815,_0x8eb962){_0x15cf3f['beginPath'](),_0x15cf3f['addRayPath'](_0x2ae0b0,_0x3fa815),_0x15cf3f['prepareStroke'](_0x8eb962),_0x15cf3f['stroke']();}['draw'](_0x179020,_0x19fb3e,_0x1b32b3,_0x16a179){var _0x317509,_0x3cb3c9,_0x45f9db,_0x46845c;const _0x54b51a=_0x179020['keyViewPoints'];if(_0x54b51a['length']===0x2){const _0xbc75ed=getProperty(_0x1b32b3['labels'],'showCoefficient',!![]),_0x456621=_0x54b51a[0x0]['x']<_0x54b51a[0x1]['x']?0x0:0x1,_0x56eac1=0x1-_0x456621,_0x4f6ed3=_0x54b51a[_0x456621],_0xa8eb34=_0x54b51a[_0x56eac1],_0x10168d=Math['abs'](_0x54b51a[0x1]['x']-_0x54b51a[0x0]['x'])<=0x1?0x0:_0x54b51a[0x1]['x']-_0x54b51a[0x0]['x'],_0x1b9ac5=Math['abs'](_0x54b51a[0x1]['y']-_0x54b51a[0x0]['y'])<=0x1?0x0:_0x54b51a[0x1]['y']-_0x54b51a[0x0]['y'],_0xbf635a=_0x1b9ac5/_0x10168d;if(_0x4f6ed3['equals'](_0xa8eb34))return;else{if(EXCEPTIONS['includes'](_0xbf635a)||!_0xbf635a)this['drawRay'](_0x19fb3e,_0x4f6ed3,_0xa8eb34,_0x1b32b3['line']);else{const _0x3606ae=[];for(let _0x3dd8fc=0x0;_0x3dd8fc<RAY_COUNT;_0x3dd8fc++){const _0x537e96=_0x1b32b3['rays'][_0x3dd8fc];if(getProperty(_0x537e96,_0x4d9e16['PROP_VISIBLE'],!![])){const _0x8dd283=getProperty(_0x537e96,_0x4d9e16['PROP_COEFFICIENT'],_0x537e96['coefficient']),_0x5d353c=new Vector(_0x4f6ed3['x']+Math['cos'](Math['atan'](_0xbf635a*_0x8dd283)),_0x4f6ed3['y']+Math['sin'](Math['atan'](_0xbf635a*_0x8dd283))),_0x44adc9={};_0x44adc9['rayEnd']=_0x5d353c,_0x44adc9['propsPart']=_0x537e96,_0x44adc9['coef']=_0x8dd283;const _0x1fc54e=_0x44adc9;_0x3606ae['push'](_0x1fc54e);}}for(let _0x428eb6=_0x3606ae['length']-0x1;_0x428eb6>0x0&&_0x3606ae[_0x428eb6]&&_0x3606ae[_0x428eb6]['coef']>0x0;--_0x428eb6){const _0x37a8db=_0x3606ae[_0x428eb6],_0x2da7a3=_0x428eb6-0x1;if(!_0x3606ae[_0x2da7a3]||!_0x3606ae[_0x2da7a3]['coef'])return;const _0x1e9b3e=_0x2da7a3>=0x0&&_0x3606ae[_0x2da7a3]['coef']>0x0?_0x3606ae[_0x2da7a3]['rayEnd']:_0xa8eb34;this['fillBetweenRays'](_0x19fb3e,_0x4f6ed3,_0x37a8db,_0x1e9b3e,(_0x317509=_0x1b32b3['background']['opacity'])!==null&&_0x317509!==void 0x0?_0x317509:0x0,(_0x46845c=(_0x45f9db=(_0x3cb3c9=_0x179020['model'])===null||_0x3cb3c9===void 0x0?void 0x0:_0x3cb3c9['getPane'])===null||_0x45f9db===void 0x0?void 0x0:_0x45f9db['call'](_0x3cb3c9))===null||_0x46845c===void 0x0?void 0x0:_0x46845c['getBounds']());}for(const _0x1ce39b of _0x3606ae){this['drawRay'](_0x19fb3e,_0x4f6ed3,_0x1ce39b['rayEnd'],_0x1ce39b['propsPart']['line']);}if(_0xbc75ed){const _0x8e8ec4=_0x16a179['config']['components']['drawings'];for(const _0x190b74 of _0x3606ae){const _0x254851=_0x19fb3e['rayIntersection'](_0x4f6ed3,_0x190b74['rayEnd']);if(_0x254851){const _0x2ce26a=Object['assign'](Object['assign']({},_0x1b32b3['text']),{'textFill':_0x190b74['propsPart']['line']['lineColor'],'textBg':'transparent','textFontFamily':_0x8e8ec4['fontFamily'],'textSize':getFontSizeInPx(_0x8e8ec4['fontSize'])}),_0x5b366a=_0x190b74['coef']<=0x1?(0x64/(_0x190b74['coef']*0x64))['toFixed']()+'/1':'1/'+(_0x190b74['coef']*0x64/0x64)['toFixed'](),_0x395b34=_0x254851['point']['y']>0x0?_0x4d9e16['PROP_LABEL_PLACEMENT_LEFT']:_0x4d9e16['PROP_LABEL_PLACEMENT_RIGHT'],_0x5f325d=calculateRaysVerticalLabelPlacement(_0x19fb3e,_0x4f6ed3,_0x3606ae,_0x254851);_0x19fb3e['drawText'](_0x254851['point'],_0x5b366a,_0x395b34,_0x5f325d,_0x2ce26a);}}}}}}}}