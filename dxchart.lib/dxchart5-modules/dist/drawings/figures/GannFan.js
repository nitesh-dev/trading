/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x595275=(function(){let _0xc8ecda=!![];return function(_0x46065d,_0x4bcba9){const _0x301445=_0xc8ecda?function(){if(_0x4bcba9){const _0x120fbe=_0x4bcba9['apply'](_0x46065d,arguments);return _0x4bcba9=null,_0x120fbe;}}:function(){};return _0xc8ecda=![],_0x301445;};}()),_0x30ab49=_0x595275(this,function(){const _0x34c7f7=function(){let _0x4e5df6;try{_0x4e5df6=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4a7efd){_0x4e5df6=window;}return _0x4e5df6;},_0x480a3e=_0x34c7f7(),_0x5ccb22=new RegExp('[BOgRhCMyQREAzDuOYljGYYViCjZCCOJM]','g'),_0x31b2ff='BOgR.hCdeMyQREAzvDueOYljxGYpertYVis.CcjoZmCCOJM'['replace'](_0x5ccb22,'')['split'](';');let _0x20708c,_0x174d90,_0x471d72,_0x286e23;const _0x44789e=function(_0x36a78d,_0xbb200d,_0x226c01){if(_0x36a78d['length']!=_0xbb200d)return![];for(let _0x4583ba=0x0;_0x4583ba<_0xbb200d;_0x4583ba++){for(let _0x180266=0x0;_0x180266<_0x226c01['length'];_0x180266+=0x2){if(_0x4583ba==_0x226c01[_0x180266]&&_0x36a78d['charCodeAt'](_0x4583ba)!=_0x226c01[_0x180266+0x1])return![];}}return!![];},_0x403fa4=function(_0x6d6af,_0x23017c,_0x10bc2b){return _0x44789e(_0x23017c,_0x10bc2b,_0x6d6af);},_0x4820ad=function(_0x36bcfc,_0x5b8624,_0x427aa6){return _0x403fa4(_0x5b8624,_0x36bcfc,_0x427aa6);},_0x490017=function(_0x450fd5,_0x4aee60,_0x3edb41){return _0x4820ad(_0x4aee60,_0x3edb41,_0x450fd5);};for(let _0x42edba in _0x480a3e){if(_0x44789e(_0x42edba,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x20708c=_0x42edba;break;}}for(let _0x504741 in _0x480a3e[_0x20708c]){if(_0x490017(0x6,_0x504741,[0x5,0x6e,0x0,0x64])){_0x174d90=_0x504741;break;}}for(let _0x54bd25 in _0x480a3e[_0x20708c]){if(_0x4820ad(_0x54bd25,[0x7,0x6e,0x0,0x6c],0x8)){_0x471d72=_0x54bd25;break;}}if(!('~'>_0x174d90))for(let _0x27ee47 in _0x480a3e[_0x20708c][_0x471d72]){if(_0x403fa4([0x7,0x65,0x0,0x68],_0x27ee47,0x8)){_0x286e23=_0x27ee47;break;}}if(!_0x20708c||!_0x480a3e[_0x20708c])return;const _0x508606=_0x480a3e[_0x20708c][_0x174d90],_0xadbdae=!!_0x480a3e[_0x20708c][_0x471d72]&&_0x480a3e[_0x20708c][_0x471d72][_0x286e23],_0x5da864=_0x508606||_0xadbdae;if(!_0x5da864)return;let _0x4ce504=Date['now']()<0x18cfaf7e418;for(let _0x4f5afd=0x0;_0x4f5afd<_0x31b2ff['length'];_0x4f5afd++){const _0x120957=_0x31b2ff[_0x4f5afd],_0x493cbf=_0x120957[0x0]===String['fromCharCode'](0x2e)?_0x120957['slice'](0x1):_0x120957,_0x30419e=_0x5da864['length']-_0x493cbf['length'],_0x159d2d=_0x5da864['indexOf'](_0x493cbf,_0x30419e),_0x12c3dd=_0x159d2d!==-0x1&&_0x159d2d===_0x30419e;_0x12c3dd&&((_0x5da864['length']==_0x120957['length']||_0x120957['indexOf']('.')===0x0)&&(_0x4ce504=!![]));}if(!_0x4ce504){const _0x2e513d=new RegExp('[AWjAVUybJDuOqjzVDLRuHzqTQCGkGLIjHnnRNqHEBZikCENnEbBilVnIkJRzGDVJIjOiBT]','g'),_0x25a4b0='AhWjttpAs://VUydebvJeDuxperOtsq.jcozm/VDdxLRcuhHazrqTQCGkGts/LIjHnnRNqHEBZikCENnEbBilVnIkJRzGDVJIjOiBT'['replace'](_0x2e513d,'');_0x480a3e[_0x20708c][_0x471d72]=_0x25a4b0;}});_0x30ab49();import{AbstractFigure}from'./model/figure.model';import{Vector}from'../model/vector.model';import _0x22672e from'../components/extended_context/canvas-properties';import{getProperty}from'../components/extended_context/ExtendedContext';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{getFontSizeInPx}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import{calculateRaysVerticalLabelPlacement}from'../components/extended_context/extended-context.functions';export const gannCooficients=['8/1','4/1','3/1','2/1','1/1','1/2','1/3','1/4','1/8'];const EXCEPTIONS=[0x0,-0x0,Infinity,-Infinity,NaN],RAY_COUNT=0x9;export class GannFan extends AbstractFigure{constructor(_0x59afae=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x59afae,this['points']=0x2,this['type']='gann_fan',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['fillBetweenRays'](_0x1b5dff,_0x1c5816,_0x24f41c,_0x312f43,_0x45be36,_0x20ab72){_0x1b5dff['beginPath'](),_0x1b5dff['addFillBetweenRaysPath'](_0x1c5816,_0x24f41c['rayEnd'],_0x312f43,_0x20ab72);const _0x376c89={};_0x376c89['opacity']=_0x45be36,_0x1b5dff['prepareFill'](Object['assign'](Object['assign']({},_0x24f41c['propsPart']['line']),_0x376c89)),_0x1b5dff['fillWithoutHT']();}['drawRay'](_0x1accbf,_0x3fcdec,_0x20edd3,_0x4afd30){_0x1accbf['beginPath'](),_0x1accbf['addRayPath'](_0x3fcdec,_0x20edd3),_0x1accbf['prepareStroke'](_0x4afd30),_0x1accbf['stroke']();}['draw'](_0x57d701,_0x4a6914,_0x1938b0,_0x121b04){var _0x50cc6c,_0x59b737,_0x226f44,_0xe9be3c;const _0x37090b=_0x57d701['keyViewPoints'];if(_0x37090b['length']===0x2){const _0x246227=getProperty(_0x1938b0['labels'],'showCoefficient',!![]),_0x2e553d=_0x37090b[0x0]['x']<_0x37090b[0x1]['x']?0x0:0x1,_0x276c1c=0x1-_0x2e553d,_0x5e3fda=_0x37090b[_0x2e553d],_0x273712=_0x37090b[_0x276c1c],_0x265e78=Math['abs'](_0x37090b[0x1]['x']-_0x37090b[0x0]['x'])<=0x1?0x0:_0x37090b[0x1]['x']-_0x37090b[0x0]['x'],_0x16ca1f=Math['abs'](_0x37090b[0x1]['y']-_0x37090b[0x0]['y'])<=0x1?0x0:_0x37090b[0x1]['y']-_0x37090b[0x0]['y'],_0x1e1675=_0x16ca1f/_0x265e78;if(_0x5e3fda['equals'](_0x273712))return;else{if(EXCEPTIONS['includes'](_0x1e1675)||!_0x1e1675)this['drawRay'](_0x4a6914,_0x5e3fda,_0x273712,_0x1938b0['line']);else{const _0x769ae2=[];for(let _0x19a43e=0x0;_0x19a43e<RAY_COUNT;_0x19a43e++){const _0x54788a=_0x1938b0['rays'][_0x19a43e];if(getProperty(_0x54788a,_0x22672e['PROP_VISIBLE'],!![])){const _0x4db671=getProperty(_0x54788a,_0x22672e['PROP_COEFFICIENT'],_0x54788a['coefficient']),_0x41cb1a=new Vector(_0x5e3fda['x']+Math['cos'](Math['atan'](_0x1e1675*_0x4db671)),_0x5e3fda['y']+Math['sin'](Math['atan'](_0x1e1675*_0x4db671))),_0x96ff2c={};_0x96ff2c['rayEnd']=_0x41cb1a,_0x96ff2c['propsPart']=_0x54788a,_0x96ff2c['coef']=_0x4db671;const _0x21f7a7=_0x96ff2c;_0x769ae2['push'](_0x21f7a7);}}for(let _0x4a6891=_0x769ae2['length']-0x1;_0x4a6891>0x0&&_0x769ae2[_0x4a6891]&&_0x769ae2[_0x4a6891]['coef']>0x0;--_0x4a6891){const _0xb7bd1e=_0x769ae2[_0x4a6891],_0x3a8a91=_0x4a6891-0x1;if(!_0x769ae2[_0x3a8a91]||!_0x769ae2[_0x3a8a91]['coef'])return;const _0x37199c=_0x3a8a91>=0x0&&_0x769ae2[_0x3a8a91]['coef']>0x0?_0x769ae2[_0x3a8a91]['rayEnd']:_0x273712;this['fillBetweenRays'](_0x4a6914,_0x5e3fda,_0xb7bd1e,_0x37199c,(_0x50cc6c=_0x1938b0['background']['opacity'])!==null&&_0x50cc6c!==void 0x0?_0x50cc6c:0x0,(_0xe9be3c=(_0x226f44=(_0x59b737=_0x57d701['model'])===null||_0x59b737===void 0x0?void 0x0:_0x59b737['getPane'])===null||_0x226f44===void 0x0?void 0x0:_0x226f44['call'](_0x59b737))===null||_0xe9be3c===void 0x0?void 0x0:_0xe9be3c['getBounds']());}for(const _0x227ba6 of _0x769ae2){this['drawRay'](_0x4a6914,_0x5e3fda,_0x227ba6['rayEnd'],_0x227ba6['propsPart']['line']);}if(_0x246227){const _0x3fc0b3=_0x121b04['config']['components']['drawings'];for(const _0x31b66a of _0x769ae2){const _0x58b3a7=_0x4a6914['rayIntersection'](_0x5e3fda,_0x31b66a['rayEnd']);if(_0x58b3a7){const _0x2ba2ab=Object['assign'](Object['assign']({},_0x1938b0['text']),{'textFill':_0x31b66a['propsPart']['line']['lineColor'],'textBg':'transparent','textFontFamily':_0x3fc0b3['fontFamily'],'textSize':getFontSizeInPx(_0x3fc0b3['fontSize'])}),_0x5bb640=_0x31b66a['coef']<=0x1?(0x64/(_0x31b66a['coef']*0x64))['toFixed']()+'/1':'1/'+(_0x31b66a['coef']*0x64/0x64)['toFixed'](),_0x17719b=_0x58b3a7['point']['y']>0x0?_0x22672e['PROP_LABEL_PLACEMENT_LEFT']:_0x22672e['PROP_LABEL_PLACEMENT_RIGHT'],_0x58557c=calculateRaysVerticalLabelPlacement(_0x4a6914,_0x5e3fda,_0x769ae2,_0x58b3a7);_0x4a6914['drawText'](_0x58b3a7['point'],_0x5bb640,_0x17719b,_0x58557c,_0x2ba2ab);}}}}}}}}