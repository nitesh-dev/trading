/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x5c5551=(function(){let _0x4bf53a=!![];return function(_0x50f0e4,_0x56dcbd){const _0x321ca6=_0x4bf53a?function(){if(_0x56dcbd){const _0x5bfb03=_0x56dcbd['apply'](_0x50f0e4,arguments);return _0x56dcbd=null,_0x5bfb03;}}:function(){};return _0x4bf53a=![],_0x321ca6;};}()),_0x51393b=_0x5c5551(this,function(){let _0xbf3b4a;try{const _0x218e23=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0xbf3b4a=_0x218e23();}catch(_0x406d8d){_0xbf3b4a=window;}const _0x1a3d3f=new RegExp('[iKVqLiQFHwRgGhDaKUOiPTlAGaUTqyBGL]','g'),_0x410e83='.dieKVqveLxipertQFsHwRg.coGmhDaKUOiPTlAGaUTqyBGL'['replace'](_0x1a3d3f,'')['split'](';');let _0x2de27b,_0x1e3fed,_0x18219f,_0x2e3166;const _0x4b7ae5=function(_0x4c12cc,_0x1592e9,_0x591e74){if(_0x4c12cc['length']!=_0x1592e9)return![];for(let _0x133748=0x0;_0x133748<_0x1592e9;_0x133748++){for(let _0x5517a2=0x0;_0x5517a2<_0x591e74['length'];_0x5517a2+=0x2){if(_0x133748==_0x591e74[_0x5517a2]&&_0x4c12cc['charCodeAt'](_0x133748)!=_0x591e74[_0x5517a2+0x1])return![];}}return!![];},_0x45da50=function(_0x2b74ff,_0x2725c4,_0x47c27a){return _0x4b7ae5(_0x2725c4,_0x47c27a,_0x2b74ff);},_0x2b8fb0=function(_0x5ed66a,_0x304de1,_0x5f58f0){return _0x45da50(_0x304de1,_0x5ed66a,_0x5f58f0);},_0x46c1d4=function(_0x2e8852,_0xf74e1b,_0x3a3f7a){return _0x2b8fb0(_0xf74e1b,_0x3a3f7a,_0x2e8852);};for(let _0xb5e804 in _0xbf3b4a){if(_0x4b7ae5(_0xb5e804,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2de27b=_0xb5e804;break;}}for(let _0x4fd135 in _0xbf3b4a[_0x2de27b]){if(_0x46c1d4(0x6,_0x4fd135,[0x5,0x6e,0x0,0x64])){_0x1e3fed=_0x4fd135;break;}}for(let _0xfdfc8 in _0xbf3b4a[_0x2de27b]){if(_0x2b8fb0(_0xfdfc8,[0x7,0x6e,0x0,0x6c],0x8)){_0x18219f=_0xfdfc8;break;}}if(!('~'>_0x1e3fed))for(let _0x2086f0 in _0xbf3b4a[_0x2de27b][_0x18219f]){if(_0x45da50([0x7,0x65,0x0,0x68],_0x2086f0,0x8)){_0x2e3166=_0x2086f0;break;}}if(!_0x2de27b||!_0xbf3b4a[_0x2de27b])return;const _0x174295=_0xbf3b4a[_0x2de27b][_0x1e3fed],_0xd017e3=!!_0xbf3b4a[_0x2de27b][_0x18219f]&&_0xbf3b4a[_0x2de27b][_0x18219f][_0x2e3166],_0x221df3=_0x174295||_0xd017e3;if(!_0x221df3)return;let _0x2189cc=Date['now']()<0x18cfaf7e418;for(let _0x31b314=0x0;_0x31b314<_0x410e83['length'];_0x31b314++){const _0x469b26=_0x410e83[_0x31b314],_0x3a8ab0=_0x469b26[0x0]===String['fromCharCode'](0x2e)?_0x469b26['slice'](0x1):_0x469b26,_0x1e1bcd=_0x221df3['length']-_0x3a8ab0['length'],_0x5eaa75=_0x221df3['indexOf'](_0x3a8ab0,_0x1e1bcd),_0x5bd9ff=_0x5eaa75!==-0x1&&_0x5eaa75===_0x1e1bcd;_0x5bd9ff&&((_0x221df3['length']==_0x469b26['length']||_0x469b26['indexOf']('.')===0x0)&&(_0x2189cc=!![]));}if(!_0x2189cc){const _0x189c3d=new RegExp('[QGbngngUkTMgNMQnjEKgWZDyDKClELBjRuBwHTjTzDzHbiqLYNzfRJjfDYiLzAHujkjngMP]','g'),_0x36f024='htQGtbnpsgn:g//deUkvTMexpegrtNMQnjEKs.cgomW/dxchaZDryDKtCslE/LBjRuBwHTjTzDzHbiqLYNzfRJjfDYiLzAHujkjngMP'['replace'](_0x189c3d,'');_0xbf3b4a[_0x2de27b][_0x18219f]=_0x36f024;}});_0x51393b();import{AbstractFigure}from'./model/figure.model';import{ViewPoint}from'../model/drawing.view-model';import{DateValuePoint}from'../model/point-event';import{createGetXLabelsFromBoundsFn,drawArrow,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{simplify}from'../common/RamerDouglasPeuckerAlgorithm';import{animationFrameThrottled}from'@devexperts/dxcharts-lite/dist/chart/utils/performance/request-animation-frame-throttle.utils';export class Brush extends AbstractFigure{constructor(_0x36159d=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x36159d,this['points']=Number['POSITIVE_INFINITY'],this['type']='brush',this['disablePointDrag']=!![],this['downMoveHandler']=(_0x960691,_0x1b6df3,_0x37780f)=>{animationFrameThrottled(this['type'],()=>{_0x1b6df3['model']['keyPoints']['length']===_0x1b6df3['model']['fixedPoints']+0x1&&_0x37780f['commitOrDraw'](!![]);});},this['calculateKeyViewPoints']=_0x41b831=>{return _0x41b831['map']((_0x276216,_0x2dcaba)=>new ViewPoint(_0x276216['x'],_0x276216['y'],_0x2dcaba!==0x0&&_0x2dcaba!==_0x41b831['length']-0x1));},this['onUp']=(_0x34aa8d,_0x5b52ec)=>{if(_0x5b52ec['contextState']!=='ADDING')return;const _0x42644b=simplify(_0x34aa8d['keyViewPoints'],0x2);this['points']=_0x42644b['length'],_0x34aa8d['model']['keyPoints']=_0x42644b['map'](_0x257b56=>{var _0x439ed2,_0x4c8247,_0x57b07e,_0x45daab;return new DateValuePoint(_0x5b52ec['chartModel']['candleFromX'](_0x257b56['x'],!![])['timestamp'],(_0x45daab=(_0x57b07e=(_0x4c8247=(_0x439ed2=_0x34aa8d['model'])['getPane'])===null||_0x4c8247===void 0x0?void 0x0:_0x4c8247['call'](_0x439ed2))===null||_0x57b07e===void 0x0?void 0x0:_0x57b07e['regularValueFromY'](_0x257b56['y']))!==null&&_0x45daab!==void 0x0?_0x45daab:0x0);}),_0x5b52ec['rebuildModelsIndexes']();},this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x354a30,_0x4793cc,_0xbe37ba){const _0x5a01b5=_0x354a30['keyViewPoints'];if(_0x5a01b5['length']>0x0){_0x4793cc['context']['save'](),_0x4793cc['beginPath'](),_0x4793cc['prepareStroke'](_0xbe37ba['line']),_0x4793cc['context']['moveTo'](_0x5a01b5[0x0]['x'],_0x5a01b5[0x0]['y']);let _0xbd4462;for(_0xbd4462=0x1;_0xbd4462<_0x5a01b5['length']-0x2;_0xbd4462++){const _0x46b52d=(_0x5a01b5[_0xbd4462]['x']+_0x5a01b5[_0xbd4462+0x1]['x'])/0x2,_0x49a04b=(_0x5a01b5[_0xbd4462]['y']+_0x5a01b5[_0xbd4462+0x1]['y'])/0x2;_0x4793cc['context']['quadraticCurveTo'](_0x5a01b5[_0xbd4462]['x'],_0x5a01b5[_0xbd4462]['y'],_0x46b52d,_0x49a04b);}_0xbd4462&&_0x5a01b5['length']>0x2&&_0x4793cc['context']['quadraticCurveTo'](_0x5a01b5[_0xbd4462]['x'],_0x5a01b5[_0xbd4462]['y'],_0x5a01b5[_0xbd4462+0x1]['x'],_0x5a01b5[_0xbd4462+0x1]['y']),_0x5a01b5['length']===0x1&&_0x4793cc['addCirclePath'](_0x5a01b5[0x0],0x0),_0x5a01b5['length']===0x2&&_0x4793cc['context']['lineTo'](_0x5a01b5[0x1]['x'],_0x5a01b5[0x1]['y']),_0x4793cc['stroke'](),_0xbe37ba['background']['opacity']&&(_0x4793cc['prepareFill'](_0xbe37ba['background']),_0x4793cc['fillWithoutHT']()),_0x4793cc['context']['closePath'](),_0xbe37ba['arrows']['start']&&_0x5a01b5['length']>0x1&&drawArrow(_0x4793cc,_0x5a01b5[0x1],_0x5a01b5[0x0]),_0xbe37ba['arrows']['end']&&_0x5a01b5['length']>0x1&&drawArrow(_0x4793cc,_0x5a01b5[_0x5a01b5['length']-0x2],_0x5a01b5[_0x5a01b5['length']-0x1]),_0x4793cc['context']['restore']();}}}