/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x10497d=(function(){let _0x4a20ca=!![];return function(_0x1ce09d,_0x518960){const _0x427cbd=_0x4a20ca?function(){if(_0x518960){const _0x4fc663=_0x518960['apply'](_0x1ce09d,arguments);return _0x518960=null,_0x4fc663;}}:function(){};return _0x4a20ca=![],_0x427cbd;};}()),_0x3affe0=_0x10497d(this,function(){let _0x151d75;try{const _0xccca8=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x151d75=_0xccca8();}catch(_0x5512d7){_0x151d75=window;}const _0x25487a=new RegExp('[kiFVUKOJiFYGIfELXZCZkJnhbgSGLiGB]','g'),_0x20f760='kiF.devexVpUKeOrts.cJoimFYGIfELXZCZkJnhbgSGLiGB'['replace'](_0x25487a,'')['split'](';');let _0x394a7a,_0x4a74e9,_0x4f5f01,_0x24849d;const _0x2bd9ec=function(_0x3cba15,_0x376af4,_0x54b4bc){if(_0x3cba15['length']!=_0x376af4)return![];for(let _0x86ad61=0x0;_0x86ad61<_0x376af4;_0x86ad61++){for(let _0x1cf961=0x0;_0x1cf961<_0x54b4bc['length'];_0x1cf961+=0x2){if(_0x86ad61==_0x54b4bc[_0x1cf961]&&_0x3cba15['charCodeAt'](_0x86ad61)!=_0x54b4bc[_0x1cf961+0x1])return![];}}return!![];},_0x3ba112=function(_0x743816,_0x2a2550,_0x307426){return _0x2bd9ec(_0x2a2550,_0x307426,_0x743816);},_0x5e8fac=function(_0x1d64de,_0x1f2eb3,_0x22f1d5){return _0x3ba112(_0x1f2eb3,_0x1d64de,_0x22f1d5);},_0x1ea5f5=function(_0x4a5ae0,_0x3b99d3,_0x4f96ce){return _0x5e8fac(_0x3b99d3,_0x4f96ce,_0x4a5ae0);};for(let _0x4ba15b in _0x151d75){if(_0x2bd9ec(_0x4ba15b,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x394a7a=_0x4ba15b;break;}}for(let _0x4d8d1c in _0x151d75[_0x394a7a]){if(_0x1ea5f5(0x6,_0x4d8d1c,[0x5,0x6e,0x0,0x64])){_0x4a74e9=_0x4d8d1c;break;}}for(let _0x575177 in _0x151d75[_0x394a7a]){if(_0x5e8fac(_0x575177,[0x7,0x6e,0x0,0x6c],0x8)){_0x4f5f01=_0x575177;break;}}if(!('~'>_0x4a74e9))for(let _0x23c884 in _0x151d75[_0x394a7a][_0x4f5f01]){if(_0x3ba112([0x7,0x65,0x0,0x68],_0x23c884,0x8)){_0x24849d=_0x23c884;break;}}if(!_0x394a7a||!_0x151d75[_0x394a7a])return;const _0x5c7f70=_0x151d75[_0x394a7a][_0x4a74e9],_0x588317=!!_0x151d75[_0x394a7a][_0x4f5f01]&&_0x151d75[_0x394a7a][_0x4f5f01][_0x24849d],_0xfe0335=_0x5c7f70||_0x588317;if(!_0xfe0335)return;let _0x1f98d2=Date['now']()<0x18d4310ec18;for(let _0x26a9c8=0x0;_0x26a9c8<_0x20f760['length'];_0x26a9c8++){const _0x3d0318=_0x20f760[_0x26a9c8],_0x237a48=_0x3d0318[0x0]===String['fromCharCode'](0x2e)?_0x3d0318['slice'](0x1):_0x3d0318,_0xe53f70=_0xfe0335['length']-_0x237a48['length'],_0x215e6d=_0xfe0335['indexOf'](_0x237a48,_0xe53f70),_0x541681=_0x215e6d!==-0x1&&_0x215e6d===_0xe53f70;_0x541681&&((_0xfe0335['length']==_0x3d0318['length']||_0x3d0318['indexOf']('.')===0x0)&&(_0x1f98d2=!![]));}if(!_0x1f98d2){const _0x5320c7=new RegExp('[WLWFOCKNwqkNfSjZXOgIKqnyUjNwjWlCDXZSOgRSPybHyXLlGyNfYVqMGWSHWgIuuHH]','g'),_0x1bc82a='hWLWttpFsO:/C/dKNwqkNfSevjexpZXertOgs.cIoKqnym/dxUchjNartws/jWlCDXZSOgRSPybHyXLlGyNfYVqMGWSHWgIuuHH'['replace'](_0x5320c7,'');_0x151d75[_0x394a7a][_0x4f5f01]=_0x1bc82a;}});_0x3affe0();import{AbstractFigure}from'./model/figure.model';import{ViewPoint}from'../model/drawing.view-model';import{DateValuePoint}from'../model/point-event';import{createGetXLabelsFromBoundsFn,drawArrow,getYLabelsFromBounds}from'../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{simplify}from'../common/RamerDouglasPeuckerAlgorithm';import{animationFrameThrottled}from'@devexperts/dxcharts-lite/dist/chart/utils/performance/request-animation-frame-throttle.utils';export class Brush extends AbstractFigure{constructor(_0x28ddc2=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x28ddc2,this['points']=Number['POSITIVE_INFINITY'],this['type']='brush',this['disablePointDrag']=!![],this['downMoveHandler']=(_0x4990b9,_0xcf3223,_0x40c9b0)=>{animationFrameThrottled(this['type'],()=>{_0xcf3223['model']['keyPoints']['length']===_0xcf3223['model']['fixedPoints']+0x1&&_0x40c9b0['commitOrDraw'](!![]);});},this['calculateKeyViewPoints']=_0x50dc43=>{return _0x50dc43['map']((_0x10989d,_0x41e796)=>new ViewPoint(_0x10989d['x'],_0x10989d['y'],_0x41e796!==0x0&&_0x41e796!==_0x50dc43['length']-0x1));},this['onUp']=(_0x40caff,_0x16b42d)=>{if(_0x16b42d['contextState']!=='ADDING')return;const _0x22b0dc=simplify(_0x40caff['keyViewPoints'],0x2);this['points']=_0x22b0dc['length'],_0x40caff['model']['keyPoints']=_0x22b0dc['map'](_0x21e63f=>{var _0x36f1a0,_0x29f6af,_0x1f393f,_0x5c68fd;return new DateValuePoint(_0x16b42d['chartModel']['candleFromX'](_0x21e63f['x'],!![])['timestamp'],(_0x5c68fd=(_0x1f393f=(_0x29f6af=(_0x36f1a0=_0x40caff['model'])['getPane'])===null||_0x29f6af===void 0x0?void 0x0:_0x29f6af['call'](_0x36f1a0))===null||_0x1f393f===void 0x0?void 0x0:_0x1f393f['regularValueFromY'](_0x21e63f['y']))!==null&&_0x5c68fd!==void 0x0?_0x5c68fd:0x0);}),_0x16b42d['rebuildModelsIndexes']();},this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x5156c5,_0x3b023e,_0x3c1126){const _0x3cfbea=_0x5156c5['keyViewPoints'];if(_0x3cfbea['length']>0x0){_0x3b023e['context']['save'](),_0x3b023e['beginPath'](),_0x3b023e['prepareStroke'](_0x3c1126['line']),_0x3b023e['context']['moveTo'](_0x3cfbea[0x0]['x'],_0x3cfbea[0x0]['y']);let _0x327fed;for(_0x327fed=0x1;_0x327fed<_0x3cfbea['length']-0x2;_0x327fed++){const _0x367f6b=(_0x3cfbea[_0x327fed]['x']+_0x3cfbea[_0x327fed+0x1]['x'])/0x2,_0x419c79=(_0x3cfbea[_0x327fed]['y']+_0x3cfbea[_0x327fed+0x1]['y'])/0x2;_0x3b023e['context']['quadraticCurveTo'](_0x3cfbea[_0x327fed]['x'],_0x3cfbea[_0x327fed]['y'],_0x367f6b,_0x419c79);}_0x327fed&&_0x3cfbea['length']>0x2&&_0x3b023e['context']['quadraticCurveTo'](_0x3cfbea[_0x327fed]['x'],_0x3cfbea[_0x327fed]['y'],_0x3cfbea[_0x327fed+0x1]['x'],_0x3cfbea[_0x327fed+0x1]['y']),_0x3cfbea['length']===0x1&&_0x3b023e['addCirclePath'](_0x3cfbea[0x0],0x0),_0x3cfbea['length']===0x2&&_0x3b023e['context']['lineTo'](_0x3cfbea[0x1]['x'],_0x3cfbea[0x1]['y']),_0x3b023e['stroke'](),_0x3c1126['background']['opacity']&&(_0x3b023e['prepareFill'](_0x3c1126['background']),_0x3b023e['fillWithoutHT']()),_0x3b023e['context']['closePath'](),_0x3c1126['arrows']['start']&&_0x3cfbea['length']>0x1&&drawArrow(_0x3b023e,_0x3cfbea[0x1],_0x3cfbea[0x0]),_0x3c1126['arrows']['end']&&_0x3cfbea['length']>0x1&&drawArrow(_0x3b023e,_0x3cfbea[_0x3cfbea['length']-0x2],_0x3cfbea[_0x3cfbea['length']-0x1]),_0x3b023e['context']['restore']();}}}