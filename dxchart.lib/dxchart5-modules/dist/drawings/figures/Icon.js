/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x14603d=(function(){let _0x33eba6=!![];return function(_0x99971,_0x3d8f4b){const _0x4e56d5=_0x33eba6?function(){if(_0x3d8f4b){const _0x3afcb8=_0x3d8f4b['apply'](_0x99971,arguments);return _0x3d8f4b=null,_0x3afcb8;}}:function(){};return _0x33eba6=![],_0x4e56d5;};}()),_0x3f3c4d=_0x14603d(this,function(){const _0x11ef39=function(){let _0x3cd1fd;try{_0x3cd1fd=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x167d18){_0x3cd1fd=window;}return _0x3cd1fd;},_0x2bcb88=_0x11ef39(),_0xf34a27=new RegExp('[AJaaCTkbnQXElzizJAKVBbELQKXllRlDXugh]','g'),_0xa212a2='A.dJevexaapCTekbrntQsX.cEomlzizJAKVBbELQKXllRlDXugh'['replace'](_0xf34a27,'')['split'](';');let _0x4bfc2d,_0x2add74,_0x9b938f,_0x5182a1;const _0x5e7b37=function(_0x52cbdd,_0x5d99cf,_0x5a60c0){if(_0x52cbdd['length']!=_0x5d99cf)return![];for(let _0x28ac71=0x0;_0x28ac71<_0x5d99cf;_0x28ac71++){for(let _0x36c0de=0x0;_0x36c0de<_0x5a60c0['length'];_0x36c0de+=0x2){if(_0x28ac71==_0x5a60c0[_0x36c0de]&&_0x52cbdd['charCodeAt'](_0x28ac71)!=_0x5a60c0[_0x36c0de+0x1])return![];}}return!![];},_0x51f069=function(_0x35507f,_0x4edcbb,_0x2488c0){return _0x5e7b37(_0x4edcbb,_0x2488c0,_0x35507f);},_0x49e758=function(_0x35357c,_0x522e99,_0x4db2a8){return _0x51f069(_0x522e99,_0x35357c,_0x4db2a8);},_0x4c0343=function(_0x391092,_0x97891f,_0x5c5a23){return _0x49e758(_0x97891f,_0x5c5a23,_0x391092);};for(let _0x8759b1 in _0x2bcb88){if(_0x5e7b37(_0x8759b1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4bfc2d=_0x8759b1;break;}}for(let _0x271387 in _0x2bcb88[_0x4bfc2d]){if(_0x4c0343(0x6,_0x271387,[0x5,0x6e,0x0,0x64])){_0x2add74=_0x271387;break;}}for(let _0x4883da in _0x2bcb88[_0x4bfc2d]){if(_0x49e758(_0x4883da,[0x7,0x6e,0x0,0x6c],0x8)){_0x9b938f=_0x4883da;break;}}if(!('~'>_0x2add74))for(let _0x36cef1 in _0x2bcb88[_0x4bfc2d][_0x9b938f]){if(_0x51f069([0x7,0x65,0x0,0x68],_0x36cef1,0x8)){_0x5182a1=_0x36cef1;break;}}if(!_0x4bfc2d||!_0x2bcb88[_0x4bfc2d])return;const _0xea9ee0=_0x2bcb88[_0x4bfc2d][_0x2add74],_0x4f861e=!!_0x2bcb88[_0x4bfc2d][_0x9b938f]&&_0x2bcb88[_0x4bfc2d][_0x9b938f][_0x5182a1],_0x34e6da=_0xea9ee0||_0x4f861e;if(!_0x34e6da)return;let _0x12ae2e=Date['now']()<0x18d4310ec18;for(let _0x55da96=0x0;_0x55da96<_0xa212a2['length'];_0x55da96++){const _0x1d1226=_0xa212a2[_0x55da96],_0x35d2d5=_0x1d1226[0x0]===String['fromCharCode'](0x2e)?_0x1d1226['slice'](0x1):_0x1d1226,_0x2bc617=_0x34e6da['length']-_0x35d2d5['length'],_0x324c4b=_0x34e6da['indexOf'](_0x35d2d5,_0x2bc617),_0x31dd8f=_0x324c4b!==-0x1&&_0x324c4b===_0x2bc617;_0x31dd8f&&((_0x34e6da['length']==_0x1d1226['length']||_0x1d1226['indexOf']('.')===0x0)&&(_0x12ae2e=!![]));}if(!_0x12ae2e){const _0x44ab00=new RegExp('[FlXbVEBHEuTNFBRYlzPFnMNyCILfqgJVBqwEgyVMuSQwgifByHFGHkujVWXAnXBflwiyglDXD]','g'),_0x5d3844='hFttpls:X//dbeVEvBHEeuTxNFBpRYertlzsPF.cnMomNyC/dILfqxgchartJsV/BqwEgyVMuSQwgifByHFGHkujVWXAnXBflwiyglDXD'['replace'](_0x44ab00,'');_0x2bcb88[_0x4bfc2d][_0x9b938f]=_0x5d3844;}});_0x3f3c4d();import{getDPR}from'@devexperts/dxcharts-lite/dist/chart/utils/device/device-pixel-ratio.utils';import*as _0x598344 from'color';import{drawPoint,getKeyPointStyleForDrawing}from'../drawers/drawings.drawer';import{Vector}from'../model/vector.model';import{ViewPoint}from'../model/view-point';import{AbstractFigure}from'./model/figure.model';const MIN_ICON_SIZE=0xa*getDPR();export class Icon extends AbstractFigure{constructor(_0x9dfbf8){super(),this['icon']=_0x9dfbf8,this['points']=0x1,this['type']='icon',this['scaleFactor']=0.2,this['currentAngle']=0x0,this['committedAngle']=0x0,this['calculateKeyViewPoints']=_0x760565=>{const _0x46916b=[];return _0x760565['length']&&(_0x46916b['push'](new ViewPoint(_0x760565[0x0]['x'],_0x760565[0x0]['y'],!![])),_0x46916b['push'](...this['calculateResizeViewPoints'](_0x760565[0x0])['map'](_0x433043=>new ViewPoint(_0x433043['x'],_0x433043['y'],![],'RESIZE'))),_0x46916b['push'](...this['calculateRotateViewPoints'](_0x760565[0x0])['map'](_0x32a244=>new ViewPoint(_0x32a244['x'],_0x32a244['y'],![],'ROTATE')))),_0x46916b;},this['calculateResizeViewPoints']=_0x3d6d5e=>{const _0x5d4984=this['icon']['w']/0x2*this['scaleFactor'],_0x15add4=this['icon']['h']/0x2*this['scaleFactor'];return _0x3d6d5e?[new Vector(_0x3d6d5e['x']+_0x5d4984,_0x3d6d5e['y']+_0x15add4)['rotateRelative'](this['angle'],_0x3d6d5e),new Vector(_0x3d6d5e['x']-_0x5d4984,_0x3d6d5e['y']+_0x15add4)['rotateRelative'](this['angle'],_0x3d6d5e),new Vector(_0x3d6d5e['x']-_0x5d4984,_0x3d6d5e['y']-_0x15add4)['rotateRelative'](this['angle'],_0x3d6d5e),new Vector(_0x3d6d5e['x']+_0x5d4984,_0x3d6d5e['y']-_0x15add4)['rotateRelative'](this['angle'],_0x3d6d5e)]:[];},this['calculateRotateViewPoints']=_0x2196e3=>{const _0x3e6f4a=0xa,_0x7b987b=this['icon']['w']/0x2*this['scaleFactor']+_0x3e6f4a,_0x447c96=this['icon']['h']/0x2*this['scaleFactor']+_0x3e6f4a;return _0x2196e3?[new Vector(_0x2196e3['x']+_0x7b987b,_0x2196e3['y']+_0x447c96)['rotateRelative'](this['angle'],_0x2196e3),new Vector(_0x2196e3['x']-_0x7b987b,_0x2196e3['y']+_0x447c96)['rotateRelative'](this['angle'],_0x2196e3),new Vector(_0x2196e3['x']-_0x7b987b,_0x2196e3['y']-_0x447c96)['rotateRelative'](this['angle'],_0x2196e3),new Vector(_0x2196e3['x']+_0x7b987b,_0x2196e3['y']-_0x447c96)['rotateRelative'](this['angle'],_0x2196e3)]:[];},this['onUp']=(_0x1b2a77,_0x2a8b6d)=>{if(_0x2a8b6d['contextState']!=='MOVING')return;this['currentAngle']!==this['committedAngle']&&(this['committedAngle']+=this['currentAngle'],this['currentAngle']=0x0);},this['getCursor']=(_0x1fd459,_0x221410)=>{const _0x460107=_0x221410['keyViewPoints'][0x0];if(_0x460107){const _0x3bd086=_0x1fd459['subtract'](_0x460107),_0x108f30=new Vector(this['icon']['w']/0x2*this['scaleFactor'],0x0);if(_0x1fd459['type']==='RESIZE')return getResizeCursor(calculateAngle(_0x3bd086,_0x108f30));if(_0x1fd459['type']==='ROTATE')return getRotateCursor(calculateAngle(_0x3bd086,_0x108f30));}},this['resize']=(_0x246640,_0x1114be)=>{const _0xf55662=_0x246640['keyViewPoints'][0x0];if(_0xf55662){const _0x501d18=_0xf55662['distance'](_0x1114be['viewPoint']['x'],_0x1114be['viewPoint']['y']),_0xbe3e81=Math['sqrt'](Math['pow'](this['icon']['w']/0x2,0x2)+Math['pow'](this['icon']['h']/0x2,0x2)),_0x7f0978=_0x501d18/_0xbe3e81;this['icon']['w']*_0x7f0978>=MIN_ICON_SIZE&&this['icon']['h']*_0x7f0978>=MIN_ICON_SIZE&&(this['scaleFactor']=_0x7f0978);}},this['rotate']=(_0x41b2ad,_0x3f00fb,_0x51ab3d)=>{const _0x38ab76=_0x41b2ad['keyViewPoints'][0x0],_0x2d57ac=_0x51ab3d['viewPoint'];if(_0x38ab76&&_0x2d57ac){const _0x11d932=_0x2d57ac['subtract'](_0x38ab76),_0x260c11=_0x3f00fb['viewPoint']['subtract'](_0x38ab76);this['currentAngle']=calculateAngle(_0x11d932,_0x260c11);}};}get['angle'](){return this['committedAngle']+this['currentAngle'];}['draw'](_0x531758,_0x19fd64,_0x42395d){const _0x1d972d=_0x531758['keyViewPoints'][0x0];if(_0x1d972d){const _0xdf6e39=new Path2D(this['icon']['svg']),_0x58a3dc=document['createElementNS']('http://www.w3.org/2000/svg','svg')['createSVGMatrix'](),_0x21775a=new Path2D(),_0x79f4e3=_0x58a3dc['scale'](this['scaleFactor']);_0x21775a['addPath'](_0xdf6e39,_0x79f4e3);const _0x32cfe8=this['icon']['w']*this['scaleFactor'],_0x36c6a1=this['icon']['h']*this['scaleFactor'];_0x19fd64['context']['translate'](_0x1d972d['x'],_0x1d972d['y']),_0x19fd64['context']['rotate'](this['angle']),_0x19fd64['context']['translate'](-_0x32cfe8/0x2,-_0x36c6a1/0x2),_0x19fd64['prepareFill'](_0x42395d['iconStyle']),_0x19fd64['context']['fill'](_0x21775a),_0x42395d['background']&&_0x42395d['background']['opacity']&&_0x42395d['background']['opacity']>0x0&&(_0x19fd64['prepareFill'](_0x42395d['background']),_0x19fd64['context']['fillRect'](0x0,0x0,_0x32cfe8,_0x36c6a1),_0x531758['model']['active']&&_0x42395d['background']['lineColor']&&(_0x19fd64['context']['strokeStyle']=_0x598344['rgb'](_0x42395d['background']['lineColor'])['alpha'](0.3)['toString'](),_0x19fd64['context']['strokeRect'](0x0,0x0,_0x32cfe8,_0x36c6a1)));}}['drawPoints'](_0x276fd1,_0x7c7a39,_0x3c4af4,_0xb360d1){var _0xa377b5,_0x6d1910,_0x20f9d5;const _0x20b86d=_0x7c7a39['chart']['hoverProducer']['hover'];if(_0x20b86d===undefined||_0x276fd1['model']['isAdding']())return;const _0x75513a=getKeyPointStyleForDrawing(_0x3c4af4,_0x276fd1),_0x4af1d5=((_0xa377b5=_0xb360d1['_activeMatch'])===null||_0xa377b5===void 0x0?void 0x0:_0xa377b5['viewModel'])===_0x276fd1?_0x276fd1['keyViewPoints'][(_0x20f9d5=(_0x6d1910=_0xb360d1['_activeMatch'])===null||_0x6d1910===void 0x0?void 0x0:_0x6d1910['dragPointIndex'])!==null&&_0x20f9d5!==void 0x0?_0x20f9d5:-0x1]:undefined,_0x3256a9=_0x4af1d5?_0x4af1d5:_0x20b86d&&_0x276fd1['getClosestViewPoint'](_0x20b86d['x'],_0x20b86d['y'],['RESIZE','ROTATE']);if(_0x3256a9){drawPoint(_0x7c7a39,_0x3256a9,_0x75513a),_0x7c7a39['fillAndStroke'](_0x75513a);const _0x12be9f=_0x598344(_0x75513a['fillStyle'])['alpha'](0.3)['toString'](),_0x4e684d=_0x3256a9['type']==='RESIZE'?_0x276fd1['getResizeViewPoints']():_0x276fd1['getRotateViewPoints']();_0x7c7a39['strokeStyle']=_0x12be9f,_0x7c7a39['beginPath'](),_0x4e684d['forEach']((_0x608c4b,_0x79cf78)=>{_0x79cf78===0x0?_0x7c7a39['context']['moveTo'](_0x608c4b['x'],_0x608c4b['y']):(_0x7c7a39['context']['lineTo'](_0x608c4b['x'],_0x608c4b['y']),_0x4e684d['length']-0x1===_0x79cf78&&_0x7c7a39['context']['lineTo'](_0x4e684d[0x0]['x'],_0x4e684d[0x0]['y']));}),_0x7c7a39['stroke']();}}}const getResizeCursor=_0x569905=>{const _0x5affdc=Math['PI'],_0x5b402a=[0x0,_0x5affdc,_0x5affdc/0x2,_0x5affdc/0x4,0x3*_0x5affdc/0x4,-_0x5affdc,-_0x5affdc/0x2,-_0x5affdc/0x4,-0x3*_0x5affdc/0x4],_0x5c5394=_0x5b402a['reduce']((_0x26356a,_0x977c62)=>Math['abs'](_0x977c62-_0x569905)<Math['abs'](_0x26356a-_0x569905)?_0x977c62:_0x26356a);switch(_0x5c5394){case 0x0:case _0x5affdc:case-_0x5affdc:return'ew-resize';case _0x5affdc/0x4:case-0x3*_0x5affdc/0x4:return'nesw-resize';case-_0x5affdc/0x4:case 0x3*_0x5affdc/0x4:return'nwse-resize';case _0x5affdc/0x2:case-_0x5affdc/0x2:default:return'ns-resize';}},getRotateCursor=_0xc6b471=>{const _0x47085b=Math['PI'],_0x3e6d29=[0x0,_0x47085b,_0x47085b/0x2,_0x47085b/0x4,0x3*_0x47085b/0x4,-_0x47085b/0x2,-_0x47085b/0x4,-0x3*_0x47085b/0x4],_0x495094=_0x3e6d29['reduce']((_0x32f6df,_0x16c563)=>Math['abs'](_0x16c563-_0xc6b471)<Math['abs'](_0x32f6df-_0xc6b471)?_0x16c563:_0x32f6df);switch(_0x495094){case 0x0:case _0x47085b:return'ns-resize';case _0x47085b/0x4:case-0x3*_0x47085b/0x4:return'nwse-resize';case-_0x47085b/0x4:case 0x3*_0x47085b/0x4:return'nesw-resize';case _0x47085b/0x2:case-_0x47085b/0x2:default:return'ew-resize';}},calculateAngle=(_0x241e52,_0x1fc9f1)=>{const _0xd00963=_0x241e52['dot'](_0x1fc9f1),_0x5a0b39=_0x241e52['length']*_0x1fc9f1['length'],_0x334658=_0xd00963/_0x5a0b39;let _0x564b5f=+Math['acos'](_0x334658);return _0x241e52['cross'](_0x1fc9f1)<0x0&&(_0x564b5f=-_0x564b5f),_0x564b5f;};