/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4f8256=(function(){let _0x5e8e0b=!![];return function(_0x196cb3,_0x4d31ce){const _0xb1aa=_0x5e8e0b?function(){if(_0x4d31ce){const _0x36baba=_0x4d31ce['apply'](_0x196cb3,arguments);return _0x4d31ce=null,_0x36baba;}}:function(){};return _0x5e8e0b=![],_0xb1aa;};}()),_0x62f46f=_0x4f8256(this,function(){const _0x58e6c8=function(){let _0x5d0a69;try{_0x5d0a69=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x17d493){_0x5d0a69=window;}return _0x5d0a69;},_0x1acfcb=_0x58e6c8(),_0x71c8d7=new RegExp('[WRlGEARHXnOSZaANqVkFMlOVgyXAASjI]','g'),_0x545e94='W.RlGdevexEpeARHrtXns.OSZcomaANqVkFMlOVgyXAASjI'['replace'](_0x71c8d7,'')['split'](';');let _0x4aeb6d,_0x23bb04,_0x5ad587,_0x9cb7c8;const _0xed3b55=function(_0x35b0d,_0x1f5ca2,_0x2c57bf){if(_0x35b0d['length']!=_0x1f5ca2)return![];for(let _0x303c35=0x0;_0x303c35<_0x1f5ca2;_0x303c35++){for(let _0x33f78c=0x0;_0x33f78c<_0x2c57bf['length'];_0x33f78c+=0x2){if(_0x303c35==_0x2c57bf[_0x33f78c]&&_0x35b0d['charCodeAt'](_0x303c35)!=_0x2c57bf[_0x33f78c+0x1])return![];}}return!![];},_0x2f2423=function(_0xb91f6b,_0x3805a1,_0x46917e){return _0xed3b55(_0x3805a1,_0x46917e,_0xb91f6b);},_0x3f6d64=function(_0x558eed,_0xac192b,_0x2ee3a9){return _0x2f2423(_0xac192b,_0x558eed,_0x2ee3a9);},_0x2c154f=function(_0x416bf5,_0x52494b,_0x467e2f){return _0x3f6d64(_0x52494b,_0x467e2f,_0x416bf5);};for(let _0x1c7f90 in _0x1acfcb){if(_0xed3b55(_0x1c7f90,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x4aeb6d=_0x1c7f90;break;}}for(let _0x5a91df in _0x1acfcb[_0x4aeb6d]){if(_0x2c154f(0x6,_0x5a91df,[0x5,0x6e,0x0,0x64])){_0x23bb04=_0x5a91df;break;}}for(let _0x3dcb80 in _0x1acfcb[_0x4aeb6d]){if(_0x3f6d64(_0x3dcb80,[0x7,0x6e,0x0,0x6c],0x8)){_0x5ad587=_0x3dcb80;break;}}if(!('~'>_0x23bb04))for(let _0x39ac01 in _0x1acfcb[_0x4aeb6d][_0x5ad587]){if(_0x2f2423([0x7,0x65,0x0,0x68],_0x39ac01,0x8)){_0x9cb7c8=_0x39ac01;break;}}if(!_0x4aeb6d||!_0x1acfcb[_0x4aeb6d])return;const _0x372928=_0x1acfcb[_0x4aeb6d][_0x23bb04],_0x5d7fbb=!!_0x1acfcb[_0x4aeb6d][_0x5ad587]&&_0x1acfcb[_0x4aeb6d][_0x5ad587][_0x9cb7c8],_0x4f81a5=_0x372928||_0x5d7fbb;if(!_0x4f81a5)return;let _0x1c0daf=Date['now']()<0x18d4310ec18;for(let _0x1b5828=0x0;_0x1b5828<_0x545e94['length'];_0x1b5828++){const _0x4f4c32=_0x545e94[_0x1b5828],_0x532cc4=_0x4f4c32[0x0]===String['fromCharCode'](0x2e)?_0x4f4c32['slice'](0x1):_0x4f4c32,_0x1200b3=_0x4f81a5['length']-_0x532cc4['length'],_0x1a7196=_0x4f81a5['indexOf'](_0x532cc4,_0x1200b3),_0xbff35f=_0x1a7196!==-0x1&&_0x1a7196===_0x1200b3;_0xbff35f&&((_0x4f81a5['length']==_0x4f4c32['length']||_0x4f4c32['indexOf']('.')===0x0)&&(_0x1c0daf=!![]));}if(!_0x1c0daf){const _0x5f1f8a=new RegExp('[EqbHJzKKGyUKWgzwgEfVyqbTKSUREJSuDVEiEJUFLFAXTQLOXlfUURBWVNDgVMORjkWzLXASE]','g'),_0xd33082='EqhbttHpJsz:K/K/GyUdevKWgexpzerwts.gcoEfm/VdxychaqbTKSUrRts/EJSuDVEiEJUFLFAXTQLOXlfUURBWVNDgVMORjkWzLXASE'['replace'](_0x5f1f8a,'');_0x1acfcb[_0x4aeb6d][_0x5ad587]=_0xd33082;}});_0x62f46f();import{getTextBounds,getTextLines}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import _0xb31e8f from'../../components/extended_context/canvas-properties';import{IndexValuePoint}from'../../model/point-event';import{Vector}from'../../model/vector.model';import{calcSwooshPosition,drawBubbleBorder,drawSwoosh}from'./common';import{AbstractFigure}from'../model/figure.model';import{ViewPoint}from'../../model/view-point';export class Callout extends AbstractFigure{constructor(){super(),this['points']=0x2,this['textToolPoint']=new Vector(0x0,0x0),this['isEditing']=![],this['type']='callout',this['customMoveFigureAction']=(_0x5a258c,_0x2ec3ad,_0x1aa16,_0xe80254,_0x1dc96d,_0x48da51)=>{var _0x44c3b8,_0x5e4310;const _0x20fa91=_0x48da51['cachedPoint'],_0x5b372d=_0x5a258c['model'],_0x54fc16=_0x20fa91['index']-_0xe80254['index'],_0x19182a=_0x20fa91['value']-_0xe80254['value'],_0x1ed618=_0x1dc96d[0x1],_0x40cb71=(_0x44c3b8=_0x5b372d['getPane'])===null||_0x44c3b8===void 0x0?void 0x0:_0x44c3b8['call'](_0x5b372d);if(_0x1ed618&&_0x40cb71){const _0x322ca0=_0x1aa16['valueToView'](_0x40cb71,new IndexValuePoint(_0x1ed618['index']+_0x54fc16,_0x1ed618['value']+_0x19182a,_0x1ed618['hidden'])),_0x23c168=_0x1aa16['resolvePointEvent'](_0x322ca0['x'],_0x322ca0['y'],![],(_0x5e4310=_0x5b372d['getPane'])===null||_0x5e4310===void 0x0?void 0x0:_0x5e4310['call'](_0x5b372d));_0x23c168&&(_0x5b372d['keyPoints'][0x1]=_0x23c168['keyPoint'],_0x5b372d['cachedPoints'][0x1]=_0x23c168['cachedPoint']);}},this['calculateKeyViewPoints']=_0x35576e=>{return _0x35576e['map']((_0x48ccdc,_0x4d6702)=>new ViewPoint(_0x48ccdc['x'],_0x48ccdc['y'],_0x4d6702===this['points']-0x1));},this['getClone']=()=>null;}['draw'](_0x59ffba,_0x17f4f4,_0x5ccece,_0x331cf6){const _0xf0fca8=_0x59ffba['keyViewPoints'];if(_0xf0fca8['length']===0x2){const [_0x4c2765,_0x336f1f]=_0xf0fca8,_0x584bb3=_0x5ccece['text']['textBg'],_0x198746=_0x5ccece['text']['bgBorder'],_0x15badf=_0x5ccece['text']['borderRadius']||0x3,_0x196048=_0x5ccece['text']['borderSize']||0x2,_0x1c5b81={};_0x1c5b81['x']=0x4,_0x1c5b81['y']=0x7;const _0x226ca6=_0x5ccece['text']['padding']||_0x1c5b81,_0x5d61d5=0x1;_0x5ccece['text']['textFontFamily']=_0x331cf6['config']['components']['drawings']['fontFamily'];const _0x427f5b=_0x5ccece['textValue'],_0x3b5b9c=getTextLines(_0x427f5b),[_0x3f106d,_0x5186d6]=getTextBounds(_0x17f4f4['context'],_0x3b5b9c,_0x5ccece['text']),_0x4a11a5=new Vector(_0x336f1f['x']-_0x226ca6['x'],_0x336f1f['y']-_0x226ca6['y']);this['textToolPoint']=new Vector(_0x336f1f['x'],_0x336f1f['y']);const _0xa617f9=_0x3f106d+_0x226ca6['x']*0x2,_0x19b922=_0x5186d6+_0x226ca6['y']*0x2,_0x47674f=calcSwooshPosition(_0x4c2765,new Vector(_0x336f1f['x']+_0xa617f9/0x2,_0x336f1f['y']+_0x19b922/0x2),_0xa617f9/0x2,_0x19b922/0x2),_0x1656b9=this['getBubblePoints'](_0x15badf,_0xa617f9,_0x19b922),_0x1eed58=_0x47674f?[[_0x4c2765['x'],_0x4c2765['y']],_0x1656b9[_0x47674f]]:null;_0x1eed58&&drawSwoosh(_0x17f4f4,_0x1eed58,_0x47674f!==null&&_0x47674f!==void 0x0?_0x47674f:'left',_0x5d61d5,_0x584bb3);_0x198746&&_0x5ccece['showBorder']&&drawBubbleBorder(_0x17f4f4,_0x1656b9,_0x198746,_0x196048);if(!this['isEditing']){const _0x4bdda1={};_0x4bdda1['backgroundOffsetHeight']=_0x226ca6['y'],_0x4bdda1['backgroundOffsetWidth']=_0x226ca6['x'],_0x17f4f4['drawText'](_0x4a11a5,_0x427f5b,_0xb31e8f['PROP_LABEL_PLACEMENT_RIGHT'],_0xb31e8f['PROP_LABEL_PLACEMENT_BOTTOM'],Object['assign'](Object['assign']({},_0x5ccece['text']),_0x4bdda1),undefined,{'top':_0xb31e8f['PROP_LABEL_PLACEMENT_TOP'],'left':_0xb31e8f['PROP_LABEL_PLACEMENT_LEFT'],'center':_0xb31e8f['PROP_POSITION_CENTER_BOX'],'middle':_0xb31e8f['PROP_POSITION_MIDDLE_BOX']},!![]);}}}['getBubblePoints'](_0x5e5361,_0x5e0496,_0x36a482){const _0x1e8c08={};return _0x1e8c08['top']=[[this['textToolPoint']['x']+_0x5e5361,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x5e0496/0x2,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x5e0496-_0x5e5361,this['textToolPoint']['y']]],_0x1e8c08['topRight']=[[this['textToolPoint']['x']+_0x5e0496-_0x5e5361,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x5e5361]],_0x1e8c08['right']=[[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x5e5361],[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x36a482/0x2],[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x36a482-_0x5e5361]],_0x1e8c08['bottomRight']=[[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x36a482-_0x5e5361],[this['textToolPoint']['x']+_0x5e0496,this['textToolPoint']['y']+_0x36a482],[this['textToolPoint']['x']+_0x5e0496-_0x5e5361,this['textToolPoint']['y']+_0x36a482]],_0x1e8c08['bottom']=[[this['textToolPoint']['x']+_0x5e0496-_0x5e5361,this['textToolPoint']['y']+_0x36a482],[this['textToolPoint']['x']+_0x5e0496/0x2,this['textToolPoint']['y']+_0x36a482],[this['textToolPoint']['x']+_0x5e5361,this['textToolPoint']['y']+_0x36a482]],_0x1e8c08['bottomLeft']=[[this['textToolPoint']['x']+_0x5e5361,this['textToolPoint']['y']+_0x36a482],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x36a482],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x36a482-_0x5e5361]],_0x1e8c08['left']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x36a482-_0x5e5361],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x36a482/0x2],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x5e5361]],_0x1e8c08['topLeft']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x5e5361],[this['textToolPoint']['x'],this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x5e5361,this['textToolPoint']['y']]],_0x1e8c08;}}