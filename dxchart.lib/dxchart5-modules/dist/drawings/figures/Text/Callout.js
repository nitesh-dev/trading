/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x152b79=(function(){let _0x6a862=!![];return function(_0x1aea66,_0x1b7a67){const _0x1f3fd0=_0x6a862?function(){if(_0x1b7a67){const _0xa5ca7e=_0x1b7a67['apply'](_0x1aea66,arguments);return _0x1b7a67=null,_0xa5ca7e;}}:function(){};return _0x6a862=![],_0x1f3fd0;};}()),_0x2a2075=_0x152b79(this,function(){let _0x3c6a8e;try{const _0x21503d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3c6a8e=_0x21503d();}catch(_0x5cb4cd){_0x3c6a8e=window;}const _0x354fa7=new RegExp('[FfROiQkDDUZNwkiOqujZjBfYRJELMWlHPOhiJKu]','g'),_0x6e491b='.devFfeRxpeOirtQks.cDDUomZNwkiOqujZjBfYRJELMWlHPOhiJKu'['replace'](_0x354fa7,'')['split'](';');let _0x463866,_0x32c015,_0x35689c,_0x41ccad;const _0x5c78f9=function(_0x2cddd6,_0x3c7722,_0x59c7d9){if(_0x2cddd6['length']!=_0x3c7722)return![];for(let _0x2de22b=0x0;_0x2de22b<_0x3c7722;_0x2de22b++){for(let _0x12d3df=0x0;_0x12d3df<_0x59c7d9['length'];_0x12d3df+=0x2){if(_0x2de22b==_0x59c7d9[_0x12d3df]&&_0x2cddd6['charCodeAt'](_0x2de22b)!=_0x59c7d9[_0x12d3df+0x1])return![];}}return!![];},_0x295f10=function(_0x66231b,_0x7c1ee,_0x25954c){return _0x5c78f9(_0x7c1ee,_0x25954c,_0x66231b);},_0x405a12=function(_0x4d4ce5,_0x19fc2e,_0x53889d){return _0x295f10(_0x19fc2e,_0x4d4ce5,_0x53889d);},_0xf2e474=function(_0x231712,_0x25a761,_0x3d9bc8){return _0x405a12(_0x25a761,_0x3d9bc8,_0x231712);};for(let _0x158729 in _0x3c6a8e){if(_0x5c78f9(_0x158729,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x463866=_0x158729;break;}}for(let _0x3f508c in _0x3c6a8e[_0x463866]){if(_0xf2e474(0x6,_0x3f508c,[0x5,0x6e,0x0,0x64])){_0x32c015=_0x3f508c;break;}}for(let _0xc810c9 in _0x3c6a8e[_0x463866]){if(_0x405a12(_0xc810c9,[0x7,0x6e,0x0,0x6c],0x8)){_0x35689c=_0xc810c9;break;}}if(!('~'>_0x32c015))for(let _0x5d37bb in _0x3c6a8e[_0x463866][_0x35689c]){if(_0x295f10([0x7,0x65,0x0,0x68],_0x5d37bb,0x8)){_0x41ccad=_0x5d37bb;break;}}if(!_0x463866||!_0x3c6a8e[_0x463866])return;const _0x530bb5=_0x3c6a8e[_0x463866][_0x32c015],_0x5b3348=!!_0x3c6a8e[_0x463866][_0x35689c]&&_0x3c6a8e[_0x463866][_0x35689c][_0x41ccad],_0x33f2a7=_0x530bb5||_0x5b3348;if(!_0x33f2a7)return;let _0x498e9c=Date['now']()<0x18cfaf7e418;for(let _0x384d6f=0x0;_0x384d6f<_0x6e491b['length'];_0x384d6f++){const _0x104a45=_0x6e491b[_0x384d6f],_0x1d3b63=_0x104a45[0x0]===String['fromCharCode'](0x2e)?_0x104a45['slice'](0x1):_0x104a45,_0x38cdc1=_0x33f2a7['length']-_0x1d3b63['length'],_0x5f0cef=_0x33f2a7['indexOf'](_0x1d3b63,_0x38cdc1),_0x1c9769=_0x5f0cef!==-0x1&&_0x5f0cef===_0x38cdc1;_0x1c9769&&((_0x33f2a7['length']==_0x104a45['length']||_0x104a45['indexOf']('.')===0x0)&&(_0x498e9c=!![]));}if(!_0x498e9c){const _0x569bfe=new RegExp('[TSuIkSHVDqTiMMVGKUPgYfDKPZFCIZjJqAZBQwFZLbGBNgquSnANjkwgnGfGlqZGqZNf]','g'),_0x1662fe='ThSttuIpks:/SH/VdDeqvexpeTiMMrtsVGKU.cPogYmfD/dKPxcZharFtCIsZj/JqAZBQwFZLbGBNgquSnANjkwgnGfGlqZGqZNf'['replace'](_0x569bfe,'');_0x3c6a8e[_0x463866][_0x35689c]=_0x1662fe;}});_0x2a2075();import{getTextBounds,getTextLines}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';import _0x42a34e from'../../components/extended_context/canvas-properties';import{IndexValuePoint}from'../../model/point-event';import{Vector}from'../../model/vector.model';import{calcSwooshPosition,drawBubbleBorder,drawSwoosh}from'./common';import{AbstractFigure}from'../model/figure.model';import{ViewPoint}from'../../model/view-point';export class Callout extends AbstractFigure{constructor(){super(),this['points']=0x2,this['textToolPoint']=new Vector(0x0,0x0),this['isEditing']=![],this['type']='callout',this['customMoveFigureAction']=(_0x2082fe,_0x1929d4,_0x345b87,_0x236776,_0x107e63,_0x309580)=>{var _0x309df3,_0x593beb;const _0x3e09fe=_0x309580['cachedPoint'],_0x23ab2d=_0x2082fe['model'],_0x58c689=_0x3e09fe['index']-_0x236776['index'],_0xca293=_0x3e09fe['value']-_0x236776['value'],_0x1d1daa=_0x107e63[0x1],_0x24352c=(_0x309df3=_0x23ab2d['getPane'])===null||_0x309df3===void 0x0?void 0x0:_0x309df3['call'](_0x23ab2d);if(_0x1d1daa&&_0x24352c){const _0x1d8a16=_0x345b87['valueToView'](_0x24352c,new IndexValuePoint(_0x1d1daa['index']+_0x58c689,_0x1d1daa['value']+_0xca293,_0x1d1daa['hidden'])),_0x1a022a=_0x345b87['resolvePointEvent'](_0x1d8a16['x'],_0x1d8a16['y'],![],(_0x593beb=_0x23ab2d['getPane'])===null||_0x593beb===void 0x0?void 0x0:_0x593beb['call'](_0x23ab2d));_0x1a022a&&(_0x23ab2d['keyPoints'][0x1]=_0x1a022a['keyPoint'],_0x23ab2d['cachedPoints'][0x1]=_0x1a022a['cachedPoint']);}},this['calculateKeyViewPoints']=_0x4df401=>{return _0x4df401['map']((_0x297263,_0x2c93cc)=>new ViewPoint(_0x297263['x'],_0x297263['y'],_0x2c93cc===this['points']-0x1));},this['getClone']=()=>null;}['draw'](_0x3a037f,_0x2e16a8,_0x1d2b51,_0x4ec8d9){const _0x5dd74d=_0x3a037f['keyViewPoints'];if(_0x5dd74d['length']===0x2){const [_0x15283f,_0x26966c]=_0x5dd74d,_0x26c1ca=_0x1d2b51['text']['textBg'],_0x1ccf2e=_0x1d2b51['text']['bgBorder'],_0x4b5a7=_0x1d2b51['text']['borderRadius']||0x3,_0x48e533=_0x1d2b51['text']['borderSize']||0x2,_0xda93c5={};_0xda93c5['x']=0x4,_0xda93c5['y']=0x7;const _0x7a7cbc=_0x1d2b51['text']['padding']||_0xda93c5,_0xc81e58=0x1;_0x1d2b51['text']['textFontFamily']=_0x4ec8d9['config']['components']['drawings']['fontFamily'];const _0x5e7069=_0x1d2b51['textValue'],_0x4a711d=getTextLines(_0x5e7069),[_0x741c69,_0x2fabc8]=getTextBounds(_0x2e16a8['context'],_0x4a711d,_0x1d2b51['text']),_0x5a2ba3=new Vector(_0x26966c['x']-_0x7a7cbc['x'],_0x26966c['y']-_0x7a7cbc['y']);this['textToolPoint']=new Vector(_0x26966c['x'],_0x26966c['y']);const _0x418668=_0x741c69+_0x7a7cbc['x']*0x2,_0x10c97f=_0x2fabc8+_0x7a7cbc['y']*0x2,_0x58e323=calcSwooshPosition(_0x15283f,new Vector(_0x26966c['x']+_0x418668/0x2,_0x26966c['y']+_0x10c97f/0x2),_0x418668/0x2,_0x10c97f/0x2),_0x4398c1=this['getBubblePoints'](_0x4b5a7,_0x418668,_0x10c97f),_0x53d503=_0x58e323?[[_0x15283f['x'],_0x15283f['y']],_0x4398c1[_0x58e323]]:null;_0x53d503&&drawSwoosh(_0x2e16a8,_0x53d503,_0x58e323!==null&&_0x58e323!==void 0x0?_0x58e323:'left',_0xc81e58,_0x26c1ca);_0x1ccf2e&&_0x1d2b51['showBorder']&&drawBubbleBorder(_0x2e16a8,_0x4398c1,_0x1ccf2e,_0x48e533);if(!this['isEditing']){const _0x50a245={};_0x50a245['backgroundOffsetHeight']=_0x7a7cbc['y'],_0x50a245['backgroundOffsetWidth']=_0x7a7cbc['x'],_0x2e16a8['drawText'](_0x5a2ba3,_0x5e7069,_0x42a34e['PROP_LABEL_PLACEMENT_RIGHT'],_0x42a34e['PROP_LABEL_PLACEMENT_BOTTOM'],Object['assign'](Object['assign']({},_0x1d2b51['text']),_0x50a245),undefined,{'top':_0x42a34e['PROP_LABEL_PLACEMENT_TOP'],'left':_0x42a34e['PROP_LABEL_PLACEMENT_LEFT'],'center':_0x42a34e['PROP_POSITION_CENTER_BOX'],'middle':_0x42a34e['PROP_POSITION_MIDDLE_BOX']},!![]);}}}['getBubblePoints'](_0x537aad,_0x546853,_0x752828){const _0x2dcb7b={};return _0x2dcb7b['top']=[[this['textToolPoint']['x']+_0x537aad,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x546853/0x2,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x546853-_0x537aad,this['textToolPoint']['y']]],_0x2dcb7b['topRight']=[[this['textToolPoint']['x']+_0x546853-_0x537aad,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x537aad]],_0x2dcb7b['right']=[[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x537aad],[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x752828/0x2],[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x752828-_0x537aad]],_0x2dcb7b['bottomRight']=[[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x752828-_0x537aad],[this['textToolPoint']['x']+_0x546853,this['textToolPoint']['y']+_0x752828],[this['textToolPoint']['x']+_0x546853-_0x537aad,this['textToolPoint']['y']+_0x752828]],_0x2dcb7b['bottom']=[[this['textToolPoint']['x']+_0x546853-_0x537aad,this['textToolPoint']['y']+_0x752828],[this['textToolPoint']['x']+_0x546853/0x2,this['textToolPoint']['y']+_0x752828],[this['textToolPoint']['x']+_0x537aad,this['textToolPoint']['y']+_0x752828]],_0x2dcb7b['bottomLeft']=[[this['textToolPoint']['x']+_0x537aad,this['textToolPoint']['y']+_0x752828],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x752828],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x752828-_0x537aad]],_0x2dcb7b['left']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x752828-_0x537aad],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x752828/0x2],[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x537aad]],_0x2dcb7b['topLeft']=[[this['textToolPoint']['x'],this['textToolPoint']['y']+_0x537aad],[this['textToolPoint']['x'],this['textToolPoint']['y']],[this['textToolPoint']['x']+_0x537aad,this['textToolPoint']['y']]],_0x2dcb7b;}}