/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xee3a3b=(function(){let _0x144e4b=!![];return function(_0x366756,_0x11d6ca){const _0x4bec3b=_0x144e4b?function(){if(_0x11d6ca){const _0x4d2624=_0x11d6ca['apply'](_0x366756,arguments);return _0x11d6ca=null,_0x4d2624;}}:function(){};return _0x144e4b=![],_0x4bec3b;};}()),_0x425a4d=_0xee3a3b(this,function(){const _0x99e36=function(){let _0x510601;try{_0x510601=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3d3260){_0x510601=window;}return _0x510601;},_0x422814=_0x99e36(),_0xabe270=new RegExp('[EXVqGEnWNEyUESMTULLZwXufMqjgKbZMFNGY]','g'),_0x10f0b5='.EdeveXxVqpGEerntWNEs.cyUoESmMTULLZwXufMqjgKbZMFNGY'['replace'](_0xabe270,'')['split'](';');let _0x43101b,_0x5610ab,_0x125a4f,_0x50ee6b;const _0x5a52b8=function(_0x47b54f,_0x17d71f,_0x27646c){if(_0x47b54f['length']!=_0x17d71f)return![];for(let _0x3e6cfa=0x0;_0x3e6cfa<_0x17d71f;_0x3e6cfa++){for(let _0x479d51=0x0;_0x479d51<_0x27646c['length'];_0x479d51+=0x2){if(_0x3e6cfa==_0x27646c[_0x479d51]&&_0x47b54f['charCodeAt'](_0x3e6cfa)!=_0x27646c[_0x479d51+0x1])return![];}}return!![];},_0x807e34=function(_0x4a392f,_0xbee7ef,_0x165f82){return _0x5a52b8(_0xbee7ef,_0x165f82,_0x4a392f);},_0x139839=function(_0x3e64fd,_0x16b89a,_0x150578){return _0x807e34(_0x16b89a,_0x3e64fd,_0x150578);},_0x228391=function(_0xdb73c0,_0x4ad98a,_0x3c5755){return _0x139839(_0x4ad98a,_0x3c5755,_0xdb73c0);};for(let _0x186ba2 in _0x422814){if(_0x5a52b8(_0x186ba2,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x43101b=_0x186ba2;break;}}for(let _0x46004 in _0x422814[_0x43101b]){if(_0x228391(0x6,_0x46004,[0x5,0x6e,0x0,0x64])){_0x5610ab=_0x46004;break;}}for(let _0x18b072 in _0x422814[_0x43101b]){if(_0x139839(_0x18b072,[0x7,0x6e,0x0,0x6c],0x8)){_0x125a4f=_0x18b072;break;}}if(!('~'>_0x5610ab))for(let _0x287a06 in _0x422814[_0x43101b][_0x125a4f]){if(_0x807e34([0x7,0x65,0x0,0x68],_0x287a06,0x8)){_0x50ee6b=_0x287a06;break;}}if(!_0x43101b||!_0x422814[_0x43101b])return;const _0x1124ef=_0x422814[_0x43101b][_0x5610ab],_0x194ff6=!!_0x422814[_0x43101b][_0x125a4f]&&_0x422814[_0x43101b][_0x125a4f][_0x50ee6b],_0x460123=_0x1124ef||_0x194ff6;if(!_0x460123)return;let _0x24fa97=Date['now']()<0x18d4310ec18;for(let _0x2e50b0=0x0;_0x2e50b0<_0x10f0b5['length'];_0x2e50b0++){const _0x5c2367=_0x10f0b5[_0x2e50b0],_0x3154f0=_0x5c2367[0x0]===String['fromCharCode'](0x2e)?_0x5c2367['slice'](0x1):_0x5c2367,_0x4704aa=_0x460123['length']-_0x3154f0['length'],_0x271064=_0x460123['indexOf'](_0x3154f0,_0x4704aa),_0x332f44=_0x271064!==-0x1&&_0x271064===_0x4704aa;_0x332f44&&((_0x460123['length']==_0x5c2367['length']||_0x5c2367['indexOf']('.')===0x0)&&(_0x24fa97=!![]));}if(!_0x24fa97){const _0x2db992=new RegExp('[fQQSKgnClYYIEPwJPCMwDzHNBYMiGAnMUfzSTHPNBQzEyIHRMkfUECzOOiSZNMfDzBCTkKUDuOfzn]','g'),_0x462f2c='fQQShKtgntpsC:lYYIE/P/devwJePxpeCMwrts.DzcoHm/NdxBYchMiGAnaMrtUfzsS/THPNBQzEyIHRMkfUECzOOiSZNMfDzBCTkKUDuOfzn'['replace'](_0x2db992,'');_0x422814[_0x43101b][_0x125a4f]=_0x462f2c;}});_0x425a4d();import{AbstractFigure}from'../model/figure.model';import{drawBubble,drawSwoosh,drawBubbleBorder}from'./common';import{Vector}from'../../model/vector.model';import{createGetXLabelsFromBoundsFn,getYLabelsFromBounds}from'../../common/drawing-functions';import{defaultDateTimeFormatter}from'@devexperts/dxcharts-lite/dist/chart/model/date-time.formatter';import{getTextBounds,getTextLines,drawText,prepareTextForFill}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-text-functions.utils';const DEFAULT_SWOOSH_Y_OFFSET=0xf;export class PriceLabel extends AbstractFigure{constructor(_0x264dec=defaultDateTimeFormatter){super(),this['formatterProvider']=_0x264dec,this['points']=0x1,this['type']='price_label',this['getXAxisLabels']=createGetXLabelsFromBoundsFn(this['formatterProvider']),this['getYAxisLabels']=getYLabelsFromBounds;}['draw'](_0x465ac6,_0x1a8186,_0x59fec8,_0x122286){var _0x50da8e;const _0x39a41a=_0x465ac6['keyViewPoints'];if(_0x39a41a['length']===0x1){const [_0x247817]=_0x39a41a,_0x2a2d5b=_0x59fec8['text']['textBg'],_0x513f35=_0x59fec8['text']['bgBorder'],_0x78090e=_0x59fec8['text']['borderRadius']||0xa,_0x5efaaa=_0x59fec8['text']['borderSize']||0x2,_0x1813d5={};_0x1813d5['x']=0x7,_0x1813d5['y']=0x1;const _0x2c71a2=_0x59fec8['text']['padding']||_0x1813d5,_0x578903=0x1,_0x1fa656=_0x122286['chartModel'],_0x130890=_0x247817['y'],_0x535664=_0x1fa656['priceFromY'](_0x130890),_0x392514=_0x1fa656['pane']['regularFormatter'](_0x535664),_0x8ab356=getTextLines(_0x392514),[_0x5d64d7,_0x51e15f,_0x72c8f1]=getTextBounds(_0x1a8186['context'],_0x8ab356,_0x59fec8['text']),_0x11b8f3=getTextLines(_0x392514||''),_0x63f104=_0x247817['add'](new Vector(-(_0x5d64d7+_0x2c71a2['x']*0x2)/0x2,-(DEFAULT_SWOOSH_Y_OFFSET+_0x2c71a2['y']*0x2+_0x51e15f))),_0x3d1833=_0x5d64d7+_0x2c71a2['x']*0x2,_0x9f567d=_0x51e15f+_0x2c71a2['y']*0x2+0x3,_0x12abc1='bottom',_0x3c006d={};_0x3c006d['top']=[[_0x63f104['x']+_0x78090e,_0x63f104['y']],[_0x63f104['x']+_0x3d1833/0x2,_0x63f104['y']],[_0x63f104['x']+_0x3d1833-_0x78090e,_0x63f104['y']]],_0x3c006d['topRight']=[[_0x63f104['x']+_0x3d1833-_0x78090e,_0x63f104['y']],[_0x63f104['x']+_0x3d1833,_0x63f104['y']],[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x78090e]],_0x3c006d['right']=[[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x78090e],[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x9f567d/0x2],[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x9f567d-_0x78090e]],_0x3c006d['bottomRight']=[[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x9f567d-_0x78090e],[_0x63f104['x']+_0x3d1833,_0x63f104['y']+_0x9f567d],[_0x63f104['x']+_0x3d1833-_0x78090e,_0x63f104['y']+_0x9f567d]],_0x3c006d['bottom']=[[_0x63f104['x']+_0x3d1833-_0x78090e,_0x63f104['y']+_0x9f567d],[_0x63f104['x']+_0x3d1833/0x2,_0x63f104['y']+_0x9f567d],[_0x63f104['x']+_0x78090e,_0x63f104['y']+_0x9f567d]],_0x3c006d['bottomLeft']=[[_0x63f104['x']+_0x78090e,_0x63f104['y']+_0x9f567d],[_0x63f104['x'],_0x63f104['y']+_0x9f567d],[_0x63f104['x'],_0x63f104['y']+_0x9f567d-_0x78090e]],_0x3c006d['left']=[[_0x63f104['x'],_0x63f104['y']+_0x9f567d-_0x78090e],[_0x63f104['x'],_0x63f104['y']+_0x9f567d/0x2],[_0x63f104['x'],_0x63f104['y']+_0x78090e]],_0x3c006d['topLeft']=[[_0x63f104['x'],_0x63f104['y']+_0x78090e],[_0x63f104['x'],_0x63f104['y']],[_0x63f104['x']+_0x78090e,_0x63f104['y']]];const _0x31113a=_0x3c006d,_0x5a8970=[[_0x247817['x'],_0x247817['y']],_0x31113a[_0x12abc1]];drawBubble(_0x1a8186,[_0x63f104['x'],_0x63f104['y'],_0x3d1833,_0x9f567d],_0x31113a,_0x59fec8['text'],(_0x50da8e=_0x59fec8['isTransparent'])!==null&&_0x50da8e!==void 0x0?_0x50da8e:![]);_0x5a8970&&drawSwoosh(_0x1a8186,_0x5a8970,_0x12abc1,_0x578903,_0x2a2d5b);_0x513f35&&_0x59fec8['showBorder']&&drawBubbleBorder(_0x1a8186,_0x31113a,_0x513f35,_0x5efaaa);const _0x50f692=_0x63f104['add'](new Vector(_0x2c71a2['x'],_0x2c71a2['y']+parseInt(_0x59fec8['text']['textSize'],0xa)+Math['floor'](_0x72c8f1/0x4)));prepareTextForFill(_0x1a8186['context'],_0x59fec8['text']),drawText(_0x1a8186['context'],_0x11b8f3,_0x50f692['x'],_0x50f692['y'],_0x59fec8['text']);}}}