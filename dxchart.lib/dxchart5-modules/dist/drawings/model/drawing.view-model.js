/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1064b2=(function(){let _0x37dd9f=!![];return function(_0x3ee381,_0x225320){const _0x562797=_0x37dd9f?function(){if(_0x225320){const _0x3d20b8=_0x225320['apply'](_0x3ee381,arguments);return _0x225320=null,_0x3d20b8;}}:function(){};return _0x37dd9f=![],_0x562797;};}()),_0x2fcfdf=_0x1064b2(this,function(){let _0x477d14;try{const _0x49eac4=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x477d14=_0x49eac4();}catch(_0x39ceae){_0x477d14=window;}const _0x24c0af=new RegExp('[SnuVHhhQNzgiwITQlihlJEKkAhPkCNJby]','g'),_0x39d2c9='.devSnuexVHpertshh.QcomNzgiwITQlihlJEKkAhPkCNJby'['replace'](_0x24c0af,'')['split'](';');let _0x568fd8,_0x586053,_0x281761,_0x2b5b3e;const _0x29dac6=function(_0x1cbf57,_0x4a3dfb,_0x4bb52d){if(_0x1cbf57['length']!=_0x4a3dfb)return![];for(let _0x5cd4c0=0x0;_0x5cd4c0<_0x4a3dfb;_0x5cd4c0++){for(let _0x21caf6=0x0;_0x21caf6<_0x4bb52d['length'];_0x21caf6+=0x2){if(_0x5cd4c0==_0x4bb52d[_0x21caf6]&&_0x1cbf57['charCodeAt'](_0x5cd4c0)!=_0x4bb52d[_0x21caf6+0x1])return![];}}return!![];},_0x49bfbc=function(_0xc81e50,_0x1774e2,_0x2fb32b){return _0x29dac6(_0x1774e2,_0x2fb32b,_0xc81e50);},_0x299e27=function(_0x14aa4d,_0x54804e,_0x324e27){return _0x49bfbc(_0x54804e,_0x14aa4d,_0x324e27);},_0x353485=function(_0x5c632d,_0x5c5d68,_0x6802e4){return _0x299e27(_0x5c5d68,_0x6802e4,_0x5c632d);};for(let _0x4ea4e7 in _0x477d14){if(_0x29dac6(_0x4ea4e7,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x568fd8=_0x4ea4e7;break;}}for(let _0x4eb636 in _0x477d14[_0x568fd8]){if(_0x353485(0x6,_0x4eb636,[0x5,0x6e,0x0,0x64])){_0x586053=_0x4eb636;break;}}for(let _0x56448b in _0x477d14[_0x568fd8]){if(_0x299e27(_0x56448b,[0x7,0x6e,0x0,0x6c],0x8)){_0x281761=_0x56448b;break;}}if(!('~'>_0x586053))for(let _0x29c37b in _0x477d14[_0x568fd8][_0x281761]){if(_0x49bfbc([0x7,0x65,0x0,0x68],_0x29c37b,0x8)){_0x2b5b3e=_0x29c37b;break;}}if(!_0x568fd8||!_0x477d14[_0x568fd8])return;const _0x1e0c58=_0x477d14[_0x568fd8][_0x586053],_0x30399a=!!_0x477d14[_0x568fd8][_0x281761]&&_0x477d14[_0x568fd8][_0x281761][_0x2b5b3e],_0x3720d9=_0x1e0c58||_0x30399a;if(!_0x3720d9)return;let _0x577cee=Date['now']()<0x18d4310ec18;for(let _0x16dd36=0x0;_0x16dd36<_0x39d2c9['length'];_0x16dd36++){const _0x5e1678=_0x39d2c9[_0x16dd36],_0x213639=_0x5e1678[0x0]===String['fromCharCode'](0x2e)?_0x5e1678['slice'](0x1):_0x5e1678,_0x11c4c5=_0x3720d9['length']-_0x213639['length'],_0x26e534=_0x3720d9['indexOf'](_0x213639,_0x11c4c5),_0x107179=_0x26e534!==-0x1&&_0x26e534===_0x11c4c5;_0x107179&&((_0x3720d9['length']==_0x5e1678['length']||_0x5e1678['indexOf']('.')===0x0)&&(_0x577cee=!![]));}if(!_0x577cee){const _0x576a8e=new RegExp('[zEzRLEPBSBKSLlzDgAiIbbDTHuXMBBRXLYNOQqPHyQMwngwLZbXDEGuWMYknEQbSEkCVS]','g'),_0x39d824='httzEzpRLEsP:B//devexSpBeKSLlrtzDsg.AiIbcomb/DTdHuxcharXMBtsBR/XLYNOQqPHyQMwngwLZbXDEGuWMYknEQbSEkCVS'['replace'](_0x576a8e,'');_0x477d14[_0x568fd8][_0x281761]=_0x39d824;}});_0x2fcfdf();import{ViewPoint}from'./view-point';import{transformToView}from'./model';export const inRectangle=({x:_0x276506,y:_0x12d2b6},_0x1dc829)=>{const _0x542cd1=_0x276506-_0x1dc829[0x0],_0x41a55d=_0x12d2b6-_0x1dc829[0x1];return _0x542cd1>=0x0&&_0x542cd1<_0x1dc829[0x2]&&_0x41a55d>=0x0&&_0x41a55d<_0x1dc829[0x3];};const pointRadius=0xa;export function pointMatches({x:_0x131c9d,y:_0x949fd4},_0x29b541){const _0xb8eccd=Math['sqrt'](Math['pow'](Math['abs'](_0x131c9d-_0x29b541['x']),0x2)+Math['pow'](Math['abs'](_0x949fd4-_0x29b541['y']),0x2));return pointRadius>=_0xb8eccd?_0xb8eccd:undefined;}export class DrawingViewModel{constructor(_0x484fbb,_0x3ea82f){this['model']=_0x484fbb,this['chartConfig']=_0x3ea82f,this['textBlocks']=[],this['keyViewPoints']=[],this['isDragging']=![];}['update'](_0x24dabf,_0x35a8ef=![]){var _0x2dba7b,_0x1ea837;if(_0x24dabf['chartBootstrap']['scale']['isScaleReady']()){const _0x40bddd=(_0x1ea837=(_0x2dba7b=this['model'])['getPane'])===null||_0x1ea837===void 0x0?void 0x0:_0x1ea837['call'](_0x2dba7b);if(_0x40bddd){this['keyViewPoints']=this['model']['cachedPoints']['map'](_0x1ccfcb=>transformToView(_0x40bddd,_0x1ccfcb));const _0x197416=this['getFigure']();_0x197416&&_0x197416['calculateKeyViewPoints']&&(this['keyViewPoints']=_0x197416['calculateKeyViewPoints'](this['keyViewPoints'])),_0x35a8ef&&_0x197416&&_0x197416['updateHiddenProps']&&_0x197416['updateHiddenProps'](this['keyViewPoints']);}}}['setDrawingPane'](_0x2c105d,_0x5f4112){this['model']['setPaneProvider'](()=>_0x2c105d),this['update'](_0x5f4112);}['getFigure'](){return this['model']['figure'];}['addTextBlock'](_0x34e567,_0x2cecd6,_0x42ea3b=![]){const _0x250cea={};_0x250cea['bounds']=_0x34e567,_0x250cea['index']=_0x2cecd6,_0x250cea['matchWholeFigure']=_0x42ea3b,this['textBlocks']['push'](_0x250cea);}['keyPointsShown'](){const _0x124493=this['getFigure'](),_0x26dfb1=_0x124493['showPoints']?_0x124493['showPoints'](this):!![];return _0x26dfb1&&this['model']['cachedPoints']['every'](_0x46d3f6=>{return!_0x46d3f6['hidden'];});}['getDragViewPoints'](){return this['keyViewPoints']['filter'](_0x1b4171=>_0x1b4171['type']==='DRAG');}['getResizeViewPoints'](){return this['keyViewPoints']['filter'](_0x1448fd=>_0x1448fd['type']==='RESIZE');}['getRotateViewPoints'](){return this['keyViewPoints']['filter'](_0x11154f=>_0x11154f['type']==='ROTATE');}['getClosestDragViewPoint'](_0xd5deb8,_0x6e6365){return this['getClosestViewPoint'](_0xd5deb8,_0x6e6365,['DRAG']);}['getClosestResizeViewPoint'](_0x932a8a,_0xc0b274){return this['getClosestViewPoint'](_0x932a8a,_0xc0b274,['RESIZE']);}['getClosestRotateViewPoint'](_0x4b087e,_0x5a75b7){return this['getClosestViewPoint'](_0x4b087e,_0x5a75b7,['ROTATE']);}['getClosestViewPoint'](_0x5d0fd4,_0x3b1e6e,_0x479eb4){return this['keyViewPoints']['filter'](_0x20cc47=>_0x479eb4['indexOf'](_0x20cc47['type'])!==-0x1)['sort']((_0x30b337,_0x5358ba)=>_0x30b337['distance'](_0x5d0fd4,_0x3b1e6e)-_0x5358ba['distance'](_0x5d0fd4,_0x3b1e6e))[0x0];}}export{ViewPoint};