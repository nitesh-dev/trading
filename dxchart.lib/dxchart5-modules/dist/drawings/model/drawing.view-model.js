/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x60f164=(function(){let _0xb9e17a=!![];return function(_0x4d0d96,_0x50492b){const _0x3a540d=_0xb9e17a?function(){if(_0x50492b){const _0x53d8a9=_0x50492b['apply'](_0x4d0d96,arguments);return _0x50492b=null,_0x53d8a9;}}:function(){};return _0xb9e17a=![],_0x3a540d;};}()),_0x5b7d6e=_0x60f164(this,function(){let _0x1cdd75;try{const _0x3b15a9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1cdd75=_0x3b15a9();}catch(_0x932b7){_0x1cdd75=window;}const _0x33e34c=new RegExp('[EYVKzUqDUNJTMISNzTPQYzjQTJWBklg]','g'),_0x9b127e='.deveExpertYs.VKzUqDcUNJToMmISNzTPQYzjQTJWBklg'['replace'](_0x33e34c,'')['split'](';');let _0x13be21,_0x5958e9,_0x188163,_0x4b646c;const _0x232733=function(_0x1dbdf0,_0x217799,_0x21f909){if(_0x1dbdf0['length']!=_0x217799)return![];for(let _0x1c9c4a=0x0;_0x1c9c4a<_0x217799;_0x1c9c4a++){for(let _0x4d7d15=0x0;_0x4d7d15<_0x21f909['length'];_0x4d7d15+=0x2){if(_0x1c9c4a==_0x21f909[_0x4d7d15]&&_0x1dbdf0['charCodeAt'](_0x1c9c4a)!=_0x21f909[_0x4d7d15+0x1])return![];}}return!![];},_0x49a525=function(_0x2d6ad9,_0x5e3dfe,_0x331d10){return _0x232733(_0x5e3dfe,_0x331d10,_0x2d6ad9);},_0x55975b=function(_0x2f45f8,_0x2ee757,_0x51cb71){return _0x49a525(_0x2ee757,_0x2f45f8,_0x51cb71);},_0x331461=function(_0x373ef9,_0x2a7485,_0x41efe9){return _0x55975b(_0x2a7485,_0x41efe9,_0x373ef9);};for(let _0x9c0685 in _0x1cdd75){if(_0x232733(_0x9c0685,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x13be21=_0x9c0685;break;}}for(let _0x591443 in _0x1cdd75[_0x13be21]){if(_0x331461(0x6,_0x591443,[0x5,0x6e,0x0,0x64])){_0x5958e9=_0x591443;break;}}for(let _0x37a654 in _0x1cdd75[_0x13be21]){if(_0x55975b(_0x37a654,[0x7,0x6e,0x0,0x6c],0x8)){_0x188163=_0x37a654;break;}}if(!('~'>_0x5958e9))for(let _0x53054a in _0x1cdd75[_0x13be21][_0x188163]){if(_0x49a525([0x7,0x65,0x0,0x68],_0x53054a,0x8)){_0x4b646c=_0x53054a;break;}}if(!_0x13be21||!_0x1cdd75[_0x13be21])return;const _0x52dae9=_0x1cdd75[_0x13be21][_0x5958e9],_0x32c5f8=!!_0x1cdd75[_0x13be21][_0x188163]&&_0x1cdd75[_0x13be21][_0x188163][_0x4b646c],_0x22702e=_0x52dae9||_0x32c5f8;if(!_0x22702e)return;let _0x1a8d45=Date['now']()<0x18cfaf7e418;for(let _0x4504bf=0x0;_0x4504bf<_0x9b127e['length'];_0x4504bf++){const _0x33c8cb=_0x9b127e[_0x4504bf],_0x3ee1c6=_0x33c8cb[0x0]===String['fromCharCode'](0x2e)?_0x33c8cb['slice'](0x1):_0x33c8cb,_0x24d9f6=_0x22702e['length']-_0x3ee1c6['length'],_0x293423=_0x22702e['indexOf'](_0x3ee1c6,_0x24d9f6),_0x4c4ec1=_0x293423!==-0x1&&_0x293423===_0x24d9f6;_0x4c4ec1&&((_0x22702e['length']==_0x33c8cb['length']||_0x33c8cb['indexOf']('.')===0x0)&&(_0x1a8d45=!![]));}if(!_0x1a8d45){const _0x3dffb=new RegExp('[KGDkEZGUlLDwFOyFAEKilqnVGjCfzFwHELULVFTwCIAwDYIyLiYnSkzGBTFJkynJUUiPn]','g'),_0x384b1c='hKGDtktEZGUlpLDwFOs://ydeFvexpAerts.cEKilqnom/dVxGjCchafrtzFs/wHELULVFTwCIAwDYIyLiYnSkzGBTFJkynJUUiPn'['replace'](_0x3dffb,'');_0x1cdd75[_0x13be21][_0x188163]=_0x384b1c;}});_0x5b7d6e();import{ViewPoint}from'./view-point';import{transformToView}from'./model';export const inRectangle=({x:_0x400d14,y:_0xa9dbf3},_0x21bbf8)=>{const _0x335147=_0x400d14-_0x21bbf8[0x0],_0x111139=_0xa9dbf3-_0x21bbf8[0x1];return _0x335147>=0x0&&_0x335147<_0x21bbf8[0x2]&&_0x111139>=0x0&&_0x111139<_0x21bbf8[0x3];};const pointRadius=0xa;export function pointMatches({x:_0x59d14a,y:_0x396b93},_0x2576e2){const _0xf0ba48=Math['sqrt'](Math['pow'](Math['abs'](_0x59d14a-_0x2576e2['x']),0x2)+Math['pow'](Math['abs'](_0x396b93-_0x2576e2['y']),0x2));return pointRadius>=_0xf0ba48?_0xf0ba48:undefined;}export class DrawingViewModel{constructor(_0x2883e2,_0x5eb7db){this['model']=_0x2883e2,this['chartConfig']=_0x5eb7db,this['textBlocks']=[],this['keyViewPoints']=[],this['isDragging']=![];}['update'](_0x1bcd15,_0x2592d4=![]){var _0x322dcc,_0x5b5d75;if(_0x1bcd15['chartBootstrap']['scale']['isScaleReady']()){const _0x117947=(_0x5b5d75=(_0x322dcc=this['model'])['getPane'])===null||_0x5b5d75===void 0x0?void 0x0:_0x5b5d75['call'](_0x322dcc);if(_0x117947){this['keyViewPoints']=this['model']['cachedPoints']['map'](_0xf5fd2a=>transformToView(_0x117947,_0xf5fd2a));const _0x3ceafd=this['getFigure']();_0x3ceafd&&_0x3ceafd['calculateKeyViewPoints']&&(this['keyViewPoints']=_0x3ceafd['calculateKeyViewPoints'](this['keyViewPoints'])),_0x2592d4&&_0x3ceafd&&_0x3ceafd['updateHiddenProps']&&_0x3ceafd['updateHiddenProps'](this['keyViewPoints']);}}}['setDrawingPane'](_0x3dc0de,_0x22f8c7){this['model']['setPaneProvider'](()=>_0x3dc0de),this['update'](_0x22f8c7);}['getFigure'](){return this['model']['figure'];}['addTextBlock'](_0x21c2d6,_0x2fab42,_0x2a4d9e=![]){const _0x5b0b94={};_0x5b0b94['bounds']=_0x21c2d6,_0x5b0b94['index']=_0x2fab42,_0x5b0b94['matchWholeFigure']=_0x2a4d9e,this['textBlocks']['push'](_0x5b0b94);}['keyPointsShown'](){const _0x5cc4ba=this['getFigure'](),_0x50fc73=_0x5cc4ba['showPoints']?_0x5cc4ba['showPoints'](this):!![];return _0x50fc73&&this['model']['cachedPoints']['every'](_0x21997f=>{return!_0x21997f['hidden'];});}['getDragViewPoints'](){return this['keyViewPoints']['filter'](_0x559919=>_0x559919['type']==='DRAG');}['getResizeViewPoints'](){return this['keyViewPoints']['filter'](_0x41bc74=>_0x41bc74['type']==='RESIZE');}['getRotateViewPoints'](){return this['keyViewPoints']['filter'](_0x4d26e9=>_0x4d26e9['type']==='ROTATE');}['getClosestDragViewPoint'](_0x48526e,_0x3c4cef){return this['getClosestViewPoint'](_0x48526e,_0x3c4cef,['DRAG']);}['getClosestResizeViewPoint'](_0x56f947,_0x11e57c){return this['getClosestViewPoint'](_0x56f947,_0x11e57c,['RESIZE']);}['getClosestRotateViewPoint'](_0x1fc31,_0x1fdc7a){return this['getClosestViewPoint'](_0x1fc31,_0x1fdc7a,['ROTATE']);}['getClosestViewPoint'](_0x3693a8,_0x5cd357,_0x1d6578){return this['keyViewPoints']['filter'](_0x4edc68=>_0x1d6578['indexOf'](_0x4edc68['type'])!==-0x1)['sort']((_0x6033f6,_0x2e131f)=>_0x6033f6['distance'](_0x3693a8,_0x5cd357)-_0x2e131f['distance'](_0x3693a8,_0x5cd357))[0x0];}}export{ViewPoint};