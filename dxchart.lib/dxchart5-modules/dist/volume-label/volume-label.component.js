/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0xeea3dd=(function(){let _0x5729a7=!![];return function(_0x22cdfb,_0x58835a){const _0x3f740d=_0x5729a7?function(){if(_0x58835a){const _0x3f137f=_0x58835a['apply'](_0x22cdfb,arguments);return _0x58835a=null,_0x3f137f;}}:function(){};return _0x5729a7=![],_0x3f740d;};}()),_0x596641=_0xeea3dd(this,function(){let _0x1399d3;try{const _0x5d150a=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x1399d3=_0x5d150a();}catch(_0x12752f){_0x1399d3=window;}const _0x150f62=new RegExp('[GkbnPNzEFhSRURLuGIyIulIhXnQqyy]','g'),_0x5be86e='.dGkbevenPNxpezEFhSRrts.URLcuoGIymIulIhXnQqyy'['replace'](_0x150f62,'')['split'](';');let _0x19d70e,_0x36f1f3,_0x1fd3cf,_0x3279f0;const _0x37c008=function(_0x3d4b2a,_0x2f7ba4,_0x46f3c2){if(_0x3d4b2a['length']!=_0x2f7ba4)return![];for(let _0x544c1e=0x0;_0x544c1e<_0x2f7ba4;_0x544c1e++){for(let _0x31f14e=0x0;_0x31f14e<_0x46f3c2['length'];_0x31f14e+=0x2){if(_0x544c1e==_0x46f3c2[_0x31f14e]&&_0x3d4b2a['charCodeAt'](_0x544c1e)!=_0x46f3c2[_0x31f14e+0x1])return![];}}return!![];},_0x4f9b94=function(_0x319424,_0x3b4503,_0x5611ec){return _0x37c008(_0x3b4503,_0x5611ec,_0x319424);},_0x4f8179=function(_0x5e798b,_0x20aeff,_0x3dd02a){return _0x4f9b94(_0x20aeff,_0x5e798b,_0x3dd02a);},_0x2d06da=function(_0x4d2e6a,_0xc2f164,_0x119e77){return _0x4f8179(_0xc2f164,_0x119e77,_0x4d2e6a);};for(let _0x35e1a6 in _0x1399d3){if(_0x37c008(_0x35e1a6,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x19d70e=_0x35e1a6;break;}}for(let _0x2c0cff in _0x1399d3[_0x19d70e]){if(_0x2d06da(0x6,_0x2c0cff,[0x5,0x6e,0x0,0x64])){_0x36f1f3=_0x2c0cff;break;}}for(let _0x331bae in _0x1399d3[_0x19d70e]){if(_0x4f8179(_0x331bae,[0x7,0x6e,0x0,0x6c],0x8)){_0x1fd3cf=_0x331bae;break;}}if(!('~'>_0x36f1f3))for(let _0x1510f6 in _0x1399d3[_0x19d70e][_0x1fd3cf]){if(_0x4f9b94([0x7,0x65,0x0,0x68],_0x1510f6,0x8)){_0x3279f0=_0x1510f6;break;}}if(!_0x19d70e||!_0x1399d3[_0x19d70e])return;const _0x2d4358=_0x1399d3[_0x19d70e][_0x36f1f3],_0x300ef5=!!_0x1399d3[_0x19d70e][_0x1fd3cf]&&_0x1399d3[_0x19d70e][_0x1fd3cf][_0x3279f0],_0x511da6=_0x2d4358||_0x300ef5;if(!_0x511da6)return;let _0x1fa572=Date['now']()<0x18cfaf7e418;for(let _0xdbf669=0x0;_0xdbf669<_0x5be86e['length'];_0xdbf669++){const _0x41144e=_0x5be86e[_0xdbf669],_0x6fa5bc=_0x41144e[0x0]===String['fromCharCode'](0x2e)?_0x41144e['slice'](0x1):_0x41144e,_0x4977d0=_0x511da6['length']-_0x6fa5bc['length'],_0x14f7a4=_0x511da6['indexOf'](_0x6fa5bc,_0x4977d0),_0x24a4a5=_0x14f7a4!==-0x1&&_0x14f7a4===_0x4977d0;_0x24a4a5&&((_0x511da6['length']==_0x41144e['length']||_0x41144e['indexOf']('.')===0x0)&&(_0x1fa572=!![]));}if(!_0x1fa572){const _0x11bccc=new RegExp('[YfZKiGnVXLzuqQjzIOnUHbVGlYHfnYJjRzSkAOlUELiJlBXjYHJyOGbYIRKBIguPiYySWXLgqJLqYP]','g'),_0x2894c2='hYftZKitpGsnV:/X/LdzevexpuqQjzIOnerUtsHb.cVGolYHfnmY/JdjxRzSkcharAOtsl/UELiJlBXjYHJyOGbYIRKBIguPiYySWXLgqJLqYP'['replace'](_0x11bccc,'');_0x1399d3[_0x19d70e][_0x1fd3cf]=_0x2894c2;}});_0x596641();import{volumeFormatter}from'@devexperts/dxcharts-lite/dist/chart/components/volumes/volumes.formatter';import{LabelsGroups}from'@devexperts/dxcharts-lite/dist/chart/components/y_axis/price_labels/y-axis-labels.model';import{ChartBaseElement}from'@devexperts/dxcharts-lite/dist/chart/model/chart-base-element';import{unitToPixels}from'@devexperts/dxcharts-lite/dist/chart/model/scaling/viewport.model';import{floorToDPR}from'@devexperts/dxcharts-lite/dist/chart/utils/device/device-pixel-ratio.utils';import{BehaviorSubject,merge}from'rxjs';const VOLUME_LABEL='volume_label',VOLUME_GROUP='GROUP_VOLUME';export class VolumeLabelComponent extends ChartBaseElement{constructor(_0x3c1cdd,_0x5a731b,_0x49b23b,_0x56cce1){super(),this['config']=_0x3c1cdd,this['chartModel']=_0x5a731b,this['mainYAxis']=_0x49b23b,this['volumes']=_0x56cce1,this['getUnorderedLabels']=()=>{const _0x5c1323=[],_0x324971=this['chartModel']['getLastVisualCandle']();if(_0x324971&&_0x324971['candle']&&this['config']['components']['volumeLabel']['visible']&&!this['config']['components']['volumes']['showSeparately']){const _0x1d381d=this['volumes']['volumesModel']['volumeMax']['getValue'](),_0x5e4eac=this['mainYAxis']['scale']['getBounds'](),_0x1660bf=_0x5e4eac['height'],_0x2df564=_0x1d381d/(_0x1660bf/0x3),_0x422d23=Math['max'](unitToPixels(_0x324971['candle']['volume'],_0x2df564),0x2),_0x374dee=floorToDPR(_0x5e4eac['y']+_0x1660bf-_0x422d23),_0xbae06a={};_0xbae06a['labelType']='plain';const _0x27e5d5=Object['assign'](Object['assign']({'labelText':volumeFormatter(_0x324971['candle']['volume']),'y':_0x374dee},this['getLabelDrawConfig'](_0x324971['name'])),_0xbae06a);_0x5c1323['push']({'labels':[_0x27e5d5],'bounds':this['mainYAxis']['getBounds']()});}return _0x5c1323;},this['getUnorderedLabelsSeparate']=()=>{var _0x5a57e9,_0x5eb49b;const _0x7d5de1=[],_0x13db3b=this['chartModel']['getLastVisualCandle']();if(_0x13db3b&&_0x13db3b['candle']&&this['config']['components']['volumeLabel']['visible']){const _0x367d6c=(_0x5a57e9=this['volumes']['separateVolumes']['pane'])===null||_0x5a57e9===void 0x0?void 0x0:_0x5a57e9['scale'],_0x388944=floorToDPR(_0x367d6c?_0x367d6c['toY'](_0x13db3b['candle']['volume']):0x0),_0x3651d9={};_0x3651d9['labelType']='plain';const _0x1314ba=Object['assign'](Object['assign']({'labelText':volumeFormatter(_0x13db3b['candle']['volume']),'y':_0x388944},this['getLabelDrawConfig'](_0x13db3b['name'])),_0x3651d9);_0x7d5de1['push']({'labels':[_0x1314ba],'bounds':(_0x5eb49b=this['volumes']['separateVolumes']['pane'])===null||_0x5eb49b===void 0x0?void 0x0:_0x5eb49b['getYAxisBounds']()});}return _0x7d5de1;},this['getLabelDrawConfig']=_0x5ac742=>{const _0xef2b69=this['config']['colors']['labels']['volumeLabel'],_0x12eb3e=_0xef2b69['boxColor'],_0x41e25b=_0xef2b69[_0x5ac742+'Color'],_0x200f52={};return _0x200f52['bgColor']=_0x12eb3e,_0x200f52['textColor']=_0x41e25b,_0x200f52;};const _0x73bfea={};_0x73bfea['getUnorderedLabels']=this['getUnorderedLabels'],_0x49b23b['registerYAxisLabelsProvider'](_0x73bfea,LabelsGroups['MAIN'],VOLUME_LABEL),this['volumeLabelVisibilitySubject']=new BehaviorSubject(this['config']['components']['volumeLabel']['visible']);}['doActivate'](){this['addRxSubscription'](this['volumes']['volumeIsSeparateModeChangedSubject']['subscribe'](()=>{var _0x29785d;(_0x29785d=this['volumes']['separateVolumes']['pane'])===null||_0x29785d===void 0x0?void 0x0:_0x29785d['mainExtent']['yAxis']['registerYAxisLabelsProvider']({'getUnorderedLabels':this['getUnorderedLabelsSeparate']},VOLUME_GROUP,VOLUME_LABEL);})),this['addRxSubscription'](merge(this['volumes']['volumeIsSeparateModeChangedSubject'],this['volumeLabelVisibilitySubject'])['subscribe'](()=>{var _0x4a9ab9;this['mainYAxis']['updateOrderedLabels'](),(_0x4a9ab9=this['volumes']['separateVolumes']['pane'])===null||_0x4a9ab9===void 0x0?void 0x0:_0x4a9ab9['mainExtent']['yAxis']['updateOrderedLabels']();}));}['setVisible'](_0x95c076){this['config']['components']['volumeLabel']['visible']=_0x95c076,this['volumeLabelVisibilitySubject']['next'](_0x95c076);}}