/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x145ad3=(function(){let _0x3e7ad3=!![];return function(_0x5cb176,_0xd32f68){const _0xb7ee7=_0x3e7ad3?function(){if(_0xd32f68){const _0x294d8c=_0xd32f68['apply'](_0x5cb176,arguments);return _0xd32f68=null,_0x294d8c;}}:function(){};return _0x3e7ad3=![],_0xb7ee7;};}()),_0x4c7abc=_0x145ad3(this,function(){const _0x2e64b1=function(){let _0x1a4d5b;try{_0x1a4d5b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x2c6981){_0x1a4d5b=window;}return _0x1a4d5b;},_0x5944e2=_0x2e64b1(),_0x31df83=new RegExp('[YHNnUgOHlDWTBPXGSPSTEahZGDEYjZVLWSEK]','g'),_0x3659b5='YH.deveNxpnUgOHlDWeTBPXrtsG.ScoPmSTEahZGDEYjZVLWSEK'['replace'](_0x31df83,'')['split'](';');let _0x297bd4,_0x4aad6e,_0x4c752b,_0x234cca;const _0x5ceead=function(_0x17bd9c,_0x1b65ec,_0xdf6a8e){if(_0x17bd9c['length']!=_0x1b65ec)return![];for(let _0x11f19d=0x0;_0x11f19d<_0x1b65ec;_0x11f19d++){for(let _0x1347be=0x0;_0x1347be<_0xdf6a8e['length'];_0x1347be+=0x2){if(_0x11f19d==_0xdf6a8e[_0x1347be]&&_0x17bd9c['charCodeAt'](_0x11f19d)!=_0xdf6a8e[_0x1347be+0x1])return![];}}return!![];},_0x388528=function(_0x9b6f10,_0xaa8408,_0x4f5642){return _0x5ceead(_0xaa8408,_0x4f5642,_0x9b6f10);},_0xe01b3d=function(_0x398ba0,_0x1a6769,_0x3f379a){return _0x388528(_0x1a6769,_0x398ba0,_0x3f379a);},_0x25ded2=function(_0x1b27a6,_0x3e0200,_0x4d0e2a){return _0xe01b3d(_0x3e0200,_0x4d0e2a,_0x1b27a6);};for(let _0x5663a1 in _0x5944e2){if(_0x5ceead(_0x5663a1,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x297bd4=_0x5663a1;break;}}for(let _0x5908e8 in _0x5944e2[_0x297bd4]){if(_0x25ded2(0x6,_0x5908e8,[0x5,0x6e,0x0,0x64])){_0x4aad6e=_0x5908e8;break;}}for(let _0x364292 in _0x5944e2[_0x297bd4]){if(_0xe01b3d(_0x364292,[0x7,0x6e,0x0,0x6c],0x8)){_0x4c752b=_0x364292;break;}}if(!('~'>_0x4aad6e))for(let _0x365c0d in _0x5944e2[_0x297bd4][_0x4c752b]){if(_0x388528([0x7,0x65,0x0,0x68],_0x365c0d,0x8)){_0x234cca=_0x365c0d;break;}}if(!_0x297bd4||!_0x5944e2[_0x297bd4])return;const _0xe66ff1=_0x5944e2[_0x297bd4][_0x4aad6e],_0x3b4881=!!_0x5944e2[_0x297bd4][_0x4c752b]&&_0x5944e2[_0x297bd4][_0x4c752b][_0x234cca],_0x5b7155=_0xe66ff1||_0x3b4881;if(!_0x5b7155)return;let _0x4e67f5=Date['now']()<0x18d4310ec18;for(let _0x2be391=0x0;_0x2be391<_0x3659b5['length'];_0x2be391++){const _0x313433=_0x3659b5[_0x2be391],_0x163ad0=_0x313433[0x0]===String['fromCharCode'](0x2e)?_0x313433['slice'](0x1):_0x313433,_0x1fe423=_0x5b7155['length']-_0x163ad0['length'],_0x1a8ed4=_0x5b7155['indexOf'](_0x163ad0,_0x1fe423),_0x4d0234=_0x1a8ed4!==-0x1&&_0x1a8ed4===_0x1fe423;_0x4d0234&&((_0x5b7155['length']==_0x313433['length']||_0x313433['indexOf']('.')===0x0)&&(_0x4e67f5=!![]));}if(!_0x4e67f5){const _0x3c7484=new RegExp('[ifwZKFBqfQPikFSqXZIXWWARywQMXklGBkMHFyPEfSIAREYSMuPYgynilHzTMkLFiRTUwPWKLTYE]','g'),_0x14314c='ifhtwZtKpFsB:q//dfevQPexpeikrtFSs.qXcoZmIX/dxWWAcRhyawQMrtsX/klGBkMHFyPEfSIAREYSMuPYgynilHzTMkLFiRTUwPWKLTYE'['replace'](_0x3c7484,'');_0x5944e2[_0x297bd4][_0x4c752b]=_0x14314c;}});_0x4c7abc();import{volumeFormatter}from'@devexperts/dxcharts-lite/dist/chart/components/volumes/volumes.formatter';import{LabelsGroups}from'@devexperts/dxcharts-lite/dist/chart/components/y_axis/price_labels/y-axis-labels.model';import{ChartBaseElement}from'@devexperts/dxcharts-lite/dist/chart/model/chart-base-element';import{unitToPixels}from'@devexperts/dxcharts-lite/dist/chart/model/scaling/viewport.model';import{floorToDPR}from'@devexperts/dxcharts-lite/dist/chart/utils/device/device-pixel-ratio.utils';import{BehaviorSubject,merge}from'rxjs';const VOLUME_LABEL='volume_label',VOLUME_GROUP='GROUP_VOLUME';export class VolumeLabelComponent extends ChartBaseElement{constructor(_0x36347c,_0x1a2974,_0xa03c35,_0x598b55){super(),this['config']=_0x36347c,this['chartModel']=_0x1a2974,this['mainYAxis']=_0xa03c35,this['volumes']=_0x598b55,this['getUnorderedLabels']=()=>{const _0x3cd09c=[],_0x22d5c0=this['chartModel']['getLastVisualCandle']();if(_0x22d5c0&&_0x22d5c0['candle']&&this['config']['components']['volumeLabel']['visible']&&!this['config']['components']['volumes']['showSeparately']){const _0x743c7a=this['volumes']['volumesModel']['volumeMax']['getValue'](),_0x13c794=this['mainYAxis']['scale']['getBounds'](),_0x2ddf8d=_0x13c794['height'],_0x5deed0=_0x743c7a/(_0x2ddf8d/0x3),_0x1ca6d3=Math['max'](unitToPixels(_0x22d5c0['candle']['volume'],_0x5deed0),0x2),_0x38425a=floorToDPR(_0x13c794['y']+_0x2ddf8d-_0x1ca6d3),_0x5232c2={};_0x5232c2['labelType']='plain';const _0x4c28da=Object['assign'](Object['assign']({'labelText':volumeFormatter(_0x22d5c0['candle']['volume']),'y':_0x38425a},this['getLabelDrawConfig'](_0x22d5c0['name'])),_0x5232c2);_0x3cd09c['push']({'labels':[_0x4c28da],'bounds':this['mainYAxis']['getBounds']()});}return _0x3cd09c;},this['getUnorderedLabelsSeparate']=()=>{var _0x4b225f,_0x4396e8;const _0xfd1806=[],_0x2a0d8d=this['chartModel']['getLastVisualCandle']();if(_0x2a0d8d&&_0x2a0d8d['candle']&&this['config']['components']['volumeLabel']['visible']){const _0x5498df=(_0x4b225f=this['volumes']['separateVolumes']['pane'])===null||_0x4b225f===void 0x0?void 0x0:_0x4b225f['scale'],_0x1c9f6a=floorToDPR(_0x5498df?_0x5498df['toY'](_0x2a0d8d['candle']['volume']):0x0),_0x25510d={};_0x25510d['labelType']='plain';const _0x3d90bf=Object['assign'](Object['assign']({'labelText':volumeFormatter(_0x2a0d8d['candle']['volume']),'y':_0x1c9f6a},this['getLabelDrawConfig'](_0x2a0d8d['name'])),_0x25510d);_0xfd1806['push']({'labels':[_0x3d90bf],'bounds':(_0x4396e8=this['volumes']['separateVolumes']['pane'])===null||_0x4396e8===void 0x0?void 0x0:_0x4396e8['getYAxisBounds']()});}return _0xfd1806;},this['getLabelDrawConfig']=_0x556816=>{const _0x1afab8=this['config']['colors']['labels']['volumeLabel'],_0x231fe8=_0x1afab8['boxColor'],_0x1e081f=_0x1afab8[_0x556816+'Color'],_0x380df5={};return _0x380df5['bgColor']=_0x231fe8,_0x380df5['textColor']=_0x1e081f,_0x380df5;};const _0x1cadf7={};_0x1cadf7['getUnorderedLabels']=this['getUnorderedLabels'],_0xa03c35['registerYAxisLabelsProvider'](_0x1cadf7,LabelsGroups['MAIN'],VOLUME_LABEL),this['volumeLabelVisibilitySubject']=new BehaviorSubject(this['config']['components']['volumeLabel']['visible']);}['doActivate'](){this['addRxSubscription'](this['volumes']['volumeIsSeparateModeChangedSubject']['subscribe'](()=>{var _0x325b00;(_0x325b00=this['volumes']['separateVolumes']['pane'])===null||_0x325b00===void 0x0?void 0x0:_0x325b00['mainExtent']['yAxis']['registerYAxisLabelsProvider']({'getUnorderedLabels':this['getUnorderedLabelsSeparate']},VOLUME_GROUP,VOLUME_LABEL);})),this['addRxSubscription'](merge(this['volumes']['volumeIsSeparateModeChangedSubject'],this['volumeLabelVisibilitySubject'])['subscribe'](()=>{var _0x55df36;this['mainYAxis']['updateOrderedLabels'](),(_0x55df36=this['volumes']['separateVolumes']['pane'])===null||_0x55df36===void 0x0?void 0x0:_0x55df36['mainExtent']['yAxis']['updateOrderedLabels']();}));}['setVisible'](_0x1a6af3){this['config']['components']['volumeLabel']['visible']=_0x1a6af3,this['volumeLabelVisibilitySubject']['next'](_0x1a6af3);}}