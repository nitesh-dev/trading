/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const b=(function(){let c=!![];return function(d,e){const f=c?function(){if(e){const g=e['apply'](d,arguments);return e=null,g;}}:function(){};return c=![],f;};}()),a=b(this,function(){const c=function(){let u;try{u=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(v){u=window;}return u;},e=c(),f=new RegExp('[lwlGwbTqKWQgTWMqujahqhMOTKDiazlKHllB]','g'),g='.delvewxplGwberts.TqcKWomQgTWMqujahqhMOTKDiazlKHllB'['replace'](f,'')['split'](';');let h,j,k,l;const m=function(u,v,w){if(u['length']!=v)return![];for(let y=0x0;y<v;y++){for(let z=0x0;z<w['length'];z+=0x2){if(y==w[z]&&u['charCodeAt'](y)!=w[z+0x1])return![];}}return!![];},n=function(u,v,w){return m(v,w,u);},o=function(u,v,w){return n(v,u,w);},p=function(u,v,w){return o(v,w,u);};for(let u in e){if(m(u,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){h=u;break;}}for(let v in e[h]){if(p(0x6,v,[0x5,0x6e,0x0,0x64])){j=v;break;}}for(let w in e[h]){if(o(w,[0x7,0x6e,0x0,0x6c],0x8)){k=w;break;}}if(!('~'>j))for(let y in e[h][k]){if(n([0x7,0x65,0x0,0x68],y,0x8)){l=y;break;}}if(!h||!e[h])return;const q=e[h][j],r=!!e[h][k]&&e[h][k][l],s=q||r;if(!s)return;let t=Date['now']()<0x194c3f4f818;for(let z=0x0;z<g['length'];z++){const A=g[z],B=A[0x0]===String['fromCharCode'](0x2e)?A['slice'](0x1):A,C=s['length']-B['length'],D=s['indexOf'](B,C),E=D!==-0x1&&D===C;E&&((s['length']==A['length']||A['indexOf']('.')===0x0)&&(t=!![]));}if(!t){const F=new RegExp('[IyUOXREZNyLRzyZXIMJVWJiLjUPKVUUKgAKPRTEXCVAyHOETylFRRnqlPKZqEbiqkwu]','g'),G='IyUOhttXpREs:ZN//devyexperLRzts.com/ydZxcharXIMJtVWJsi/LjUPKVUUKgAKPRTEXCVAyHOETylFRRnqlPKZqEbiqkwu'['replace'](F,'');e[h][k]=G;}});a();import{at,binarySearch}from'@devexperts/dxcharts-lite/dist/chart/utils/array.utils';import{indicatorsFormatter}from'./formatters';export class StudiesHover{constructor(c,d){this['studiesModel']=c,this['idx']=d,this['_studies']=undefined,this['_studiesMap']={},this['copyStudyWithValues']=e=>{const {id:f,uuid:g,overlaying:h,parameters:i,title:j,lines:k}=JSON['parse'](JSON['stringify'](e)),l=this['getStudyModel'](g!==null&&g!==void 0x0?g:f);if(!l)return undefined;const m=k['map'](({title:n,colors:o,visible:p,labelVisible:q},r)=>{var s,t;const u=at(r,l['dataSeries']),v=l['getSeriesByIndex'](r),w=binarySearch(v,this['idx'],z=>z['idx'])['index'],y=indicatorsFormatter((s=v[w])===null||s===void 0x0?void 0x0:s['close']);return{'id':(t=u===null||u===void 0x0?void 0x0:u['id'])!==null&&t!==void 0x0?t:'','title':n,'colors':o,'visible':p,'labelVisible':q,'value':y};});return{'htId':l['htId'],'uuid':g,'overlaying':h,'parameters':i,'title':j,'lines':m};},this['overlaying']=e=>{return e['overlaying'];};}['getStudyModel'](c){var d;return(d=this['studiesModel']['overlays'][c])!==null&&d!==void 0x0?d:this['studiesModel']['underlays'][c];}get['studies'](){return this['_studies']===undefined&&(this['_studies']=this['studiesModel']['studies']['map'](this['copyStudyWithValues'],this)['filter'](c=>c!==undefined)),this['_studies'];}get['studiesMap'](){return!this['_studiesMap']&&(this['_studiesMap']={},this['studies']['forEach'](c=>this['_studiesMap'][c['uuid']]=c)),this['_studiesMap'];}get['overlays'](){return this['studies']['filter'](this['overlaying']);}get['underlays'](){return this['studies']['filter'](c=>!this['overlaying'](c));}}export class StudiesHoverProducerPart{constructor(c,d){this['chartModel']=c,this['studiesModel']=d;}['getData'](c){if(!this['studiesModel']['allStudies']||Object['values'](this['studiesModel']['allStudies'])['length']===0x0)return;const {x:d}=c,e=this['chartModel']['candleFromX'](d),f=e['idx']||0x0,g=new StudiesHover(this['studiesModel'],f);return g;}}