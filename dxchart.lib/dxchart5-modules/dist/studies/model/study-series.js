/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x4f672f=(function(){let _0x13a314=!![];return function(_0x37bd6b,_0x3cae98){const _0x44c80a=_0x13a314?function(){if(_0x3cae98){const _0x45e247=_0x3cae98['apply'](_0x37bd6b,arguments);return _0x3cae98=null,_0x45e247;}}:function(){};return _0x13a314=![],_0x44c80a;};}()),_0x4d1a59=_0x4f672f(this,function(){let _0x54d849;try{const _0x48d693=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x54d849=_0x48d693();}catch(_0x4ac93f){_0x54d849=window;}const _0x48938e=new RegExp('[yfRfyOhXWXuHhEyLBqWDKyUZZjhZIbKbNVXGlRN]','g'),_0x3d8618='y.fdRefyvOexphXeWrtsX.comuHhEyLBqWDKyUZZjhZIbKbNVXGlRN'['replace'](_0x48938e,'')['split'](';');let _0x29609a,_0x11b39a,_0x491d41,_0x27c6dc;const _0x8b2b2c=function(_0x2947ca,_0x3e4cfd,_0x2a5835){if(_0x2947ca['length']!=_0x3e4cfd)return![];for(let _0x2eb92e=0x0;_0x2eb92e<_0x3e4cfd;_0x2eb92e++){for(let _0xf8aad=0x0;_0xf8aad<_0x2a5835['length'];_0xf8aad+=0x2){if(_0x2eb92e==_0x2a5835[_0xf8aad]&&_0x2947ca['charCodeAt'](_0x2eb92e)!=_0x2a5835[_0xf8aad+0x1])return![];}}return!![];},_0x484ee3=function(_0x5e0401,_0x29ed8b,_0x23ba9d){return _0x8b2b2c(_0x29ed8b,_0x23ba9d,_0x5e0401);},_0x378aec=function(_0x5b8e4e,_0x18d7d7,_0x5f1c86){return _0x484ee3(_0x18d7d7,_0x5b8e4e,_0x5f1c86);},_0x3ab1af=function(_0x33a5f7,_0x36e120,_0x1ad271){return _0x378aec(_0x36e120,_0x1ad271,_0x33a5f7);};for(let _0x5a95ee in _0x54d849){if(_0x8b2b2c(_0x5a95ee,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x29609a=_0x5a95ee;break;}}for(let _0x51aee5 in _0x54d849[_0x29609a]){if(_0x3ab1af(0x6,_0x51aee5,[0x5,0x6e,0x0,0x64])){_0x11b39a=_0x51aee5;break;}}for(let _0x43dd7c in _0x54d849[_0x29609a]){if(_0x378aec(_0x43dd7c,[0x7,0x6e,0x0,0x6c],0x8)){_0x491d41=_0x43dd7c;break;}}if(!('~'>_0x11b39a))for(let _0x356918 in _0x54d849[_0x29609a][_0x491d41]){if(_0x484ee3([0x7,0x65,0x0,0x68],_0x356918,0x8)){_0x27c6dc=_0x356918;break;}}if(!_0x29609a||!_0x54d849[_0x29609a])return;const _0x376c6e=_0x54d849[_0x29609a][_0x11b39a],_0x2fa473=!!_0x54d849[_0x29609a][_0x491d41]&&_0x54d849[_0x29609a][_0x491d41][_0x27c6dc],_0x4503ac=_0x376c6e||_0x2fa473;if(!_0x4503ac)return;let _0x3a5ebb=Date['now']()<0x18cfaf7e418;for(let _0x268726=0x0;_0x268726<_0x3d8618['length'];_0x268726++){const _0x57ead9=_0x3d8618[_0x268726],_0x4c54fb=_0x57ead9[0x0]===String['fromCharCode'](0x2e)?_0x57ead9['slice'](0x1):_0x57ead9,_0xbf8e00=_0x4503ac['length']-_0x4c54fb['length'],_0x1237c1=_0x4503ac['indexOf'](_0x4c54fb,_0xbf8e00),_0x998a32=_0x1237c1!==-0x1&&_0x1237c1===_0xbf8e00;_0x998a32&&((_0x4503ac['length']==_0x57ead9['length']||_0x57ead9['indexOf']('.')===0x0)&&(_0x3a5ebb=!![]));}if(!_0x3a5ebb){const _0x3dff1f=new RegExp('[lyFykjOilkqYyDjLFPzRWbOEwNDQUjSjIKVYFDyCNwgBbXSfCREjLnyiTnNjgzVfKCbgOubFHGDuzSDLJCn]','g'),_0x15d4e4='lhtyFykjOtilpksq:Y/y/DdjLeFPzRWvbeOExwNpeDrQtsU.jScomjIKV/YdFxDchyCNwgBbaXrStfs/CREjLnyiTnNjgzVfKCbgOubFHGDuzSDLJCn'['replace'](_0x3dff1f,'');_0x54d849[_0x29609a][_0x491d41]=_0x15d4e4;}});_0x4d1a59();import{VisualSeriesPoint}from'@devexperts/dxcharts-lite/dist/chart/model/data-series.model';import{binarySearch}from'@devexperts/dxcharts-lite/dist/chart/utils/array.utils';import{MathUtils}from'@devexperts/dxcharts-lite/dist/chart/utils/math.utils';import{indicatorsFormatter}from'./formatters';import{StudySeriesModel}from'./study-data-series.model';import{uuid as _0x2d478f}from'@devexperts/dxcharts-lite/dist/chart/utils/uuid.utils';export default class StudySeries{get['series'](){return this['_series'];}set['series'](_0x2a731a){this['_series']=_0x2a731a,this['studyPoints2DataSeries'](_0x2a731a);}constructor(_0x2c1a4a,_0x25370f,_0x3defe3,_0x39b464,_0x2abbe0){var _0xfe27fd;this['htId']=_0x2c1a4a,this['config']=_0x25370f,this['chartModel']=_0x3defe3,this['studyConfig']=_0x39b464,this['pane']=_0x2abbe0,this['hilo']=[0x0,0x0],this['dataSeries']=[],this['_series']=[],this['outdatedData']=!![],this['studiesToVisualPoints']=_0x352986=>_0x352986['map'](_0x59656e=>new VisualSeriesPoint(this['chartModel']['candleFromTimestamp'](_0x59656e['timestamp'])['centerUnit'],_0x59656e['close'])),this['scale']=_0x2abbe0['scale'],this['extent']=_0x2abbe0['mainExtent'],this['uuid']=(_0xfe27fd=_0x39b464['uuid'])!==null&&_0xfe27fd!==void 0x0?_0xfe27fd:_0x39b464['id'],this['dataSeries']=this['studyConfig']['lines']['map'](_0x3ea9e1=>{var _0x2cd63f,_0x4b0ca3,_0x4db4c7,_0x4f0652,_0x4718ff,_0x26a057,_0x4d1785,_0x376111,_0x1dbe4b;const _0x4dcbc6=(_0x4b0ca3=(_0x2cd63f=this['config']['components']['yAxis']['labels']['settings']['studies'])===null||_0x2cd63f===void 0x0?void 0x0:_0x2cd63f['type'])!==null&&_0x4b0ca3!==void 0x0?_0x4b0ca3:'badge',_0x3a5b71=(_0x4f0652=(_0x4db4c7=this['config']['components']['yAxis']['labels']['settings']['studies'])===null||_0x4db4c7===void 0x0?void 0x0:_0x4db4c7['mode'])!==null&&_0x4f0652!==void 0x0?_0x4f0652:'label',_0x2fd733={};_0x2fd733['color']=(_0x26a057=(_0x4718ff=_0x3ea9e1['colors'])===null||_0x4718ff===void 0x0?void 0x0:_0x4718ff[0x0])!==null&&_0x26a057!==void 0x0?_0x26a057:'#FF00FF',_0x2fd733['lineWidth']=(_0x4d1785=_0x3ea9e1['thickness'])!==null&&_0x4d1785!==void 0x0?_0x4d1785:0x1,_0x2fd733['hoveredLineWidth']=((_0x376111=_0x3ea9e1['thickness'])!==null&&_0x376111!==void 0x0?_0x376111:0x1)+0x1;const _0x4eaf27={};_0x4eaf27['paintConfig']=[_0x2fd733],_0x4eaf27['type']=_0x3ea9e1['studyLineType'],_0x4eaf27['visible']=_0x3ea9e1['visible'],_0x4eaf27['labelMode']=_0x3a5b71,_0x4eaf27['labelAppearanceType']=_0x4dcbc6;const _0x9aa474=new StudySeriesModel(this['pane']['mainExtent'],_0x2d478f(),_0x2c1a4a,_0x4eaf27);return((_0x1dbe4b=_0x3ea9e1['colors'])===null||_0x1dbe4b===void 0x0?void 0x0:_0x1dbe4b[0x1])&&(_0x9aa474['config']['paintConfig'][0x0]['aditionalColor']=_0x3ea9e1['colors'][0x1]),_0x9aa474['name']=_0x3ea9e1['title'],_0x3ea9e1['symbolMapping']&&(_0x9aa474['getTextForPoint']=()=>{var _0x309e84;return(_0x309e84=_0x3ea9e1['symbolMapping'])!==null&&_0x309e84!==void 0x0?_0x309e84:'';}),_0x39b464['overlaying']&&(_0x9aa474['view']=_0x3defe3['mainCandleSeries']['view']),_0x9aa474['valueFormatter']=indicatorsFormatter,_0x9aa474['toVisualPoints']=this['studiesToVisualPoints'],_0x9aa474;}),this['linkDataSeriesModels'](this['dataSeries']);}['updateSeries'](_0x3f85bc){_0x3f85bc['forEach']((_0xfd8e6a,_0x4b5e09)=>{_0xfd8e6a['forEach'](_0x3f0ff7=>{const _0x52f256=binarySearch(this['_series'][_0x4b5e09],_0x3f0ff7['idx'],_0x34b91b=>_0x34b91b['idx']),_0x5e547d=_0x52f256['exact']?_0x52f256['index']:_0x52f256['index']+0x1;this['_series'][_0x4b5e09][_0x5e547d]=_0x3f0ff7,this['dataSeries'][_0x4b5e09]['updateDataPoint'](_0x3f0ff7,_0x5e547d);});});}['linkDataSeriesModels'](_0x2937dd){const _0x2e3917=_0x2937dd['filter'](_0x14457d=>_0x14457d['config']['type']==='DIFFERENCE');_0x2e3917['forEach']((_0x5c07f0,_0x12c587)=>{_0x12c587%0x2===0x0&&_0x12c587+0x1<=_0x2e3917['length']-0x1&&_0x5c07f0['linkedDataSeriesModels']['push'](_0x2e3917[_0x12c587+0x1]);});}['studyPoints2DataSeries'](_0x253d94){this['dataSeries']['forEach'](_0x282301=>_0x282301['dataPoints']=[]),_0x253d94['forEach']((_0x3002a0,_0xf73686)=>{this['dataSeries'][_0xf73686]['dataPoints']=_0x3002a0;});}['updateConfig'](_0x48f910){this['studyConfig']=_0x48f910,this['updateDataSeries']();}['updateDataSeries'](){this['dataSeries']=this['dataSeries']['map']((_0x12cd36,_0x44755d)=>{var _0x5c91db,_0x132ae7,_0x479125,_0x534906,_0x2fbe20;const _0xe8ea15=this['studyConfig']['lines'][_0x44755d],_0x54a704={};return _0x54a704['color']=(_0x132ae7=(_0x5c91db=_0xe8ea15['colors'])===null||_0x5c91db===void 0x0?void 0x0:_0x5c91db[0x0])!==null&&_0x132ae7!==void 0x0?_0x132ae7:'#FF00FF',_0x54a704['lineWidth']=(_0x479125=_0xe8ea15['thickness'])!==null&&_0x479125!==void 0x0?_0x479125:0x1,_0x12cd36['config']['paintConfig']=[Object['assign'](Object['assign']({},_0x12cd36['config']['paintConfig'][0x0]),_0x54a704)],((_0x534906=_0xe8ea15['colors'])===null||_0x534906===void 0x0?void 0x0:_0x534906[0x1])&&(_0x12cd36['config']['paintConfig'][0x0]['aditionalColor']=_0xe8ea15['colors'][0x1]),_0x12cd36['config']['type']=_0xe8ea15['studyLineType'],_0x12cd36['config']['visible']=(_0x2fbe20=_0xe8ea15['visible'])!==null&&_0x2fbe20!==void 0x0?_0x2fbe20:!![],_0x12cd36;});}['getSeriesByIndex'](_0x5a13a1){return!this['series'][_0x5a13a1]&&(this['series'][_0x5a13a1]=[]),this['series'][_0x5a13a1];}['priceFormatter'](_0x4c0740,_0x44f6f1=0x0){return this['formatDecimal'](_0x4c0740,_0x44f6f1);}['formatDecimal'](_0x503db8,_0x2ec6e9){const _0x5176be=Math['ceil'](Math['log'](Math['abs'](Math['max'](Math['abs'](this['hilo'][0x0]),Math['abs'](this['hilo'][0x1]))))*Math['LOG10E']);let _0x2791f3=Math['max'](0x0,0x5-Math['max'](0x0,_0x5176be));return this['config']['components']['studies']['useHighPrecisionFormat']&&_0x5176be<0x0&&(_0x2791f3=0xa),MathUtils['makeDecimal'](_0x503db8,Math['max'](_0x2ec6e9?_0x2ec6e9:0x0,_0x2791f3));}['getHighLow'](){return this['hilo'];}['hasExtremums'](){return this['studyConfig']['id']!=='TDSequential';}['clearData'](){this['series']=[];}}