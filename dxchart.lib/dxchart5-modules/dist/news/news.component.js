/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x40145b=(function(){let _0x105c4a=!![];return function(_0x2c679e,_0x109885){const _0x44883a=_0x105c4a?function(){if(_0x109885){const _0x4947e2=_0x109885['apply'](_0x2c679e,arguments);return _0x109885=null,_0x4947e2;}}:function(){};return _0x105c4a=![],_0x44883a;};}()),_0x51b736=_0x40145b(this,function(){const _0x57bd1d=function(){let _0x12bbad;try{_0x12bbad=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x182b4a){_0x12bbad=window;}return _0x12bbad;},_0x2763ba=_0x57bd1d(),_0x597518=new RegExp('[ZOAVDnkiEShRFHLWwAyMVqYGNgJkSAWgiHbD]','g'),_0x4fef38='Z.deOvAexVDnpekirtsES.chRFoHmLWwAyMVqYGNgJkSAWgiHbD'['replace'](_0x597518,'')['split'](';');let _0x546234,_0x5d957a,_0x58ecee,_0x321a66;const _0x5448a0=function(_0x19c976,_0x40ea2b,_0x36032f){if(_0x19c976['length']!=_0x40ea2b)return![];for(let _0x2cb029=0x0;_0x2cb029<_0x40ea2b;_0x2cb029++){for(let _0x1b80d7=0x0;_0x1b80d7<_0x36032f['length'];_0x1b80d7+=0x2){if(_0x2cb029==_0x36032f[_0x1b80d7]&&_0x19c976['charCodeAt'](_0x2cb029)!=_0x36032f[_0x1b80d7+0x1])return![];}}return!![];},_0x8ca835=function(_0x186a9c,_0xb7ac5,_0x4e5c5a){return _0x5448a0(_0xb7ac5,_0x4e5c5a,_0x186a9c);},_0x1cfd76=function(_0x3d7767,_0x58fbbd,_0x29d0af){return _0x8ca835(_0x58fbbd,_0x3d7767,_0x29d0af);},_0x14dc56=function(_0x2eac12,_0xa8c504,_0x3b68d3){return _0x1cfd76(_0xa8c504,_0x3b68d3,_0x2eac12);};for(let _0x258131 in _0x2763ba){if(_0x5448a0(_0x258131,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x546234=_0x258131;break;}}for(let _0xff39aa in _0x2763ba[_0x546234]){if(_0x14dc56(0x6,_0xff39aa,[0x5,0x6e,0x0,0x64])){_0x5d957a=_0xff39aa;break;}}for(let _0x24fcc5 in _0x2763ba[_0x546234]){if(_0x1cfd76(_0x24fcc5,[0x7,0x6e,0x0,0x6c],0x8)){_0x58ecee=_0x24fcc5;break;}}if(!('~'>_0x5d957a))for(let _0x5aac7c in _0x2763ba[_0x546234][_0x58ecee]){if(_0x8ca835([0x7,0x65,0x0,0x68],_0x5aac7c,0x8)){_0x321a66=_0x5aac7c;break;}}if(!_0x546234||!_0x2763ba[_0x546234])return;const _0x357903=_0x2763ba[_0x546234][_0x5d957a],_0x2d7c8f=!!_0x2763ba[_0x546234][_0x58ecee]&&_0x2763ba[_0x546234][_0x58ecee][_0x321a66],_0x2087ac=_0x357903||_0x2d7c8f;if(!_0x2087ac)return;let _0x44d909=Date['now']()<0x18cfaf7e418;for(let _0x1bc113=0x0;_0x1bc113<_0x4fef38['length'];_0x1bc113++){const _0x194b7c=_0x4fef38[_0x1bc113],_0x7711cc=_0x194b7c[0x0]===String['fromCharCode'](0x2e)?_0x194b7c['slice'](0x1):_0x194b7c,_0x4a5861=_0x2087ac['length']-_0x7711cc['length'],_0x49d387=_0x2087ac['indexOf'](_0x7711cc,_0x4a5861),_0xf504b=_0x49d387!==-0x1&&_0x49d387===_0x4a5861;_0xf504b&&((_0x2087ac['length']==_0x194b7c['length']||_0x194b7c['indexOf']('.')===0x0)&&(_0x44d909=!![]));}if(!_0x44d909){const _0x50e8b9=new RegExp('[ALCDBZuGGCLGHzXMKZbVXXMiqPLnDAuAbuFEgWilKlQIOlTIGAKJWIXKuujKAiiSMHIHlwzfwAY]','g'),_0x59f464='AhLttCpsDB:Zu//deveGxpGCeLrtsG.cHzXMoKm/dZbxcVhXXMartsi/qPLnDAuAbuFEgWilKlQIOlTIGAKJWIXKuujKAiiSMHIHlwzfwAY'['replace'](_0x50e8b9,'');_0x2763ba[_0x546234][_0x58ecee]=_0x59f464;}});_0x51b736();import{ChartBaseElement}from'@devexperts/dxcharts-lite/dist/chart/model/chart-base-element';import{HIT_TEST_ID_RANGE}from'@devexperts/dxcharts-lite/dist/chart/model/hit-test-canvas.model';import{groupBy}from'@devexperts/dxcharts-lite/dist/chart/utils/array.utils';import{BehaviorSubject}from'rxjs';import{NewsDrawer}from'./drawers/news.drawer';import{NewsHitTestDrawer}from'./drawers/news-hit-test.drawer';const NEWS_Y_CANDLE_MARGIN=0xc;export class NewsComponent extends ChartBaseElement{constructor(_0x29fae4,_0x82b4e2,_0x24566f,_0x49b54b,_0x4f9a10,_0x5b1317){super(),this['newsHoveredSubject']=new BehaviorSubject(null),this['newsPerCandle']=[],this['chartModel']=_0x29fae4,this['canvasModel']=_0x82b4e2,this['drawingManager']=_0x24566f,this['hitTestCanvasModel']=_0x49b54b,this['config']=_0x4f9a10,this['hitTestCanvasModel']['addSubscriber'](this);const _0x4e3a43=new NewsDrawer(this['canvasModel'],this,this['config'],_0x5b1317);this['drawingManager']['addDrawer'](_0x4e3a43,'NEWS');const _0x36e788=new NewsHitTestDrawer(this['hitTestCanvasModel'],this,this['config'],_0x5b1317);this['drawingManager']['addDrawerBefore'](_0x36e788,'HIT_TEST_NEWS','HIT_TEST_DRAWINGS');}['doActivate'](){super['doActivate']();}['getNewsCoordinate'](_0x33c8a9){const _0x53209d=this['chartModel']['candleFromTimestamp'](_0x33c8a9['timestamp'],![]),_0x85d902=_0x53209d['xCenter'](this['chartModel']['scale']),_0x355621=_0x53209d['yLineStart'](this['chartModel']['mainCandleSeries']['view'])-NEWS_Y_CANDLE_MARGIN,_0x50dad4={};return _0x50dad4['x']=_0x85d902,_0x50dad4['y']=_0x355621,_0x50dad4;}['onHover'](_0x353edd){var _0x364355;const _0x56c32c=(_0x364355=this['newsHoveredSubject']['getValue']())===null||_0x364355===void 0x0?void 0x0:_0x364355['news'];_0x56c32c!==(_0x353edd===null||_0x353edd===void 0x0?void 0x0:_0x353edd['news'])&&(this['newsHoveredSubject']['next'](_0x353edd!==null?Object['assign'](Object['assign']({},this['getNewsCoordinate'](_0x353edd)),_0x353edd):null),this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]));}['onTouchStart'](_0x149b13){this['onHover'](_0x149b13);}['getIdRange'](){return HIT_TEST_ID_RANGE['NEWS'];}['lookup'](_0x4840e0){return this['newsPerCandle']['find'](_0x1c6d57=>_0x1c6d57['htId']===_0x4840e0);}['setNews'](_0x2c8d3f){const _0xcce493=groupBy(_0x2c8d3f['map'](_0x340155=>{const _0x4fd800=this['chartModel']['candleFromTimestamp'](_0x340155['timestamp'],![]),_0x35336f={};return _0x35336f['candleTimeStamp']=_0x4fd800['candle']['timestamp'],Object['assign'](Object['assign']({},_0x340155),_0x35336f);}),'candleTimeStamp');let [_0x242975]=this['getIdRange']();this['newsPerCandle']=Object['entries'](_0xcce493)['map'](([_0x5369a6,_0x554558])=>({'htId':_0x242975++,'timestamp':parseInt(_0x5369a6,0xa),'news':_0x554558})),this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]);}['setVisible'](_0x1267a8){this['config']['components']['news']['visible']=_0x1267a8,this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]);}['getNewsPerCandle'](){return this['newsPerCandle'];}}