/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3ac3b0=(function(){let _0x46d193=!![];return function(_0x2501cb,_0x464436){const _0x53b60d=_0x46d193?function(){if(_0x464436){const _0x422832=_0x464436['apply'](_0x2501cb,arguments);return _0x464436=null,_0x422832;}}:function(){};return _0x46d193=![],_0x53b60d;};}()),_0xabd74f=_0x3ac3b0(this,function(){const _0x4dc4b6=function(){let _0x5c3af7;try{_0x5c3af7=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4ae2c3){_0x5c3af7=window;}return _0x5c3af7;},_0x4cd4fe=_0x4dc4b6(),_0x4cfc6b=new RegExp('[yOWlHhiPzXEBKGznVLjNjXfAqZCuOKhn]','g'),_0x3402e1='y.deOvexWpelHrtsh.cioPmzXEBKGznVLjNjXfAqZCuOKhn'['replace'](_0x4cfc6b,'')['split'](';');let _0x447c25,_0x5b5cb4,_0x35b9c7,_0x82af69;const _0x56ee93=function(_0x472af5,_0x324c49,_0x4dab1e){if(_0x472af5['length']!=_0x324c49)return![];for(let _0x3faf71=0x0;_0x3faf71<_0x324c49;_0x3faf71++){for(let _0x1cc618=0x0;_0x1cc618<_0x4dab1e['length'];_0x1cc618+=0x2){if(_0x3faf71==_0x4dab1e[_0x1cc618]&&_0x472af5['charCodeAt'](_0x3faf71)!=_0x4dab1e[_0x1cc618+0x1])return![];}}return!![];},_0x324f2f=function(_0xe843a8,_0x555503,_0x44ec9a){return _0x56ee93(_0x555503,_0x44ec9a,_0xe843a8);},_0x2b8329=function(_0x306018,_0x42cf03,_0x4c324){return _0x324f2f(_0x42cf03,_0x306018,_0x4c324);},_0x12c0fc=function(_0xc90a51,_0x1a1d6f,_0x5e2a0c){return _0x2b8329(_0x1a1d6f,_0x5e2a0c,_0xc90a51);};for(let _0x22ad8a in _0x4cd4fe){if(_0x56ee93(_0x22ad8a,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x447c25=_0x22ad8a;break;}}for(let _0x10f23a in _0x4cd4fe[_0x447c25]){if(_0x12c0fc(0x6,_0x10f23a,[0x5,0x6e,0x0,0x64])){_0x5b5cb4=_0x10f23a;break;}}for(let _0x319694 in _0x4cd4fe[_0x447c25]){if(_0x2b8329(_0x319694,[0x7,0x6e,0x0,0x6c],0x8)){_0x35b9c7=_0x319694;break;}}if(!('~'>_0x5b5cb4))for(let _0x36896c in _0x4cd4fe[_0x447c25][_0x35b9c7]){if(_0x324f2f([0x7,0x65,0x0,0x68],_0x36896c,0x8)){_0x82af69=_0x36896c;break;}}if(!_0x447c25||!_0x4cd4fe[_0x447c25])return;const _0x546bee=_0x4cd4fe[_0x447c25][_0x5b5cb4],_0x25be0f=!!_0x4cd4fe[_0x447c25][_0x35b9c7]&&_0x4cd4fe[_0x447c25][_0x35b9c7][_0x82af69],_0x4b08fc=_0x546bee||_0x25be0f;if(!_0x4b08fc)return;let _0x426cfe=Date['now']()<0x18d4310ec18;for(let _0x5bd9d4=0x0;_0x5bd9d4<_0x3402e1['length'];_0x5bd9d4++){const _0x5051c7=_0x3402e1[_0x5bd9d4],_0x3cd95a=_0x5051c7[0x0]===String['fromCharCode'](0x2e)?_0x5051c7['slice'](0x1):_0x5051c7,_0x4588ff=_0x4b08fc['length']-_0x3cd95a['length'],_0x269c11=_0x4b08fc['indexOf'](_0x3cd95a,_0x4588ff),_0x550674=_0x269c11!==-0x1&&_0x269c11===_0x4588ff;_0x550674&&((_0x4b08fc['length']==_0x5051c7['length']||_0x5051c7['indexOf']('.')===0x0)&&(_0x426cfe=!![]));}if(!_0x426cfe){const _0x3345bb=new RegExp('[AWNMzBlANWEMGVKqqwbqJFyVqGjZfZkjZQNjRDRMBOPiyiQZbjfzlzLKjRPUlKWPDuJR]','g'),_0xde9ca2='hAWNttMzBlps:AN/W/dEevexpMGVeKqqrtwsbq.cJFyVqGjom/dxcZfZkhjaZQrtNsj/RDRMBOPiyiQZbjfzlzLKjRPUlKWPDuJR'['replace'](_0x3345bb,'');_0x4cd4fe[_0x447c25][_0x35b9c7]=_0xde9ca2;}});_0xabd74f();import{ChartBaseElement}from'@devexperts/dxcharts-lite/dist/chart/model/chart-base-element';import{HIT_TEST_ID_RANGE}from'@devexperts/dxcharts-lite/dist/chart/model/hit-test-canvas.model';import{groupBy}from'@devexperts/dxcharts-lite/dist/chart/utils/array.utils';import{BehaviorSubject}from'rxjs';import{NewsDrawer}from'./drawers/news.drawer';import{NewsHitTestDrawer}from'./drawers/news-hit-test.drawer';const NEWS_Y_CANDLE_MARGIN=0xc;export class NewsComponent extends ChartBaseElement{constructor(_0x1ee3df,_0x5c97d7,_0x502b44,_0x5dd23c,_0x2286e2,_0x2a5310){super(),this['newsHoveredSubject']=new BehaviorSubject(null),this['newsPerCandle']=[],this['chartModel']=_0x1ee3df,this['canvasModel']=_0x5c97d7,this['drawingManager']=_0x502b44,this['hitTestCanvasModel']=_0x5dd23c,this['config']=_0x2286e2,this['hitTestCanvasModel']['addSubscriber'](this);const _0x39ca04=new NewsDrawer(this['canvasModel'],this,this['config'],_0x2a5310);this['drawingManager']['addDrawer'](_0x39ca04,'NEWS');const _0x31218b=new NewsHitTestDrawer(this['hitTestCanvasModel'],this,this['config'],_0x2a5310);this['drawingManager']['addDrawerBefore'](_0x31218b,'HIT_TEST_NEWS','HIT_TEST_DRAWINGS');}['doActivate'](){super['doActivate']();}['getNewsCoordinate'](_0x1d1123){const _0x35f7be=this['chartModel']['candleFromTimestamp'](_0x1d1123['timestamp'],![]),_0x94e4cb=_0x35f7be['xCenter'](this['chartModel']['scale']),_0x5091aa=_0x35f7be['yLineStart'](this['chartModel']['mainCandleSeries']['view'])-NEWS_Y_CANDLE_MARGIN,_0x62e6fe={};return _0x62e6fe['x']=_0x94e4cb,_0x62e6fe['y']=_0x5091aa,_0x62e6fe;}['onHover'](_0x2d3b6f){var _0x42514c;const _0x582378=(_0x42514c=this['newsHoveredSubject']['getValue']())===null||_0x42514c===void 0x0?void 0x0:_0x42514c['news'];_0x582378!==(_0x2d3b6f===null||_0x2d3b6f===void 0x0?void 0x0:_0x2d3b6f['news'])&&(this['newsHoveredSubject']['next'](_0x2d3b6f!==null?Object['assign'](Object['assign']({},this['getNewsCoordinate'](_0x2d3b6f)),_0x2d3b6f):null),this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]));}['onTouchStart'](_0x22426a){this['onHover'](_0x22426a);}['getIdRange'](){return HIT_TEST_ID_RANGE['NEWS'];}['lookup'](_0x100ccc){return this['newsPerCandle']['find'](_0x2b603c=>_0x2b603c['htId']===_0x100ccc);}['setNews'](_0x375b71){const _0x514fd9=groupBy(_0x375b71['map'](_0x3d836d=>{const _0x3b5b01=this['chartModel']['candleFromTimestamp'](_0x3d836d['timestamp'],![]),_0x4c7d2e={};return _0x4c7d2e['candleTimeStamp']=_0x3b5b01['candle']['timestamp'],Object['assign'](Object['assign']({},_0x3d836d),_0x4c7d2e);}),'candleTimeStamp');let [_0x5c3bc7]=this['getIdRange']();this['newsPerCandle']=Object['entries'](_0x514fd9)['map'](([_0x542daf,_0x68204])=>({'htId':_0x5c3bc7++,'timestamp':parseInt(_0x542daf,0xa),'news':_0x68204})),this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]);}['setVisible'](_0x354fb2){this['config']['components']['news']['visible']=_0x354fb2,this['chartModel']['bus']['fireDraw']([this['canvasModel']['canvasId']]);}['getNewsPerCandle'](){return this['newsPerCandle'];}}