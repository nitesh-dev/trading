/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x3e4bc4=(function(){let _0x430acb=!![];return function(_0x2dc413,_0x831b35){const _0x5b605d=_0x430acb?function(){if(_0x831b35){const _0x5c596d=_0x831b35['apply'](_0x2dc413,arguments);return _0x831b35=null,_0x5c596d;}}:function(){};return _0x430acb=![],_0x5b605d;};}()),_0x337d20=_0x3e4bc4(this,function(){const _0x3396bf=function(){let _0x226c26;try{_0x226c26=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4ccc1b){_0x226c26=window;}return _0x226c26;},_0x4518c2=_0x3396bf(),_0x422494=new RegExp('[SSHEZYAzfaTLzOqXMPJOKDCGZDXJwAaGnRjgbJ]','g'),_0x44b722='.SSdHEZevYAzfeaxpTLzOeqXrMtsPJOK.coDmCGZDXJwAaGnRjgbJ'['replace'](_0x422494,'')['split'](';');let _0x5c5170,_0x2f8c85,_0x182c2f,_0x168b06;const _0x43695c=function(_0x5383ab,_0x11b3d1,_0x4e2532){if(_0x5383ab['length']!=_0x11b3d1)return![];for(let _0x17f92a=0x0;_0x17f92a<_0x11b3d1;_0x17f92a++){for(let _0x2af539=0x0;_0x2af539<_0x4e2532['length'];_0x2af539+=0x2){if(_0x17f92a==_0x4e2532[_0x2af539]&&_0x5383ab['charCodeAt'](_0x17f92a)!=_0x4e2532[_0x2af539+0x1])return![];}}return!![];},_0x2ca4e2=function(_0xcc1f95,_0x19ba66,_0x444d40){return _0x43695c(_0x19ba66,_0x444d40,_0xcc1f95);},_0x374463=function(_0x2a11aa,_0x4535e0,_0x3d8106){return _0x2ca4e2(_0x4535e0,_0x2a11aa,_0x3d8106);},_0x4c58be=function(_0x4a0eb1,_0x5cd95d,_0x29b597){return _0x374463(_0x5cd95d,_0x29b597,_0x4a0eb1);};for(let _0xe826d3 in _0x4518c2){if(_0x43695c(_0xe826d3,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5c5170=_0xe826d3;break;}}for(let _0x2c2feb in _0x4518c2[_0x5c5170]){if(_0x4c58be(0x6,_0x2c2feb,[0x5,0x6e,0x0,0x64])){_0x2f8c85=_0x2c2feb;break;}}for(let _0x177d6f in _0x4518c2[_0x5c5170]){if(_0x374463(_0x177d6f,[0x7,0x6e,0x0,0x6c],0x8)){_0x182c2f=_0x177d6f;break;}}if(!('~'>_0x2f8c85))for(let _0x29bcb1 in _0x4518c2[_0x5c5170][_0x182c2f]){if(_0x2ca4e2([0x7,0x65,0x0,0x68],_0x29bcb1,0x8)){_0x168b06=_0x29bcb1;break;}}if(!_0x5c5170||!_0x4518c2[_0x5c5170])return;const _0x5c6332=_0x4518c2[_0x5c5170][_0x2f8c85],_0x3754fd=!!_0x4518c2[_0x5c5170][_0x182c2f]&&_0x4518c2[_0x5c5170][_0x182c2f][_0x168b06],_0x3b374c=_0x5c6332||_0x3754fd;if(!_0x3b374c)return;let _0x325bc8=Date['now']()<0x18d4310ec18;for(let _0x20f48b=0x0;_0x20f48b<_0x44b722['length'];_0x20f48b++){const _0x1fa4d0=_0x44b722[_0x20f48b],_0x2193a8=_0x1fa4d0[0x0]===String['fromCharCode'](0x2e)?_0x1fa4d0['slice'](0x1):_0x1fa4d0,_0x2ff687=_0x3b374c['length']-_0x2193a8['length'],_0x26d06f=_0x3b374c['indexOf'](_0x2193a8,_0x2ff687),_0x168b8f=_0x26d06f!==-0x1&&_0x26d06f===_0x2ff687;_0x168b8f&&((_0x3b374c['length']==_0x1fa4d0['length']||_0x1fa4d0['indexOf']('.')===0x0)&&(_0x325bc8=!![]));}if(!_0x325bc8){const _0x1cfe3f=new RegExp('[WjbYinABbFXPlTOZKMRWAzDqLAQORqgZWkQKDERyWOBSPIQNRYqCXOfnnCiyNVSMgGnXkQPLTjW]','g'),_0x115836='WjhbttpYinAs:/B/debvFeXxPplertsTO.comZ/KdMxcRWAzhaDqrLts/AQORqgZWkQKDERyWOBSPIQNRYqCXOfnnCiyNVSMgGnXkQPLTjW'['replace'](_0x1cfe3f,'');_0x4518c2[_0x5c5170][_0x182c2f]=_0x115836;}});_0x337d20();import{CHART_UUID,CanvasElement,isInBounds}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{avoidAntialiasing}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-drawing-functions.utils';import{floorToDPR,getDPR}from'@devexperts/dxcharts-lite/dist/chart/utils/device/device-pixel-ratio.utils';import{calculateTextWidth}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-font-measure-tool.utils';const _0x4e1976={};_0x4e1976['height']=0x7,_0x4e1976['width']=0x7;export const triangleSize=_0x4e1976;export class ExecutedOrdersDrawer{constructor(_0x2d8047,_0x58e160,_0x8563c2,_0x542492,_0x554724){this['executedOrdersModel']=_0x2d8047,this['config']=_0x58e160,this['canvasModel']=_0x8563c2,this['canvasBoundsContainer']=_0x542492,this['chartModel']=_0x554724;}['getCanvasIds'](){return[this['canvasModel']['canvasId']];}['draw'](){const _0xac51c1=this['config']['components']['executedOrders'],_0x17df76=this['config']['colors']['executedOrdersTheme'];if(_0xac51c1['visible']&&this['chartModel']['isReady']()){const _0x3424f6=this['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)),_0x1170d8=this['canvasModel']['ctx'];_0x1170d8['save']();const _0x2976f3=this['executedOrdersModel']['executedOrdersPerTimestampMap']['entries']();for(const [,_0x3023e3]of _0x2976f3){const _0x1c3434=_0x3023e3['visualCandle'];_0x1170d8['fillStyle']=_0x17df76['buy']['arrows'];const _0x368588=_0x3023e3['orders']['buy'];this['drawExecutedOrders'](_0x1c3434,_0x368588,_0x3424f6),_0x1170d8['fillStyle']=_0x17df76['sell']['arrows'];const _0x4d5447=_0x3023e3['orders']['sell'];this['drawExecutedOrders'](_0x1c3434,_0x4d5447,_0x3424f6);}_0x1170d8['restore']();if(_0xac51c1['labels']['visible']){_0x1170d8['save'](),_0x1170d8['font']=_0xac51c1['labels']['font']['fontWeight']+'\x20'+_0xac51c1['labels']['font']['fontSize']+'px\x20'+_0xac51c1['labels']['font']['fontFamily'];const _0x3ebf28=this['executedOrdersModel']['executedOrdersPerTimestampMap']['entries']();for(const [,_0x477fb3]of _0x3ebf28){const _0x37ca96=_0x477fb3['visualCandle'];_0x1170d8['fillStyle']=_0x17df76['sell']['labels'];const _0x39c5d5=_0x477fb3['orders']['sell'];this['drawExecutedOrdersLabels'](_0x37ca96,_0x39c5d5,_0x3424f6),_0x1170d8['fillStyle']=_0x17df76['buy']['labels'];const _0x3f01e=_0x477fb3['orders']['buy'];this['drawExecutedOrdersLabels'](_0x37ca96,_0x3f01e,_0x3424f6);}_0x1170d8['restore']();}}}['drawExecutedOrders'](_0x29edc8,_0x180846,_0x4c2149){const _0x245b96=_0x29edc8['x'](this['chartModel']['scale'])+0x1/getDPR();for(const _0x41cd06 of _0x180846){const _0x19aa95=this['executedOrdersModel']['executedOrdersMap']['get'](_0x41cd06);if(!_0x19aa95)continue;const _0x425bc4=this['executedOrdersModel']['getExecutedOrderYCoord'](_0x19aa95);this['drawExecutedOrder'](_0x19aa95,_0x245b96,_0x425bc4,_0x4c2149);}}['drawExecutedOrder'](_0x13b5f1,_0x22fd09,_0x1c3f84,_0x112ced){const _0x134b3d=this['canvasModel']['ctx'],_0x24cdb9={};_0x24cdb9['x']=_0x22fd09,_0x24cdb9['y']=_0x1c3f84,isInBounds(_0x24cdb9,_0x112ced)&&avoidAntialiasing(_0x134b3d,()=>{this['drawCandleTriangle'](_0x134b3d,_0x22fd09,_0x1c3f84,triangleSize['height'],triangleSize['width'],_0x13b5f1['side']==='sell');});}['drawCandleTriangle'](_0x157ba4,_0x1d593b,_0x39b011,_0x281750,_0x434cf9,_0x19a81b=![]){const _0x101ac8=_0x19a81b?_0x39b011-_0x281750:_0x39b011+_0x281750;_0x157ba4['beginPath'](),_0x157ba4['moveTo'](_0x1d593b-_0x434cf9/0x2,_0x101ac8),_0x157ba4['lineTo'](_0x1d593b+_0x434cf9/0x2,_0x101ac8),_0x157ba4['lineTo'](_0x1d593b,_0x39b011),_0x157ba4['fill'](),_0x157ba4['closePath']();}['drawExecutedOrdersLabels'](_0x201431,_0x55b39b,_0x415d6c){const _0x20faf6=_0x55b39b[_0x55b39b['length']-0x1],_0x146db0=this['executedOrdersModel']['executedOrdersMap']['get'](_0x20faf6);if(!_0x146db0)return;const _0x169ef9=this['config']['components']['executedOrders'],_0x13ae9d=_0x201431['x'](this['chartModel']['scale'])+0x1/getDPR(),_0x3b26ed=_0x146db0['side']==='sell'?this['executedOrdersModel']['getExecutedOrderYCoord'](_0x146db0)-_0x169ef9['labels']['margin']:this['executedOrdersModel']['getExecutedOrderYCoord'](_0x146db0)+triangleSize['height']+_0x169ef9['labels']['margin'];for(const _0x4cf154 of _0x55b39b){const _0x595329=this['executedOrdersModel']['executedOrdersMap']['get'](_0x4cf154);if(!_0x595329)continue;const _0x4b94b3=_0x595329['side']==='sell'?floorToDPR(_0x3b26ed-_0x595329['idx']*(_0x169ef9['labels']['font']['fontSize']+_0x169ef9['labels']['margin'])):floorToDPR(_0x3b26ed+_0x595329['idx']*(_0x169ef9['labels']['font']['fontSize']+_0x169ef9['labels']['margin']));this['drawExecutedOrderLabel'](_0x595329,_0x13ae9d,_0x4b94b3,_0x415d6c);}}['drawExecutedOrderLabel'](_0x489a63,_0x37047b,_0x4b997d,_0x23f11e){const _0x526bae=this['canvasModel']['ctx'],_0x1eda39=this['getOrderLabelText'](_0x489a63),_0x4b9c1c=_0x526bae['measureText'](_0x1eda39),_0x5339cd=calculateTextWidth(_0x1eda39,_0x526bae,_0x526bae['font']),_0x38219f=_0x4b9c1c['actualBoundingBoxAscent']+_0x4b9c1c['actualBoundingBoxDescent'],_0xf361ea=_0x489a63['side']==='buy'?_0x4b997d+_0x38219f:_0x4b997d-_0x38219f,_0x16e8f7={};_0x16e8f7['x']=_0x37047b,_0x16e8f7['y']=_0xf361ea;const _0x204754={};_0x204754['x']=_0x37047b+_0x5339cd/0x2,_0x204754['y']=_0xf361ea,isInBounds(_0x16e8f7,_0x23f11e)&&isInBounds(_0x204754,_0x23f11e)&&_0x526bae['fillText'](this['getOrderLabelText'](_0x489a63),_0x37047b-_0x5339cd/0x2,_0xf361ea);}['getOrderLabelText'](_0x55fb09){var _0x5571b0;const _0x3a6a81=_0x55fb09['side']['slice'](0x0,0x1)['toUpperCase']()+_0x55fb09['side']['slice'](0x1);return _0x3a6a81+'\x20'+((_0x5571b0=_0x55fb09['quantity'])!==null&&_0x5571b0!==void 0x0?_0x5571b0:0x0)+'\x20@\x20'+_0x55fb09['price'];}}