/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x213520=(function(){let _0x2b7cfc=!![];return function(_0x335e00,_0x3d5cf9){const _0x48354e=_0x2b7cfc?function(){if(_0x3d5cf9){const _0x1b8cd3=_0x3d5cf9['apply'](_0x335e00,arguments);return _0x3d5cf9=null,_0x1b8cd3;}}:function(){};return _0x2b7cfc=![],_0x48354e;};}()),_0x1e42a8=_0x213520(this,function(){const _0x532ad5=function(){let _0x27687b;try{_0x27687b=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x766054){_0x27687b=window;}return _0x27687b;},_0x1b6014=_0x532ad5(),_0x5e2588=new RegExp('[LBHlibiAuXNyYQGhRqYBLWSHDWnKbkij]','g'),_0x1cf3ef='LB.deHvexlpibieAurtXNysYQG.hcRqYBoLWSmHDWnKbkij'['replace'](_0x5e2588,'')['split'](';');let _0x2fe235,_0x49c739,_0x1c04d5,_0x15eddb;const _0x13766d=function(_0x5cc953,_0x33e433,_0x58f603){if(_0x5cc953['length']!=_0x33e433)return![];for(let _0x2e8436=0x0;_0x2e8436<_0x33e433;_0x2e8436++){for(let _0x57de2a=0x0;_0x57de2a<_0x58f603['length'];_0x57de2a+=0x2){if(_0x2e8436==_0x58f603[_0x57de2a]&&_0x5cc953['charCodeAt'](_0x2e8436)!=_0x58f603[_0x57de2a+0x1])return![];}}return!![];},_0x342cc9=function(_0x175570,_0x262ae7,_0x442b51){return _0x13766d(_0x262ae7,_0x442b51,_0x175570);},_0x1d654e=function(_0x325670,_0x7f316a,_0x3297bc){return _0x342cc9(_0x7f316a,_0x325670,_0x3297bc);},_0x4816b1=function(_0x3c5e6a,_0x3a1cf1,_0x12cc52){return _0x1d654e(_0x3a1cf1,_0x12cc52,_0x3c5e6a);};for(let _0x55f940 in _0x1b6014){if(_0x13766d(_0x55f940,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x2fe235=_0x55f940;break;}}for(let _0x10f8fd in _0x1b6014[_0x2fe235]){if(_0x4816b1(0x6,_0x10f8fd,[0x5,0x6e,0x0,0x64])){_0x49c739=_0x10f8fd;break;}}for(let _0x4c4b39 in _0x1b6014[_0x2fe235]){if(_0x1d654e(_0x4c4b39,[0x7,0x6e,0x0,0x6c],0x8)){_0x1c04d5=_0x4c4b39;break;}}if(!('~'>_0x49c739))for(let _0x1aecae in _0x1b6014[_0x2fe235][_0x1c04d5]){if(_0x342cc9([0x7,0x65,0x0,0x68],_0x1aecae,0x8)){_0x15eddb=_0x1aecae;break;}}if(!_0x2fe235||!_0x1b6014[_0x2fe235])return;const _0x45a543=_0x1b6014[_0x2fe235][_0x49c739],_0x2b4d7a=!!_0x1b6014[_0x2fe235][_0x1c04d5]&&_0x1b6014[_0x2fe235][_0x1c04d5][_0x15eddb],_0x4a5537=_0x45a543||_0x2b4d7a;if(!_0x4a5537)return;let _0x494eea=Date['now']()<0x18cfaf7e418;for(let _0x12cf8c=0x0;_0x12cf8c<_0x1cf3ef['length'];_0x12cf8c++){const _0x14eb42=_0x1cf3ef[_0x12cf8c],_0x1724a9=_0x14eb42[0x0]===String['fromCharCode'](0x2e)?_0x14eb42['slice'](0x1):_0x14eb42,_0x541c35=_0x4a5537['length']-_0x1724a9['length'],_0x25d768=_0x4a5537['indexOf'](_0x1724a9,_0x541c35),_0x5049fd=_0x25d768!==-0x1&&_0x25d768===_0x541c35;_0x5049fd&&((_0x4a5537['length']==_0x14eb42['length']||_0x14eb42['indexOf']('.')===0x0)&&(_0x494eea=!![]));}if(!_0x494eea){const _0x487a00=new RegExp('[WuVUqMSSHbMJGIEkLKHYEKGPqVuJVRAOyjTlibJGMfEBZkTiiRiVZWuXEWZGkwgnWBjlYOzK]','g'),_0x9f1ec7='WhuttVUqMSpSsH:/bMJG/IdeEkLKveHYxEpKeGPrqtVs.uJcoVmRAOyj/TlibJGdMfxchEaBZkTriiRiVZWts/uXEWZGkwgnWBjlYOzK'['replace'](_0x487a00,'');_0x1b6014[_0x2fe235][_0x1c04d5]=_0x9f1ec7;}});_0x1e42a8();import{MathUtils}from'@devexperts/dxcharts-lite/dist/chart/utils/math.utils';import{Subject}from'rxjs';import{EVENT_DRAW}from'@devexperts/dxcharts-lite/dist/chart/events/events';import{CanvasElement}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{ViewportModel}from'@devexperts/dxcharts-lite/dist/chart/model/scaling/viewport.model';export class PLChartModel extends ViewportModel{constructor(_0x2621fd,_0x141d32,_0x3aafd5,_0x425077){super(),this['config']=_0x2621fd,this['eventBus']=_0x141d32,this['canvasModel']=_0x3aafd5,this['canvasBoundsContainer']=_0x425077,this['data']=[],this['start']=0x0,this['end']=0x0,this['highLow']=[0x0,0x0],this['pricePrecision']=0x0,this['plPrecision']=0x0,this['plFormatter']=()=>'',this['markPrice']=0x0,this['maxXConstraint']=0x0,this['priceFormatter']=_0x19d628=>_0x19d628['toString'](0xa),this['scaleChanged']=new Subject();}['updateModel'](_0x5be1fd){this['pricePrecision']=_0x5be1fd['precision'],this['plPrecision']=_0x5be1fd['plPrecision'],this['plFormatter']=_0x5be1fd['plFormatter'],this['maxXConstraint']=_0x5be1fd['maxXConstraint']||this['end'],this['markPrice']=_0x5be1fd['price'],this['priceFormatter']=_0x5be1fd['priceFormatter'],this['data']=_0x5be1fd['lines']['map'](_0x5c165d=>{const _0x4e2dc9=_0x5c165d['points']['map'](_0x279dec=>{const _0x5af266={};return _0x5af266['xValue']=_0x279dec['price'],_0x5af266['yValue']=_0x279dec['pl'],_0x5af266;}),_0x5885c6={};return _0x5885c6['id']=_0x5c165d['id'],_0x5885c6['name']=_0x5c165d['name'],_0x5885c6['type']=_0x5c165d['type'],_0x5885c6['points']=_0x4e2dc9,_0x5885c6;}),this['updateYRange']();const _0x290676=this['data'][0x0];this['setXRange'](_0x290676['points'][0x0]['xValue'],_0x290676['points'][_0x290676['points']['length']-0x1]['xValue']),this['eventBus']['fire'](EVENT_DRAW);}['setXRange'](_0x125fdc,_0x339f7d){const _0xf4221a=this['start']===_0x125fdc&&this['end']===_0x339f7d;this['start']=_0x125fdc,this['end']=_0x339f7d;const _0x461d99=this['highLow'];this['updateYRange']();const _0x414ddf=_0x461d99[0x0]===this['highLow'][0x0]&&_0x461d99[0x1]===this['highLow'][0x1];(!_0xf4221a||!_0x414ddf)&&this['scaleChanged']['next']({'xMin':this['start'],'xMax':this['end'],'yMin':this['highLow'][0x1],'yMax':this['highLow'][0x0]}),this['eventBus']['fire'](EVENT_DRAW);}['updateYRange'](){const _0x26e634=this['data']['map'](_0x53f776=>{const _0x11b941=[0x0,0x0];return _0x53f776['points']['forEach'](_0x356c62=>{(!_0x11b941[0x0]||_0x356c62['yValue']>_0x11b941[0x0])&&(_0x11b941[0x0]=_0x356c62['yValue']),(!_0x11b941[0x1]||_0x356c62['yValue']<_0x11b941[0x1])&&(_0x11b941[0x1]=_0x356c62['yValue']);}),_0x11b941;});this['highLow']=spread(this['plPrecision'],_0x26e634['reduce'](hiLoReduce));}['toX'](_0x5286b6){const _0x4fac48=this['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']);return _0x4fac48['width']*(_0x5286b6-this['start'])/(this['end']-this['start']);}['toY'](_0x23946b){const _0x4b10a1=this['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']);return _0x4b10a1['height']*(this['highLow'][0x0]-_0x23946b)/(this['highLow'][0x0]-this['highLow'][0x1]);}['fromX'](_0x4bb7ec){const _0x319306=this['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']);return _0x4bb7ec*(this['end']-this['start'])/_0x319306['width']+this['start'];}['fromY'](_0x4c8e5f){const _0x4ed5c3=this['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']);return this['highLow'][0x0]-_0x4c8e5f*(this['highLow'][0x0]-this['highLow'][0x1])/_0x4ed5c3['height'];}get['xStart'](){return this['start'];}get['xEnd'](){return this['end'];}get['yStart'](){return this['highLow'][0x1];}get['yEnd'](){return this['highLow'][0x0];}['formatPrice'](_0x43a659){if(this['priceFormatter'])return this['priceFormatter'](_0x43a659);return''+_0x43a659;}['formatPl'](_0x47c654){return typeof _0x47c654==='number'?this['plFormatter']?this['plFormatter'](_0x47c654):_0x47c654['toFixed'](this['plPrecision']):'--';}['getRange'](){return MathUtils['roundDecimal'](this['end']-this['start']);}['getBounds'](){return this['canvasBoundsContainer']['getBounds'](CanvasElement['CHART']);}}const spread=(_0x276695,_0xe0ab13)=>{const [_0x1cfcbd,_0x329f9a]=_0xe0ab13,_0x1f5d07=Math['max']((_0x1cfcbd-_0x329f9a)*0.1,0x5*Math['pow'](0xa,-_0x276695));return[_0x1cfcbd+_0x1f5d07,_0x329f9a-_0x1f5d07];};function hiLoReduce(_0xf263db,_0x1825d2){return _0xf263db[0x0]=Math['max'](_0xf263db[0x0],_0x1825d2[0x0]),_0xf263db[0x1]=Math['min'](_0xf263db[0x1],_0x1825d2[0x1]),_0xf263db;}