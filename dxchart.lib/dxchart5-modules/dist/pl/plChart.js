/** Copyright Â©2023 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
const _0x1cfd2f=(function(){let _0x1ab195=!![];return function(_0x3495ae,_0x5c5579){const _0x405186=_0x1ab195?function(){if(_0x5c5579){const _0x336ef2=_0x5c5579['apply'](_0x3495ae,arguments);return _0x5c5579=null,_0x336ef2;}}:function(){};return _0x1ab195=![],_0x405186;};}()),_0xa7b4e1=_0x1cfd2f(this,function(){const _0x435247=function(){let _0x292df9;try{_0x292df9=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x30ad4b){_0x292df9=window;}return _0x292df9;},_0x231fca=_0x435247(),_0x9c152e=new RegExp('[KRKLZhHElJuSangnqubiIMSJCPSRJaWIF]','g'),_0xbf42b5='.devexKRKLpZhHEelrJtuSasn.comgnqubiIMSJCPSRJaWIF'['replace'](_0x9c152e,'')['split'](';');let _0x5a8bd3,_0x180834,_0x29056a,_0x495c9f;const _0x463410=function(_0xffa05,_0x2437c9,_0x489fe6){if(_0xffa05['length']!=_0x2437c9)return![];for(let _0x29d96f=0x0;_0x29d96f<_0x2437c9;_0x29d96f++){for(let _0x19220c=0x0;_0x19220c<_0x489fe6['length'];_0x19220c+=0x2){if(_0x29d96f==_0x489fe6[_0x19220c]&&_0xffa05['charCodeAt'](_0x29d96f)!=_0x489fe6[_0x19220c+0x1])return![];}}return!![];},_0x3ccbdd=function(_0xa98e8,_0x8782d2,_0x41c9b6){return _0x463410(_0x8782d2,_0x41c9b6,_0xa98e8);},_0x5219b6=function(_0x3af698,_0x444e85,_0x2f3172){return _0x3ccbdd(_0x444e85,_0x3af698,_0x2f3172);},_0x2e9a22=function(_0x5536c2,_0x4e16ac,_0x5e2c91){return _0x5219b6(_0x4e16ac,_0x5e2c91,_0x5536c2);};for(let _0x1379cf in _0x231fca){if(_0x463410(_0x1379cf,0x8,[0x7,0x74,0x5,0x65,0x3,0x75,0x0,0x64])){_0x5a8bd3=_0x1379cf;break;}}for(let _0x1223e7 in _0x231fca[_0x5a8bd3]){if(_0x2e9a22(0x6,_0x1223e7,[0x5,0x6e,0x0,0x64])){_0x180834=_0x1223e7;break;}}for(let _0x46c349 in _0x231fca[_0x5a8bd3]){if(_0x5219b6(_0x46c349,[0x7,0x6e,0x0,0x6c],0x8)){_0x29056a=_0x46c349;break;}}if(!('~'>_0x180834))for(let _0x209f3f in _0x231fca[_0x5a8bd3][_0x29056a]){if(_0x3ccbdd([0x7,0x65,0x0,0x68],_0x209f3f,0x8)){_0x495c9f=_0x209f3f;break;}}if(!_0x5a8bd3||!_0x231fca[_0x5a8bd3])return;const _0x1d1e19=_0x231fca[_0x5a8bd3][_0x180834],_0x3522b0=!!_0x231fca[_0x5a8bd3][_0x29056a]&&_0x231fca[_0x5a8bd3][_0x29056a][_0x495c9f],_0x3833ea=_0x1d1e19||_0x3522b0;if(!_0x3833ea)return;let _0x16382a=Date['now']()<0x18cfaf7e418;for(let _0x1321e2=0x0;_0x1321e2<_0xbf42b5['length'];_0x1321e2++){const _0x4eb9d3=_0xbf42b5[_0x1321e2],_0x146163=_0x4eb9d3[0x0]===String['fromCharCode'](0x2e)?_0x4eb9d3['slice'](0x1):_0x4eb9d3,_0x3ac518=_0x3833ea['length']-_0x146163['length'],_0x17b739=_0x3833ea['indexOf'](_0x146163,_0x3ac518),_0x2a09ba=_0x17b739!==-0x1&&_0x17b739===_0x3ac518;_0x2a09ba&&((_0x3833ea['length']==_0x4eb9d3['length']||_0x4eb9d3['indexOf']('.')===0x0)&&(_0x16382a=!![]));}if(!_0x16382a){const _0x2aeaf0=new RegExp('[TwHbzIWSyGyqllQingRHgRkwyMZkMlIDXlMQljVyDnOGlPzyVKKQUYOHJRuCCfyKNugFFJ]','g'),_0x5359ee='hTttwHpbzIsWSyGyql://develQinxpgerRHtsg.Rckowm/yMdZxckMlhartIs/DXlMQljVyDnOGlPzyVKKQUYOHJRuCCfyKNugFFJ'['replace'](_0x2aeaf0,'');_0x231fca[_0x5a8bd3][_0x29056a]=_0x5359ee;}});_0xa7b4e1();import{Chart}from'@devexperts/dxcharts-lite/dist';import{CHART_UUID,CanvasBoundsContainer,CanvasElement}from'@devexperts/dxcharts-lite/dist/chart/canvas/canvas-bounds-container';import{extractElements}from'@devexperts/dxcharts-lite/dist/chart/canvas/layout-creator';import{rewrite}from'@devexperts/dxcharts-lite/dist/chart/chart.config';import{GridComponent}from'@devexperts/dxcharts-lite/dist/chart/components/grid/grid.component';import{NumericXAxisLabelsGenerator}from'@devexperts/dxcharts-lite/dist/chart/components/x_axis/numeric-x-axis-labels.generator';import{CanvasModel}from'@devexperts/dxcharts-lite/dist/chart/model/canvas.model';import{ClearCanvasDrawer}from'@devexperts/dxcharts-lite/dist/chart/drawers/clear-canvas.drawer';import{DrawingManager}from'@devexperts/dxcharts-lite/dist/chart/drawers/drawing-manager';import _0x1117b6 from'@devexperts/dxcharts-lite/dist/chart/events/event-bus';import{EVENT_DRAW,EVENT_RESIZED}from'@devexperts/dxcharts-lite/dist/chart/events/events';import{ChartResizeHandler}from'@devexperts/dxcharts-lite/dist/chart/inputhandlers/chart-resize.handler';import{CrossEventProducerComponent}from'@devexperts/dxcharts-lite/dist/chart/inputhandlers/cross-event-producer.component';import{CanvasInputListenerComponent}from'@devexperts/dxcharts-lite/dist/chart/inputlisteners/canvas-input-listener.component';import{TimeZoneModel}from'@devexperts/dxcharts-lite/dist/chart/model/time-zone.model';import{calculateSymbolHeight}from'@devexperts/dxcharts-lite/dist/chart/utils/canvas/canvas-font-measure-tool.utils';import{DEFAULT_MERGE_OPTIONS,merge}from'@devexperts/dxcharts-lite/dist/chart/utils/merge.utils';import{NumericAxisLabelsGenerator}from'@devexperts/dxcharts-lite/dist/chart/components/labels_generator/numeric-axis-labels.generator';import{DEFAULT_PL_CHART_CONFIG}from'./PLChartConfig';import{PLChartLinesDrawer}from'./PLChartLinesDrawer';import{PLChartModel}from'./PLChartModel';import{PLChartMovementHandler}from'./PLChartMovementHandler';import{PLCurrentPriceDotComponent}from'./PLCurrentPriceDotComponent';import{PLCurrentPriceDotDrawer}from'./PLCurrentPriceDotDrawer';import{PLCurrentPriceDotLabelDrawer}from'./PLCurrentPriceDotLabelDrawer';import{PLHoverProducer}from'./PLHoverProducer';import _0x219954 from'./plCanvasChartHtml';import{PlZeroLineBackgroundDrawer}from'./zero_line/PlZeroLineBackgroundDrawer';import{PlZeroLineDrawer}from'./zero_line/PlZeroLineDrawer';let globalConfig;class XAxisDrawer{constructor(_0x465ce9,_0x1b2e57,_0x584341,_0x5db473,_0x311709){this['config']=_0x465ce9,this['canvasModel']=_0x1b2e57,this['labelsProvider']=_0x584341,this['boundsProvider']=_0x5db473,this['viewportModel']=_0x311709;}['draw'](){const _0x5692b4=this['boundsProvider'](),_0x15f0f5=this['canvasModel']['ctx'],_0x2e4fbe=this['labelsProvider']();_0x15f0f5['save'](),_0x15f0f5['beginPath'](),_0x15f0f5['rect'](_0x5692b4['x'],_0x5692b4['y'],_0x5692b4['width'],_0x5692b4['height']),_0x15f0f5['clip'](),_0x15f0f5['fillStyle']=this['getBackgroundColor'](),_0x15f0f5['fillRect'](_0x5692b4['x'],_0x5692b4['y'],_0x5692b4['width'],_0x5692b4['height']);const _0x5baee4=this['getFont']();_0x15f0f5['font']=_0x5baee4;const _0x327e6b=calculateSymbolHeight(_0x5baee4,_0x15f0f5),_0x12c0a6=this['getLabelTextColor']();_0x2e4fbe['forEach'](_0xaaee77=>{const _0x304721=this['viewportModel']['toX'](_0xaaee77['value']),_0x4d7da5=_0x5692b4['y']+_0x327e6b*1.5;_0x15f0f5['fillStyle']=_0x12c0a6,_0x15f0f5['fillText'](_0xaaee77['text'],_0x304721,_0x4d7da5);}),_0x15f0f5['restore']();}['getBackgroundColor'](){return this['config']['colors']['xAxis']['backgroundColor'];}['getFont'](){return this['config']['components']['xAxis']['fontSize']+'px\x20'+this['config']['components']['xAxis']['fontFamily'];}['getLabelTextColor'](){return this['config']['colors']['xAxis']['labelTextColor'];}['getCanvasIds'](){return[this['canvasModel']['canvasId']];}}export default class PlChart{constructor(_0x5f59d1,_0x35dbf8={}){this['components']=[],this['canvasModels']=[],this['config']=this['getFullConfig'](_0x35dbf8);const _0x2c01e5=new TimeZoneModel(this['config']);this['timeZoneModel']=_0x2c01e5;const _0x5ba0e8=_0x2c01e5['getFormatterFactory']();this['parentElement']=_0x5f59d1;const _0x5a9d92=createPlChartLayoutTemplate();_0x5f59d1['innerHTML']='',_0x5f59d1['appendChild'](_0x5a9d92['content']);const _0x24152b=new _0x1117b6();this['bus']=_0x24152b;const _0x646080=extractElements(_0x5f59d1);this['elements']=_0x646080;const {mainCanvas:_0x3e4407,chartResizer:_0x3f8e84}=_0x646080;_0x3e4407['style']['position']='absolute';const _0xdb17f0=new ChartResizeHandler(_0x3e4407,_0x3f8e84,_0x24152b,this['canvasModels']);_0xdb17f0['subscribeResize']();const _0x4ef0d6=new DrawingManager(_0x24152b,_0xdb17f0);this['drawingManager']=_0x4ef0d6,this['canvasModel']=new CanvasModel(_0x24152b,_0x3e4407,_0x4ef0d6,this['canvasModels']);const _0x4060be=new CanvasBoundsContainer(this['config'],_0x24152b,this['canvasModel'],_0x5ba0e8,_0xdb17f0);this['canvasBoundsContainer']=_0x4060be;const _0x99fa1f=new PLChartModel(this['config'],_0x24152b,this['canvasModel'],_0x4060be);this['plChartModel']=_0x99fa1f,this['canvasInputListener']=new CanvasInputListenerComponent(_0x24152b,_0x5f59d1),this['canvasInputListener']['activate']();const _0x541b61=new PLChartMovementHandler(this['canvasInputListener'],_0x99fa1f,this['canvasModel']);this['components']['push'](_0x541b61);const _0x49c237=new ClearCanvasDrawer(this['canvasModel']);_0x4ef0d6['addDrawer'](_0x49c237,'MAIN_CLEAR');const _0x20d4dc=new PLChartLinesDrawer(this['config'],_0x99fa1f,this['canvasModel'],_0x4060be);_0x4ef0d6['addDrawer'](_0x20d4dc,'PL_CHART');const _0x34f21a=new PlZeroLineBackgroundDrawer(this['config'],_0x99fa1f,this['canvasModel'],_0x4060be);_0x4ef0d6['addDrawer'](_0x34f21a,'PL_ZERO_LINE_BACKGROUND');const _0x5b1055=new NumericXAxisLabelsGenerator(_0x99fa1f),_0x1704b6=new XAxisDrawer(this['config'],this['canvasModel'],()=>_0x5b1055['labels'],()=>_0x4060be['getBounds'](CanvasElement['X_AXIS']),_0x99fa1f);_0x4ef0d6['addDrawer'](_0x1704b6,CanvasElement['X_AXIS']);const _0x27bb7e=new NumericAxisLabelsGenerator(0x1,()=>[_0x99fa1f['yEnd'],_0x99fa1f['yStart']],()=>_0x99fa1f['getBounds']()['height'],this['plChartModel']['formatPl']['bind'](this['plChartModel']),![],()=>'regular',()=>0x0,undefined),_0x4f8fd2=new PlZeroLineDrawer(this['config'],_0x99fa1f,this['canvasModel'],_0x4060be);_0x4ef0d6['addDrawer'](_0x4f8fd2,'PL_ZERO_LINE');const _0x27e95b=new GridComponent(this['canvasModel'],_0x99fa1f,this['config'],this['config']['components']['yAxis'],'GRID',_0x4ef0d6,()=>this['canvasBoundsContainer']['getBounds'](CanvasElement['ALL_PANES']),()=>this['canvasBoundsContainer']['getBounds'](CanvasElement['PANE_UUID'](CHART_UUID)),()=>_0x5b1055['labels'],()=>_0x27bb7e['generateNumericLabels'](),()=>0x1);this['components']['push'](_0x27e95b);const _0x13011e=new CrossEventProducerComponent(this['canvasInputListener'],_0x4060be);this['components']['push'](_0x13011e);const _0x3c41cf=new PLHoverProducer(_0x24152b,_0x99fa1f);this['components']['push'](_0x3c41cf);const _0x20ded0=new PLCurrentPriceDotComponent(_0x99fa1f);this['components']['push'](_0x20ded0);const _0x236e54=new PLCurrentPriceDotDrawer(this['config'],_0x20ded0,_0x4060be,this['canvasModel']);_0x4ef0d6['addDrawer'](_0x236e54,'currentPriceDot');const _0x36127e=new PLCurrentPriceDotLabelDrawer(this['config'],_0x20ded0,_0x4060be,this['canvasModel']);_0x4ef0d6['addDrawer'](_0x36127e,'currentPriceDotLabelDrawer'),this['components']['forEach'](_0x41d166=>_0x41d166['activate']()),_0x24152b['on'](EVENT_RESIZED,()=>{_0x24152b['fire'](EVENT_DRAW);}),_0x4ef0d6['reorderDrawers'](this['config']['drawingOrder']);}['setModel'](_0x101f81){this['plChartModel']['updateModel'](_0x101f81);}['setXRange'](_0x3afbed,_0x465e48){this['plChartModel']['setXRange'](_0x3afbed,_0x465e48);}['getXRange'](){const _0x43c187={};return _0x43c187['start']=this['plChartModel']['start'],_0x43c187['end']=this['plChartModel']['end'],_0x43c187;}['addScaleChangeListener'](_0x1238b0){const _0x53ed7c=this['plChartModel']['scaleChanged']['subscribe'](_0x2e69de=>_0x1238b0(_0x2e69de));return()=>_0x53ed7c['unsubscribe']();}['createCanvasModel'](){const _0x51628a=document['createElement']('canvas');return _0x51628a['style']['position']='absolute',this['elements']['canvasArea']['appendChild'](_0x51628a),new CanvasModel(this['bus'],_0x51628a,this['drawingManager'],this['canvasModels']);}['clearChart'](){}['updateConfig'](_0x67a1f9){const _0x252f80=this['getFullConfig'](_0x67a1f9);rewrite(this['config'],_0x252f80);}['getFullConfig'](_0x244823){const _0x2ff98a=Chart['mergeConfig'](_0x244823,globalConfig);return merge(_0x244823,DEFAULT_PL_CHART_CONFIG,DEFAULT_MERGE_OPTIONS),_0x2ff98a;}}export function createPlChartLayoutTemplate(){const _0x1ba269=document['createElement']('template');return _0x1ba269['innerHTML']=_0x219954,_0x1ba269;}