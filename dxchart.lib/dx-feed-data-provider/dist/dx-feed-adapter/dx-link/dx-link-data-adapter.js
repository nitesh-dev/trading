/** Copyright Â©2024 Devexperts LLC.
All rights reserved. Any unauthorized use will constitute an infringement of copyright.
In case of any questions regarding types of use, please contact legal@devexperts.com.
This notice must remain intact.
**/
import{__awaiter}from'tslib';import{DXLinkWebSocket}from'@dxfeed/dxlink-websocket-client';import{createDxFeedCandlesAdapter}from'./dx-feed-candles-adapter';import{createDxFeedQuotesAdapter}from'./dx-feed-quotes-adapter';import{createDxFeedSummaryAdapter}from'./dx-feed-summary-adapter';import{createDxFeedTradeETHAdapter}from'./dx-feed-trade-eth-adapter';export const createDxLinkAdapter=(a={'endpointUrl':'wss://demo.dxfeed.com/dxlink-ws'})=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const b=yield DXLinkWebSocket['newClient']({'url':a['endpointUrl']});a['authToken']&&(yield b['auth'](a['authToken']));const c=yield b['openFeedChannel']('AUTO');c['setup']({'acceptAggregationPeriod':0xa,'acceptDataFormat':'COMPACT','acceptEventFields':{'Quote':['eventSymbol','askPrice','bidPrice'],'Candle':['eventSymbol','eventFlags','time','open','close','high','low','volume','impVolatility','vwap'],'Summary':['eventSymbol','prevDayClosePrice'],'TradeETH':['eventSymbol','price']}});const d=createDxFeedCandlesAdapter(c),e=createDxFeedQuotesAdapter(c),f=createDxFeedSummaryAdapter(c),g=createDxFeedTradeETHAdapter(c);return Object['assign'](Object['assign'](Object['assign'](Object['assign'](Object['assign']({},d),e),f),g),{'unsubscribeAll':()=>[d,e,f,g]['forEach'](h=>h['unsubscribeAllInternal']())});});